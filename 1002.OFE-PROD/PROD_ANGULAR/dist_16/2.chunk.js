webpackJsonp([2],{"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/detalleDetalleNotaCredito.ts":function(t,o,e){"use strict";e.d(o,"a",function(){return r});var r=function(){function t(){this.idTipoIgv="",this.codigoTipoIgv="",this.descripcionTipoIgv="",this.idTipoIsc="",this.codigoTipoIsc="",this.descripcionTipoIsc="",this.idTipoPrecio="",this.codigoTipoPrecio="",this.descripcionTipoPrecio="",this.idProducto="",this.numeroItem="0.00",this.precioUnitarioVenta="0.00",this.unidadMedida="",this.subtotalVenta="0.00",this.subtotalIgv="0.00",this.subtotalIsc="0.00",this.descuento="0.00"}return t.prototype.copiar=function(){var o=new t;return o.idTipoIgv=this.idTipoIgv,o.codigoTipoIgv=this.codigoTipoIgv,o.descripcionTipoIgv=this.descripcionTipoIgv,o.idTipoIsc=this.idTipoIsc,o.codigoTipoIsc=this.codigoTipoIsc,o.descripcionTipoIsc=this.descripcionTipoIsc,o.idTipoPrecio=this.idTipoPrecio,o.codigoTipoPrecio=this.codigoTipoPrecio,o.descripcionTipoPrecio=this.descripcionTipoPrecio,o.idProducto=this.idProducto,o.numeroItem=this.numeroItem,o.precioUnitarioVenta=this.precioUnitarioVenta,o.unidadMedida=this.unidadMedida,o.subtotalVenta=this.subtotalVenta,o.subtotalIgv=this.subtotalIgv,o.subtotalIsc=this.subtotalIsc,o.descuento=this.descuento,o},t.prototype.copiarDetalle=function(t){this.idTipoIgv=t.idTipoIgv,this.codigoTipoIgv=t.codigoTipoIgv,this.descripcionTipoIgv=t.descripcionTipoIgv,this.idTipoIsc=t.idTipoIsc,this.codigoTipoIsc=t.codigoTipoIsc,this.descripcionTipoIsc=t.descripcionTipoIsc,this.idTipoPrecio=t.idTipoPrecio,this.codigoTipoPrecio=t.codigoTipoPrecio,this.descripcionTipoPrecio=t.descripcionTipoPrecio,this.idProducto=t.idProducto,this.numeroItem=t.numeroItem,this.precioUnitarioVenta=t.precioUnitarioVenta,this.unidadMedida=t.unidadMedida,this.subtotalVenta=t.subtotalVenta,this.subtotalIgv=t.subtotalIgv,this.subtotalIsc=t.subtotalIsc,this.descuento=t.descuento},t}()},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/detalleNotaCredito.ts":function(t,o,e){"use strict";var r=e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/detalleDetalleNotaCredito.ts");e.d(o,"a",function(){return a});var a=function(){function t(){this.descripcionItem="",this.idRegistroUnidad="",this.idTablaUnidad="",this.codigoUnidadMedida="",this.posicion="",this.codigoItem="",this.precioUnitario="0.00",this.precioTotal="0.00",this.cantidad="0.00",this.montoImpuesto="0.00",this.cambioDetalle=!1,this.detalle=new r.a}return t.prototype.copiar=function(){var o=new t;return o.descripcionItem=this.descripcionItem,o.idRegistroUnidad=this.idRegistroUnidad,o.idTablaUnidad=this.idTablaUnidad,o.codigoUnidadMedida=this.codigoUnidadMedida,o.posicion=this.posicion,o.codigoItem=this.codigoItem,o.precioUnitario=this.precioUnitario,o.precioTotal=this.precioTotal,o.cantidad=this.cantidad,o.montoImpuesto=this.montoImpuesto,o.cambioDetalle=this.cambioDetalle,o.detalle=this.detalle.copiar(),o},t.prototype.copiarDetalle=function(t){this.descripcionItem=t.descripcionItem,this.idRegistroUnidad=t.idRegistroUnidad,this.idTablaUnidad=t.idTablaUnidad,this.codigoUnidadMedida=t.codigoUnidadMedida,this.posicion=t.posicion,this.codigoItem=t.codigoItem,this.precioUnitario=t.precioUnitario,this.precioTotal=t.precioTotal,this.cantidad=t.cantidad,this.montoImpuesto=t.montoImpuesto,this.cambioDetalle=t.cambioDetalle,this.detalle.copiarDetalle(t.detalle)},t}()},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/documentoConceptoNotaCredito.ts":function(t,o,e){"use strict";var r=e("./src/app/facturacion-electronica/general/models/comprobantes/documentoConceptoGeneral.ts");e.d(o,"a",function(){return i});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])};return function(o,e){function r(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),i=function(t){function o(){var o=t.call(this)||this;return o.idConcepto="",o.codigoConcepto="",o.descripcionConcepto="",o.importe="0.00",o}return a(o,t),o}(r.a)},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/documentoParametroNotaCredito.ts":function(t,o,e){"use strict";var r=e("./src/app/facturacion-electronica/general/models/comprobantes/documentoParametroGeneral.ts");e.d(o,"a",function(){return i});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])};return function(o,e){function r(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),i=function(t){function o(){var o=t.call(this)||this;return o.idParametro="",o.descripcionParametro="",o.json="",o}return a(o,t),o}(r.a)},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/documentoReferenciaNotaCredito.ts":function(t,o,e){"use strict";var r=e("./src/app/facturacion-electronica/general/models/comprobantes/documentoReferenciaGeneral.ts");e.d(o,"a",function(){return i});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])};return function(o,e){function r(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),i=function(t){function o(){var o=t.call(this)||this;return o.idDocumentoDestino="",o.tipoDocumentoOrigen="",o.tipoDocumentoDestino="",o.serieDocumentoDestino="",o.correlativoDocumentoDestino="",o.fechaEmisionDestino=0,o.totalImporteDestino="0.00",o.totalImporteAuxiliarDestino="0.00",o.totalPorcentajeAuxiliarDestino="0.00",o.tipoDocumentoOrigenDescripcion="",o.tipoDocumentoDestinoDescripcion="",o.monedaDestino="",o.totalMonedaDestino="0.00",o.auxiliar1="",o.auxiliar2="",o}return a(o,t),o}(r.a)},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/entidadNotaCredito.ts":function(t,o,e){"use strict";var r=e("./src/app/facturacion-electronica/general/models/organizacion/entidadGeneral.ts");e.d(o,"a",function(){return i});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])};return function(o,e){function r(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),i=function(t){function o(){var o=t.call(this)||this;return o.idTipoEntidad="",o.descripcionTipoEntidad="",o.idEntidad="",o.tipoDocumento="",o.documento="",o.denominacion="",o.nombreComercial="",o.direccionFiscal="",o.ubigeo="",o.correo="",o.notifica="",o}return a(o,t),o}(r.a)},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/jsonDocumentoParametroNotaCredito.ts":function(t,o,e){"use strict";e.d(o,"a",function(){return r});var r=function(){function t(){this.tipo=0,this.valor="",this.auxiliarEntero=0,this.auxiliarCaracter="",this.auxiliarFecha="",this.auxiliarImporte=0}return t}()},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/notaCredito.ts":function(t,o,e){"use strict";e.d(o,"a",function(){return r});var r=function(){function t(){this.numeroComprobante="",this.rucProveedor="",this.rucComprador="",this.idTablaTipoComprobante="",this.idRegistroTipoComprobante="",this.idTipoComprobante="",this.razonSocialProveedor="",this.razonSocialComprador="",this.moneda="",this.fechaEmision=0,this.observacionComprobante="",this.tipoComprobante="",this.montoPagado="",this.igv="",this.isc="",this.otrosTributos="",this.descuento="",this.importeReferencial="",this.subtotalComprobante="",this.totalComprobante="",this.tipoItem="",this.idTablaMoneda="",this.idRegistroMoneda="",this.usuarioCreacion="",this.usuarioModificacion="",this.idSerie="",this.motivoComprobante="",this.detalleEbiz=new Array,this.documentoEntidad=new Array,this.documentoConcepto=new Array,this.documentoParametro=new Array,this.documentoReferencia=new Array}return t}()},"./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.css":function(t,o,e){o=t.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),o.push([t.i,".navbar.navbar-info{margin:0 15px 15px}",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.html":function(t,o){t.exports='<div class="card">\r\n  <div class="card-header card-header-text" data-background-color="blue">\r\n    <h4 class="card-title">{{titulo | translate}}</h4>\r\n  </div>\r\n  <div class="card-content">\r\n    <form [formGroup]="notaDeCreditoFormGroup" (ngSubmit)="vistaPrevia()" autocomplete="off">\r\n      <div class="row">\r\n        <div class="col-md-3">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'tipoComprobante\' | translate}}<span class="star">*</span></label>\r\n            <select id="cmbTipoComprobante"\r\n                    name="cmbTipoComprobante"\r\n                    formControlName="cmbTipoComprobante"\r\n                    class="form-control"\r\n                    (change)="cambioTipoComprobante()">\r\n              <option *ngFor="let tipoComprobante of tiposDeComprobantes | async" [value]="tipoComprobante.codigo">\r\n                {{tipoComprobante.descripcionLarga | translate}}\r\n              </option>\r\n            </select>\r\n            <div class="row" *ngIf="!notaDeCreditoFormGroup.get(\'cmbTipoComprobante\').valid && notaDeCreditoFormGroup.get(\'cmbTipoComprobante\').touched">\r\n              <div class="col-md-12">\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'cmbTipoComprobante\').hasError(\'required\')"\r\n                    class="text-danger">{{\'campoRequerido\' | translate}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-3">\r\n          <div class="form-group label-floating">\r\n            <label id="lblCodigo" class="control-label">{{\'numeroComprobanteDescripcionLarga\' | translate}}<span class="star">*</span></label>\r\n            <input  ng2-auto-complete\r\n                    type="text"\r\n                    id="txtNumeroComprobante"\r\n                    formControlName="txtNumeroComprobante"\r\n                    [source]="listarProductosDeAutcompletado.bind(this)"\r\n                    [list-formatter]="formatoDeListaAutocompletado"\r\n                    [value-formatter] = "formatoDeValorAutocompletado"\r\n                    [no-match-found-text] = "\'noSeEncontraronResultados\' | translate"\r\n\r\n                    open-on-focus = true\r\n                    close-on-focus = true\r\n                    auto-select-first-item = false\r\n                    min-chars = 1\r\n                    [loading-text] = "\'cargando\' | translate"\r\n\r\n                    (valueChanged)="cambioLaSeleccionDelComprobante($event)"\r\n                    (change)="cambioLaBusquedaDeAutocompleteDeComprobante()"\r\n                    mayusculaDirectiva\r\n                    class="form-control">\r\n            <div class="row" *ngIf="!notaDeCreditoFormGroup.get(\'txtNumeroComprobante\').valid && notaDeCreditoFormGroup.get(\'txtNumeroComprobante\').touched">\r\n              <div class="col-md-12">\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'txtNumeroComprobante\').hasError(\'required\')"\r\n                      class="text-danger">{{\'campoRequerido\' | translate}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-3">\r\n          <div class="form-group">\r\n            <button id="btnVisualizar" type="button" class="btn btn-xs btn-default"\r\n                    (click)="visualizarComprobanteReferencia()"\r\n                    [disabled]="!(escogioUnComprobante | async)">\r\n              <span class="btn-label ">\r\n                  <i class="material-icons">visibility</i>\r\n              </span>\r\n              {{\'verComprobante\' | translate}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-3">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'serie\' | translate}}<span class="star">*</span></label>\r\n            <select id="cmbSerie"\r\n                    name="cmbSerie"\r\n                    formControlName="cmbSerie"\r\n                    class="form-control">\r\n              <option [value]="-1" disabled>{{\'seleccionaUnaSerie\' | translate}}</option>\r\n              <option *ngFor="let serie of series | async" [value]="serie.idSerie">\r\n                {{serie.serie}}\r\n              </option>\r\n            </select>\r\n            <div class="row" *ngIf="!notaDeCreditoFormGroup.get(\'cmbSerie\').valid && notaDeCreditoFormGroup.get(\'cmbSerie\').touched">\r\n              <div class="col-md-12">\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'cmbSerie\').hasError(\'required\')"\r\n                      class="text-danger">{{\'campoRequerido\' | translate}}\r\n                </span>\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'cmbSerie\').hasError(\'seleccionaUnaSerie\')"\r\n                      class="text-danger">{{\'seleccionaUnaSerie\' | translate}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row">\r\n        <div class="col-md-3">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'tipoNotaCredito\' | translate}}<span class="star">*</span></label>\r\n            <select id="cmbTipoNotaCredito"\r\n                    name="cmbTipoNotaCredito"\r\n                    formControlName="cmbTipoNotaCredito"\r\n                    class="form-control"\r\n                    (change)="cambioTipoNotaCredito()">\r\n              <option disabled [value]="-1">{{\'seleccionaUnTipoDeNotaDeCredito\' | translate}}</option>\r\n              <option *ngFor="let tipoDeNotaDeCredito of tiposDeNotasDeCreditos | async" [value]="tipoDeNotaDeCredito.codigo_dominio">\r\n                {{tipoDeNotaDeCredito.descripcion_dominio | translate}}\r\n              </option>\r\n            </select>\r\n            <div class="row" *ngIf="!notaDeCreditoFormGroup.get(\'cmbTipoNotaCredito\').valid && notaDeCreditoFormGroup.get(\'cmbTipoNotaCredito\').touched">\r\n              <div class="col-md-12">\r\n                  <span *ngIf="notaDeCreditoFormGroup.get(\'cmbTipoNotaCredito\').hasError(\'required\')"\r\n                        class="text-danger">{{\'campoRequerido\' | translate}}\r\n                  </span>\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'cmbTipoNotaCredito\').hasError(\'seleccionaUnTipoDeNotaDeCredito\')"\r\n                      class="text-danger">{{\'seleccionaUnTipoDeNotaDeCredito\' | translate}}\r\n                  </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-3">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'documento\' | translate}}</label>\r\n            <input type="text" class="form-control"\r\n                   id="txtDocumento"\r\n                   formControlName="txtDocumento">\r\n          </div>\r\n        </div>\r\n        <div class="col-md-6">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'razonSocial\' | translate}}</label>\r\n            <input type="text" class="form-control"\r\n                   id="txtRazonSocial"\r\n                   formControlName="txtRazonSocial">\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-12">\r\n          <div class="form-group label-floating">\r\n            <label id="lblMotivo" class="control-label">{{\'motivoNotaDeCredito\' | translate}}<span class="star">*</span></label>\r\n            <textarea class="form-control" type="text" formControlName="txtMotivoNotaCredito" rows="3"></textarea>\r\n            <div class="row" *ngIf="!notaDeCreditoFormGroup.get(\'txtMotivoNotaCredito\').valid && notaDeCreditoFormGroup.get(\'txtMotivoNotaCredito\').touched">\r\n              <div class="col-md-12">\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'txtMotivoNotaCredito\').hasError(\'maxlength\')"\r\n                      class="text-danger">{{\'maximoCaracteres\' | translate: {digito: 250} }}\r\n                </span>\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'txtMotivoNotaCredito\').hasError(\'required\')"\r\n                      class="text-danger">{{\'campoRequerido\' | translate}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <ng-container [ngSwitch]="habilitarPorTipoDeNotaDeCredito">\r\n        <ng-container *ngSwitchCase="TiposVistasNotaCredito.NORMAL">\r\n          <app-tipo-nota-credito-normal\r\n            #tipoVistaNormalNotaCredito\r\n            [padreFormGroup] = "notaDeCreditoFormGroup"\r\n            [nombreControl] = "controlNameVistaNormal"\r\n          >\r\n          </app-tipo-nota-credito-normal>\r\n        </ng-container>\r\n        <ng-container *ngSwitchCase="TiposVistasNotaCredito.TABLA">\r\n          <div class="card">\r\n            <div class="card-header card-header-icon" data-background-color="blue">\r\n              <i class="material-icons">list</i>\r\n            </div>\r\n            <div class="row"><h3>{{\'listaItems\' | translate}}</h3></div>\r\n            <div class="row"><p>&nbsp;</p></div>\r\n            <nav class="navbar navbar-info" role="navigation"></nav>\r\n            <div class="card-content">\r\n              <app-tipo-nota-credito-datatable\r\n                #tipoVistaTablaNotaCredito\r\n                (estaValidadoNotaCreditoDataTable)="estaValidadoNotaCreditoDataTable($event)"\r\n                (seInicio)="seInicioDataTable($event)"\r\n              >\r\n              </app-tipo-nota-credito-datatable>\r\n            </div>\r\n          </div>\r\n        </ng-container>\r\n      </ng-container>\r\n\r\n      <div class="row">\r\n        <div class="col-md-12">\r\n          <div class="label-floating">\r\n            <label class="control-label">{{\'observaciones\' | translate}}</label>\r\n            <textarea id="txtObservacion" name="txtObservacion" formControlName="txtObservacionesNotaCredito" class="form-control" rows="3"></textarea>\r\n            <div class="row" *ngIf="!notaDeCreditoFormGroup.get(\'txtObservacionesNotaCredito\').valid && notaDeCreditoFormGroup.get(\'txtObservacionesNotaCredito\').touched">\r\n              <div class="col-md-12">\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'txtObservacionesNotaCredito\').hasError(\'maxlength\')"\r\n                      class="text-danger">{{\'maximoCaracteres\' | translate: {digito: 250} }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row pull-right">\r\n        <button id="btnVistaPrevia" type="submit" class="btn btn-default"\r\n                [disabled]="!(notaDeCreditoFormGroup.valid && esValidadoDataTableNotaCredito)">\r\n          {{\'vistaPrevia\' | translate}}\r\n        </button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</div>\r\n'},"./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/@angular/forms/@angular/forms.es5.js"),i=e("./node_modules/rxjs/Observable.js"),n=(e.n(i),e("./src/app/facturacion-electronica/general/services/comprobantes/comprobantes.service.ts")),s=e("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),c=e("./src/app/facturacion-electronica/general/models/documento/tablaMaestra.ts"),l=e("./node_modules/rxjs/BehaviorSubject.js"),d=(e.n(l),e("./src/app/facturacion-electronica/general/utils/tipos.service.ts")),p=e("./src/app/facturacion-electronica/general/services/configuracionDocumento/parametros.service.ts"),u=e("./src/app/facturacion-electronica/general/services/archivos/archivo.service.ts"),m=e("./src/app/facturacion-electronica/comprobantes/nota-credito/utils/TiposVistaNotaCredito.ts"),v=e("./node_modules/@angular/router/@angular/router.es5.js"),b=e("./src/app/facturacion-electronica/general/services/configuracionDocumento/series.service.ts"),h=e("./src/app/facturacion-electronica/general/utils/estilos.services.ts"),f=e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/notaCredito.ts"),C=e("./src/app/facturacion-electronica/general/services/documento/conceptoDocumento.service.ts"),g=e("./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts"),I=e("./src/app/facturacion-electronica/general/services/utils/validadorPersonalizado.ts");e.d(o,"a",function(){return _});var D=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},x=this&&this.__metadata||function(t,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)},_=function(){function t(t,o,e,r,a,i,n,s,c,l,d){this._comprobantesService=t,this._tablaMaestraService=o,this._tiposService=e,this._parametrosServicie=r,this._archivoService=a,this._seriesService=i,this.router=n,this.route=s,this._estilosService=c,this._conceptoDocumentoService=l,this._notaCreditoService=d,this.titulo="notaCredito",this.TiposVistasNotaCredito=m.a,this.tiposVistasDeNotaCredito=m.a}return t.prototype.ngOnInit=function(){this._notaCreditoService.pasoAVistaPrevia.next(!1),this.inicializarVariables(),this.cargarSeries(),this.iniciarNotaDeCreditoFormGroup(),this.cargarTiposDeComprobantes(),this.cargarDatosNotaCreditoPersistencia()},t.prototype.ngOnDestroy=function(){},t.prototype.inicializarVariables=function(){this.escogioUnComprobante=new l.BehaviorSubject(!1),this.habilitarPorTipoDeNotaDeCredito=-1,this.esValidadoDataTableNotaCredito=!0,this.controlNameVistaNormal="vistaNormal",this.controlNameVistaDataTable="vistaDataTable",this.notaCredito=new f.a,this.todosTiposDeNotasDeCreditos=this._parametrosServicie.obtenerParametrosPorId(this._tiposService.PARAMETRO_TIPO_NOTA_CREDITO_ELECTRONICA),this.todosTipoConceptos=this._conceptoDocumentoService.obtenerTodosConceptosDocumentos();var t=[this._tiposService.CONCEPTO_OPERACION_GRAVADA_CODIGO,this._tiposService.CONCEPTO_OPERACION_INAFECTAS_CODIGO,this._tiposService.CONCEPTO_OPERACION_EXONERADO_CODIGO,this._tiposService.CONCEPTO_OPERACION_GRATUITA_CODIGO,this._tiposService.CONCEPTO_OPERACION_SUB_TOTAL_VENTA_CODIGO,this._tiposService.CONCEPTO_OPERACION_TOTAL_DESCUENTOS_CODIGO];this.tiposConceptos=this._conceptoDocumentoService.obtenerPorCodigos(this.todosTipoConceptos,t),this.todosTiposMonedas=this._tablaMaestraService.obtenerPorIdTabla(c.c),this.todosTiposUnidades=this._tablaMaestraService.obtenerPorIdTabla(c.d)},t.prototype.cargarSeries=function(){this.todasSeries=this._seriesService.filtroSeries(localStorage.getItem("id_entidad"),this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO,this._tiposService.TIPO_SERIE_ONLINE.toString())},t.prototype.filtrarSeries=function(t){var o=this;void 0===t&&(t=!1);var e=this.notaDeCreditoFormGroup.controls.cmbTipoComprobante.value;this.notaDeCreditoFormGroup.controls.cmbSerie.reset("-1"),this.notaDeCreditoFormGroup.controls.cmbSerie.enable(),this.notaDeCreditoFormGroup.controls.cmbSerie.markAsTouched(),this._estilosService.eliminarEstiloInput("cmbSerie","is-empty"),this.series=this._seriesService.filtrarSeriesPorIdTipoComprobante(this.todasSeries,e),t&&this.series.subscribe(function(t){if(t.length>0){var e=t.find(function(t){return t.serie===o.notaCredito.numeroComprobante});o.notaDeCreditoFormGroup.controls.cmbSerie.setValue(e.idSerie)}})},t.prototype.cargarDatosNotaCreditoPersistencia=function(){this._notaCreditoService.estaUsandoPersistencia.value&&(this.notaCredito=this._notaCreditoService.notaCredito.value,this.cargarCabecera(),this.cargarDocumentoReferencia(),this.cargarDocumentoParametro(),this._notaCreditoService.eliminarNotaCreditoPersistencia())},t.prototype.cargarDocumentoReferencia=function(){void 0!==this.notaCredito.documentoReferencia[0]&&(this.notaDeCreditoFormGroup.controls.cmbTipoComprobante.setValue(this.notaCredito.documentoReferencia[0].tipoDocumentoDestino),this.filtrarSeries(!0),this.notaDeCreditoFormGroup.controls.txtNumeroComprobante.setValue(this.notaCredito.documentoReferencia[0].serieDocumentoDestino+"-"+this.notaCredito.documentoReferencia[0].correlativoDocumentoDestino),this.escogioUnComprobante.next(!0),this._estilosService.eliminarEstiloInputAutocomplete("txtNumeroComprobante","is-empty"),this._estilosService.eliminarEstiloInput("cmbTipoComprobante","is-empty"),this.notaDeCreditoFormGroup.controls.txtNumeroComprobante.enable())},t.prototype.cargarDocumentoParametro=function(){void 0!==this.notaCredito.documentoParametro[0]&&this.cargarTiposDeNotasDeCredito(!0)},t.prototype.cargarCabecera=function(){this.notaDeCreditoFormGroup.controls.txtMotivoNotaCredito.setValue(this.notaCredito.motivoComprobante),this.notaDeCreditoFormGroup.controls.txtObservacionesNotaCredito.setValue(this.notaCredito.observacionComprobante),this.notaDeCreditoFormGroup.controls.txtDocumento.setValue(this.notaCredito.rucComprador),this.notaDeCreditoFormGroup.controls.txtRazonSocial.setValue(this.notaCredito.razonSocialComprador),this._estilosService.eliminarEstiloInput("txtMotivoNotaCredito","is-empty"),this._estilosService.eliminarEstiloInput("txtObservacionesNotaCredito","is-empty"),this._estilosService.eliminarEstiloInput("txtDocumento","is-empty"),this._estilosService.eliminarEstiloInput("txtRazonSocial","is-empty")},t.prototype.cargarTiposDeNotasDeCredito=function(t){var o=this;void 0===t&&(t=!1);var e=[];switch(this.notaDeCreditoFormGroup.get("cmbTipoComprobante").value){case this._tiposService.TIPO_DOCUMENTO_FACTURA:e=[this._tiposService.TIPO_NOTA_CREDITO_ANULACION_DE_OPERACION,this._tiposService.TIPO_NOTA_CREDITO_ANULACION_POR_ERROR_RUC,this._tiposService.TIPO_NOTA_CREDITO_CORRECCION_DE_LA_DESCRIPCION,this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_GLOBAL,this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_POR_ITEM,this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_TOTAL,this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_POR_ITEM,this._tiposService.TIPO_NOTA_CREDITO_BONIFICACION,this._tiposService.TIPO_NOTA_CREDITO_DISMINUCION_EN_EL_VALOR];break;case this._tiposService.TIPO_DOCUMENTO_BOLETA:e=[this._tiposService.TIPO_NOTA_CREDITO_ANULACION_DE_OPERACION,this._tiposService.TIPO_NOTA_CREDITO_ANULACION_POR_ERROR_RUC,this._tiposService.TIPO_NOTA_CREDITO_CORRECCION_DE_LA_DESCRIPCION,this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_TOTAL,this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_POR_ITEM,this._tiposService.TIPO_NOTA_CREDITO_DISMINUCION_EN_EL_VALOR]}this.notaDeCreditoFormGroup.controls.cmbTipoNotaCredito.reset("-1"),this._estilosService.eliminarEstiloInput("cmbTipoNotaCredito","is-empty"),this.escogioUnComprobante.subscribe(function(r){if(r){if(o.tiposDeNotasDeCreditos=o._parametrosServicie.obtenerPorCodigoDeTipoDeComprobante(o.todosTiposDeNotasDeCreditos,e),o.notaDeCreditoFormGroup.controls.cmbTipoNotaCredito.enable(),o.notaDeCreditoFormGroup.controls.cmbTipoNotaCredito.markAsTouched(),t&&void 0!==o.notaCredito.documentoParametro[0]){var a=JSON.parse(o.notaCredito.documentoParametro[0].json);o.tiposDeNotasDeCreditos.subscribe(function(t){t.length>0&&(o.notaDeCreditoFormGroup.controls.cmbTipoNotaCredito.setValue(a.auxiliarCaracter),o.cambioTipoNotaCredito())})}}else o.notaDeCreditoFormGroup.get("cmbTipoNotaCredito").disable()})},t.prototype.cargarTiposDeComprobantes=function(){this.todosTiposComprobantes=this._tablaMaestraService.obtenerPorIdTabla(c.a);var t=[this._tiposService.TIPO_DOCUMENTO_FACTURA,this._tiposService.TIPO_DOCUMENTO_BOLETA];this.tiposDeComprobantes=this._tablaMaestraService.obtenerPorCodigoDeTablaMaestra(this.todosTiposComprobantes,t)},t.prototype.iniciarNotaDeCreditoFormGroup=function(){this.notaDeCreditoFormGroup=new a.FormGroup({cmbSerie:new a.FormControl({value:"",disabled:!0},[a.Validators.required,I.a.validarSelectForm("seleccionaUnaSerie")]),cmbTipoComprobante:new a.FormControl("",[a.Validators.required]),txtNumeroComprobante:new a.FormControl({value:"",disabled:!0},[a.Validators.required]),cmbTipoNotaCredito:new a.FormControl({value:"",disabled:!0},[a.Validators.required,I.a.validarSelectForm("seleccionaUnTipoDeNotaDeCredito")]),txtMotivoNotaCredito:new a.FormControl("",[a.Validators.required,a.Validators.maxLength(250)]),txtObservacionesNotaCredito:new a.FormControl("",[a.Validators.maxLength(250)]),txtDocumento:new a.FormControl({value:"",disabled:!0},[a.Validators.required]),txtRazonSocial:new a.FormControl({value:"",disabled:!0},[a.Validators.required])})},t.prototype.formatoDeListaAutocompletado=function(t){return t.vcSerie+"-"+t.vcCorrelativo},t.prototype.formatoDeValorAutocompletado=function(t){return t.vcSerie+"-"+t.vcCorrelativo},t.prototype.cambioLaSeleccionDelComprobante=function(t){void 0!==t&&(this.escogioUnComprobante.next(!0),this._notaCreditoService.buscarComprobanteReferencia(t.inIdcomprobantepago,this.todosTiposUnidades),this.notaDeCreditoFormGroup.get("txtDocumento").setValue(t.entidadcompradora.vcDocumento),this.notaDeCreditoFormGroup.get("txtRazonSocial").setValue(t.entidadcompradora.vcDenominacion),this._estilosService.eliminarEstiloInput("txtDocumento","is-empty"),this._estilosService.eliminarEstiloInput("txtRazonSocial","is-empty"))},t.prototype.visualizarComprobanteReferencia=function(){this._archivoService.retornarArchivoRetencionPercepcionbase(this.notaDeCreditoFormGroup.get("txtNumeroComprobante").value.inIdcomprobantepago).subscribe(function(t){if(t){var o='<embed width=100% height=100% type="application/pdf" src="data:application/pdf;base64,'+t+'"> </embed>';window.open("","PDF","dependent = yes, locationbar = no, menubar = yes, resizable, screenX = 50, screenY = 50, width = 800, height = 800").document.write(o)}})},t.prototype.cambioLaBusquedaDeAutocompleteDeComprobante=function(){"object"==typeof this.notaDeCreditoFormGroup.get("txtNumeroComprobante").value?this.escogioUnComprobante.next(!0):(this.limpiar(),this.escogioUnComprobante.next(!1),this._notaCreditoService.comprobanteReferencia.next(null))},t.prototype.limpiar=function(){this.notaDeCreditoFormGroup.get("txtDocumento").reset(),this.notaDeCreditoFormGroup.get("txtRazonSocial").reset(),this._estilosService.agregarEstiloInput("txtDocumento","is-empty"),this._estilosService.agregarEstiloInput("txtRazonSocial","is-empty"),this.notaCredito=new f.a},t.prototype.cambioTipoNotaCredito=function(){var t=this.notaDeCreditoFormGroup.get("cmbTipoNotaCredito").value;switch(this._notaCreditoService.ponerTipoNotaCredito(t),t){case this._tiposService.TIPO_NOTA_CREDITO_ANULACION_DE_OPERACION:this.cargarAnulacionOperacion();break;case this._tiposService.TIPO_NOTA_CREDITO_ANULACION_POR_ERROR_RUC:this.cargarErrorRuc();break;case this._tiposService.TIPO_NOTA_CREDITO_CORRECCION_DE_LA_DESCRIPCION:this.cargarCoreccionDescripcion();break;case this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_GLOBAL:this.cargarDescuentoGlobal();break;case this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_POR_ITEM:this.cargarDescuentoItem();break;case this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_TOTAL:this.cargarDevolucionTotal();break;case this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_POR_ITEM:this.cargarDevolucionItem();break;case this._tiposService.TIPO_NOTA_CREDITO_BONIFICACION:this.cargarBonificacion();break;case this._tiposService.TIPO_NOTA_CREDITO_DISMINUCION_EN_EL_VALOR:this.cargarDisminucionValor()}},t.prototype.cargarAnulacionOperacion=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.NORMAL},t.prototype.cargarErrorRuc=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.NORMAL},t.prototype.cargarCoreccionDescripcion=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.TABLA},t.prototype.cargarDescuentoGlobal=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.NORMAL},t.prototype.cargarDescuentoItem=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.TABLA},t.prototype.cargarDevolucionTotal=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.NORMAL},t.prototype.cargarDevolucionItem=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.TABLA},t.prototype.cargarBonificacion=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.TABLA},t.prototype.cargarDisminucionValor=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.TABLA},t.prototype.listarProductosDeAutcompletado=function(t){if(!t)return i.Observable.of([]);var o=this.notaDeCreditoFormGroup.get("cmbTipoComprobante").value;return null!=o?this._comprobantesService.buscarParaAutoComplete(o,t.toUpperCase()):void 0},t.prototype.cambioTipoComprobante=function(){this.notaDeCreditoFormGroup.get("txtDocumento").reset(),this.notaDeCreditoFormGroup.get("txtRazonSocial").reset(),this.notaDeCreditoFormGroup.get("txtNumeroComprobante").reset(),this._estilosService.agregarEstiloInput("txtDocumento","is-empty"),this._estilosService.agregarEstiloInput("txtRazonSocial","is-empty"),this._estilosService.agregarEstiloInputAutocomplete("txtNumeroComprobante","is-empty"),this.habilitarPorTipoDeNotaDeCredito=-1,this.escogioUnComprobante.next(!1),this.filtrarSeries(),this.cargarTiposDeNotasDeCredito(),this.notaDeCreditoFormGroup.get("txtNumeroComprobante").enable()},t.prototype.vistaPrevia=function(){this._notaCreditoService.notaCredito.value.motivoComprobante=this.notaDeCreditoFormGroup.controls.txtMotivoNotaCredito.value,this._notaCreditoService.notaCredito.value.observacionComprobante=this.notaDeCreditoFormGroup.controls.txtObservacionesNotaCredito.value,this._notaCreditoService.setDatosPersistencia(this.tiposConceptos,this.tiposDeNotasDeCreditos,this.notaDeCreditoFormGroup.controls.cmbTipoNotaCredito.value,this.series,this.notaDeCreditoFormGroup.controls.cmbSerie.value,this.notaDeCreditoFormGroup.controls.txtMotivoNotaCredito.value,this.notaDeCreditoFormGroup.controls.txtObservacionesNotaCredito.value),this._notaCreditoService.pasoAVistaPrevia.next(!0),this.router.navigate(["./vistaPrevia"],{relativeTo:this.route})},t.prototype.estaValidadoNotaCreditoDataTable=function(t){this.esValidadoDataTableNotaCredito=t},t.prototype.seInicioDataTable=function(t){t||(this.esValidadoDataTableNotaCredito=!0)},t}();_=D([e.i(r.Component)({selector:"app-nota-credito",template:e("./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.html"),styles:[e("./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.css")]}),x("design:paramtypes",["function"==typeof(T=void 0!==n.a&&n.a)&&T||Object,"function"==typeof(N=void 0!==s.a&&s.a)&&N||Object,"function"==typeof(O=void 0!==d.a&&d.a)&&O||Object,"function"==typeof(E=void 0!==p.a&&p.a)&&E||Object,"function"==typeof(y=void 0!==u.a&&u.a)&&y||Object,"function"==typeof(S=void 0!==b.a&&b.a)&&S||Object,"function"==typeof(F=void 0!==v.c&&v.c)&&F||Object,"function"==typeof(R=void 0!==v.b&&v.b)&&R||Object,"function"==typeof(P=void 0!==h.a&&h.a)&&P||Object,"function"==typeof(V=void 0!==C.a&&C.a)&&V||Object,"function"==typeof(G=void 0!==g.a&&g.a)&&G||Object])],_);var T,N,O,E,y,S,F,R,P,V,G},"./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.module.ts":function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/@angular/common/@angular/common.es5.js"),i=e("./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.routing.module.ts"),n=e("./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.ts"),s=e("./node_modules/@ngx-translate/core/index.js"),c=e("./node_modules/@angular/forms/@angular/forms.es5.js"),l=e("./node_modules/ng2-auto-complete/dist/index.js"),d=(e.n(l),e("./src/app/facturacion-electronica/general/services/comprobantes/comprobantes.service.ts")),p=e("./src/app/facturacion-electronica/general/services/servidores.ts"),u=e("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),m=e("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),v=e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.module.ts"),b=e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.module.ts"),h=e("./src/app/facturacion-electronica/general/services/configuracionDocumento/parametros.service.ts"),f=e("./src/app/facturacion-electronica/general/services/archivos/archivo.service.ts"),C=e("./src/app/facturacion-electronica/general/services/configuracionDocumento/series.service.ts"),g=e("./src/app/facturacion-electronica/general/services/utils/persistenciaDatos.service.ts"),I=e("./src/app/facturacion-electronica/general/utils/estilos.services.ts"),D=e("./src/app/facturacion-electronica/general/services/documento/conceptoDocumento.service.ts"),x=e("./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts"),_=e("./src/app/facturacion-electronica/comprobantes/nota-credito/vista-previa-nota-credito/vista-previa-nota-credito.module.ts"),T=e("./src/app/facturacion-electronica/general/directivas/directivas.module.ts");e.d(o,"NotaCreditoModule",function(){return O});var N=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},O=function(){function t(){}return t}();O=N([e.i(r.NgModule)({imports:[a.CommonModule,c.ReactiveFormsModule,i.a,s.a,l.Ng2AutoCompleteModule,v.a,b.a,_.a,T.a],declarations:[n.a],providers:[d.a,p.a,u.a,m.a,h.a,f.a,g.a,C.a,I.a,D.a,x.a]})],O)},"./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.routing.module.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/@angular/router/@angular/router.es5.js"),i=e("./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.ts"),n=e("./src/app/facturacion-electronica/general/emision-comprobante/emision-comprobante.component.ts"),s=e("./src/app/facturacion-electronica/comprobantes/nota-credito/vista-previa-nota-credito/vista-previa-nota-credito.component.ts");e.d(o,"a",function(){return d});var c=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},l=[{path:"",children:[{path:"",pathMatch:"full",redirectTo:"crear"},{path:"crear",component:i.a,data:{codigo:"07",mostrarCombo:!0}},{path:"crear/vistaPrevia",component:s.a,data:{codigo:"07",mostrarCombo:!1,titulo:"notaCredito"}},{path:"emision/:id",component:n.a,data:{codigo:"07",mostrarCombo:!0,titulo:"emisionNotaCredito"}}]}],d=function(){function t(){}return t}();d=c([e.i(r.NgModule)({imports:[a.a.forChild(l)],exports:[a.a]})],d)},"./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/rxjs/BehaviorSubject.js"),i=(e.n(a),e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/detalleNotaCredito.ts")),n=e("./src/app/facturacion-electronica/general/services/comprobantes/comprobantes.service.ts"),s=e("./node_modules/rxjs/Subscription.js"),c=(e.n(s),e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/detalleDetalleNotaCredito.ts")),l=e("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),d=e("./src/app/facturacion-electronica/general/services/utils/persistenciaDatos.service.ts"),p=e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/notaCredito.ts"),u=e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/jsonDocumentoParametroNotaCredito.ts"),m=e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/documentoParametroNotaCredito.ts"),v=e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/entidadNotaCredito.ts"),b=e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/documentoConceptoNotaCredito.ts"),h=e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/documentoReferenciaNotaCredito.ts"),f=e("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),C=e("./src/app/service/spinner.service.ts"),g=e("./src/app/facturacion-electronica/general/pipes/precio.pipe.ts");e.d(o,"a",function(){return x});var I=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},D=this&&this.__metadata||function(t,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)},x=function(){function t(t,o,e,r,i,n){this._comprobanteService=t,this._tablaMaestraService=o,this._notaCreditoPersistenciaService=e,this._tiposService=r,this._spinnerService=i,this._precioPipe=n,this.tipoNotaCredito=new a.BehaviorSubject(""),this.detalleModificadoLista=new a.BehaviorSubject([]),this.detalleOriginalLista=[],this.comprobanteReferencia=new a.BehaviorSubject(null),this.comprobanteReferenciaSubscription=new s.Subscription,this.notaCredito=new a.BehaviorSubject(new p.a),this.pasoAVistaPrevia=new a.BehaviorSubject(!1),this.estaUsandoPersistencia=new a.BehaviorSubject(!1),this._notaCreditoPersistenciaService.nombrePersistencia="notaCreditoPersistencia",this.padreFormGroup=new a.BehaviorSubject(null)}return t.prototype.ngOnDestroy=function(){this.comprobanteReferenciaSubscription.unsubscribe()},t.prototype.buscarComprobanteReferencia=function(t,o){var e=this;this._spinnerService.set(!0),this.comprobanteReferenciaSubscription=this._comprobanteService.buscarPorUuid(t).subscribe(function(t){null!==t&&(e.cargarDetalleDecomprobanteReferencia(t,o),e._spinnerService.set(!1),e.comprobanteReferencia.next(t))})},t.prototype.obtenerDetallePersistencia=function(){var t=this._notaCreditoPersistenciaService.obtener();return null!==t?t.detalleEbiz:null},t.prototype.obtenerNotaCreditoPersistencia=function(){var t=this._notaCreditoPersistenciaService.obtener();return null!==t?t:(this.estaUsandoPersistencia.next(!1),null)},t.prototype.eliminarNotaCreditoPersistencia=function(){this._notaCreditoPersistenciaService.eliminar()},t.prototype.cargarDetalleDecomprobanteReferencia=function(t,o){for(var e=[],r=[],a=this,n=0,s=t.detalle;n<s.length;n++){var l=s[n];!function(t){var n=new i.a;n.codigoItem=a._precioPipe.transform(t.vcCodigoProducto),n.cantidad=a._precioPipe.transform(t.deCantidaddespachada),n.codigoUnidadMedida=t.vcUnidadmedida,n.descripcionItem=t.vcDescripcionitem;var s=new c.a;s.idTipoIgv=t.inItipoAfectacionigv,s.codigoTipoIgv=t.inCodigoAfectacionigv,s.descripcionTipoIgv=t.vcDescAfectacionigv,s.idTipoIsc=t.inItipoCalculoisc,s.codigoTipoIsc=t.inCodigoCalculoisc,s.descripcionTipoIsc=t.vcDescCalculoisc,s.idTipoPrecio=t.inItipoPrecioventa,s.codigoTipoPrecio=t.inCodigoPrecioventa,s.descripcionTipoPrecio=t.vcDescPrecioventa,s.idProducto=t.inIproducto,s.numeroItem=a._precioPipe.transform(t.deCantidaddespachada),s.precioUnitarioVenta=a._precioPipe.transform(t.dePreciounitarioitem),s.subtotalIsc=a._precioPipe.transform(t.nuSubtotalIsc),s.subtotalVenta=a._precioPipe.transform(t.dePreciototalitem),s.subtotalIgv=a._precioPipe.transform(t.nuSubtotalIgv),s.unidadMedida=t.vcUnidadmedida,s.descuento=a._precioPipe.transform(t.nuDescuento.toString()),n.detalle=s,n.montoImpuesto=a._precioPipe.transform(t.deMontoimpuesto),n.posicion=a._precioPipe.transform(t.vcPosicion),n.precioTotal=a._precioPipe.transform(t.dePreciototalitem),n.precioUnitario=a._precioPipe.transform(t.dePreciounitarioitem),a._tablaMaestraService.obtenerPorAtributoDeTablaMaestra(o,[t.producto.chUniMedida],"iso").take(1).subscribe(function(t){1===t.length&&(n.idRegistroUnidad=t[0].codigo,n.idTablaUnidad=t[0].tabla.toString())}),e.push(n),r.push(n.copiar())}(l)}this.ponerDetalle(e),this.detalleOriginalLista=r},t.prototype.ponerTipoNotaCredito=function(t){this.tipoNotaCredito.next(t)},t.prototype.ponerDetalle=function(t){this.detalleModificadoLista.next(t)},t.prototype.obtenerDetalleOriginal=function(){return this.detalleOriginalLista},t.prototype.setDatosPersistencia=function(t,o,e,r,a,i,n){var s=this;this.notaCredito.next(new p.a),this.setEntidadPersistencia(),this.setDocumentoParametro(o,e),this.setDocumentoReferencia(),this.setCabeceraPersistencia(r,a,i,n),this.setDocumentoConcepto(t),this.pasoAVistaPrevia.subscribe(function(t){t&&(s._notaCreditoPersistenciaService.agregar(s.notaCredito.value),s.estaUsandoPersistencia.next(!0),s.pasoAVistaPrevia.next(!1))})},t.prototype.setEntidadPersistencia=function(){if(null!==this.comprobanteReferencia.value){var t=new v.a,o=new v.a;t.idTipoEntidad="1",t.descripcionTipoEntidad="Emisor",t.idEntidad=this.comprobanteReferencia.value.entidadproveedora.seIentidad,t.tipoDocumento=this.comprobanteReferencia.value.entidadproveedora.vcTipoDocumento,t.denominacion=this.comprobanteReferencia.value.entidadproveedora.vcDenominacion,t.direccionFiscal=this.comprobanteReferencia.value.entidadproveedora.vcDirFiscal,t.documento=this.comprobanteReferencia.value.entidadproveedora.vcDocumento,t.nombreComercial=this.comprobanteReferencia.value.entidadproveedora.vcNomComercia,t.notifica="N",t.ubigeo=this.comprobanteReferencia.value.entidadproveedora.vcUbigeo,t.correo=this.comprobanteReferencia.value.entidadproveedora.vcCorreo,o.idTipoEntidad="2",o.descripcionTipoEntidad="Receptor",o.idEntidad=this.comprobanteReferencia.value.entidadcompradora.seIentidad,o.tipoDocumento=this.comprobanteReferencia.value.entidadcompradora.vcTipoDocumento,o.denominacion=this.comprobanteReferencia.value.entidadcompradora.vcDenominacion,o.direccionFiscal=this.comprobanteReferencia.value.entidadcompradora.vcDirFiscal,o.documento=this.comprobanteReferencia.value.entidadcompradora.vcDocumento,o.nombreComercial=this.comprobanteReferencia.value.entidadcompradora.vcNomComercia,o.notifica="S",o.ubigeo=this.comprobanteReferencia.value.entidadcompradora.vcUbigeo,o.correo=this.comprobanteReferencia.value.entidadcompradora.vcCorreo,this.notaCredito.value.documentoEntidad.push(t),this.notaCredito.value.documentoEntidad.push(o)}},t.prototype.setDocumentoConcepto=function(t){var o=this,e=new b.a,r=new b.a,a=new b.a,i=new b.a,n=new b.a,s=new b.a;t.subscribe(function(t){for(var c=0,l=t;c<l.length;c++){var d=l[c];switch(d.codigo){case o._tiposService.CONCEPTO_OPERACION_GRAVADA_CODIGO:e.idConcepto=d.idConcepto,e.descripcionConcepto=d.descripcion,e.codigoConcepto=d.codigo;break;case o._tiposService.CONCEPTO_OPERACION_INAFECTAS_CODIGO:r.idConcepto=d.idConcepto,r.descripcionConcepto=d.descripcion,r.codigoConcepto=d.codigo;break;case o._tiposService.CONCEPTO_OPERACION_EXONERADO_CODIGO:a.idConcepto=d.idConcepto,a.descripcionConcepto=d.descripcion,a.codigoConcepto=d.codigo;break;case o._tiposService.CONCEPTO_OPERACION_GRATUITA_CODIGO:i.idConcepto=d.idConcepto,i.descripcionConcepto=d.descripcion,i.codigoConcepto=d.codigo;break;case o._tiposService.CONCEPTO_OPERACION_SUB_TOTAL_VENTA_CODIGO:n.idConcepto=d.idConcepto,n.descripcionConcepto=d.descripcion,n.codigoConcepto=d.codigo;break;case o._tiposService.CONCEPTO_OPERACION_TOTAL_DESCUENTOS_CODIGO:s.idConcepto=d.idConcepto,s.descripcionConcepto=d.descripcion,s.codigoConcepto=d.codigo}}o.notaCredito.value.documentoConcepto.push(e),o.notaCredito.value.documentoConcepto.push(r),o.notaCredito.value.documentoConcepto.push(a),o.notaCredito.value.documentoConcepto.push(i),o.notaCredito.value.documentoConcepto.push(n),o.notaCredito.value.documentoConcepto.push(s)})},t.prototype.setDocumentoParametro=function(t,o){var e=this;t.subscribe(function(t){var r=t.find(function(t){return t.codigo_dominio===o}),a=new m.a;a.idParametro=r.idparametro.toString(),a.descripcionParametro=r.parametro_descripcion;var i=new u.a;i.tipo=3,i.valor=r.descripcion_dominio,i.auxiliarCaracter=r.codigo_dominio,a.json=JSON.stringify(i),e.notaCredito.value.documentoParametro.push(a)})},t.prototype.setDocumentoReferencia=function(){var t=new h.a;if(t.tipoDocumentoOrigen=this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO,t.tipoDocumentoOrigenDescripcion=this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO_NOMBRE,null!==this.comprobanteReferencia.value){t.idDocumentoDestino=this.comprobanteReferencia.value.inIdcomprobantepago,t.tipoDocumentoDestino=this.comprobanteReferencia.value.vcIdregistrotipocomprobante,t.correlativoDocumentoDestino=this.comprobanteReferencia.value.vcCorrelativo,t.serieDocumentoDestino=this.comprobanteReferencia.value.vcSerie,t.fechaEmisionDestino=this.comprobanteReferencia.value.tsFechaemision,t.totalImporteDestino=Number(this.comprobanteReferencia.value.deTotalcomprobantepago).toFixed(2);for(var o=0,e=0,r=this.comprobanteReferencia.value.detalle;e<r.length;e++){o+=r[e].nuSubtotalIgv}t.totalImporteAuxiliarDestino=Number(o).toFixed(2),t.monedaDestino=this.comprobanteReferencia.value.chMonedacomprobantepago.toString(),t.tipoDocumentoDestinoDescripcion=this.comprobanteReferencia.value.vcTipocomprobante,t.totalMonedaDestino=this.comprobanteReferencia.value.deTotalcomprobantepago,t.totalPorcentajeAuxiliarDestino=Number(0).toFixed(2)}this.notaCredito.value.documentoReferencia.push(t)},t.prototype.setCabeceraPersistencia=function(t,o,e,r){var a=this;t.subscribe(function(t){if(t.length>0){var e=t.find(function(t){return t.idSerie===Number(o)});null!=e&&(a.notaCredito.value.numeroComprobante=e.serie)}}),null!=this.comprobanteReferencia.value&&(this.notaCredito.value.rucProveedor=this.comprobanteReferencia.value.entidadproveedora.vcDocumento,this.notaCredito.value.razonSocialProveedor=this.comprobanteReferencia.value.entidadproveedora.vcDenominacion,this.notaCredito.value.idTablaMoneda=this.comprobanteReferencia.value.vcIdtablamoneda,this.notaCredito.value.idRegistroMoneda=this.comprobanteReferencia.value.vcIdregistromoneda,this.notaCredito.value.idTablaTipoComprobante=this.comprobanteReferencia.value.vcIdtablatipocomprobante,this.notaCredito.value.moneda=this.comprobanteReferencia.value.chMonedacomprobantepago.toString(),this.notaCredito.value.rucComprador=this.comprobanteReferencia.value.entidadcompradora.vcDocumento,this.notaCredito.value.razonSocialComprador=this.comprobanteReferencia.value.entidadcompradora.vcDenominacion),this.notaCredito.value.idRegistroTipoComprobante=this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO,this.notaCredito.value.idTipoComprobante=this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO,this.notaCredito.value.tipoComprobante=this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO,this.notaCredito.value.observacionComprobante=r,this.notaCredito.value.tipoComprobante=this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO_NOMBRE,this.notaCredito.value.motivoComprobante=e,this.notaCredito.value.usuarioCreacion=localStorage.getItem("username"),this.notaCredito.value.usuarioModificacion=localStorage.getItem("username"),this.notaCredito.value.idSerie=o},t.prototype.setCabeceraNormal=function(t){this.notaCredito.value.montoPagado=Number(t.montoPagado).toFixed(2),this.notaCredito.value.igv=Number(t.igv).toFixed(2),this.notaCredito.value.isc=Number(t.isc).toFixed(2),this.notaCredito.value.descuento=Number(t.descuentos).toFixed(2),this.notaCredito.value.totalComprobante=Number(t.total).toFixed(2),this.notaCredito.value.subtotalComprobante=Number(t.subTotal).toFixed(2),this.notaCredito.value.importeReferencial=Number(t.importeReferencial).toFixed(2),this.notaCredito.value.otrosTributos=Number(t.otrosTributos).toFixed(2)},t.prototype.setDetalleNormal=function(t){this.notaCredito.value.detalleEbiz=null!==t?[t]:this.detalleModificadoLista.value},t.prototype.setCabeceraDataTable=function(t){t?this.ponerValoresEnCabecera(0,0,0,0,0,0,0,0):this.reCalcularTotalesDeDetalle()},t.prototype.ponerValoresEnCabecera=function(t,o,e,r,a,i,n,s){this.notaCredito.value.montoPagado=Number(t).toFixed(2),this.notaCredito.value.igv=Number(o).toFixed(2),this.notaCredito.value.isc=Number(e).toFixed(2),this.notaCredito.value.otrosTributos=Number(r).toFixed(2),this.notaCredito.value.importeReferencial=Number(a).toFixed(2),this.notaCredito.value.subtotalComprobante=Number(i).toFixed(2),this.notaCredito.value.totalComprobante=Number(s).toFixed(2),this.notaCredito.value.descuento=Number(n).toFixed(2)},t.prototype.reCalcularTotalesDeDetalle=function(){for(var t=0,o=0,e=0,r=0,a=0,i=0,n=0,s=0,c=this.notaCredito.value.detalleEbiz;s<c.length;s++){var l=c[s];t+=Number(l.precioTotal),o+=Number(l.detalle.subtotalIgv),e+=Number(l.detalle.subtotalIsc),r+=Number(l.montoImpuesto),a+=Number(l.detalle.subtotalVenta),i+=Number(l.precioTotal),n+=Number(l.detalle.descuento)}this.ponerValoresEnCabecera(t,o,e,0,r,a,n,i)},t.prototype.setDetalleDataTable=function(t){this.notaCredito.value.detalleEbiz=t},t}();x=I([e.i(r.Injectable)(),D("design:paramtypes",["function"==typeof(_=void 0!==n.a&&n.a)&&_||Object,"function"==typeof(T=void 0!==l.a&&l.a)&&T||Object,"function"==typeof(N=void 0!==d.a&&d.a)&&N||Object,"function"==typeof(O=void 0!==f.a&&f.a)&&O||Object,"function"==typeof(E=void 0!==C.a&&C.a)&&E||Object,"function"==typeof(y=void 0!==g.a&&g.a)&&y||Object])],x);var _,T,N,O,E,y},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.component.css":function(t,o,e){o=t.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),o.push([t.i,"",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.component.html":function(t,o){t.exports='<div class="row">\r\n  <div class="col-md-12">\r\n    <app-data-table\r\n      #tablaDetalle\r\n      [idTabla]="\'tablaDetalle\'"\r\n      [cabecera]="cabecera"\r\n      [atributos]="atributos"\r\n      [ordenarPorElCampo]="ordenarPorElCampo"\r\n      [nombreIdDelItem]="nombreIdDelItem"\r\n\r\n      [acciones]="acciones"\r\n      [tipoAccion]="tipoAccion"\r\n      [habilitarAcciones]="true"\r\n      (iniciarData)="iniciarData($event)"\r\n      (accion)="ejecutarAccion($event)"\r\n      [pintarFilas]="pintarFilas"\r\n      [nombreCampoParaPintarFilas]="nombreCampoParaPintarFilas"\r\n      >\r\n    </app-data-table>\r\n  </div>\r\n</div>\r\n<app-tipo-nota-credito-editar-item\r\n  #editarItemComponent\r\n  [idModal]="idModal"\r\n>\r\n</app-tipo-nota-credito-editar-item>\r\n'},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.component.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./src/app/facturacion-electronica/general/data-table/utils/accion.ts"),i=e("./src/app/facturacion-electronica/general/data-table/utils/tipo-accion.ts"),n=e("./src/app/facturacion-electronica/general/data-table/utils/modo-vista-accion.ts"),s=e("./src/app/facturacion-electronica/general/data-table/data-table.component.ts"),c=e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.ts"),l=e("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),d=e("./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts");e.d(o,"a",function(){return m});var p=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},u=this&&this.__metadata||function(t,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)},m=function(){function t(t,o){this._tiposService=t,this._notaCreditoService=o,this.estaValidadoNotaCreditoDataTable=new r.EventEmitter,this.seInicio=new r.EventEmitter,this.idModal="modal",this.cabecera=["cantidad","codigo","descripcion","unidadMedida","valorUnitario","igv","isc","descuento","valorVenta"],this.atributos=["cantidad","codigoItem","descripcionItem","detalle.unidadMedida","precioUnitario","detalle.subtotalIgv","detalle.subtotalIsc","detalle.descuento","precioTotal"],this.ordenarPorElCampo="codigoItem",this.acciones=[new a.a("editar",new a.b("edit","btn-info"),i.a.EDITAR),new a.a("limpiar",new a.b("clear","btn-info"),i.a.LIMPIAR)],this.pintarFilas=!0,this.nombreCampoParaPintarFilas="cambioDetalle",this.nombreIdDelItem="posicion",this.tipoAccion=n.a.ICONOS,this.detalleLista=[]}return t.prototype.ngOnInit=function(){var t=this;this.seInicio.next(!0),this.pasoAVistaPreviaSubscription=this._notaCreditoService.pasoAVistaPrevia.subscribe(function(o){o&&(t.enviarDetalle(),t.enviarCabecera())})},t.prototype.ngDoCheck=function(){this.estaValidadoDataTable()},t.prototype.ngOnDestroy=function(){this.seInicio.next(!1),this.tipoNotaCreditoSubscription.unsubscribe(),this.detalleListaSubscription.unsubscribe(),this.estaUsandoPersistenciaSubscription.unsubscribe()},t.prototype.iniciarData=function(t){var o=this;this.tipoNotaCreditoSubscription=this._notaCreditoService.tipoNotaCredito.subscribe(function(t){o.tipoNotaCredito=t,o.tablaDetalle.insertarData(o._notaCreditoService.obtenerDetalleOriginal())}),this.detalleListaSubscription=this._notaCreditoService.detalleModificadoLista.subscribe(function(t){o.detalleLista=t,o.estaUsandoPersistenciaSubscription=o._notaCreditoService.estaUsandoPersistencia.subscribe(function(t){if(t){var e=o._notaCreditoService.obtenerDetallePersistencia();if(null!==e)for(var r=0,a=e;r<a.length;r++){var i=a[r];!function(t){var e=o.detalleLista.findIndex(function(o){return o.posicion===t.posicion});-1!==e&&(o.detalleLista[e]=t)}(i)}}}),o.tablaDetalle.insertarData(o.detalleLista)})},t.prototype.enviarDetalle=function(){this.filtrarDetallesModificados(),this._notaCreditoService.setDetalleDataTable(this.detalleLista)},t.prototype.enviarCabecera=function(){var t=!1;this.tipoNotaCredito===this._tiposService.TIPO_NOTA_CREDITO_CORRECCION_DE_LA_DESCRIPCION&&(t=!0),this._notaCreditoService.setCabeceraDataTable(t)},t.prototype.filtrarDetallesModificados=function(){this.detalleLista=this.detalleLista.filter(function(t){return t.cambioDetalle})},t.prototype.ejecutarAccion=function(t){var o=this,e=t[0];switch(this.itemAEditar=t[1],e){case i.a.EDITAR:this.abrirEditarModal();break;case i.a.LIMPIAR:var r=this._notaCreditoService.obtenerDetalleOriginal().find(function(t){return t.posicion===o.itemAEditar.posicion});this.itemAEditar.copiarDetalle(r)}},t.prototype.estaValidadoDataTable=function(){for(var t=0,o=this.detalleLista;t<o.length;t++){if(o[t].cambioDetalle)return void this.estaValidadoNotaCreditoDataTable.next(!0)}this.estaValidadoNotaCreditoDataTable.next(!1)},t.prototype.abrirEditarModal=function(){this.editarItemComponent.llenarDatosItem(this.itemAEditar),this.editarItemComponent.abrirModal()},t}();p([e.i(r.ViewChild)("tablaDetalle"),u("design:type","function"==typeof(v=void 0!==s.a&&s.a)&&v||Object)],m.prototype,"tablaDetalle",void 0),p([e.i(r.ViewChild)("editarItemComponent"),u("design:type","function"==typeof(b=void 0!==c.a&&c.a)&&b||Object)],m.prototype,"editarItemComponent",void 0),p([e.i(r.Output)(),u("design:type",Object)],m.prototype,"estaValidadoNotaCreditoDataTable",void 0),p([e.i(r.Output)(),u("design:type",Object)],m.prototype,"seInicio",void 0),m=p([e.i(r.Component)({selector:"app-tipo-nota-credito-datatable",template:e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.component.html"),styles:[e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.component.css")]}),u("design:paramtypes",["function"==typeof(h=void 0!==l.a&&l.a)&&h||Object,"function"==typeof(f=void 0!==d.a&&d.a)&&f||Object])],m);var v,b,h,f},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.module.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/@angular/common/@angular/common.es5.js"),i=e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.component.ts"),n=e("./node_modules/@ngx-translate/core/index.js"),s=e("./src/app/facturacion-electronica/general/data-table/data-table.module.ts"),c=e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.module.ts");e.d(o,"a",function(){return d});var l=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},d=function(){function t(){}return t}();d=l([e.i(r.NgModule)({imports:[a.CommonModule,n.a,s.a,c.a],declarations:[i.a],exports:[i.a],providers:[]})],d)},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.css":function(t,o,e){o=t.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),o.push([t.i,".modal-title{background:#0079bf;box-shadow:none;border-radius:3px;color:#fff;padding:1rem}",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.html":function(t,o){t.exports='<div class="modal fade" #modalEditar [id]="idModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n  <div class="modal-dialog">\r\n    <div class="modal-content">\r\n      <div class="modal-header">\r\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="material-icons">clear</i></button>\r\n        <div class="row">\r\n          <div class="col-md-4">\r\n            <h5 class="modal-title" id="myModalLabel">{{\'editarItem\' | translate}}</h5>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <form [formGroup]="editarItemFormGroup" autocomplete="off">\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblCantidad" class="control-label">{{\'cantidad\' | translate}}</label>\r\n                <input class="form-control" id="txtCantidad" formControlName="txtCantidad" type="text" precioDirectiva>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtCantidad\').valid">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtCantidad\').hasError(\'maxlength\')"\r\n                                 class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtCantidad} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtCantidad\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtCantidad\').hasError(\'max\')"\r\n                          class="text-danger">{{\'deberiaSerMenorA\' | translate: {digito: detalleEbizSinModificar.cantidad} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtCantidad\').hasError(\'min\')"\r\n                          class="text-danger">{{\'deberiaSerMayorA\' | translate: {digito: \'0.00\'} }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblCodigo" class="control-label">{{\'codigo\' | translate}}</label>\r\n                <input class="form-control" id="txtCodigo" formControlName="txtCodigo" type="text">\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtCodigo\').valid">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtCodigo\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtCodigo} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtCodigo\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblDescripcion" class="control-label">{{\'descripcion\' | translate}}</label>\r\n                <textarea class="form-control" id="txtDescripcion" formControlName="txtDescripcion" type="text" rows="3"></textarea>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtDescripcion\').valid">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescripcion\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtDescripcion} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescripcion\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblUnidadMedida" class="control-label">{{\'unidadMedida\' | translate}}</label>\r\n                <input class="form-control" id="txtUnidadMedida" formControlName="txtUnidadMedida" type="text">\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtUnidadMedida\').valid">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtUnidadMedida\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtUnidadMedida} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtUnidadMedida\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblValorUnitario" class="control-label">{{\'valorUnitario\' | translate}}</label>\r\n                <input class="form-control" id="txtValorUnitario" formControlName="txtValorUnitario" type="text" precioDirectiva>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtValorUnitario\').valid">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorUnitario\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtValorUnitario} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorUnitario\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorUnitario\').hasError(\'max\')"\r\n                          class="text-danger">{{\'deberiaSerMenorA\' | translate: {digito: detalleEbizSinModificar.precioUnitario} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorUnitario\').hasError(\'min\')"\r\n                          class="text-danger">{{\'deberiaSerMayorA\' | translate: {digito: \'0.00\'} }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblIgv" class="control-label">{{\'igv\' | translate}}</label>\r\n                <input class="form-control" id="txtIgv" formControlName="txtIgv" type="text" precioDirectiva>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtIgv\').valid">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIgv\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtIgv} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIgv\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIgv\').hasError(\'max\')"\r\n                          class="text-danger">{{\'deberiaSerMenorA\' | translate: {digito: detalleEbizSinModificar.detalle.subtotalIgv} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIgv\').hasError(\'min\')"\r\n                          class="text-danger">{{\'deberiaSerMayorA\' | translate: {digito: \'0.00\'} }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblIsc" class="control-label">{{\'isc\' | translate}}</label>\r\n                <input class="form-control" id="txtIsc" formControlName="txtIsc" type="text" precioDirectiva>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtIsc\').valid">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIsc\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtIsc} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIsc\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIsc\').hasError(\'max\')"\r\n                          class="text-danger">{{\'deberiaSerMenorA\' | translate: {digito: detalleEbizSinModificar.detalle.subtotalIsc} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIsc\').hasError(\'min\')"\r\n                          class="text-danger">{{\'deberiaSerMayorA\' | translate: {digito: \'0.00\'} }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblDescuento" class="control-label">{{\'descuento\' | translate}}</label>\r\n                <input class="form-control" id="txtDescuento" formControlName="txtDescuento" type="text" precioDirectiva>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtDescuento\').valid">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescuento\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtDescuento} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescuento\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescuento\').hasError(\'max\')"\r\n                          class="text-danger">{{\'deberiaSerMenorA\' | translate: {digito: descuentoLimite} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescuento\').hasError(\'min\')"\r\n                          class="text-danger">{{\'deberiaSerMayorA\' | translate: {digito: \'0.00\'} }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblValorVenta" class="control-label">{{\'valorVenta\' | translate}}</label>\r\n                <input class="form-control" id="txtValorVenta" formControlName="txtValorVenta" type="text" precioDirectiva>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtValorVenta\').valid">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorVenta\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtValorVenta} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorVenta\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorVenta\').hasError(\'max\')"\r\n                          class="text-danger">{{\'deberiaSerMenorA\' | translate: {digito: detalleEbizSinModificar.precioTotal} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorVenta\').hasError(\'min\')"\r\n                          class="text-danger">{{\'deberiaSerMayorA\' | translate: {digito: \'0.00\'} }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer text-center">\r\n          <button type="submit" class="btn btn-default" data-dismiss="modal" [disabled]="!(editarItemFormGroup.valid && estaValidadoFormGroup)" (click)="guardarItem()">{{\'guardar\' | translate}}</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/@angular/forms/@angular/forms.es5.js"),i=e("./src/app/facturacion-electronica/general/utils/estilos.services.ts"),n=e("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),s=e("./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts");e.d(o,"a",function(){return d});var c=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},l=this&&this.__metadata||function(t,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)},d=function(){function t(t,o,e){this._estilosService=t,this._tiposService=o,this._notaCreditoService=e,this.iniciarTamanios()}return t.prototype.iniciarTamanios=function(){this.tamanioTxtCantidad=16,this.tamanioTxtCodigo=30,this.tamanioTxtDescripcion=250,this.tamanioTxtUnidadMedida=3,this.tamanioTxtValorUnitario=15,this.tamanioTxtIgv=15,this.tamanioTxtIsc=15,this.tamanioTxtDescuento=15,this.tamanioTxtValorVenta=15,this.estaValidadoFormGroup=!1},t.prototype.iniciarFormGroup=function(){var t=this;this.editarItemFormGroup=new a.FormGroup({txtCantidad:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtCantidad)]),txtCodigo:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtCodigo)]),txtDescripcion:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtDescripcion)]),txtUnidadMedida:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtUnidadMedida)]),txtValorUnitario:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtValorUnitario)]),txtIgv:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtIgv)]),txtIsc:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtIsc)]),txtDescuento:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtDescuento)]),txtValorVenta:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtValorVenta)])}),this.editarItemFormGroup.controls.txtValorVenta.valueChanges.subscribe(function(o){if(o&&t.editarItemFormGroup.valid){var e=Number(t.editarItemFormGroup.controls.txtValorVenta.value);e<0?(t.editarItemFormGroup.controls.txtValorVenta.setErrors({min:!0}),t.estaValidadoFormGroup=!1):e>Number(t.detalleEbizSinModificar.precioTotal)?(t.editarItemFormGroup.controls.txtValorVenta.setErrors({max:!0}),t.estaValidadoFormGroup=!1):(t.editarItemFormGroup.controls.txtValorVenta.setErrors(null),t.estaValidadoFormGroup=!0)}}),this.editarItemFormGroup.controls.txtDescuento.valueChanges.subscribe(function(o){if(o&&t.editarItemFormGroup.valid){var e=Number(t.editarItemFormGroup.controls.txtDescuento.value),r=Number(t.detalleEbizSinModificar.precioUnitario)*Number(t.detalleEbiz.cantidad);e<0?(t.editarItemFormGroup.controls.txtDescuento.setErrors({min:!0}),t.estaValidadoFormGroup=!1):e>r?(t.editarItemFormGroup.controls.txtDescuento.setErrors({max:!0}),t.estaValidadoFormGroup=!1):(t.editarItemFormGroup.controls.txtDescuento.setErrors(null),t.estaValidadoFormGroup=!0)}})},t.prototype.ngOnInit=function(){var t=this;this.iniciarFormGroup(),this.detalleLista=this._notaCreditoService.obtenerDetalleOriginal(),this.tipoNotaCreditoSubscription=this._notaCreditoService.tipoNotaCredito.subscribe(function(o){t.tipoNotaCredito=o})},t.prototype.ngOnDestroy=function(){this.tipoNotaCreditoSubscription.unsubscribe()},t.prototype.recalcularDetalleEbiz=function(t,o,e,r,a,i,n,s){var c=this;void 0===s&&(s=!1),this.editarItemFormGroup.controls[t].valueChanges.subscribe(function(t){if(t&&c.editarItemFormGroup.valid){var l=Number(c.editarItemFormGroup.controls[o].value),d=Number(c.editarItemFormGroup.controls[e].value),p=Number(c.editarItemFormGroup.controls[a].value),u=l*d+p,m=.18*u,v=Number(c.editarItemFormGroup.controls[i].value),b=u+m-v;s&&(m=.18*v,b=v+m),c.editarItemFormGroup.controls[r].setValue(Number(m).toFixed(2)),c.editarItemFormGroup.controls[n].setValue(Number(b).toFixed(2))}})},t.prototype.abrirModal=function(){$("#"+this.idModal).modal("show")},t.prototype.habilitarFormsControl=function(t,o){for(var e=0,r=o;e<r.length;e++){var a=r[e];this.editarItemFormGroup.controls[a].disable(),$("#"+a).parent().children("label").children("span").remove()}for(var i=0,n=t;i<n.length;i++){var s=n[i];this.editarItemFormGroup.controls[s].enable(),$("#"+s).parent().children("label").children("span").remove(),$("#"+s).parent().children("label").append("<span class='star'>*</span>")}},t.prototype.guardarItem=function(){this.tipoNotaCredito===this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_POR_ITEM?(this.detalleEbiz.cantidad="1.00",this.detalleEbiz.codigoItem=this.editarItemFormGroup.controls.txtCodigo.value,this.detalleEbiz.descripcionItem=this.detalleEbiz.cambioDetalle?this.editarItemFormGroup.controls.txtDescripcion.value:this.editarItemFormGroup.controls.txtDescripcion.value+"****DESCUENTO******",this.detalleEbiz.detalle.unidadMedida=this.editarItemFormGroup.controls.txtUnidadMedida.value,this.detalleEbiz.precioUnitario=this.editarItemFormGroup.controls.txtDescuento.value,this.detalleEbiz.detalle.subtotalIgv=this.editarItemFormGroup.controls.txtIgv.value,this.detalleEbiz.detalle.subtotalIsc=this.editarItemFormGroup.controls.txtIsc.value,this.detalleEbiz.detalle.descuento="0.00",this.detalleEbiz.precioTotal=this.editarItemFormGroup.controls.txtValorVenta.value):(this.detalleEbiz.cantidad=this.editarItemFormGroup.controls.txtCantidad.value,this.detalleEbiz.codigoItem=this.editarItemFormGroup.controls.txtCodigo.value,this.detalleEbiz.descripcionItem=this.editarItemFormGroup.controls.txtDescripcion.value,this.detalleEbiz.detalle.unidadMedida=this.editarItemFormGroup.controls.txtUnidadMedida.value,this.detalleEbiz.precioUnitario=this.editarItemFormGroup.controls.txtValorUnitario.value,this.detalleEbiz.detalle.subtotalIgv=this.editarItemFormGroup.controls.txtIgv.value,this.detalleEbiz.detalle.subtotalIsc=this.editarItemFormGroup.controls.txtIsc.value,this.detalleEbiz.detalle.descuento=this.editarItemFormGroup.controls.txtDescuento.value,this.detalleEbiz.precioTotal=this.editarItemFormGroup.controls.txtValorVenta.value),this.verificarSiCambioItem()},t.prototype.verificarSiCambioItem=function(){Number(this.detalleEbiz.cantidad)!==Number(this.detalleEbizSinModificar.cantidad)||Number(this.detalleEbiz.precioUnitario)!==Number(this.detalleEbizSinModificar.precioUnitario)||this.detalleEbiz.descripcionItem!==this.detalleEbizSinModificar.descripcionItem||Number(this.detalleEbiz.detalle.descuento)!==Number(this.detalleEbizSinModificar.detalle.descuento)?this.detalleEbiz.cambioDetalle=!0:this.detalleEbiz.cambioDetalle=!1},t.prototype.llenarDatosItem=function(t){var o=this;this.detalleEbiz=t,this.detalleEbizSinModificar=this.detalleLista.find(function(t){return t.posicion===o.detalleEbiz.posicion}),this.descuentoLimite=Number(Number(this.detalleEbizSinModificar.cantidad)*Number(this.detalleEbizSinModificar.precioUnitario)).toFixed(2),this.verificarTipoNotaCredito(),this.editarItemFormGroup.controls.txtCantidad.setValue(this.detalleEbiz.cantidad),this.editarItemFormGroup.controls.txtCodigo.setValue(this.detalleEbiz.codigoItem),this.editarItemFormGroup.controls.txtDescripcion.setValue(this.detalleEbiz.descripcionItem),this.editarItemFormGroup.controls.txtUnidadMedida.setValue(this.detalleEbiz.detalle.unidadMedida),this.editarItemFormGroup.controls.txtValorUnitario.setValue(this.detalleEbiz.precioUnitario),this.editarItemFormGroup.controls.txtIgv.setValue(this.detalleEbiz.detalle.subtotalIgv),this.editarItemFormGroup.controls.txtIsc.setValue(this.detalleEbiz.detalle.subtotalIsc),this.editarItemFormGroup.controls.txtDescuento.setValue(this.detalleEbiz.detalle.descuento),this.editarItemFormGroup.controls.txtValorVenta.setValue(this.detalleEbiz.precioTotal),this._estilosService.eliminarEstilosTodosTag("is-empty","input"),this._estilosService.eliminarEstilosTodosTag("is-empty","textarea")},t.prototype.verificarTipoNotaCredito=function(){switch(this.editarItemFormGroup.get("txtCantidad").setValidators([a.Validators.required,a.Validators.maxLength(this.tamanioTxtCantidad),a.Validators.max(Number(this.detalleEbizSinModificar.cantidad)),a.Validators.min(.01)]),this.editarItemFormGroup.get("txtDescuento").setValidators([a.Validators.required,a.Validators.maxLength(this.tamanioTxtDescuento),a.Validators.max(Number(this.detalleEbizSinModificar.precioUnitario)),a.Validators.min(.01)]),this.editarItemFormGroup.get("txtValorUnitario").setValidators([a.Validators.required,a.Validators.maxLength(this.tamanioTxtValorUnitario),a.Validators.max(Number(this.detalleEbizSinModificar.precioUnitario)),a.Validators.min(.01)]),this.editarItemFormGroup.get("txtValorVenta").setValidators([a.Validators.required,a.Validators.maxLength(this.tamanioTxtValorVenta),a.Validators.max(Number(this.detalleEbizSinModificar.precioTotal)),a.Validators.min(.01)]),this.tipoNotaCredito){case this._tiposService.TIPO_NOTA_CREDITO_CORRECCION_DE_LA_DESCRIPCION:this.habilitarFormsControl(["txtDescripcion"],["txtCantidad","txtDescuento","txtValorUnitario","txtValorVenta"]);break;case this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_POR_ITEM:this.habilitarFormsControl(["txtCantidad"],["txtDescripcion","txtDescuento","txtValorUnitario","txtValorVenta"]),this.recalcularDetalleEbiz("txtCantidad","txtCantidad","txtValorUnitario","txtIgv","txtIsc","txtDescuento","txtValorVenta");break;case this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_POR_ITEM:this.detalleEbiz.detalle.descuento="0.00",this.habilitarFormsControl(["txtDescuento"],["txtDescripcion","txtCantidad","txtValorUnitario","txtValorVenta"]),this.recalcularDetalleEbiz("txtDescuento","txtCantidad","txtValorUnitario","txtIgv","txtIsc","txtDescuento","txtValorVenta",!0);break;case this._tiposService.TIPO_NOTA_CREDITO_BONIFICACION:this.habilitarFormsControl(["txtCantidad","txtValorUnitario"],["txtDescripcion","txtDescuento","txtValorVenta"]),this.recalcularDetalleEbiz("txtCantidad","txtCantidad","txtValorUnitario","txtIgv","txtIsc","txtDescuento","txtValorVenta"),this.recalcularDetalleEbiz("txtValorUnitario","txtCantidad","txtValorUnitario","txtIgv","txtIsc","txtDescuento","txtValorVenta");break;case this._tiposService.TIPO_NOTA_CREDITO_DISMINUCION_EN_EL_VALOR:this.habilitarFormsControl(["txtValorUnitario"],["txtDescripcion","txtDescuento","txtCantidad","txtValorVenta"]),this.recalcularDetalleEbiz("txtValorUnitario","txtCantidad","txtValorUnitario","txtIgv","txtIsc","txtDescuento","txtValorVenta")}},t}();c([e.i(r.Input)(),l("design:type",String)],d.prototype,"idModal",void 0),c([e.i(r.ViewChild)("modalEditar"),l("design:type","function"==typeof(p=void 0!==r.ElementRef&&r.ElementRef)&&p||Object)],d.prototype,"modalEditar",void 0),d=c([e.i(r.Component)({selector:"app-tipo-nota-credito-editar-item",template:e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.html"),styles:[e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.css")]}),l("design:paramtypes",["function"==typeof(u=void 0!==i.a&&i.a)&&u||Object,"function"==typeof(m=void 0!==n.a&&n.a)&&m||Object,"function"==typeof(v=void 0!==s.a&&s.a)&&v||Object])],d);var p,u,m,v},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.module.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/@angular/common/@angular/common.es5.js"),i=e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.ts"),n=e("./node_modules/@ngx-translate/core/index.js"),s=e("./node_modules/@angular/forms/@angular/forms.es5.js"),c=e("./src/app/facturacion-electronica/general/directivas/directivas.module.ts");e.d(o,"a",function(){return d});var l=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},d=function(){function t(){}return t}();d=l([e.i(r.NgModule)({imports:[a.CommonModule,n.a,s.ReactiveFormsModule,c.a],declarations:[i.a],exports:[i.a],providers:[]})],d)},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.component.css":function(t,o,e){o=t.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),o.push([t.i,"",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.component.html":function(t,o){t.exports='<form [formGroup]="notaCreditoNormalFormGroup" autocomplete="off">\r\n  <div class="row">\r\n    <div class="col-md-3">\r\n      <div class="form-group label-floating">\r\n        <label id="lblDescuentos" class="control-label">\r\n          {{nombreDescuento | translate}}\r\n        </label>\r\n        <input class="form-control" id="txtDescuentos" formControlName="txtDescuentos" type="text"\r\n               (change)="reCalcularImporteTotal()" precioDirectiva>\r\n        <div class="row" *ngIf="notaCreditoNormalFormGroup.errors">\r\n          <div class="col-md-12">\r\n            <span class="text-danger"\r\n                *ngIf="notaCreditoNormalFormGroup.errors[\'txtDescuentosMenorQue\']">\r\n                {{notaCreditoNormalFormGroup.errors[\'txtDescuentosMenorQue\'] | translate: {digito: notaCreditoNormalFormGroup.errors[\'valortxtDescuentosMenorQue\']} }}\r\n            </span>\r\n            <span class="text-danger"\r\n                  *ngIf="notaCreditoNormalFormGroup.errors[\'txtDescuentosMayorQue\']">\r\n                {{notaCreditoNormalFormGroup.errors[\'txtDescuentosMayorQue\'] | translate: {digito: notaCreditoNormalFormGroup.errors[\'valortxtDescuentosMayorQue\']} }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="col-md-3">\r\n      <div class="form-group label-floating">\r\n        <label id="lblIsc" class="control-label">{{\'isc\' | translate}}</label>\r\n        <input class="form-control" id="txtIsc" formControlName="txtIsc" type="text"\r\n               (change)="reCalcularImporteTotal()" precioDirectiva>\r\n        <div class="row" *ngIf="notaCreditoNormalFormGroup.errors">\r\n          <div class="col-md-12">\r\n            <span class="text-danger"\r\n                  *ngIf="notaCreditoNormalFormGroup.errors[\'txtIscMenorQue\']">\r\n              {{notaCreditoNormalFormGroup.errors[\'txtIscMenorQue\'] | translate: {digito: notaCreditoNormalFormGroup.errors[\'valortxtIscMenorQue\']} }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="col-md-3">\r\n      <div class="form-group label-floating">\r\n        <label id="lblIgv" class="control-label">{{\'igv\' | translate}}</label>\r\n        <input class="form-control" id="txtIgv" formControlName="txtIgv" type="text" precioDirectiva>\r\n      </div>\r\n    </div>\r\n    <div class="col-md-3">\r\n      <div class="form-group label-floating">\r\n        <label id="lblImporteTotal" class="control-label">\r\n          {{\'importeTotal\' | translate}}\r\n        </label>\r\n        <input class="form-control" id="txtImporteTotal" formControlName="txtImporteTotal" type="text" precioDirectiva>\r\n        <div class="row" *ngIf="notaCreditoNormalFormGroup.errors">\r\n          <div class="col-md-12">\r\n            <span class="text-danger"\r\n                  *ngIf="notaCreditoNormalFormGroup.errors[\'txtImporteTotalMenorQue\']">\r\n              {{notaCreditoNormalFormGroup.errors[\'txtImporteTotalMenorQue\'] | translate: {digito: notaCreditoNormalFormGroup.errors[\'valortxtImporteTotalMenorQue\']} }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>\r\n'},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.component.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/@angular/forms/@angular/forms.es5.js"),i=e("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),n=e("./src/app/facturacion-electronica/general/utils/estilos.services.ts"),s=e("./src/app/facturacion-electronica/general/services/utils/validadorPersonalizado.ts"),c=e("./node_modules/rxjs/BehaviorSubject.js"),l=(e.n(c),e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/detalleNotaCredito.ts")),d=e("./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts"),p=e("./src/app/facturacion-electronica/general/models/leyendaComprobante.ts");e.d(o,"a",function(){return v});var u=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},m=this&&this.__metadata||function(t,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)},v=function(){function t(t,o,e){this._tiposService=t,this._estilosServices=o,this._notaCreditoService=e}return t.prototype.ngOnInit=function(){var t=this;this.leyendaComprobante=new c.BehaviorSubject(new p.a),this.leyendaCambiada=new p.a,this.nombreDescuento="descuento",this.estaModificandoDetalle=!1,this.tipoNotaCreditoSubscription=this._notaCreditoService.tipoNotaCredito.subscribe(function(o){t.tipoNotaCredito=o,t.iniciarFormGroup(),t.verificarTipoNotaCredito(),t.reCargarDatos()}),this.comprobanteReferenciaSubscription=this._notaCreditoService.comprobanteReferencia.subscribe(function(o){t.comprobanteReferencia=o,null!==t.comprobanteReferencia&&t.cargarDatosLeyenda(t.comprobanteReferencia.dePagomontopagado,t.comprobanteReferencia.deTotalcomprobantepago,t.comprobanteReferencia.deImportereferencial,t.comprobanteReferencia.deSubtotalcomprobantepago,t.comprobanteReferencia.deDescuento,t.comprobanteReferencia.deImpuesto1,t.comprobanteReferencia.deImpuesto2,t.comprobanteReferencia.deImpuesto3,!1)}),this.pasoAVistaPreviaSubscription=this._notaCreditoService.pasoAVistaPrevia.subscribe(function(o){console.log(o),o&&(t._notaCreditoService.setCabeceraNormal(t.leyendaCambiada),t._notaCreditoService.setDetalleNormal(t.obtenerDetalle()))})},t.prototype.ngOnDestroy=function(){this.tipoNotaCreditoSubscription.unsubscribe(),this.comprobanteReferenciaSubscription.unsubscribe(),this.pasoAVistaPreviaSubscription.unsubscribe()},t.prototype.cargarDatosEnForm=function(t,o,e,r){var a=new p.a;a.total=Number(t).toFixed(2),a.descuentos=Number(o).toFixed(2),a.isc=Number(e).toFixed(2),a.igv=Number(r).toFixed(2),this.notaCreditoNormalFormGroup.controls.txtImporteTotal.setValue(a.total),this.notaCreditoNormalFormGroup.controls.txtDescuentos.setValue(a.descuentos),this.notaCreditoNormalFormGroup.controls.txtIsc.setValue(a.isc),this.notaCreditoNormalFormGroup.controls.txtIgv.setValue(a.igv),this._estilosServices.eliminarEstiloInput("txtImporteTotal","is-empty"),this._estilosServices.eliminarEstiloInput("txtDescuentos","is-empty"),this._estilosServices.eliminarEstiloInput("txtIsc","is-empty"),this._estilosServices.eliminarEstiloInput("txtIgv","is-empty")},t.prototype.cargarDatosLeyenda=function(t,o,e,r,a,i,n,s,c){var l=new p.a;l.montoPagado=Number(t).toFixed(2),l.total=Number(o).toFixed(2),l.importeReferencial=Number(e).toFixed(2),l.descuentos=Number(a).toFixed(2),l.isc=Number(n).toFixed(2),l.igv=Number(i).toFixed(2),l.subTotal=Number(r).toFixed(2),l.otrosTributos=Number(s).toFixed(2),this.leyendaComprobante.next(l),c||this.estaModificandoDetalle?this.leyendaCambiada=l:this.cargarDatosEnForm(o,a,n,i)},t.prototype.obtenerDetalle=function(){if(this.estaModificandoDetalle){var t=new l.a;return t.precioUnitario=Number(this.notaCreditoNormalFormGroup.controls.txtDescuentos.value).toFixed(2),t.detalle.subtotalIsc=Number(this.notaCreditoNormalFormGroup.controls.txtIsc.value).toFixed(2),t.detalle.subtotalIgv=Number(this.notaCreditoNormalFormGroup.controls.txtIgv.value).toFixed(2),t.precioTotal=Number(this.notaCreditoNormalFormGroup.controls.txtImporteTotal.value).toFixed(2),t.descripcionItem=this._notaCreditoService.notaCredito.value.motivoComprobante,t}return null},t.prototype.reCargarDatos=function(){var t=this;this.estaModificandoDetalle?(this.limpiar(),this.leyendaCambiada=new p.a):this.leyendaComprobante.subscribe(function(o){t.notaCreditoNormalFormGroup.controls.txtDescuentos.setValue(o.descuentos),t.notaCreditoNormalFormGroup.controls.txtImporteTotal.setValue(o.montoPagado),t.notaCreditoNormalFormGroup.controls.txtIsc.setValue(o.isc),t.notaCreditoNormalFormGroup.controls.txtIgv.setValue(o.igv),t.leyendaCambiada=o})},t.prototype.reCalcularImporteTotal=function(){var t=Number(this.notaCreditoNormalFormGroup.controls.txtDescuentos.value),o=Number(this.notaCreditoNormalFormGroup.controls.txtIsc.value),e=t+o,r=.18*e;if(this.notaCreditoNormalFormGroup.controls.txtIgv.setValue(Number(r).toFixed(2)),e+=r,this.notaCreditoNormalFormGroup.controls.txtImporteTotal.setValue(Number(e).toFixed(2)),this.estaModificandoDetalle){var a=new p.a;a.total=this.notaCreditoNormalFormGroup.controls.txtImporteTotal.value,a.isc=this.notaCreditoNormalFormGroup.controls.txtIsc.value,a.igv=this.notaCreditoNormalFormGroup.controls.txtIgv.value,a.montoPagado=a.total,a.subTotal=Number(Number(a.total)-Number(a.isc)-Number(a.igv)).toFixed(2),this.leyendaCambiada=a}},t.prototype.limpiar=function(){this.notaCreditoNormalFormGroup.controls.txtDescuentos.setValue("0.00"),this.notaCreditoNormalFormGroup.controls.txtIsc.setValue("0.00"),this.notaCreditoNormalFormGroup.controls.txtIgv.setValue("0.00"),this.notaCreditoNormalFormGroup.controls.txtImporteTotal.setValue("0.00")},t.prototype.habilitarFormsControl=function(t,o){for(var e=0,r=o;e<r.length;e++){var a=r[e];this.notaCreditoNormalFormGroup.controls[a].disable(),$("#"+a).parent().children("label").children("span").remove()}for(var i=0,n=t;i<n.length;i++){var s=n[i];this.notaCreditoNormalFormGroup.controls[s].enable(),$("#"+s).parent().children("label").children("span").remove(),$("#"+s).parent().children("label").append("<span class='star'>*</span>")}},t.prototype.iniciarFormGroup=function(){this.notaCreditoNormalFormGroup=new a.FormGroup({txtImporteTotal:new a.FormControl({value:"0.00",disabled:!0},[a.Validators.required]),txtIsc:new a.FormControl({value:"0.00",disabled:!0},[a.Validators.required]),txtIgv:new a.FormControl({value:"0.00",disabled:!0},[a.Validators.required]),txtDescuentos:new a.FormControl({value:"0.00",disabled:!0},[a.Validators.required])},a.Validators.compose([s.a.formGroupAsyncMenorQue("txtDescuentos",this.leyendaComprobante,"subTotal","descuentosDeberiaSerMenorAImporteTotal",!0,this.tipoNotaCredito===this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_GLOBAL),s.a.formGroupAsyncMenorQue("txtIsc",this.leyendaComprobante,"isc","deberiaSerMenorA"),s.a.formGroupAsyncMenorQue("txtImporteTotal",this.leyendaComprobante,"total","deberiaSerMenorA")])),this.padreFormGroup.addControl(this.nombreControl,this.notaCreditoNormalFormGroup)},t.prototype.verificarTipoNotaCredito=function(){var t=this;switch(this.tipoNotaCredito){case this._tiposService.TIPO_NOTA_CREDITO_ANULACION_DE_OPERACION:case this._tiposService.TIPO_NOTA_CREDITO_ANULACION_POR_ERROR_RUC:this.estaModificandoDetalle=!1,this.nombreDescuento="descuento",this.habilitarFormsControl([],["txtDescuentos","txtImporteTotal","txtIsc","txtIgv"]);break;case this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_GLOBAL:this.leyendaComprobante.subscribe(function(o){t.estaModificandoDetalle=!0,t.nombreDescuento="descuentoGlobal";var e=["txtDescuentos"],r=["txtImporteTotal","txtIsc","txtIgv"];Number(o.isc)>0&&(e=["txtDescuentos","txtIsc"],r=["txtImporteTotal","txtIgv"]),t.habilitarFormsControl(e,r)});break;case this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_TOTAL:this.estaModificandoDetalle=!1,this.nombreDescuento="descuento",this.habilitarFormsControl([],["txtDescuentos","txtImporteTotal","txtIsc","txtIgv"])}},t}();u([e.i(r.Input)("padreFormGroup"),m("design:type","function"==typeof(b=void 0!==a.FormGroup&&a.FormGroup)&&b||Object)],v.prototype,"padreFormGroup",void 0),u([e.i(r.Input)("nombreControl"),m("design:type",String)],v.prototype,"nombreControl",void 0),v=u([e.i(r.Component)({selector:"app-tipo-nota-credito-normal",template:e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.component.html"),styles:[e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.component.css")]}),m("design:paramtypes",["function"==typeof(h=void 0!==i.a&&i.a)&&h||Object,"function"==typeof(f=void 0!==n.a&&n.a)&&f||Object,"function"==typeof(C=void 0!==d.a&&d.a)&&C||Object])],v);var b,h,f,C},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.module.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/@angular/common/@angular/common.es5.js"),i=e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.component.ts"),n=e("./node_modules/@ngx-translate/core/index.js"),s=e("./node_modules/@angular/forms/@angular/forms.es5.js"),c=e("./src/app/facturacion-electronica/general/directivas/directivas.module.ts");e.d(o,"a",function(){return d});var l=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},d=function(){function t(){}return t}();d=l([e.i(r.NgModule)({imports:[a.CommonModule,n.a,s.ReactiveFormsModule,c.a],declarations:[i.a],exports:[i.a],providers:[]})],d)},"./src/app/facturacion-electronica/comprobantes/nota-credito/utils/TiposVistaNotaCredito.ts":function(t,o,e){"use strict";e.d(o,"a",function(){return r});var r;!function(t){t[t.NORMAL=0]="NORMAL",t[t.TABLA=1]="TABLA"}(r||(r={}))},"./src/app/facturacion-electronica/comprobantes/nota-credito/vista-previa-nota-credito/vista-previa-nota-credito.component.css":function(t,o,e){o=t.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),o.push([t.i,"",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/nota-credito/vista-previa-nota-credito/vista-previa-nota-credito.component.html":function(t,o){t.exports='<div class="main-content">\r\n  <div class="container-fluid">\r\n    <div class="row col-md-12">\r\n      <div class="card">\r\n        <div class="card-header card-header-text" data-background-color="blue">\r\n          <h4 class="card-title">{{\'vistaPrevia\' | translate}}</h4>\r\n        </div>\r\n        <div class="card-content">\r\n          <div class="row">\r\n            <div class="col-md-4">\r\n              <label>\r\n                <h5>\r\n                  <b *ngIf="notaCredito.documentoEntidad[0]">{{notaCredito.documentoEntidad[0].denominacion}}</b>\r\n                </h5>\r\n              </label>\r\n            </div>\r\n            <div class="col-md-4 col-md-offset-4">\r\n              <div class="row">\r\n                <div class="col-md-4">\r\n                  <label>\r\n                    <h4>\r\n                      <b>{{\'ruc\' | translate}}:</b>\r\n                    </h4>\r\n                  </label>\r\n                </div>\r\n                <div class="col-md-8">\r\n                  <label>\r\n                    <h5 *ngIf="notaCredito.documentoEntidad[0]">{{notaCredito.documentoEntidad[0].documento}}</h5>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-4">\r\n              <label>\r\n                <h5>\r\n                  <b *ngIf="notaCredito.documentoEntidad[0]">{{notaCredito.documentoEntidad[0].direccionFiscal}}</b>\r\n                </h5>\r\n              </label>\r\n            </div>\r\n            <div class="col-md-4 col-md-offset-4">\r\n              <label>\r\n                <h3>\r\n                  <b>{{tituloComprobante | translate}}</b>\r\n                </h3>\r\n              </label>\r\n            </div>\r\n          </div>\r\n          <br>\r\n          <div class="row">\r\n            <div class="col-md-4 col-md-offset-8">\r\n              <div class="row">\r\n                <div class="col-md-4">\r\n                  <label>\r\n                    <h3>\r\n                      <b>{{\'serie\' | translate}}:</b>\r\n                    </h3>\r\n                  </label>\r\n                </div>\r\n                <div class="col-md-8">\r\n                  <label>\r\n                    <h3>{{notaCredito.numeroComprobante}}</h3>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <br>\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <div class="row">\r\n                <div class="col-md-6">\r\n                  <label>\r\n                    <b>{{\'seniorSeniors\' | translate}}:</b>\r\n                  </label>\r\n                </div>\r\n                <div class="col-md-6">\r\n                  <label *ngIf="notaCredito.documentoEntidad[1]">{{notaCredito.documentoEntidad[1].denominacion}}</label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="col-md-4 col-md-offset-2">\r\n              <div class="row">\r\n                <div class="col-md-6">\r\n                  <label>\r\n                    <b>{{\'tipoCambio\' | translate}}:</b>\r\n                  </label>\r\n                </div>\r\n                <div class="col-md-6">\r\n                  <label *ngIf="notaCredito.documentoReferencia[0]">{{notaCredito.documentoReferencia[0].auxiliar1}}</label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <div class="row">\r\n                <div class="col-md-6">\r\n                  <label>\r\n                    <b>{{\'ruc\' | translate}}:</b>\r\n                  </label>\r\n                </div>\r\n                <div class="col-md-6">\r\n                  <label *ngIf="notaCredito.documentoEntidad[1]">{{notaCredito.documentoEntidad[1].documento}}</label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="col-md-4 col-md-offset-2">\r\n              <div class="row">\r\n                <div class="col-md-6">\r\n                  <label>\r\n                    <b>{{\'banco\' | translate}}:</b>\r\n                  </label>\r\n                </div>\r\n                <div class="col-md-6">\r\n                  <label></label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <div class="row">\r\n                <div class="col-md-6">\r\n                  <label>\r\n                    <b>{{\'domicilioFiscal\' | translate}}:</b>\r\n                  </label>\r\n                </div>\r\n                <div class="col-md-6">\r\n                  <label *ngIf="notaCredito.documentoEntidad[1]">{{notaCredito.documentoEntidad[1].direccionFiscal}}</label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="col-md-4 col-md-offset-2">\r\n              <div class="row">\r\n                <div class="col-md-12">\r\n                  <label>{{tipoNotaComprobante | uppercase}}</label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <div class="row">\r\n                <div class="col-md-6">\r\n                  <label>\r\n                    <b>{{\'fechaEmision\' | translate}}:</b>\r\n                  </label>\r\n                </div>\r\n                <div class="col-md-6">\r\n                  <label>{{formatoFechaEmision}}</label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <div class="row">\r\n                <div class="col-md-6">\r\n                  <label>\r\n                    <b>{{\'tipoMoneda\' | translate}}:</b>\r\n                  </label>\r\n                </div>\r\n                <div class="col-md-6">\r\n                  <label>{{notaCredito.moneda}}</label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <div class="row">\r\n                <div class="col-md-6">\r\n                  <label>\r\n                    <b>{{\'motivoSustento\' | translate}}:</b>\r\n                  </label>\r\n                </div>\r\n                <div class="col-md-6">\r\n                  <label>{{notaCredito.motivoComprobante}}</label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <br>\r\n          <app-data-table\r\n            #tablaVistaPrevia\r\n            (iniciarData)="iniciarDataTable($event)"\r\n            [idTabla]="\'tablaVistaPrevia\'"\r\n            [cabecera]="cabecera"\r\n            [atributos]="atributos"\r\n            [ordenarPorElCampo]="ordenarPorElCampo"\r\n          ></app-data-table>\r\n          <br>\r\n          <br>\r\n          <div class="row">\r\n            <div class="col-md-2 col-md-offset-5">\r\n              <label>\r\n                <b>{{\'importeTotal\' | translate}}:</b>\r\n              </label>\r\n            </div>\r\n            <div class="col-md-5">\r\n              <label>{{notaCredito.totalComprobante}}</label>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-2 col-md-offset-5">\r\n              <label>\r\n                <b>{{\'montoEnLetras\' | translate}}:</b>\r\n              </label>\r\n            </div>\r\n            <div class="col-md-5">\r\n              <label>{{totalEnPalabras | uppercase}}</label>\r\n            </div>\r\n          </div>\r\n          <br>\r\n          <br>\r\n        </div>\r\n        <div class="row pull-right">\r\n          <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 border">\r\n            <button name="btnregresar" type="button" class="btn btn-default btn-block" (click)="regresar()">\r\n              {{\'regresar\' | translate}}\r\n            </button>\r\n          </div>\r\n\r\n          <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 border">\r\n            <button type="submit" class="btn btn-default btn-block" (click)="emitir()">\r\n              {{\'emitir\' | translate}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},"./src/app/facturacion-electronica/comprobantes/nota-credito/vista-previa-nota-credito/vista-previa-nota-credito.component.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/@angular/router/@angular/router.es5.js"),i=e("./src/app/facturacion-electronica/general/services/comprobantes/creacionComprobantes.ts"),n=e("./src/app/facturacion-electronica/general/data-table/data-table.component.ts"),s=e("./node_modules/written-number/lib/index.js"),c=(e.n(s),e("./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts"));e.d(o,"a",function(){return p});var l=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},d=this&&this.__metadata||function(t,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)},p=function(){function t(t,o,e,r){this.route=t,this._notaCreditoService=o,this.router=e,this._creacionComprobantes=r,this.notaCredito=this._notaCreditoService.obtenerNotaCreditoPersistencia(),this._notaCreditoService.estaUsandoPersistencia.value?(this.tituloComprobante="",this.cabecera=["cantidad","codigo","descripcion","unidadMedida","valorUnitario","igv","isc","descuento","valorVenta"],this.atributos=["cantidad","codigoItem","descripcionItem","detalle.unidadMedida","precioUnitario","detalle.subtotalIgv","detalle.subtotalIsc","detalle.descuento","precioTotal"],this.ordenarPorElCampo="codigoItem",this.fechaEmision=new Date,this.formatoFechaEmision=this.obtenerFecha(),this.leerParametrosUrl()):this.regresar()}return t.prototype.obtenerFecha=function(){var t=new Date,o=t.getDate(),e=t.getMonth()+1;return t.getFullYear()+"-"+this.ponerCeros(e,2)+e+"-"+this.ponerCeros(o,2)+o},t.prototype.ponerCeros=function(t,o){return"0".repeat(o-t.toString().length)},t.prototype.leerParametrosUrl=function(){var t=this;this.route.queryParams.subscribe(function(o){t.pathRegresarA=o.regresarA})},t.prototype.ngOnInit=function(){var t=this;this.route.data.subscribe(function(o){t.tituloComprobante=o.titulo});var o=this.notaCredito.documentoParametro[0];if(o){var e=JSON.parse(o.json);this.tipoNotaComprobante=e.valor}var r=this.notaCredito.totalComprobante.toString().split("."),a=r[0],i=r[1];this.totalEnPalabras=s(Number(a),{lang:"es"})+" "+this.notaCredito.moneda+" CON "+s(Number(i),{lang:"es"})+" CÉNTIMOS."},t.prototype.ngOnDestroy=function(){},t.prototype.iniciarDataTable=function(t){this.dataTable.insertarData(this.notaCredito.detalleEbiz)},t.prototype.emitir=function(){var t=this;this.fechaEmision=new Date,this.notaCredito.fechaEmision=this.fechaEmision.getTime(),this._creacionComprobantes.crearNotaCredito(this.notaCredito).subscribe(function(o){null!==o&&(t._notaCreditoService.notaCredito.next(t.notaCredito),t.router.navigate(["../../emision",o.id],{relativeTo:t.route}))})},t.prototype.regresar=function(){this.router.navigate(["../"],{relativeTo:this.route})},t}();l([e.i(r.ViewChild)(n.a),d("design:type","function"==typeof(u=void 0!==n.a&&n.a)&&u||Object)],p.prototype,"dataTable",void 0),p=l([e.i(r.Component)({selector:"app-vista-previa-nota-credito",template:e("./src/app/facturacion-electronica/comprobantes/nota-credito/vista-previa-nota-credito/vista-previa-nota-credito.component.html"),styles:[e("./src/app/facturacion-electronica/comprobantes/nota-credito/vista-previa-nota-credito/vista-previa-nota-credito.component.css")]}),d("design:paramtypes",["function"==typeof(m=void 0!==a.b&&a.b)&&m||Object,"function"==typeof(v=void 0!==c.a&&c.a)&&v||Object,"function"==typeof(b=void 0!==a.c&&a.c)&&b||Object,"function"==typeof(h=void 0!==i.a&&i.a)&&h||Object])],p);var u,m,v,b,h},"./src/app/facturacion-electronica/comprobantes/nota-credito/vista-previa-nota-credito/vista-previa-nota-credito.module.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/@angular/common/@angular/common.es5.js"),i=e("./src/app/facturacion-electronica/comprobantes/nota-credito/vista-previa-nota-credito/vista-previa-nota-credito.component.ts"),n=e("./node_modules/@ngx-translate/core/index.js"),s=e("./node_modules/@angular/common/@angular/common/http.es5.js"),c=e("./src/app/facturacion-electronica/general/services/comprobantes/creacionComprobantes.ts"),l=e("./src/app/facturacion-electronica/general/data-table/data-table.module.ts"),d=e("./src/app/facturacion-electronica/general/emision-comprobante/emision-comprobante.module.ts"),p=e("./src/app/facturacion-electronica/general/services/tokenInterceptor.service.ts");e.d(o,"a",function(){return m});var u=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},m=function(){function t(){}return t}();m=u([e.i(r.NgModule)({imports:[a.CommonModule,n.a,l.a,s.a,d.a],declarations:[i.a],exports:[i.a],providers:[c.a,{provide:s.d,useClass:p.a,multi:!0}]})],m)}});