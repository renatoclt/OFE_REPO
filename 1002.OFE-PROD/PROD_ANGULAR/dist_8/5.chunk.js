webpackJsonp([5],{"./src/app/guia/comprador/buscar/guiacompradorbuscar.component.html":function(t,r){t.exports='<div class="main-content">\r\n    <div class="container-fluid">\r\n        <div class="row">\r\n            <div class="col-sm-12">\r\n                <div class="card">\r\n                    <form method="#" action="#">\r\n                        <div class="card-header card-header-text" data-background-color="blue">\r\n                            <h4 class="card-title">Buscar Guías</h4>\r\n                        </div>\r\n                        <div class="card-content">\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Número de Guía\r\n                                        </label>\r\n                                        <input name="nroguia" [(ngModel)]="filtro.nroguia" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Número de Orden de Compra\r\n                                    </label>\r\n                                        <input name="nrooc" [(ngModel)]="filtro.nrooc" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n\r\n                         \r\n\r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Número de ERP\r\n                                            </label>\r\n                                        <input name="nroerp" [(ngModel)]="filtro.nroerp" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Estado</label>\r\n                                        <select [(ngModel)]="filtro.estado" name="estado" class="form-control">\r\n                                            <option value="NONE" selected>TODOS</option>\r\n                                            <option *ngFor="let opt of listEstadoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Fecha Emisión Del</label>\r\n                                        <input type="text" [(ngModel)]="filtro.fechaemisioninicio" name="fechaemisioninicio" class="form-control" datepicker />\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">al</label>\r\n                                        <input type="text" [(ngModel)]="filtro.fechaemisionfin" name="fechaemisionfin" class="form-control" datepicker />\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group">\r\n                                        <button class="btn btn-default" (click)="clicked($event)">Buscar</button>\r\n                                        <button class="btn btn-default" (click)="limpiar($event)">Limpiar</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <nav class="navbar navbar-info" role="navigation">\r\n                                <div class="container-fluid">\r\n                                     <div class="navbar-header">\r\n\r\n                                        <span class="navbar-brand">Resultados</span>\r\n                                    </div>\r\n\x3c!--                                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n                                        <ul class="nav navbar-nav">\r\n\r\n                                        </ul>\r\n                                    </div> !--\x3e\r\n                                </div>\r\n                            </nav>\r\n                            <div class="material-datatables table-responsive">\r\n                                <table id="dtResultados" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th>N° Guía</th>\r\n                                            <th>N° ERP</th>\r\n                                            <th>Estado</th>\r\n                                            <th>Organización Proveedora</th>\r\n\r\n                                            <th>Fecha de Emisión</th>\r\n                                            <th>Fecha de Inicio de Traslado</th>\r\n                                            <th>Fecha Probable de Arribo</th>\r\n                                            <th class="disabled-sorting text-center">Acciones</th>\r\n                                        </tr>\r\n                                    </thead>\r\n\r\n\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},"./src/app/guia/comprador/buscar/guiacompradorbuscar.component.ts":function(t,r,n){"use strict";function o(){c=$("#dtResultados").DataTable({searching:!1,serverSide:!0,ajax:{beforeSend:function(t){d.util.tokenValid()&&(t.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token")),t.setRequestHeader("origen_datos","PEB2M"),t.setRequestHeader("tipo_empresa","C"),t.setRequestHeader("org_id",localStorage.getItem("org_id")),t.setRequestHeader("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key")))},url:s.t,dataSrc:"data",data:function(t){if(""!=d.filtro.nroguia)t.NumeroGuia=d.filtro.nroguia.trim();else if(""!=d.filtro.nrooc)t.NumeroOC=d.filtro.nrooc.trim();else{if(""!=d.filtro.nroerp&&(t.DocumentoMaterial=d.filtro.nroerp.trim()),"NONE"!=d.filtro.estado&&(t.Estado=d.filtro.estado),d.filtro.fechaemisioninicio){var r=DatatableFunctions.ConvertStringToDatetime(d.filtro.fechaemisioninicio);t.FechaEmision_inicio=DatatableFunctions.FormatDatetimeForMicroService(r)}if(d.filtro.fechaemisionfin){var n=DatatableFunctions.AddDayEndDatetime(DatatableFunctions.ConvertStringToDatetime(d.filtro.fechaemisionfin));t.FechaEmision_fin=DatatableFunctions.FormatDatetimeForMicroService(n)}}t.column_names="[CodigoGuia,NumeroGuia,FechaEmision,FechaInicioTraslado,FechaEstimadaArribo,RazonSocialCliente,RazonSocialProveedor,Estado,DocumentoMaterial]"}},columns:[{data:"NumeroGuia",name:"NumeroGuia"},{data:"DocumentoMaterial",name:"DocumentoMaterial"},{data:"Estado",name:"Estado"},{data:"RazonSocialProveedor",name:"RazonSocialProveedor"},{data:"FechaEmision",name:"FechaEmision"},{data:"FechaInicioTraslado",name:"FechaInicioTraslado"},{data:"FechaEstimadaArribo",name:"FechaEstimadaArribo"},{data:"NumeroGuia",name:"NumeroGuia"}],columnDefs:[{className:"text-center",targets:[0,1,2,3,4,5,6,7]},{render:function(t,r,n){return'<div class="text-center"><a href="/guia/comprador/formulario/'+n.CodigoGuia+'" row-id="'+n.CodigoGuia+'"><button class="btn btn-simple btn-info btn-icon edit" rel="tooltip" title="Ver" data-placement="left"><i class="material-icons">visibility</i></button></a></div>'},targets:7}]}),c.on("click",".edit",function(t){var r=$(this).closest("tr"),n=r.find("a").attr("row-id"),o=["/guia/comprador/formulario",n];d.navigate(o),t.preventDefault()})}var a=n("./node_modules/@angular/core/@angular/core.es5.js"),e=n("./node_modules/@angular/router/@angular/router.es5.js"),i=n("./src/app/utils/app.utils.ts"),l=n("./src/app/service/masterservice.ts"),s=n("./src/app/utils/app.constants.ts");n.d(r,"a",function(){return p});var d,c,u=this&&this.__decorate||function(t,r,n,o){var a,e=arguments.length,i=e<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,n,o);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(i=(e<3?a(i):e>3?a(r,n,i):a(r,n))||i);return e>3&&i&&Object.defineProperty(r,n,i),i},b=this&&this.__metadata||function(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)},p=function(){function t(t,r,n){this.router=t,this.route=r,this._masterService=n,this.util=new i.a(this.router,this._masterService)}return t.prototype.navigate=function(t){this.router.navigate(t,{relativeTo:this.route})},t.prototype.validarfiltros=function(){if(d.filtro.nroguia=d.filtro.nroguia.trim(),d.filtro.nrooc=d.filtro.nrooc.trim(),d.filtro.nroerp=d.filtro.nroerp.trim(),""==this.filtro.nroguia&&""==this.filtro.nrooc){if(null==this.filtro.fechaemisioninicio||""==this.filtro.fechaemisioninicio.toString())return swal({text:"Fecha de Emisión inicio es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null==this.filtro.fechaemisionfin||""==this.filtro.fechaemisionfin.toString())return swal({text:"Fecha de Emisión fin es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null!=this.filtro.fechaemisioninicio&&""!=this.filtro.fechaemisioninicio.toString()&&null!=this.filtro.fechaemisionfin&&""!=this.filtro.fechaemisionfin.toString()){var t=DatatableFunctions.ConvertStringToDatetime(d.filtro.fechaemisioninicio),r=DatatableFunctions.ConvertStringToDatetime(d.filtro.fechaemisionfin);if(moment(r).diff(t,"days")>30)return swal({text:'El filtro de búsqueda "Fecha de Emisión" debe tener un rango máximo de 30 días entre la Fecha Inicial y la Fecha Fin.',type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(DatatableFunctions.FormatDatetimeForMicroService(t)>DatatableFunctions.FormatDatetimeForMicroService(r))return swal({text:"El rango de Fechas de Emisión seleccionado no es correcto. La Fecha Inicial es mayor a la Fecha Fin.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1}}return!0},t.prototype.clicked=function(t){this.validarfiltros()&&c.ajax.reload(),t.preventDefault()},t.prototype.limpiar=function(t){this.filtroDefecto(),setTimeout(function(){$("input").each(function(){$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")})},200),t.preventDefault()},t.prototype.filtroDefecto=function(){var t=new Date;t.setDate(t.getDate()-30),this.filtro={nroguia:"",nrooc:"",nroerp:"",fechaemisioninicio:t,fechaemisionfin:new Date,estado:"NONE",publicada:!0}},t.prototype.ngOnInit=function(){this.filtroDefecto(),this.util.listEstadoGuia(function(t){d.listEstadoCombo=t}),d=this},t.prototype.ngAfterViewInit=function(){o()},t}();p=u([n.i(a.Component)({selector:"guiacompradorbuscar-cmp",template:n("./src/app/guia/comprador/buscar/guiacompradorbuscar.component.html")}),b("design:paramtypes",["function"==typeof(g=void 0!==e.b&&e.b)&&g||Object,"function"==typeof(f=void 0!==e.c&&e.c)&&f||Object,"function"==typeof(v=void 0!==l.a&&l.a)&&v||Object])],p);var g,f,v},"./src/app/guia/comprador/formulario/guiacompradorformulario.component.html":function(t,r){t.exports='<div class="main-content">\r\n  <div class="container-fluid">\r\n    <div class="row">\r\n      <div class="col-sm-12">\r\n        <div class="card">\r\n          <form method="#" action="#">\r\n            <div class="card-header card-header-text" data-background-color="blue">\r\n              <h4 class="card-title">Guía</h4>\r\n            </div>\r\n            <div class="card-content">\r\n              <div class="card-header">\r\n                <h4 class="card-title">Datos Generales</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="row">\r\n                      <div class="col-sm-5">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">N° Guía</label>\r\n                          <input type="text" name="nroguia1" [disabled]="toggleButton" [(ngModel)]="guia.nroguia1" class="form-control">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-7">\r\n                        <div class="form-group label-floating">\r\n                          <input type="text" name="nroguia2" [disabled]="toggleButton" [(ngModel)]="guia.nroguia2" class="form-control">\r\n\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                <div class="row">\r\n\r\n\r\n\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Organización Compradora \r\n                      </label>\r\n                      <input name="razonsocialcliente" type="text" [disabled]="toggleButton" [(ngModel)]="guia.razonsocialcliente" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Organización Proveedora\r\n                        </label>\r\n                      <input name="razonsocialproveedor" type="text" [disabled]="toggleButton" [(ngModel)]="guia.razonsocialproveedor" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">RUC Organización Compradora\r\n                                              </label>\r\n                      <input name="ruccliente" type="text" [disabled]="toggleButton" [(ngModel)]="guia.ruccliente" class="form-control">\r\n\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">RUC Organización Proveedora\r\n                      </label>\r\n                      <input name="rucproveedor" [disabled]="toggleButton" type="text" [(ngModel)]="guia.rucproveedor" class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n\r\n\r\n                </div>\r\n                <div class="row">\r\n\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Motivo de Guía \r\n                                          </label>\r\n                      <select id="motivoguia" name="motivoguia" class="form-control" [(ngModel)]="guia.motivoguia" [disabled]="toggleButton">\r\n                                            <option Value=""></option>\r\n                                            <option *ngFor="let opt of listMotivoGuiaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                                          </select>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Número ERP de Documento Material \r\n                                          </label>\r\n                      <input name="nroerpdocmaterial" type="text" [disabled]="toggleButton" [(ngModel)]="guia.nroerpdocmaterial" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                        <label class="control-label">Estado Web</label>\r\n                        <select id="estado" [(ngModel)]="guia.estado" name="estado" class="form-control" [disabled]="toggleButton">\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listEstadoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha de Emisión\r\n                          </label>\r\n                      <input name="fechaemision" [(ngModel)]="guia.fechaemision" datepicker disabled type="text" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha de Inicio de Traslado\r\n                          </label>\r\n                      <input name="fechainiciotraslado" [(ngModel)]="guia.fechainiciotraslado" datepicker disabled type="text" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha Probable de Arribo \r\n                          </label>\r\n                      <input name="fechaprobablearribo" [(ngModel)]="guia.fechaprobablearribo" datepicker disabled type="text" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="row">\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Observaciones\r\n                      </label>\r\n                      <textarea name="observaciones" [(ngModel)]="guia.observaciones" class="form-control" [disabled]="toggleButton"></textarea>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="card-header">\r\n                <h4 class="card-title">Datos Transportista</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="row">\r\n                      <div class="col-sm-5">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Tipo Documento</label>\r\n                          <select id="tipodoctransporte" name="tipodoctransporte" class="form-control" [(ngModel)]="guia.tipodoctransporte" [disabled]="toggleButton">\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listTipoDocIdentidad" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                            \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-7">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">N° Documento</label>\r\n                          <input type="text" name="rucdnitransporte" [(ngModel)]="guia.rucdnitransporte" class="form-control" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Razon Social / Nombre\r\n                      </label>\r\n                      <input name="razonsocialnombretransporte" [(ngModel)]="guia.razonsocialnombretransporte" type="text" class="form-control"\r\n                        [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">N° Placa</label>\r\n                      <input type="text" name="placatransporte" class="form-control" [(ngModel)]="guia.placatransporte" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Dirección\r\n                      </label>\r\n                      <input name="direcciontransporte" type="text" class="form-control" [(ngModel)]="guia.direcciontransporte" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Código de Reg. MTC</label>\r\n                      <input type="text" name="codigomtctransporte" class="form-control" [(ngModel)]="guia.codigomtctransporte" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Tipo Transporte\r\n                      </label>\r\n                      <select name="tipotransporte" id="tipotransporte" [(ngModel)]="guia.tipotransporte" class="form-control" [disabled]="toggleButton">\r\n                        <option Value=""></option>\r\n                        <option *ngFor="let opt of listTransporteGuiaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="card-header">\r\n                <h4 class="card-title">Datos de la Carga</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Punto Partida</label>\r\n                      <input type="text" name="puntopartida" class="form-control" [(ngModel)]="guia.puntopartida" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Punto LLegada</label>\r\n                      <input type="text" name="puntollegada" class="form-control" [(ngModel)]="guia.puntollegada" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Almancén Destino</label>\r\n                      <input type="text" name="alamcendestino" [(ngModel)]="guia.alamcendestino" class="form-control" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Total Bultos</label>\r\n                      <input type="text" name="totalbultos" [(ngModel)]="guia.totalbultos" class="form-control" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="row">\r\n                      <div class="col-sm-9">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Total Volúmen</label>\r\n                          <input type="text" name="totalvolumen" [(ngModel)]="guia.totalvolumen" class="form-control" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-3">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label"></label>\r\n                          <select id="totalvolumenund" name="totalvolumenund" [(ngModel)]="guia.totalvolumenund" class="form-control" [disabled]="toggleButton">\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listUnidadMedidaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="row">\r\n                      <div class="col-sm-9">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Total Peso Bruto</label>\r\n                          <input type="text" name="totalpesobruto" [(ngModel)]="guia.totalpesobruto" class="form-control" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-3">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label"></label>\r\n                          <select id="totalpesobrutound" name="totalpesobrutound" [(ngModel)]="guia.totalpesobrutound" class="form-control" [disabled]="toggleButton">\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listUnidadMedidaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="row">\r\n                      <div class="col-sm-9">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Tara</label>\r\n                          <input type="text" name="tara" [(ngModel)]="guia.tara" class="form-control" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-3">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label"></label>\r\n                          <select name="totalpesobrutound" [(ngModel)]="guia.totalpesobrutound" class="form-control" disabled>\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listUnidadMedidaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="row">\r\n                      <div class="col-sm-9">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Total Peso Neto</label>\r\n                          <input type="text" name="totalpesoneto" [(ngModel)]="guia.totalpesoneto" class="form-control" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-3">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label"></label>\r\n                          <select name="totalpesobrutound" [(ngModel)]="guia.totalpesobrutound" class="form-control" disabled>\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listUnidadMedidaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="card">\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n                <div class="card-content">\r\n                  <h4 class="card-title">Detalle de Artículos</h4>\r\n\r\n                  <div class="material-datatables table-responsive" style="display:block">\r\n                    <table id="dtArticulos" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                      <thead>\r\n                        <tr>\r\n\r\n                          <th>N° Item</th>\r\n                          <th>N° OC</th>\r\n                          <th>N° Item OC</th>\r\n                          <th>Código de Producto</th>\r\n                          <th>Descripción del Producto</th>\r\n                          <th>Und. de Medida del Pedido</th>\r\n                          <th>Cantidad del Pedido</th>\r\n                          <th>Cantidad Recibida</th>\r\n                          <th>Cantidad Despachada</th>\r\n                          <th>Und. de Medida de Despacho</th>\r\n                          <th>Estado</th>\r\n\r\n                        </tr>\r\n                      </thead>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class="row">\r\n                <div class="col-md-12">\r\n                  <div class="card">\r\n                    <div class="card-header card-header-icon" data-background-color="blue">\r\n                      <i class="material-icons">assignment</i>\r\n                    </div>\r\n                    <div class="card-content">\r\n                      <h4 class="card-title">Archivos Adjuntos</h4>\r\n\r\n                      <div class="material-datatables table-responsive">\r\n                        <table id="dtArchivos" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                          <thead>\r\n                            <tr>\r\n\r\n                              <th width="20%">Nombre</th>\r\n                              <th width="60%">Descripción</th>\r\n                              <th class="disabled-sorting text-center" width="20%">Acciones</th>\r\n                            </tr>\r\n                          </thead>\r\n\r\n\r\n                        </table>\r\n                      </div>\r\n                    </div>\r\n                    \x3c!-- end content--\x3e\r\n                  </div>\r\n                  \x3c!--  end card  --\x3e\r\n                </div>\r\n                \x3c!-- end col-md-12 --\x3e\r\n              </div>\r\n            </div>\r\n            <div class="card-footer">\r\n              <button class="btn btn-fill btn-default pull-right" routerLink="/guia/comprador/buscar">Regresar</button>\r\n              <button class="btn btn-fill btn-default pull-right" (click)="print($event)">Imprimir</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n\r\n<div style="display:none">\r\n\r\n  <div id="print-section-guia" style=\'font-family: Arial, Helvetica, sans-serif;color: #000;font-size: 12px;\'>\r\n    <table width="100%" cellpadding="0" cellspacing="0" align="center" bgcolor="#ffffff" style=\'font-family: Arial, Helvetica, sans-serif;color: #000;font-size: 12px;\'>\r\n      <tbody>\r\n        <tr>\r\n          <td align="center">\r\n\r\n\r\n            <table width="900" cellpadding="0" cellspacing="0" border="0" bgcolor="#fff">\r\n              <tbody>\r\n                <tr>\r\n                  <td colspan="2" bgcolor="#fff" align="left" valign="middle">\r\n                    <img src="{{this.baseurl}}assets/img/faces/centenario.png" width="250" style="padding:0; margin:0; border:0; display:none">\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="top" style="font-size: 20px">\r\n                    <b>Guía de Materiales  {{this.guia.nroguia}}</b><br><br>\r\n                  </td>\r\n                </tr>\r\n\r\n\r\n\r\n\r\n              </tbody>\r\n            </table>\r\n\r\n            <table width="900" class="print-table" cellpadding="5" border=\'0\' style="border:1px solid #999;border-collapse: collapse;"\r\n              cellspacing="0" bgcolor="#fff">\r\n              <tbody>\r\n\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 18px">\r\n                    <b>Datos Generales</b>\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;width: 50%">\r\n                    <b>Organización Compradora:</b><br> {{this.guia.razonsocialcliente}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;width: 50%">\r\n                    <b>Organización Proveedora:</b><br> {{this.guia.razonsocialproveedor}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>RUC Organización Compradora:</b><br> {{this.guia.ruccliente}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>RUC Organización Proveedora:</b><br> {{this.guia.rucproveedor}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Motivo de Guía:</b><br> {{this.guia.motivoguia_text}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Numero ERP Documento de Material:</b><br> {{this.guia.nroerpdocmaterial}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Estado Guía:</b><br> {{this.guia.estado_text}}\r\n                  </td>\r\n                </tr>\r\n\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Fecha de Emisión:</b><br> {{this.guia.fechaemision}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Fecha de Inicio de Traslado:</b><br> {{this.guia.fechainiciotraslado}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Fecha Probable de Arribo:</b><br> {{this.guia.fechaprobablearribo}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Observaciones:</b><br> {{this.guia.observaciones}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 18px">\r\n                    <b>Datos del Transportista</b>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="3" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Tipo de Documento:</b><br> {{this.guia.tipodoctransporte_text}}\r\n                  </td>\r\n                  <td colspan="3" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Nro. Documento:</b><br> {{this.guia.rucdnitransporte}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Razón Social/Nombre:</b><br> {{this.guia.razonsocialnombretransporte}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Nro. Placa:</b><br> {{this.guia.placatransporte}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Dirección:</b><br> {{this.guia.direcciontransporte}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Código Reg. de MTC:</b><br> {{this.guia.codigomtctransporte}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Tipo de Transporte:</b><br> {{this.guia.tipotransporte_text}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 18px">\r\n                    <b>Datos de la Carga</b>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Punto de Partida:</b><br> {{this.guia.puntopartida}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Punto de Llegada:</b><br> {{this.guia.puntollegada}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Almacen Destino:</b><br> {{this.guia.alamcendestino}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Total Bultos:</b><br> {{this.guia.totalbultos}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Total Volumen:</b><br> {{this.guia.totalvolumen}}{{this.guia.totalvolumenund_text}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Total Peso Bruto:</b><br> {{this.guia.totalpesobruto}}{{this.guia.totalpesobrutound_text}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Tara:</b><br> {{this.guia.tara}}{{this.guia.totalpesobrutound_text}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Total Peso Neto:</b><br> {{this.guia.totalpesoneto}}{{this.guia.totalpesobrutound_text}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 18px">\r\n                    <b>Detalle de los Artículos</b>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n\r\n              <tr style="border:1px solid #999;">\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>No. Item</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>No. OC</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>No. Item OC</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Código de Producto</b>\r\n                </td>\r\n                <td colspan="2" bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Descripción del Producto</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Und. de Medida del Pedido</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Cantidad del Pedido</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Cantidad Recibida</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Cantidad Despachada</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Und. de Medida de Despacho</b>\r\n                </td>\r\n\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Estado</b>\r\n                </td>\r\n\r\n\r\n\r\n              </tr>\r\n              <tr *ngFor="let row of this.guia.articulos" ng-class="trhighlight">\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  {{row.nroitem}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.nrooc}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.nroitemoc}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.codproducto}}\r\n                </td>\r\n                <td colspan="2" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                  {{row.descproducto}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.unidadmedida}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.cantidadpedido}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.cantidadrecibida}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.cantidaddespachada}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.unidadmedidadespacho}}\r\n                </td>\r\n\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.estado}}\r\n                </td>\r\n              </tr>\r\n\r\n            </table>\r\n\r\n\r\n\r\n\r\n\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <br>\r\n\r\n  </div>\r\n\r\n\r\n</div>'},"./src/app/guia/comprador/formulario/guiacompradorformulario.component.ts":function(t,r,n){"use strict";function o(){p=$("#dtArticulos").DataTable({ajax:function(t,r,n){r({data:b.guia.articulos})},columns:[{data:"nroitem"},{data:"nrooc"},{data:"nroitemoc"},{data:"codproducto"},{data:"descproducto"},{data:"unidadmedida"},{data:"cantidadpedido"},{data:"cantidadrecibida"},{data:"cantidaddespachada"},{data:"unidadmedidadespacho"},{data:"estado"}],columnDefs:[{className:"text-center",targets:[0,1,2,3,4,5,6,7,8,9,10]}]})}var a=n("./node_modules/@angular/router/@angular/router.es5.js"),e=n("./node_modules/@angular/core/@angular/core.es5.js"),i=n("./src/app/model/guia.ts"),l=n("./src/app/service/masterservice.ts"),s=n("./src/app/service/guiaservice.ts"),d=n("./src/app/utils/app.utils.ts"),c=n("./src/app/service/adjuntoservice.ts"),u=n("./src/assets/js/plugins/jquery.PrintArea.js");n.n(u);n.d(r,"a",function(){return h});var b,p,g,f,v=this&&this.__decorate||function(t,r,n,o){var a,e=arguments.length,i=e<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,n,o);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(i=(e<3?a(i):e>3?a(r,n,i):a(r,n))||i);return e>3&&i&&Object.defineProperty(r,n,i),i},m=this&&this.__metadata||function(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)},h=function(){function t(t,r,n,o,a){this.router=r,this._masterService=n,this._dataServiceAdjunto=o,this._dataService=a,this.id="0",this.toggleButton=!0,this.activatedRoute=t,this.util=new d.a(this.router,this._masterService),this.guia=new i.a,this.baseurl=$("#baseurl").attr("href")}return t.prototype.print=function(t){b.guia.motivoguia_text=$("#motivoguia option:selected").text(),b.guia.estado_text=$("#estado option:selected").text(),b.guia.tipodoctransporte_text=$("#tipodoctransporte option:selected").text(),b.guia.tipotransporte_text=$("#tipotransporte option:selected").text(),b.guia.totalvolumenund_text=$("#totalvolumenund option:selected").text(),b.guia.totalpesobrutound_text=$("#totalpesobrutound option:selected").text(),setTimeout(function(){$("div#print-section-guia").printArea({popTitle:"GUIA",mode:"iframe",popClose:!1})},200)},t.prototype.ngOnInit=function(){var t=this;b=this,this.activatedRoute.params.subscribe(function(r){t.id=r.id}),"0"!=this.id?(this.toggleButton=!0,$("#btnAgregarItemOC").addClass("disabled"),$("#btnEliminarItemOC").addClass("disabled")):this.toggleButton=!1,this.guia=new i.a,this.util.listUnidadMedida(function(t){b.listUnidadMedidaCombo=t}),this.util.listMotivoGuia(function(t){b.listMotivoGuiaCombo=t}),this.util.listTransporteGuia(function(t){b.listTransporteGuiaCombo=t}),this.util.listTipoDocIdentidad(function(t){b.listTipoDocIdentidad=t}),this.util.listEstadoGuia(function(t){b.listEstadoCombo=t})},t.prototype.ngAfterViewInit=function(){var t=this;this._dataService.obtener(this.id).subscribe(function(r){t.guia=r,setTimeout(function(){$("input").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("select").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("textarea").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),p.ajax.reload(),g.ajax.reload()},100)},function(t){return console.log(t)},function(){}),g=$("#dtArchivos").on("draw.dt",function(t,r,n){DatatableFunctions.initDatatable(t,r,n,g)}).DataTable({ajax:function(t,r,n){r({data:b.guia.docadjuntos})},columns:[{data:"nombre"},{data:"descripcion"},{data:"id"}],columnDefs:[{className:"text-center",targets:[0,1,2]},{render:function(t,r,n){return'<a class="editar" href="javascript:void(0);" row-id="'+n.id+'"><button class="btn btn-simple btn-info btn-icon download" rel="tooltip" title="Bajar Archivo" data-placement="left"><i class="material-icons">get_app</i></button></a>'},targets:2}]}),g.on("click",".download",function(t){var r=$(this).closest("tr"),n=r.find("a.editar").attr("row-id"),o=b.guia.docadjuntos;f=o.find(function(t){return t.id==n}),b._dataServiceAdjunto.DescargarArchivo(f).subscribe(function(t){saveAs(t,f.nombre)},function(t){return console.log(t)},function(){}),t.preventDefault()}),o()},t.prototype.ngOnChanges=function(t){},t.prototype.habilitarEdicion=function(t){this.toggleButton=!1,$("#btnAgregarItemOC").removeClass("disabled"),$("#btnEliminarItemOC").removeClass("disabled")},t}();h=v([n.i(e.Component)({selector:"guiacompradorformulario-cmp",template:n("./src/app/guia/comprador/formulario/guiacompradorformulario.component.html"),providers:[c.a,s.a,l.a]}),m("design:paramtypes",["function"==typeof(y=void 0!==a.c&&a.c)&&y||Object,"function"==typeof(x=void 0!==a.b&&a.b)&&x||Object,"function"==typeof(w=void 0!==l.a&&l.a)&&w||Object,"function"==typeof(C=void 0!==c.a&&c.a)&&C||Object,"function"==typeof(D=void 0!==s.a&&s.a)&&D||Object])],h);var y,x,w,C,D},"./src/app/guia/guia.module.ts":function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=n("./node_modules/@angular/core/@angular/core.es5.js"),a=n("./node_modules/@angular/router/@angular/router.es5.js"),e=n("./node_modules/@angular/common/@angular/common.es5.js"),i=n("./node_modules/@angular/forms/@angular/forms.es5.js"),l=n("./src/app/utils/utils.module.ts"),s=n("./src/app/guia/proveedor/formulario/guiaproveedorformulario.component.ts"),d=n("./src/app/guia/comprador/formulario/guiacompradorformulario.component.ts"),c=n("./src/app/guia/proveedor/buscar/guiaproveedorbuscar.component.ts"),u=n("./src/app/guia/guia.routing.ts"),b=n("./src/app/directives/datepicker.module.ts"),p=n("./src/app/guia/comprador/buscar/guiacompradorbuscar.component.ts");n.d(r,"GuiaModule",function(){return f});var g=this&&this.__decorate||function(t,r,n,o){var a,e=arguments.length,i=e<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,n,o);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(i=(e<3?a(i):e>3?a(r,n,i):a(r,n))||i);return e>3&&i&&Object.defineProperty(r,n,i),i},f=function(){function t(){}return t}();f=g([n.i(o.NgModule)({imports:[e.CommonModule,a.a.forChild(u.a),i.FormsModule,l.a,b.a],declarations:[s.a,c.a,p.a,d.a]})],f)},"./src/app/guia/guia.routing.ts":function(t,r,n){"use strict";var o=n("./src/app/guia/proveedor/formulario/guiaproveedorformulario.component.ts"),a=n("./src/app/guia/comprador/formulario/guiacompradorformulario.component.ts"),e=n("./src/app/guia/proveedor/buscar/guiaproveedorbuscar.component.ts"),i=n("./src/app/guia/comprador/buscar/guiacompradorbuscar.component.ts"),l=n("./src/app/service/auth-guard.service.ts");n.d(r,"a",function(){return s});var s=[{path:"",children:[{path:"proveedor/formulario/:id",component:o.a,canActivate:[l.a]},{path:"comprador/formulario/:id",component:a.a,canActivate:[l.a]},{path:"proveedor/buscar",component:e.a,canActivate:[l.a]},{path:"comprador/buscar",component:i.a,canActivate:[l.a]}]}]},"./src/app/guia/proveedor/buscar/guiaproveedorbuscar.component.html":function(t,r){t.exports='<div class="main-content">\r\n    <div class="container-fluid">\r\n        <div class="row">\r\n            <div class="col-sm-12">\r\n                <div class="card">\r\n                    <form method="#" action="#">\r\n                        <div class="card-header card-header-text" data-background-color="blue">\r\n                            <h4 class="card-title">Buscar Guías</h4>\r\n                        </div>\r\n                        <div class="card-content">\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Número de Guía\r\n                                        </label>\r\n                                        <input name="nroguia" [(ngModel)]="filtro.nroguia" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Número de Orden de Compra\r\n                                        </label>\r\n                                        <input name="nrooc" [(ngModel)]="filtro.nrooc" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group">\r\n                                        \r\n                                        <div class="togglebutton">\r\n\r\n                                            <label>\r\n                                                <input type="checkbox" [checked]="!filtro.publicada"  (change)="filtro.publicada = !filtro.publicada; filtro.estado=\'NONE\';" > Borrador\r\n                                            </label>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Número de ERP\r\n                                            </label>\r\n                                        <input name="nroerp" [(ngModel)]="filtro.nroerp" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4" *ngIf="filtro.publicada">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Estado</label>\r\n                                        <select [(ngModel)]="filtro.estado" name="estado" class="form-control">\r\n                                                        <option value="NONE" selected>TODOS</option>\r\n                                                        <option *ngFor="let opt of listEstadoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n            \r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Fecha Emisión Del</label>\r\n                                        <input type="text" [(ngModel)]="filtro.fechaemisioninicio" name="fechaemisioninicio" class="form-control" datepicker />\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">al</label>\r\n                                        <input type="text" [(ngModel)]="filtro.fechaemisionfin" name="fechaemisionfin" class="form-control" datepicker/>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group">\r\n                                        <button class="btn btn-default" (click)="clicked($event)">Buscar</button>\r\n                                        <button class="btn btn-default" (click)="limpiar($event)">Limpiar</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <nav class="navbar navbar-info navbar-without-margin" role="navigation">\r\n                                <div class="container-fluid">\r\n                                    <div class="navbar-header">\r\n\r\n                                        <span class="navbar-brand">Resultados</span>\r\n                                    </div>\r\n\r\n                                </div>\r\n                            </nav>\r\n\r\n                            <div class="row">\r\n                                <div class="col-sm-7">\r\n                                </div>\r\n                                <div class="col-sm-5">\r\n                                    <div class="form-group form-group-without-margin">\r\n                                        \r\n                                        <button class="btn btn-default pull-right" *ngIf="!filtro.publicada" (click)="DescartarBorradores($event)">Descartar Borrador</button>\r\n                                        <button class="btn btn-default pull-right" [routerLink]="[\'/guia/proveedor/formulario\', 0]">Registrar Guía</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="material-datatables table-responsive">\r\n                                <table id="dtResultados" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                                    <thead>\r\n                                        <tr>\r\n\r\n                                            <th class="disabled-sorting text-right">\r\n                                                <div class="checkbox text-right">\r\n                                                    <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                                                </div>\r\n                                            </th>\r\n                                            <th>N° Guía</th>\r\n                                            <th>N° ERP</th>\r\n                                            <th>Estado</th>\r\n                                            <th>Organización Compradora</th>\r\n\r\n                                            <th>Fecha de Emisión</th>\r\n                                            <th>Fecha de Inicio de Traslado</th>\r\n                                            <th>Fecha Probable de Arribo</th>\r\n                                            <th class="disabled-sorting text-center">Acciones</th>\r\n                                        </tr>\r\n                                    </thead>\r\n\r\n                                </table>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},"./src/app/guia/proveedor/buscar/guiaproveedorbuscar.component.ts":function(t,r,n){"use strict";function o(){var t=d.A;c.filtro.publicada&&(t=d.t),u=$("#dtResultados").on("draw.dt",function(t,r,n){DatatableFunctions.initDatatable(t,r,n,u)}).DataTable({searching:!1,serverSide:!0,ajax:{beforeSend:function(t){c.util.tokenValid()&&(t.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token")),t.setRequestHeader("origen_datos","PEB2M"),t.setRequestHeader("tipo_empresa","P"),t.setRequestHeader("org_id",localStorage.getItem("org_id")),t.setRequestHeader("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key")))},url:t,dataSrc:"data",data:function(t){if(""!=c.filtro.nroguia)t.NumeroGuia=c.filtro.nroguia.trim();else if(""!=c.filtro.nrooc)t.NumeroOC=c.filtro.nrooc.trim();else{if(""!=c.filtro.nroerp&&(t.DocumentoMaterial=c.filtro.nroerp.trim()),"NONE"!=c.filtro.estado&&(t.Estado=c.filtro.estado),c.filtro.fechaemisioninicio){var r=DatatableFunctions.ConvertStringToDatetime(c.filtro.fechaemisioninicio);t.FechaEmision_inicio=DatatableFunctions.FormatDatetimeForMicroService(r)}if(c.filtro.fechaemisionfin){var n=DatatableFunctions.AddDayEndDatetime(DatatableFunctions.ConvertStringToDatetime(c.filtro.fechaemisionfin));t.FechaEmision_fin=DatatableFunctions.FormatDatetimeForMicroService(n)}}t.column_names="[CodigoGuia,NumeroGuia,FechaEmision,FechaInicioTraslado,FechaEstimadaArribo,RazonSocialCliente,RazonSocialProveedor,Estado,DocumentoMaterial]"}},columns:[{data:"NumeroGuia",name:"NumeroGuia"},{data:"NumeroGuia",name:"NumeroGuia"},{data:"DocumentoMaterial",name:"DocumentoMaterial"},{data:"Estado",name:"Estado"},{data:"RazonSocialCliente",name:"RazonSocialCliente"},{data:"FechaEmision",name:"FechaEmision"},{data:"FechaInicioTraslado",name:"FechaInicioTraslado"},{data:"FechaEstimadaArribo",name:"FechaEstimadaArribo"},{data:"CodigoGuia",name:"CodigoGuia"}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5,6,7]},{render:function(t,r,n){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input class="checkboxGuia" value="'+n.CodigoGuia+'"  type="checkbox" name="optionsCheckboxes"></label></div></div>'},targets:0,orderable:!1},{render:function(t,r,n){var o=c.filtro.publicada?"0":"1",a="Ver/Editar";return c.filtro.publicada&&(a="Ver"),'<div class="text-center"><a href="/guia/proveedor/formulario/'+n.CodigoGuia+'" row-id="'+n.CodigoGuia+'" esBorrador="'+o+'" id_doc="'+n.id_doc+'"><button class="btn btn-simple btn-info btn-icon edit" rel="tooltip" title="'+a+'" data-placement="left"><i class="material-icons">visibility</i></button></a></div>'},targets:8}]}),u.on("click",".edit",function(t){var r=$(this).closest("tr"),n=r.find("a").attr("row-id"),o=r.find("a").attr("esBorrador"),a=r.find("a").attr("id_doc"),e=["/guia/proveedor/formulario",n,{b:o,c:a}];c.navigate(e),t.preventDefault()}),u.on("click",".buscar-propuesta",function(t){var r=$(this).closest("tr"),n=(u.row(r).data(),["/guia/proveedor/buscar"]);c.navigate(n),t.preventDefault()})}var a=n("./node_modules/@angular/core/@angular/core.es5.js"),e=n("./node_modules/@angular/router/@angular/router.es5.js"),i=n("./src/app/utils/app.utils.ts"),l=n("./src/app/service/masterservice.ts"),s=n("./src/app/service/guiaservice.ts"),d=n("./src/app/utils/app.constants.ts");n.d(r,"a",function(){return v});var c,u,b=this&&this.__decorate||function(t,r,n,o){var a,e=arguments.length,i=e<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,n,o);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(i=(e<3?a(i):e>3?a(r,n,i):a(r,n))||i);return e>3&&i&&Object.defineProperty(r,n,i),i},p=this&&this.__metadata||function(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)},g=this&&this.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(a,e){function i(t){try{s(o.next(t))}catch(t){e(t)}}function l(t){try{s(o.throw(t))}catch(t){e(t)}}function s(t){t.done?a(t.value):new n(function(r){r(t.value)}).then(i,l)}s((o=o.apply(t,r||[])).next())})},f=this&&this.__generator||function(t,r){function n(t){return function(r){return o([t,r])}}function o(n){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,e&&(i=e[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(e,n[1])).done)return i;switch(e=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,e=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){s.label=n[1];break}if(6===n[0]&&s.label<i[1]){s.label=i[1],i=n;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(n);break}i[2]&&s.ops.pop(),s.trys.pop();continue}n=r.call(t,s)}catch(t){n=[6,t],e=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,e,i,l,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},v=function(){function t(t,r,n,o){this.router=t,this.route=r,this._masterService=n,this.guiaService=o,this.util=new i.a(this.router,this._masterService)}return t.prototype.navigate=function(t){this.router.navigate(t,{relativeTo:this.route})},t.prototype.validarfiltros=function(){if(this.filtro.nroguia=this.filtro.nroguia.trim(),this.filtro.nrooc=this.filtro.nrooc.trim(),this.filtro.nroerp=this.filtro.nroerp.trim(),""==this.filtro.nroguia&&""==this.filtro.nrooc){if(null==this.filtro.fechaemisioninicio||""==this.filtro.fechaemisioninicio.toString())return swal({text:"Fecha de Emisión inicio es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null==this.filtro.fechaemisionfin||""==this.filtro.fechaemisionfin.toString())return swal({text:"Fecha de Emisión fin es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null!=this.filtro.fechaemisioninicio&&""!=this.filtro.fechaemisioninicio.toString()&&null!=this.filtro.fechaemisionfin&&""!=this.filtro.fechaemisionfin.toString()){var t=DatatableFunctions.ConvertStringToDatetime(c.filtro.fechaemisioninicio),r=DatatableFunctions.ConvertStringToDatetime(c.filtro.fechaemisionfin);if(moment(r).diff(t,"days")>30)return swal({text:'El filtro de búsqueda "Fecha de Emisión" debe tener un rango máximo de 30 días entre la Fecha Inicial y la Fecha Fin.',type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(DatatableFunctions.FormatDatetimeForMicroService(t)>DatatableFunctions.FormatDatetimeForMicroService(r))return swal({text:"El rango de Fechas de Emisión seleccionado no es correcto. La Fecha Inicial es mayor a la Fecha Fin.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1}}return!0},t.prototype.clicked=function(t){this.validarfiltros()&&(this.filtro.publicada?u.ajax.url(d.t).load():u.ajax.url(d.A).load()),t.preventDefault()},t.prototype.limpiar=function(t){this.filtroDefecto(),setTimeout(function(){$("input").each(function(){$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")})},200),t.preventDefault()},t.prototype.filtroDefecto=function(){var t=new Date;t.setDate(t.getDate()-30),this.filtro={nroguia:"",nrooc:"",nroerp:"",fechaemisioninicio:t,fechaemisionfin:new Date,estado:"NONE",publicada:!0}},t.prototype.ngOnInit=function(){this.util.listEstadoGuia(function(t){t=t.filter(function(t){return"GBORR"!=t.valor}),c.listEstadoCombo=t}),c=this,this.filtroDefecto()},t.prototype.ngAfterViewInit=function(){o(),DatatableFunctions.registerCheckAll()},t.prototype.DescartarBorradoresAsincrono=function(t){return g(this,void 0,void 0,function(){var r,n,o,a,e;return f(this,function(i){switch(i.label){case 0:r=0,n=t,i.label=1;case 1:return r<n.length?(o=n[r],a=$(o).val(),[4,this.guiaService.descartarBorrador(a).toPromise()]):[3,4];case 2:e=i.sent(),i.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},t.prototype.DescartarBorradores=function(t){return g(this,void 0,void 0,function(){var r;return f(this,function(n){return t.preventDefault(),r=$("#dtResultados").find(".checkboxGuia:checked"),r.length<=0?(swal({text:"Debe seleccionar una Guia.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1]):(swal({html:"¿Está seguro de descartar las guias seleccionadas?",type:"warning",showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){c.DescartarBorradoresAsincrono(r),setTimeout(function(){u.ajax.reload(),swal({text:"Se descartó las guias seleccionadas.",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"})},1e3)},function(t){}),[2])})})},t}();v=b([n.i(a.Component)({selector:"guiaproveedorbuscar-cmp",template:n("./src/app/guia/proveedor/buscar/guiaproveedorbuscar.component.html"),providers:[s.a,l.a]}),p("design:paramtypes",["function"==typeof(m=void 0!==e.b&&e.b)&&m||Object,"function"==typeof(h=void 0!==e.c&&e.c)&&h||Object,"function"==typeof(y=void 0!==l.a&&l.a)&&y||Object,"function"==typeof(x=void 0!==s.a&&s.a)&&x||Object])],v);var m,h,y,x},"./src/app/guia/proveedor/formulario/guiaproveedorformulario.component.html":function(t,r){t.exports='<div class="main-content">\r\n  <div class="container-fluid">\r\n    <div class="row">\r\n      <div class="col-sm-12">\r\n        <div class="card">\r\n          <form method="#" action="#">\r\n            <div class="card-header card-header-text" data-background-color="blue">\r\n              <h4 class="card-title">Guía</h4>\r\n            </div>\r\n            <div class="card-content">\r\n              <div class="card-header">\r\n                <h4 class="card-title">Datos Generales</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="row">\r\n                      <div class="col-sm-5">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">N° Guía  <span class="star">*</span></label>\r\n                          <input type="text" name="nroguia1" id="nroguia1" pattern="[a-zA-Z0-9\\s]+" [disabled]="toggleButton" maxlength="4" [(ngModel)]="guia.nroguia1" class="form-control">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-7">\r\n                        <div class="form-group label-floating">\r\n                          <input type="text" name="nroguia2" id="nroguia2" pattern="[a-zA-Z0-9\\s]+" [disabled]="toggleButton" maxlength="8" [(ngModel)]="guia.nroguia2" class="form-control">\r\n\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                \r\n\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Organización Compradora <span class="star">*</span>\r\n                              </label>\r\n                      <input name="razonsocialcliente" type="text" [disabled]="true" [(ngModel)]="guia.razonsocialcliente" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Organización Proveedora \r\n                          </label>\r\n                      <input name="razonsocialproveedor" type="text" disabled [(ngModel)]="guia.razonsocialproveedor" class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n\r\n\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="row">\r\n                      <div class="col-sm-8">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">RUC Organización Compradora <span class="star">*</span>\r\n                              </label>\r\n                          <input name="ruccliente" type="text" [disabled]="true" [(ngModel)]="guia.ruccliente" class="form-control">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-4">\r\n                        <button data-toggle="modal" *ngIf="esBorrador==\'1\' || id==\'0\'" data-target="#mdlBuscarCliente" class="btn btn-fill btn-default" (click)="buscarCliente(event)" \r\n                          [disabled]="toggleButton">Buscar</button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">RUC Organización Proveedora\r\n                      </label>\r\n                      <input name="rucproveedor" disabled type="text" [(ngModel)]="guia.rucproveedor" class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n\r\n                </div>\r\n                <div class="row">\r\n\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Motivo de Guía <span class="star">*</span>\r\n                                          </label>\r\n                      <select id="motivoguia" name="motivoguia" class="form-control" [(ngModel)]="guia.motivoguia" [disabled]="toggleButton">\r\n                                            <option value=""></option>\r\n                                            <option *ngFor="let opt of listMotivoGuiaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                                          </select>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4" *ngIf="this.id!=\'0\'">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Número ERP de Documento Material \r\n                                          </label>\r\n                      <input name="nroerpdocmaterial" type="text" disabled [(ngModel)]="guia.nroerpdocmaterial" class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n\r\n                  <div class="col-sm-4" *ngIf="this.id!=\'0\'">\r\n                    <div class="form-group label-floating">\r\n                        <label class="control-label">Estado Web</label>\r\n                        <select id="estado" [(ngModel)]="guia.estado" name="estado" class="form-control" [disabled]="toggleButton">\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listEstadoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha de Emisión <span class="star">*</span>\r\n                          </label>\r\n                      <input name="fechaemision" [(ngModel)]="guia.fechaemision" disabled datepicker type="text" class="form-control toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha de Inicio de Traslado  <span class="star">*</span>\r\n                          </label>\r\n                      <input name="fechainiciotraslado" [(ngModel)]="guia.fechainiciotraslado" disabled datepicker type="text" class="form-control toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha Probable de Arribo  <span class="star">*</span>\r\n                            </label>\r\n                      <input name="fechaprobablearribo" [(ngModel)]="guia.fechaprobablearribo" disabled datepicker type="text" class="form-control toggleButton">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="row">\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Observaciones\r\n                      </label>\r\n                      <textarea name="observaciones" id="observaciones" [(ngModel)]="guia.observaciones" maxlength="500" class="form-control" [disabled]="toggleButton"></textarea>\r\n                      <span class="help-block" id="lblDescLength">500 caracteres máximo (0)</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="card-header">\r\n                <h4 class="card-title">Datos Transportista</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="row">\r\n                      <div class="col-sm-5">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Tipo Documento</label>\r\n                          <select id="tipodoctransporte" name="tipodoctransporte" [(ngModel)]="guia.tipodoctransporte" class="form-control" [disabled]="toggleButton">\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listTipoDocIdentidad" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                            \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-7">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">N° Documento</label>\r\n                          <input type="text" id="rucdnitransporte" name="rucdnitransporte" class="form-control" [(ngModel)]="guia.rucdnitransporte"\r\n                            value="" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Razon Social / Nombre\r\n                      </label>\r\n                      <input name="razonsocialnombretransporte" type="text" class="form-control" [(ngModel)]="guia.razonsocialnombretransporte"\r\n                        [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">N° Placa</label>\r\n                      <input type="text" name="placatransporte" class="form-control" [(ngModel)]="guia.placatransporte" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Dirección\r\n                      </label>\r\n                      <input name="direcciontransporte" type="text" class="form-control" [(ngModel)]="guia.direcciontransporte" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Código de Reg. MTC</label>\r\n                      <input type="text" name="codigomtctransporte" class="form-control" [(ngModel)]="guia.codigomtctransporte" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Tipo Transporte\r\n                      </label>\r\n                      <select id="tipotransporte" name="tipotransporte" [(ngModel)]="guia.tipotransporte" class="form-control" [disabled]="toggleButton">\r\n                        <option Value=""></option>\r\n                        <option *ngFor="let opt of listTransporteGuiaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="card-header">\r\n                <h4 class="card-title">Datos de la Carga</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Punto Partida</label>\r\n                      <input type="text" name="puntopartida" class="form-control" [(ngModel)]="guia.puntopartida" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Punto LLegada</label>\r\n                      <input type="text" name="puntollegada" class="form-control" [(ngModel)]="guia.puntollegada" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Almancén Destino</label>\r\n                      <input type="text" name="alamcendestino" class="form-control" [(ngModel)]="guia.alamcendestino" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Total Bultos</label>\r\n                      <input type="text" name="totalbultos" class="form-control" [(ngModel)]="guia.totalbultos" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="row">\r\n                      <div class="col-sm-9">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Total Volúmen</label>\r\n                          <input type="text" name="totalvolumen" [(ngModel)]="guia.totalvolumen" class="form-control" value="" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-3">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label"></label>\r\n                          <select id="totalvolumenund" name="totalvolumenund" class="form-control" [(ngModel)]="guia.totalvolumenund" [disabled]="toggleButton">\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listUnidadMedidaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="row">\r\n                      <div class="col-sm-9">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Total Peso Bruto</label>\r\n                          <input type="text" name="totalpesobruto" [(ngModel)]="guia.totalpesobruto" class="form-control" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-3">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label"></label>\r\n                          <select id="totalpesobrutound" name="totalpesobrutound" [(ngModel)]="guia.totalpesobrutound" class="form-control toggleButton">\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listUnidadMedidaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="row">\r\n                      <div class="col-sm-9">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Tara</label>\r\n                          <input type="text" name="tara" class="form-control" [(ngModel)]="guia.tara" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-3">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label"></label>\r\n                          <select name="totalpesobrutound" [(ngModel)]="guia.totalpesobrutound" class="form-control toggleButton" disabled>\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listUnidadMedidaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="row">\r\n                      <div class="col-sm-9">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Total Peso Neto</label>\r\n                          <input type="text" name="totalpesoneto" class="form-control" [(ngModel)]="guia.totalpesoneto" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-3">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label"></label>\r\n                          <select name="totalpesobrutound" [(ngModel)]="guia.totalpesobrutound" class="form-control toggleButton" disabled>\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listUnidadMedidaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="card">\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n                <div class="card-content">\r\n                  <h4 class="card-title">Detalle de Artículos</h4>\r\n                  <div class="toolbar" *ngIf="toggleButton==false">\r\n                    <div class="row">\r\n                      <div class="col-sm-12">\r\n                        <nav class="navbar navbar-info" role="navigation">\r\n                          <div class="container-fluid">\r\n                            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n                             \r\n                            </div>\r\n                          </div>\r\n                        </nav>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="row"  *ngIf="toggleButton==false">\r\n                    <div class="col-sm-7">\r\n                    </div>\r\n                    <div class="col-sm-5">\r\n                      <div class="form-group form-group-without-margin">\r\n                          <button id="btnEliminarItemOC" class="btn btn-default pull-right" (click)="eliminarArticulos($event)">Eliminar</button>\r\n                        <button id="btnAgregarItemOC" class="btn btn-default pull-right" (click)="AbrirAgregarOC($event)">Añadir Orden de Compra</button>\r\n                        \r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="material-datatables table-responsive" style="display:block">\r\n                    <table id="dtArticulos" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                      <thead>\r\n                        <tr>\r\n                            <th class="disabled-sorting text-right">\r\n                                <div class="checkbox text-right" *ngIf="esBorrador==\'1\' || id==\'0\'">\r\n                                    <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                                </div>\r\n                            </th>\r\n\r\n                          <th>N° Item</th>\r\n                          <th>N° OC</th>\r\n                          <th>N° Item OC</th>\r\n                          <th>Código de Producto</th>\r\n                          <th>Descripción del Producto</th>                                          \r\n                          <th>Und. de Medida del Pedido</th>\r\n                          <th>Cantidad del Pedido</th>                         \r\n                          <th>Cantidad Recibida</th>\r\n                          <th>Cantidad Despachada<span class="star"  *ngIf="!toggleButton">*</span></th>\r\n                          <th>Und. de Medida de Despacho<span class="star"  *ngIf="!toggleButton">*</span></th>   \r\n                          <th>Estado</th>\r\n\r\n                        </tr>\r\n                      </thead>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class="row">\r\n                <div class="col-md-12">\r\n                  <div class="card">\r\n                    <div class="card-header card-header-icon" data-background-color="blue">\r\n                      <i class="material-icons">assignment</i>\r\n                    </div>\r\n                    <div class="card-content">\r\n                      <h4 class="card-title">Archivos Adjuntos</h4>\r\n                      <div class="toolbar" [hidden]="toggleButton">\r\n                        <div class="row">\r\n                          <div class="col-sm-12">\r\n                            <nav class="navbar navbar-info" role="navigation">\r\n                              <div class="container-fluid">\r\n                                <div class="navbar-header">\r\n                                  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">\r\n                                            <span class="sr-only">Acciones</span>\r\n                                            <span class="icon-bar"></span>\r\n                                            <span class="icon-bar"></span>\r\n                                            <span class="icon-bar"></span>\r\n                                        </button>\r\n                                  <a class="navbar-brand disabled"></a>\r\n                                </div>\r\n                                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n                                  \r\n                                </div>\r\n                              </div>\r\n                            </nav>\r\n\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div class="row"  [hidden]="toggleButton">\r\n                          <div class="col-sm-8">\r\n                          </div>\r\n                          <div class="col-sm-4">\r\n                            <div class="form-group form-group-without-margin">\r\n                                <button  class="btn btn-default pull-right" (click)="eliminarArchivos($event)">Eliminar</button>\r\n                              <button  class="btn btn-default pull-right" data-toggle="modal" (click)="agregarArchivo($event)" data-target="#mdlArchivosAdjuntos">Agregar</button>\r\n                              \r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      <div class="material-datatables table-responsive">\r\n                        <table id="dtArchivos" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                          <thead>\r\n                            <tr>\r\n                              <th class="disabled-sorting text-right">\r\n                                <div class="checkbox text-right" *ngIf="esBorrador==\'1\' || id==\'0\'">\r\n                                  <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                                </div>\r\n                              </th>\r\n                              <th width="20%">Nombre</th>\r\n                              <th width="60%">Descripción</th>\r\n                              <th class="disabled-sorting text-center" width="20%">Acciones</th>\r\n                            </tr>\r\n                          </thead>\r\n\r\n\r\n                        </table>\r\n                      </div>\r\n                    </div>\r\n                    \x3c!-- end content--\x3e\r\n                  </div>\r\n                  \x3c!--  end card  --\x3e\r\n                </div>\r\n                \x3c!-- end col-md-12 --\x3e\r\n              </div>\r\n            </div>\r\n            <div class="card-footer">\r\n\r\n              <button class="btn btn-fill btn-default pull-right" routerLink="/guia/proveedor/buscar">Regresar</button>\r\n              <button class="btn btn-fill btn-default pull-right" *ngIf="id!==\'0\'" (click)="print($event)">Imprimir</button>\r\n              <button class="btn btn-fill btn-default pull-right" [disabled]="toggleButton" *ngIf="esBorrador==\'1\' || id==\'0\'" (click)="enviarGuia($event)">Enviar</button>\r\n              <button class="btn btn-fill btn-default pull-right" [disabled]="toggleButton" (click)="guardarGuia($event)"\r\n                *ngIf="esBorrador==\'1\' || id==\'0\'">Guardar</button>\r\n              <button type="button" class="btn btn-fill btn-default pull-right" (click)="descartarBorrador($event)" *ngIf="id!==\'0\' && esBorrador==\'1\'"\r\n                [disabled]="toggleButton">Descartar Borrador</button>\r\n              <button (click)="habilitarEdicion($event)" class="btn btn-fill btn-default pull-right" *ngIf="id!==\'0\' && esBorrador==\'1\'">Habilitar Edición</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div id="mdlAtributosLista" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Atributos del Detalle</h4>\r\n\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n\r\n          <div class="card-content">\r\n            <div class="row">\r\n              <div class="col-sm-6">\r\n                <div class="form-group label-floating">\r\n                  <label class="control-label">Nro. Item\r\n                          <span class="star"></span>\r\n                        </label>\r\n                  <input name="nroitem" [(ngModel)]="producto.nroitem" required type="text" class="form-control" [disabled]="toggleButton">\r\n                </div>\r\n              </div>\r\n              <div class="col-sm-6">\r\n                <div class="form-group label-floating">\r\n                  <label class="control-label">Descripción del Producto\r\n                          <span class="star"></span>\r\n                        </label>\r\n                  <input name="descproducto" [(ngModel)]="producto.descproducto" required type="text" class="form-control" [disabled]="toggleButton">\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="material-datatables table-responsive">\r\n            <table id="dtAtributos" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n              <thead>\r\n                <tr>\r\n\r\n                  <th>Nombre</th>\r\n                  <th>Operador</th>\r\n                  <th>Valor</th>\r\n                  <th>Unidad</th>\r\n\r\n\r\n                </tr>\r\n              </thead>\r\n\r\n\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n  <div id="mdlBuscarCliente" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog modal-lg" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Buscar Organización Compradora</h4>\r\n\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Nombre de Organización Compradora</label>\r\n                <input type="text" id="txtBuscarNroOC" name="txtBuscarNroOC" [(ngModel)]="filtroCliente.razonsocial" class="form-control"\r\n                  value="" [disabled]="toggleButton">\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n\r\n            <div class="col-sm-9">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">RUC</label>\r\n                <input type="text" id="txtBuscarCodCliente" [(ngModel)]="filtroCliente.ruc" name="txtBuscarCodCliente" class="form-control"\r\n                  value="" [disabled]="toggleButton">\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-3">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label"></label>\r\n                <button type="button" class="btn btn-default" (click)="buscarClienteDT($event)">Buscar</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="material-datatables table-responsive">\r\n                <table id="dtBuscarCliente" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                  <thead>\r\n                    <tr>\r\n                      <th class="disabled-sorting text-right">\r\n\r\n                      </th>\r\n                      <th style="width:50%">Nombre de Organización Compradora</th>\r\n                      <th style="width:50%">RUC</th>\r\n                    </tr>\r\n                  </thead>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" (click)="SeleccionarCliente($event)">Seleccionar</button>\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n  <div id="mdlOrdenesCompra" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog modal-lg" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Buscar Orden de Compra</h4>\r\n\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-sm-6">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Nro. O.C.</label>\r\n                <input type="text" name="nroordencompra" class="form-control" [(ngModel)]="filtrooc.nroordencompra" [disabled]="toggleButton">\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-6" >\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Estado</label>\r\n                <select name="estado" class="form-control" [(ngModel)]="filtrooc.estado" disabled>\r\n      \r\n\r\n                  <option value="NONE">TODOS</option>\r\n                  <option *ngFor="let optEstado of listEstadoOCCombo" value="{{optEstado.valor}}"> {{optEstado.desc}} </option>           \r\n\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-5">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Creada/Enviada después de</label>\r\n\r\n                <input type="text" [(ngModel)]="filtrooc.fechacreacioninicio" name="fechacreacioninicio" class="form-control" datepicker\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-5">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Creada/Enviada antes de</label>\r\n\r\n                <input type="text" [(ngModel)]="filtrooc.fechacreacionfin" name="fechacreacionfin" class="form-control" datepicker />\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-2">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label"></label>\r\n                <button type="button" class="btn btn-default" (click)="BuscarOCClick($event)">Buscar</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="material-datatables table-responsive">\r\n                <table id="dtBuscarOC" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                  <thead>\r\n                    <tr>\r\n                      <th class="disabled-sorting text-right">\r\n                        <div class="checkbox text-right">\r\n                          <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                        </div>\r\n                      </th>\r\n                      <th style="width:10%">Nro. O.C.</th>\r\n                      <th style="width:15%">Organización Compradora</th>\r\n                      <th style="width:15%">Usuario Comprador</th>\r\n                      <th style="width:10%">Atención A</th>\r\n                      <th style="width:10%">Estado</th>\r\n                      <th style="width:10%">Versión</th>\r\n                      <th style="width:10%">Total</th>\r\n                      <th style="width:10%">Fecha Creación</th>\r\n                    </tr>\r\n                  </thead>\r\n\r\n\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" (click)="AgregarArticulosOC($event)">Añadir</button>\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n\r\n  <div id="mdlArchivosAdjuntos" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Archivo Adjunto</h4>\r\n                  \x3c!--<h4 class="modal-title">Archivo Adjunto</h4>--\x3e\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="form-group">\r\n                <div class="fileinput fileinput-new input-group" data-provides="fileinput">\r\n                  <div class="form-control" data-trigger="fileinput">\r\n                    <i class="material-icons fileinput-exists">attach_file</i>\r\n                    <span class="fileinput-filename"></span>\r\n                  </div>\r\n                  <span class="input-group-addon btn btn-default btn-file">\r\n                      <span class="fileinput-new">Seleccionar Archivo</span>\r\n                  <span class="fileinput-exists">Seleccionar Archivo</span>\r\n                  <input type="file" name="..." (change)="onChangeFile($event)" id="txtArchivo">\r\n                  <a href="#" class="input-group-addon btn btn-default fileinput-exists" style="display:none" data-dismiss="fileinput" id="btnEliminarAA">Remover</a>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n\r\n            <div class="col-sm-12">\r\n              <div class="form-group label-floating">\r\n                <textarea name="descripcion" placeholder="Descripción" [(ngModel)]="archivo.descripcion" class="form-control" rows="4" [disabled]="toggleButton"></textarea>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n        <div class="row" *ngIf="ProgressUpload">\r\n          <div class="col-sm-4">\r\n          </div>\r\n          <div class="col-sm-4">\r\n            <img src="assets/img/progress.gif" style="padding:0; margin:0; border:0">\r\n\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" data-dismiss="modal" [disabled]="ProgressUpload">Cerrar</button>\r\n          <button type="button" class="btn btn-default" (click)="grabarArchivoAdjunto()" [disabled]="ProgressUpload">Adjuntar</button>\r\n\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n</div>\r\n\r\n\r\n<div style="display:none">\r\n\r\n  <div id="print-section-guia" style=\'font-family: Arial, Helvetica, sans-serif;color: #000;font-size: 12px;\'>\r\n    <table width="100%" cellpadding="0" cellspacing="0" align="center" bgcolor="#ffffff" style=\'font-family: Arial, Helvetica, sans-serif;color: #000;font-size: 12px;\'>\r\n      <tbody>\r\n        <tr>\r\n          <td align="center">\r\n\r\n\r\n            <table width="900" cellpadding="0" cellspacing="0" border="0" bgcolor="#fff">\r\n              <tbody>\r\n                <tr>\r\n                  <td colspan="2" bgcolor="#fff" align="left" valign="middle">\r\n                    <img src="{{this.baseurl}}assets/img/faces/centenario.png" width="250" style="padding:0; margin:0; border:0; display:none">\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="top" style="font-size: 20px">\r\n                    <b>Guía de Materiales  {{this.guia.nroguia}}</b><br><br>\r\n                  </td>\r\n                </tr>\r\n\r\n\r\n\r\n\r\n              </tbody>\r\n            </table>\r\n\r\n            <table width="900" class="print-table" cellpadding="5" border=\'0\' style="border:1px solid #999;border-collapse: collapse;"\r\n              cellspacing="0" bgcolor="#fff">\r\n              <tbody>\r\n\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 18px">\r\n                    <b>Datos Generales</b>\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;width: 50%">\r\n                    <b>Organización Compradora:</b><br> {{this.guia.razonsocialcliente}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;width: 50%">\r\n                    <b>Organización Proveedora:</b><br> {{this.guia.razonsocialproveedor}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>RUC Organización Compradora:</b><br> {{this.guia.ruccliente}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>RUC Organización Proveedora:</b><br> {{this.guia.rucproveedor}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Motivo de Guía:</b><br> {{this.guia.motivoguia_text}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Numero ERP Documento de Material:</b><br> {{this.guia.nroerpdocmaterial}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Estado Guía:</b><br> {{this.guia.estado_text}}\r\n                  </td>\r\n                </tr>\r\n\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Fecha de Emisión:</b><br> {{this.guia.fechaemision}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Fecha de Inicio de Traslado:</b><br> {{this.guia.fechainiciotraslado}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Fecha Probable de Arribo:</b><br> {{this.guia.fechaprobablearribo}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Observaciones:</b><br> {{this.guia.observaciones}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 18px">\r\n                    <b>Datos del Transportista</b>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="3" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Tipo de Documento:</b><br> {{this.guia.tipodoctransporte_text}}\r\n                  </td>\r\n                  <td colspan="3" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Nro. Documento:</b><br> {{this.guia.rucdnitransporte}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Razón Social/Nombre:</b><br> {{this.guia.razonsocialnombretransporte}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Nro. Placa:</b><br> {{this.guia.placatransporte}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Dirección:</b><br> {{this.guia.direcciontransporte}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Código Reg. de MTC:</b><br> {{this.guia.codigomtctransporte}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Tipo de Transporte:</b><br> {{this.guia.tipotransporte_text}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 18px">\r\n                    <b>Datos de la Carga</b>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Punto de Partida:</b><br> {{this.guia.puntopartida}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Punto de Llegada:</b><br> {{this.guia.puntollegada}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Almacen Destino:</b><br> {{this.guia.alamcendestino}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Total Bultos:</b><br> {{this.guia.totalbultos}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Total Volumen:</b><br> {{this.guia.totalvolumen}}{{this.guia.totalvolumenund_text}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Total Peso Bruto:</b><br> {{this.guia.totalpesobruto}}{{this.guia.totalpesobrutound_text}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Tara:</b><br> {{this.guia.tara}}{{this.guia.totalpesobrutound_text}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Total Peso Neto:</b><br> {{this.guia.totalpesoneto}}{{this.guia.totalpesobrutound_text}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 18px">\r\n                    <b>Detalle de los Artículos</b>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n\r\n              <tr style="border:1px solid #999;">\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>No. Item</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>No. OC</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>No. Item OC</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Código de Producto</b>\r\n                </td>\r\n                <td colspan="2" bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Descripción del Producto</b>\r\n                </td>\r\n\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Und. de Medida del Pedido</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Cantidad del Pedido</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Cantidad Recibida</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Cantidad Despachada</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Und. de Medida de Despacho</b>\r\n                </td>\r\n\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Estado</b>\r\n                </td>\r\n\r\n              </tr>\r\n              <tr *ngFor="let row of this.guia.articulos" ng-class="trhighlight">\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  {{row.nroitem}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.nrooc}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.nroitemoc}}\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  {{row.codproducto}}\r\n                </td>\r\n                <td colspan="2" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                  {{row.descproducto}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.unidadmedida}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.cantidadpedido}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.cantidadrecibida}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.cantidaddespachada}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.unidadmedidadespacho}}\r\n                </td>\r\n              \r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.estado}}\r\n                </td>\r\n              </tr>\r\n           \r\n            </table>\r\n\r\n\r\n\r\n\r\n\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <br>\r\n\r\n  </div>\r\n</div>'},"./src/app/guia/proveedor/formulario/guiaproveedorformulario.component.ts":function(t,r,n){"use strict";function o(){w.listUnidadMedidaPesoCombo?i():setTimeout(function(){o()},200)}function a(){D=$("#dtBuscarCliente").DataTable({searching:!1,serverSide:!0,ajax:{beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token")),t.setRequestHeader("origen_datos","PEB2M"),t.setRequestHeader("tipo_empresa","P"),t.setRequestHeader("org_id",localStorage.getItem("org_id")),t.setRequestHeader("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key"))},url:x.s,dataSrc:"data",data:function(t){""!=w.filtroCliente.razonsocial&&(t.RazonSocial=w.filtroCliente.razonsocial),""!=w.filtroCliente.ruc&&(t.Ruc=w.filtroCliente.ruc),t.column_names="IdOrganizacion,RazonSocial,Ruc"}},columns:[{data:"IdOrganizacion"},{data:"RazonSocial"},{data:"Ruc"}],columnDefs:[{className:"text-center",targets:[1,2]},{render:function(t,r,n){return'<div class="text-right" height="100%"><div class="radio text-right"><label><input type="radio" name="optionsCheckboxes" class="checkboxCliente" ruc="'+n.Ruc+'" razonsocial="'+n.RazonSocial+'" value="'+n.IdOrganizacion+'"></label></div></div>'},targets:0}]})}function e(){S=$("#dtBuscarOC").on("init.dt",function(t,r,n){DatatableFunctions.initDatatable(t,r,n,S)}).DataTable({pageLength:5,searching:!1,serverSide:!0,ajax:{beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token")),t.setRequestHeader("origen_datos","PEB2M"),t.setRequestHeader("tipo_empresa","P"),t.setRequestHeader("org_id",localStorage.getItem("org_id")),t.setRequestHeader("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key"))},url:x.l,dataSrc:"data",data:function(t){if(""!=w.filtrooc.nroordencompra&&(t.NumeroOrden=w.filtrooc.nroordencompra),"NONE"!=w.filtrooc.nroordencompra&&(t.EstadoOrden=w.filtrooc.estado),w.filtrooc.fechacreacioninicio){var r=DatatableFunctions.ConvertStringToDatetime(w.filtrooc.fechacreacioninicio);t.FechaRegistroInicio=DatatableFunctions.FormatDatetimeForMicroService(r)}if(w.filtrooc.fechacreacionfin){var n=DatatableFunctions.AddDayEndDatetime(DatatableFunctions.ConvertStringToDatetime(w.filtrooc.fechacreacionfin));t.FechaRegistroFin=DatatableFunctions.FormatDatetimeForMicroService(n)}t.TipoOrden="M",t.org_idComprador=w.guia.idorgcompradora,t.column_names="CodigoOrden,NumeroOrden,Fecha,EstadoOrden,TipoOrden,AtencionA,NITComprador,UsuarioComprador,NombreComprador,NITVendedor,UsuarioProveedor,NombreVendedor,ValorTotal,MonedaOrden,FechaCreacion,NumeroRfq,Version,FechaRegistro"}},columns:[{data:"CodigoOrden",name:"CodigoOrden"},{data:"NumeroOrden",name:"NumeroOrden"},{data:"NombreComprador",name:"NombreComprador"},{data:"UsuarioComprador",name:"UsuarioComprador"},{data:"AtencionA",name:"AtencionA"},{data:"EstadoOrden",name:"EstadoOrden"},{data:"Version",name:"Version"},{data:"ValorTotal",name:"ValorTotal"},{data:"FechaRegistro",name:"FechaRegistro"}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5,6,7,8]},{render:function(t,r,n){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" name="optionsCheckboxes" numOC="'+n.NumeroOrden+'" value="'+n.CodigoOrden+'" class="checkboxOC"></label></div></div>'},targets:0},{render:function(t,r,n){return DatatableFunctions.ParseFieldHtml(n.AtencionA)},targets:4},{render:function(t,r,n){return n.MonedaOrden+" "+DatatableFunctions.FormatNumber(n.ValorTotal)},targets:7}]})}function i(){B=$("#dtArticulos").on("init.dt",function(t,r,n){DatatableFunctions.initDatatable(t,r,n,B)}).DataTable({ajax:function(t,r,n){r({data:w.guia.articulos})},columns:[{data:"nroitem"},{data:"nroitem"},{data:"nrooc"},{data:"nroitemoc"},{data:"codproducto"},{data:"descproducto"},{data:"unidadmedida"},{data:"cantidadpedido"},{data:"cantidadrecibida"},{data:"cantidaddespachada"},{data:"unidadmedidadespacho"},{data:"estado"}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5,6,7,8,9,10,11]},{render:function(t,r,n){return"1"==w.esBorrador||"0"==w.id?'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" value="'+n.nroitem+'" name="optionsCheckboxes" class="checkboxArticulos"></label></div></div>':""},targets:0},{render:function(t,r,n){return n.codproducto},targets:4},{render:function(t,r,n){var o="disabled";return w.toggleButton||(o=""),'<input name="cantidaddespachada" value="'+n.cantidaddespachada+'" nroitem="'+n.nroitem+'" type="text" class="toggleButton cantidaddespachada'+n.nroitem+' cantidaddespachada form-control text-center dt-text" '+o+">"},targets:9}]}),B.on("change",".cantidaddespachada",function(t){var r=$(this).attr("nroitem"),n=w.guia.articulos.find(function(t){return t.nroitem==r});n.cantidaddespachada=$(this).val(),$(".cantidaddespachada"+r).val(n.cantidaddespachada)}),B.on("change",".unidadmedidadespacho",function(t){var r=$(this).attr("nroitem"),n=w.guia.articulos.find(function(t){return t.nroitem==r});n.unidadmedidadespacho=$(this).val(),$(".unidadmedidadespacho"+r).val(n.unidadmedidadespacho)}),B.on("click",".atributos",function(t){var r=$(this).closest("tr"),n=r.find("a").attr("row-id"),o=w.guia.articulos.find(function(t){return t.nroitem==n});w.producto=o,setTimeout(function(){C.ajax.reload(),$("#mdlAtributosLista").modal("show"),$("input").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("select").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("textarea").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")})},500),t.preventDefault()}),B.on("click",".remove",function(t){var r=$(this).closest("tr"),n=r.find("a").attr("row-id");swal({text:"¿Desea eliminar el artículo seleccionado?",type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){var t=w.guia.articulos,r=t.filter(function(t){return t.nroitem!=n});w.guia.articulos=JSON.parse(JSON.stringify(d(r))),setTimeout(function(){B.ajax.reload()},500)},function(t){}),t.preventDefault()}),C=$("#dtAtributos").DataTable({ajax:function(t,r,n){r({data:w.producto.atributos})},columns:[{data:"nombre"},{data:"operador"},{data:"valor"},{data:"unidad"}],columnDefs:[{className:"text-center",targets:[0,1,2,3]}]}),l()}function l(){w.toggleButton||setTimeout(function(){if(B){B.column(0).visible(!0)}},200)}function s(){w.toggleButton||setTimeout(function(){if(O){O.column(0).visible(!0)}},200)}function d(t){for(var r=1,n=0,o=t;n<o.length;n++){o[n].nroitem=r++}return t}var c=n("./node_modules/@angular/router/@angular/router.es5.js"),u=n("./node_modules/@angular/core/@angular/core.es5.js"),b=n("./src/app/model/guia.ts"),p=n("./src/app/model/archivo.ts"),g=n("./src/app/service/masterservice.ts"),f=n("./src/app/service/guiaservice.ts"),v=n("./src/app/service/ordencompraservice.ts"),m=n("./src/app/service/adjuntoservice.ts"),h=n("./src/app/utils/app.utils.ts"),y=n("./src/assets/js/plugins/jquery.PrintArea.js"),x=(n.n(y),n("./src/app/utils/app.constants.ts"));n.d(r,"a",function(){return _});var w,C,D,B,S,O,F,A=this&&this.__decorate||function(t,r,n,o){var a,e=arguments.length,i=e<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,n,o);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(i=(e<3?a(i):e>3?a(r,n,i):a(r,n))||i);return e>3&&i&&Object.defineProperty(r,n,i),i},M=this&&this.__metadata||function(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)},E=this&&this.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(a,e){function i(t){try{s(o.next(t))}catch(t){e(t)}}function l(t){try{s(o.throw(t))}catch(t){e(t)}}function s(t){t.done?a(t.value):new n(function(r){r(t.value)}).then(i,l)}s((o=o.apply(t,r||[])).next())})},T=this&&this.__generator||function(t,r){function n(t){return function(r){return o([t,r])}}function o(n){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,e&&(i=e[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(e,n[1])).done)return i;switch(e=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,e=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){s.label=n[1];break}if(6===n[0]&&s.label<i[1]){s.label=i[1],i=n;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(n);break}i[2]&&s.ops.pop(),s.trys.pop();continue}n=r.call(t,s)}catch(t){n=[6,t],e=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,e,i,l,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},_=function(){function t(t,r,n,o,a,e){this.router=r,this._masterService=n,this._dataServiceAdjunto=o,this._dataService=a,this._dataServiceOC=e,this.id="0",this.esBorrador="0",this.id_doc="",this.toggleButton=!0,this.ProgressUpload=!1,this.filtroOCDefecto(),this.filtroClienteDefecto(),this.activatedRoute=t,this.util=new h.a(this.router,this._masterService),this.guia=new b.a,this.guiaOriginal=new b.a,this.archivo=new p.a,this.producto=new b.b,this.baseurl=$("#baseurl").attr("href")}return t.prototype.navigate=function(t){this.router.navigate(t,{relativeTo:this.activatedRoute})},t.prototype.print=function(t){w.guia.motivoguia_text=$("#motivoguia option:selected").text(),w.guia.estado_text=$("#estado option:selected").text(),w.guia.tipodoctransporte_text=$("#tipodoctransporte option:selected").text(),w.guia.tipotransporte_text=$("#tipotransporte option:selected").text(),w.guia.totalvolumenund_text=$("#totalvolumenund option:selected").text(),w.guia.totalpesobrutound_text=$("#totalpesobrutound option:selected").text(),setTimeout(function(){$("div#print-section-guia").printArea({popTitle:"GUIA",mode:"iframe",popClose:!1})},200)},t.prototype.validardatos=function(t,r){if(void 0===r&&(r=!1),""==this.guia.nroguia.trim()||"-"==this.guia.nroguia.trim())return swal({text:"Nro. Guia es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;var n=/^[a-z0-9]+$/i,o=this.guia.nroguia1.trim()+this.guia.nroguia2.trim();if(!n.test(o))return swal({text:"Nro. Guia solo puede contener caracteres alfanuméricos.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null==this.guia.razonsocialcliente||""==this.guia.razonsocialcliente.trim())return swal({text:"Organización Compradora es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null==this.guia.ruccliente||""==this.guia.ruccliente.trim())return swal({text:"RUC Organización Compradora es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null==this.guia.motivoguia||""==this.guia.motivoguia.trim())return swal({text:"Motivo Guia es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null==this.guia.fechaemision||""==this.guia.fechaemision.toString())return swal({text:"Fecha Emisión es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null==this.guia.fechainiciotraslado||""==this.guia.fechainiciotraslado.toString())return swal({text:"Fecha Traslado es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null==this.guia.fechaprobablearribo||""==this.guia.fechaprobablearribo.toString())return swal({text:"Fecha Probable Arribo es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;var a=DatatableFunctions.ConvertStringToDatetime(this.guia.fechaemision),e=DatatableFunctions.ConvertStringToDatetime(this.guia.fechainiciotraslado),i=DatatableFunctions.ConvertStringToDatetime(this.guia.fechaprobablearribo);if(a>e)return swal({text:"La Fecha de Emisión debe ser menor a la Fecha de Inicio de Traslado.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(e>i)return swal({text:"La Fecha de Inicio de Traslado debe ser menor a la Fecha Probable de Arribo.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null==this.guia.articulos||0==this.guia.articulos.length)return swal({text:"Al menos un ítem es requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(r)for(var l=0,s=this.guia.articulos;l<s.length;l++){var d=s[l];if(null==d.cantidaddespachada||""==d.cantidaddespachada.toString().trim())return swal({text:"Cantidad Despachada es un campo requerido. Por favor revisar el N° Item "+d.nroitem.toString(),type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1}return!0},t.prototype.enviarGuia=function(t){this.guia.nroguia=this.guia.nroguia1+"-"+this.guia.nroguia2,this.guia.estado="GPUBL",this.validardatos(t,!0)&&this._dataService.agregar(this.guia).subscribe(function(t){console.log("enviarGuia",t),swal({text:"La información ha sido enviada. Confirme el correcto registro de la misma verificando el Número ERP en la columna correspondiente. Espere dicho número para la impresión de su constancia.",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"});var r=["/guia/proveedor/buscar"];w.navigate(r)},function(t){return console.log(t)},function(){})},t.prototype.guardarGuia=function(t){this.guia.nroguia=this.guia.nroguia1+"-"+this.guia.nroguia2,this.guia.estado="GPREI",this.validardatos(t,!1)&&this._dataService.guardar(this.guia).subscribe(function(t){swal({text:"La información ha sido guardada. Confirme el correcto registro de la misma verificando el N° Guía en la columna correspondiente.",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"});var r=["/guia/proveedor/buscar"];w.navigate(r)},function(t){return console.log(t)},function(){})},t.prototype.agregarArchivo=function(t){this.archivo=new p.a,this.archivo.nombreblob=DatatableFunctions.newUUID(),$("#btnEliminarAA").click(),$("#txtArchivo").val(null),t.preventDefault()},t.prototype.descartarBorrador=function(t){swal({html:"¿Está seguro de descartar la guia?",type:"warning",showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){w._dataService.descartarBorrador(w.id).subscribe(function(t){swal({text:"Se descartó la guia.",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Aceptar"}).then(function(){var t=["/guia/proveedor/buscar"];w.navigate(t)},function(t){var r=["/guia/proveedor/buscar"];w.navigate(r)})},function(t){return console.log(t)},function(){})},function(t){}),t.preventDefault()},t.prototype.validarDocumentos=function(){return 0!=$("#txtArchivo").get(0).files.length||(swal({text:"Un archivo es requerido. Por favor completar y volver a intentar!",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1)},t.prototype.filtroClienteDefecto=function(){this.filtroCliente={ruccodigo:"",ruc:"",razonsocial:""}},t.prototype.onChangeFile=function(t){var r=t,n=r.target,o=n.files;this.archivo.contenido=o[0]},t.prototype.grabarArchivoAdjunto=function(){var t=this;if(!this.validarDocumentos())return!1;var r=this.guia.docadjuntos.sort(function(t,r){return t.id<r.id?-1:t.id>r.id?1:0});if(r.length>0){var n=r[r.length-1].id;this.archivo.id=n+1}else this.archivo.id=1;var o=$("#txtArchivo").val();if(o){var a=o.indexOf("\\")>=0?o.lastIndexOf("\\"):o.lastIndexOf("/"),e=o.substring(a);0!==e.indexOf("\\")&&0!==e.indexOf("/")||(e=e.substring(1)),this.archivo.nombre=e}this.ProgressUpload=!0,w._dataServiceAdjunto.AgregarArchivo(this.archivo).subscribe(function(r){t.ProgressUpload=!1,w.archivo.url=w._dataServiceAdjunto.ObtenerUrlDescarga(w.archivo),w.guia.docadjuntos.push(JSON.parse(JSON.stringify(w.archivo))),setTimeout(function(){O.ajax.reload()},500),$("#mdlArchivosAdjuntos").modal("toggle")},function(t){return console.log(t)},function(){})},t.prototype.eliminarArchivos=function(t){t.preventDefault();var r=$("#dtArchivos").find(".checkboxArchivos:checked");if(r.length<=0)return swal({text:"Debe seleccionar un Archivo.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;var n="¿Desea eliminar el archivo seleccionado?";r.length>1&&(n="¿Desea eliminar los archivos seleccionados?"),swal({text:n,type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){for(var t=w.guia.docadjuntos,n=0,o=r;n<o.length;n++){var a=o[n];!function(r){var n=$(r).val();t=t.filter(function(t){return t.id!=n})}(a)}w.guia.docadjuntos=JSON.parse(JSON.stringify(d(t))),setTimeout(function(){O.ajax.reload()},500)},function(t){})},t.prototype.eliminarArticulos=function(t){t.preventDefault();var r=$("#dtArticulos").find(".checkboxArticulos:checked");if(r.length<=0)return swal({text:"Debe seleccionar un Articulo.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;var n="¿Desea eliminar el artículo seleccionado?";r.length>1&&(n="¿Desea eliminar los artículos seleccionados?"),swal({text:n,type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){for(var t=w.guia.articulos,n=0,o=r;n<o.length;n++){var a=o[n];!function(r){var n=$(r).val();t=t.filter(function(t){return t.nroitem!=n})}(a)}w.guia.articulos=JSON.parse(JSON.stringify(d(t))),setTimeout(function(){B.ajax.reload()},500)},function(t){})},t.prototype.AgregarArticulosOC=function(t){return E(this,void 0,void 0,function(){var r,n,o,a,e,i,l,s,d,c,u,b,p,g,f,v,m,h;return T(this,function(y){switch(y.label){case 0:if(t.preventDefault(),r=$("#dtBuscarOC").find(".checkboxOC:checked"),r.length<=0)return swal({text:"Debe seleccionar una Orden de Compra.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];n=function(t){var r,n,a;return T(this,function(e){switch(e.label){case 0:return r=$(t).val(),[4,o._dataServiceOC.obtener(r,"P").toPromise()];case 1:return n=e.sent(),a=w.guia.articulos.filter(function(t){return t.idoc==r}),null!=a&&n.productos.length==a.length?(swal({text:"No se puede volver a agregar la OC #"+$(t).attr("numOC")+".",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,{value:!1}]):[2]}})},o=this,a=0,e=r,y.label=1;case 1:return a<e.length?(i=e[a],[5,n(i)]):[3,4];case 2:if("object"==typeof(l=y.sent()))return[2,l.value];y.label=3;case 3:return a++,[3,1];case 4:s=w.guia.articulos.sort(function(t,r){return t.nroitem<r.nroitem?-1:t.nroitem>r.nroitem?1:0}),d=1,s.length>0&&(d=s[s.length-1].nroitem+1),c=0,u=r,y.label=5;case 5:return c<u.length?(b=u[c],p=$(b).val(),[4,this._dataServiceOC.obtener(p,"P").toPromise()]):[3,8];case 6:for(g=y.sent(),"Material"==g.tipo?w.guia.tipoguia="M":w.guia.tipoguia="S",f=function(t){if(null!=w.guia.articulos.find(function(r){return r.IdProductoOrden==t.IdProductoOrden}))return"continue";w.guia.articulos.push({idoc:p,nroitem:d++,nrooc:g.nroordencompra,nroitemoc:t.posicion,codproducto:t.micodigo,descproducto:t.desccorta,cantidadpedido:t.cantidad,cantidadrecibida:"0",unidadmedida:t.unidad,cantidaddespachada:"",unidadmedidadespacho:t.unidad,atributos:t.atributos,pesoneto:"",unidadmedidapesoneto:t.unidad,estado:t.estado,nroparte:t.micodigo,preciounitario:"",preciototal:"",IdProductoOrden:t.IdProductoOrden,IdTablaUnidad:"",IdRegistroUnidad:"",IdProdxGuia:"",EjercicioGuia:"",destino:"",CodigoGuiaERP:""})},v=0,m=g.productos;v<m.length;v++)h=m[v],f(h);y.label=7;case 7:return c++,[3,5];case 8:return setTimeout(function(){B.ajax.reload(),$("#mdlOrdenesCompra").modal("toggle")},500),[2]}})})},t.prototype.SeleccionarCliente=function(){event.preventDefault();var t=$("#dtBuscarCliente").find(".checkboxCliente:checked");if(t.length<=0)return swal({text:"Debe seleccionar una Organización Compradora.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(t.length>1)return swal({text:"Debe seleccionar solo una Organización Compradora.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;for(var r=0,n=t;r<n.length;r++){var o=n[r],a=$(o).val();this.guia.razonsocialcliente=$(o).attr("razonsocial"),this.guia.ruccliente=$(o).attr("ruc"),this.guia.idorgcompradora=a}setTimeout(function(){D.ajax.reload(),$("input").each(function(){$(this).keydown(),$(this).val()&&""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("#mdlBuscarCliente").modal("toggle")},500)},t.prototype.validarfiltrosOC=function(){if(null==this.filtrooc.fechacreacioninicio||""==this.filtrooc.fechacreacioninicio.toString())return swal({text:"Fecha de registro inicio es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null==this.filtrooc.fechacreacionfin||""==this.filtrooc.fechacreacionfin.toString())return swal({text:"Fecha de registro fin es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null!=this.filtrooc.fechacreacioninicio&&""!=this.filtrooc.fechacreacioninicio.toString()&&null!=this.filtrooc.fechacreacionfin&&""!=this.filtrooc.fechacreacionfin.toString()){var t=DatatableFunctions.ConvertStringToDatetime(this.filtrooc.fechacreacioninicio),r=DatatableFunctions.ConvertStringToDatetime(this.filtrooc.fechacreacionfin);if(moment(r).diff(t,"days")>30)return swal({text:'El filtro de búsqueda "Fecha de Creación" debe tener un rango máximo de 30 días entre la Fecha Inicial y la Fecha Fin.',type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(DatatableFunctions.FormatDatetimeForMicroService(t)>DatatableFunctions.FormatDatetimeForMicroService(r))return swal({text:"El rango de Fechas de registro seleccionado no es correcto. La Fecha Inicial es mayor a la Fecha Fin.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1}return!0},t.prototype.AbrirAgregarOC=function(t){if(!this.guia.ruccliente||""===this.guia.ruccliente)return swal({text:"Debe seleccionar una organización compradora.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;$("#mdlOrdenesCompra").modal("show"),$("select").each(function(){$(this).keydown(),$(this).val()&&""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),S.ajax.reload(),t.preventDefault()},t.prototype.BuscarOCClick=function(t){this.validarfiltrosOC()&&S.ajax.reload(),t.preventDefault()},t.prototype.filtroOCDefecto=function(){var t=new Date;t.setDate(t.getDate()-30),this.filtrooc={nroordencompra:"",estado:"OACEP",fechacreacioninicio:t,fechacreacionfin:new Date}},t.prototype.buscarCliente=function(t){this.filtroCliente.razonsocial="",this.filtroCliente.ruc="",null!=D?this.buscarClienteDT(t):a()},t.prototype.ngOnInit=function(){var t=this;w=this,this.activatedRoute.params.subscribe(function(r){t.id=r.id,t.esBorrador=r.b,t.id_doc=r.c}),"0"!=this.id?(this.toggleButton=!0,$("#btnAgregarItemOC").addClass("disabled"),$("#btnEliminarItemOC").addClass("disabled")):(this.toggleButton=!1,this.habilitarEdicion(null),this.guia.razonsocialproveedor=localStorage.getItem("org_nombre"),this.guia.rucproveedor=localStorage.getItem("org_ruc")),this.util.listUnidadMedida(function(t){w.listUnidadMedidaCombo=t}),this.util.listUnidadMedidaMasa(function(t){w.listUnidadMedidaPesoCombo=t}),this.util.listMotivoGuia(function(t){w.listMotivoGuiaCombo=t}),this.util.listTransporteGuia(function(t){w.listTransporteGuiaCombo=t}),this.util.listTipoDocIdentidad(function(t){w.listTipoDocIdentidad=t}),this.util.listEstadoGuia(function(t){w.listEstadoCombo=t}),this.util.listEstadoOC(function(t){w.listEstadoOCCombo=t})},t.prototype.ngAfterViewInit=function(){var t=this;if("0"!=this.id){console.log("this.esBorrador",this.esBorrador),this.guia.tipoguia="M";var r=!0;"1"===this.esBorrador&&(r=!1),this._dataService.obtener(this.id,r).subscribe(function(r){t.guia=r,t.guia.id_doc=t.id_doc,t.guiaOriginal=JSON.parse(JSON.stringify(r)),t.producto=r.articulos.length>0?r.articulos[0]:new b.b,setTimeout(function(){$("input").each(function(){$(this).keydown(),$(this).val()&&""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("select").each(function(){$(this).keydown(),$(this).val()&&""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("textarea").each(function(){$(this).keydown(),$(this).val()&&""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),B.ajax.reload(),O.ajax.reload()},200)},function(t){return console.log(t)},function(){})}DatatableFunctions.ModalSettings(),$("#mdlArchivosAdjuntos").on("shown.bs.modal",function(){$("#btnEliminarAA").click()}),O=$("#dtArchivos").on("draw.dt",function(t,r,n){DatatableFunctions.initDatatable(t,r,n,O)}).DataTable({ajax:function(t,r,n){r({data:w.guia.docadjuntos})},columns:[{data:"id"},{data:"nombre"},{data:"descripcion"},{data:"id"}],columnDefs:[{className:"text-center",targets:[1,2,3]},{render:function(t,r,n){return"1"==w.esBorrador||"0"==w.id?'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" value="'+n.id+'" name="optionsCheckboxes" class="checkboxArchivos"></label></div></div>':""},targets:0,orderable:!1,visible:!1},{render:function(t,r,n){return'<a class="editar" href="javascript:void(0);" row-id="'+n.id+'"><button class="btn btn-simple btn-info btn-icon download" rel="tooltip" title="Bajar Archivo" data-placement="left"><i class="material-icons">get_app</i></button></a><button class="btn btn-simple btn-danger btn-icon remove" rel="tooltip" title="Eliminar" data-placement="left"><i class="material-icons">delete</i></button>'},targets:3}]}),O.on("click",".download",function(t){var r=$(this).closest("tr"),n=r.find("a.editar").attr("row-id"),o=w.guia.docadjuntos;F=o.find(function(t){return t.id==n}),w._dataServiceAdjunto.DescargarArchivo(F).subscribe(function(t){saveAs(t,F.nombre)},function(t){return console.log(t)},function(){}),t.preventDefault()}),O.on("click",".remove",function(t){var r=$(this).closest("tr"),n=r.find("a.editar").attr("row-id");swal({text:"¿Desea eliminar el registro seleccionado?",type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){var t=w.guia.docadjuntos,r=t.filter(function(t){return t.id!=n});w.guia.docadjuntos=JSON.parse(JSON.stringify(r)),setTimeout(function(){O.ajax.reload()},500)},function(t){}),t.preventDefault()}),s(),o(),e(),a(),DatatableFunctions.registerCheckAll();$("#observaciones").keyup(function(){var t=$(this).val().length,r=500-t;$("#lblDescLength").html("500 caracteres máximo ("+r+")")}),$("#nroguia1").blur(function(){if(null==w.guia.nroguia1&&(w.guia.nroguia1=""),""!=w.guia.nroguia1){var t=/^[a-z0-9]+$/i,r=w.guia.nroguia1.trim();return t.test(r)?void 0:(swal({text:"Nro. Guia - La Serie solo puede contener caracteres alfanuméricos.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nroguia1").focus()}),!1)}}),$("#nroguia2").blur(function(){if(null==w.guia.nroguia2&&(w.guia.nroguia2=""),""!=w.guia.nroguia2){var t=/^[a-z0-9]+$/i,r=w.guia.nroguia2.trim();return t.test(r)?void 0:(swal({text:"Nro. Guia - El Correlativo solo puede contener caracteres alfanuméricos.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nroguia2").focus()}),!1)}})},t.prototype.ngOnChanges=function(t){},t.prototype.habilitarEdicion=function(t){this.toggleButton=!1,setTimeout(function(){$(".toggleButton").prop("disabled",!1),$("#btnAgregarItemOC").removeClass("disabled"),$("#btnEliminarItemOC").removeClass("disabled")},200),l(),s()},t.prototype.validarfiltrosCliente=function(){return w.filtroCliente.razonsocial=w.filtroCliente.razonsocial.trim(),w.filtroCliente.ruc=w.filtroCliente.ruc.trim(),!0},t.prototype.buscarClienteDT=function(t){this.validarfiltrosCliente()&&D.ajax.reload()},t}();_=A([n.i(u.Component)({selector:"guiaproveedorformulario-cmp",template:n("./src/app/guia/proveedor/formulario/guiaproveedorformulario.component.html"),providers:[m.a,v.a,f.a,g.a]}),M("design:paramtypes",["function"==typeof(k=void 0!==c.c&&c.c)&&k||Object,"function"==typeof(N=void 0!==c.b&&c.b)&&N||Object,"function"==typeof(R=void 0!==g.a&&g.a)&&R||Object,"function"==typeof(j=void 0!==m.a&&m.a)&&j||Object,"function"==typeof(P=void 0!==f.a&&f.a)&&P||Object,"function"==typeof(I=void 0!==v.a&&v.a)&&I||Object])],_);var k,N,R,j,P,I},"./src/app/model/guia.ts":function(t,r,n){"use strict";n.d(r,"a",function(){return o}),n.d(r,"b",function(){return a});var o=function(){function t(){this.fechaemision=null,this.fechainiciotraslado=null,this.fechaprobablearribo=null,this.articulos=[],this.docadjuntos=[],this.nroguia="",this.nroguia1="",this.nroguia2=""}return t}(),a=function(){function t(){this.atributos=[]}return t}();(function(){function t(){}})(),function(){function t(){}}(),function(){function t(){}}(),function(){function t(){}}()}});