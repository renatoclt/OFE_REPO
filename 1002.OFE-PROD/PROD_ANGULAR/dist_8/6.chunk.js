webpackJsonp([6],{"./src/app/facturacion-electronica/comprobantes/factura/factura.component.css":function(t,a,e){a=t.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),a.push([t.i,".material-icons{font-size:1.5rem;margin-right:.5rem}.control-label{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.blue{background:#0079bf}.input-group-addon{background:transparent;border:0;padding:0}.card .card-header.card-header-icon{width:60px}.navbar.navbar-info{margin:0 15px}.align-right{text-align:center}.float-right{float:right}.pull-right{float:right!important}",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/factura/factura.component.html":function(t,a){t.exports='<div class="container-fluid">\r\n  <div class="row">\r\n    <div class="col-sm-12">\r\n      <div class="card">\r\n        <div class="card-header card-header-text" data-background-color="blue">\r\n          <h4 class="card-title">{{titulo | translate}}</h4>\r\n        </div>\r\n        <div class="card-content">\r\n          <form [formGroup]="facturaFormGroup" (ngSubmit)="irVistaPrevia()" novalidate>\r\n            <div class="row">\r\n              <div class="col-xs-12 col-sm-6 col-md-2">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblSerie" class="control-label">{{\'serie\' | translate}}\r\n                    <span class="star">*</span>\r\n                  </label>\r\n                  <select id="cmbSerie" name="cmbSerie" formControlName="cmbSerie" class="form-control">\r\n                    <option *ngFor="let serie of series" [value]="serie.idSerie">\r\n                      {{serie.serie}}\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div class="card-content">\r\n                <form [formGroup]="facturaFormGroup" (ngSubmit)="irVistaPrevia()" novalidate>\r\n                  <div class="row">\r\n                    <div class="col-xs-12 col-sm-6 col-md-2">\r\n                      <div class="form-group label-floating">\r\n                        <label id="lblSerie" class="control-label">{{\'serie\' | translate}}<span class="star">*</span></label>\r\n                        <select\r\n                                id="cmbSerie"\r\n                                name="cmbSerie"\r\n                                formControlName="cmbSerie"\r\n                                class="form-control">\r\n                                <option *ngFor="let serie of series" [value]="serie.idSerie">\r\n                                  {{serie.serie}}\r\n                                </option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-xs-12 col-sm-4 col-md-2">\r\n                      <div class="form-group label-floating">\r\n                        <label id="lblRuc" name="lblRuc" class="control-label">\r\n                          <i class="material-icons">search</i>{{\'ruc\' | translate}}<span class="star">*</span>\r\n                        </label>\r\n                        <input\r\n                              rucDirective\r\n                              type="text"\r\n                              name="txtRuc"\r\n                              id="txtRuc"\r\n                              formControlName="txtRuc"\r\n                              class="form-control"\r\n                              minlength="11"\r\n                              min="11"\r\n                              maxlength="11"\r\n                              max="11"\r\n                              (keydown)="busquedaruc($event)"\r\n                              >\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-xs-12 col-sm-8 col-md-6">\r\n                      <div class="form-group label-floating">\r\n                        <label id="lblRazonSocial" name="lblRazonSocial" class="control-label">\r\n                          <i class="material-icons">search</i>{{\'razonSocial\' | translate}}<span class="star">*</span>\r\n                        </label>\r\n                        <input\r\n\r\n                              ng2-auto-complete\r\n                              (keyup)="listarrazonsocial()"\r\n                              [source]="searchData"\r\n                              [list-formatter]="autocompleListFormatter"\r\n                              [value-formatter] = "autocompleListFormatter"\r\n\r\n                              type="text"\r\n                              id="txtRazonSocial"\r\n                              name="txtRazonSocial"\r\n                              formControlName="txtRazonSocial"\r\n                              class="form-control"\r\n                              minlength="1"\r\n                              min="1"\r\n                              maxlength="100"\r\n                              max="100"\r\n                              >\r\n                      </div>\r\n                    </div>\r\n                  <div class="col-xs-12 col-sm-6 col-md-2">\r\n                    <div class="form-group label-floating">\r\n                      <label id="lblDetraccion" name="lblDetraccion" class="control-label">{{\'detraccion\' | translate}}</label>\r\n                      <input\r\n                              type="text"\r\n                              id="txtDetraccion"\r\n                              name="txtDetraccion"\r\n                              formControlName="txtDetraccion"\r\n                              class="form-control"\r\n                              minlength="4"\r\n                              min="4"\r\n                              maxlength="15"\r\n                              max="15">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                  <div class="row">\r\n                    <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">\r\n                      <div class="form-group label-floating">\r\n                        <label id="lblFechaEmision" name="lblFechaEmision" class="control-label">{{\'fechaEmision\' | translate}}<span class="star">*</span></label>\r\n                        <input\r\n                              type="text"\r\n                              id="txtFechaEmision"\r\n                              name="txtFechaEmision"\r\n                              formControlName="txtFechaEmision"\r\n                              class="form-control" datepicker\r\n                              minlength="10"\r\n                              min="10"\r\n                              maxlength="10"\r\n                              max="10"/>\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">\r\n                      <div class="form-group label-floating">\r\n                        <label id="lblFechaVencimiento" name="lblFechaVencimiento" class="control-label">{{\'fechaVencimiento\' | translate}}<span class="star">*</span></label>\r\n                        <input\r\n                              type="text"\r\n                              id="txtFechaVencimiento"\r\n                              name="txtFechaVencimiento"\r\n                              formControlName="txtFechaVencimiento"\r\n                              class="form-control" datepicker\r\n                              minlength="10"\r\n                              min="10"\r\n                              maxlength="10"\r\n                              max="10"/>\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-xs-12 col-sm-6 col-md-2 col-lg-3">\r\n                      <div class="form-group label-floating">\r\n                        <label id="lblMoneda" name="lblMoneda" class="control-label">{{\'tipoMoneda\' | translate}}<span class="star">*</span></label>\r\n                        <select\r\n                              id="cmbMoneda"\r\n                              name="cmbMoneda"\r\n                              formControlName="cmbMoneda"\r\n                              class="form-control">\r\n                              <option *ngFor="let moneda of monedas | async" [value]="moneda.codigo">{{moneda.descripcionCorta}}</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-xs-12 col-sm-6 col-md-2 col-lg-3">\r\n                      <div class="form-group">\r\n                        <div class="checkbox">\r\n                          <label>\r\n                            <input\r\n                                type="checkbox"\r\n                                name="chkFacturaAnticipo"\r\n                                id="chkFacturaAnticipo"\r\n                                formControlName="chkFacturaAnticipo"\r\n                                [checked]="esFacturaAnticipo"\r\n                                (change)="seleccionFacturaAnticipo($event.target.checked)">{{\'facturaAnticipo\' | translate}}\r\n                          </label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="row ">\r\n              <div class="col-md-12 float-right">\r\n                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-3 float-right">\r\n                  <button class="btn btn-default float-right" data-toggle="modal" data-target="#myModal">{{\'agregarCliente\' | translate}}</button>\r\n                </div>\r\n                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-3 float-right">\r\n                  <button class="btn btn-default float-right" (click)="irDocumentoRelacionado()" [disabled]="esFacturaAnticipo">{{\'documentoRelacionado\' | translate}}</button>\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n\r\n            <div class="col-md-12">\r\n\r\n              <div class="card">\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <span class="input-group-addon">\r\n                    <i class="fa fa-list-ul fa-1x fa-inverse"></i>\r\n                  </span>\r\n                </div>\r\n                <div class="row">\r\n                  <h3>{{\'listaItems\' | translate}}</h3>\r\n                </div>\r\n                <div class="row">\r\n                  <p>&nbsp;</p>\r\n                </div>\r\n                <nav class="navbar navbar-info" role="navigation"></nav>\r\n                <div class="row">\r\n                  <div class="col-md-12">\r\n                    <app-data-table (iniciarData)="iniciarData($event)" (accion)="ejecutarAccion($event)" (eliminar)="eliminar($event)" (tipoProductoSeleccionado)="tipoProductoSeleccionado($event)"\r\n                      #otro [tipoBotonAgregar]="tipoBotonAgregar" [idTabla]="\'tabla2\'" [habilitarAgregar]="true" [cabecera]="cabecera"\r\n                      [atributos]="atributos" [acciones]="AccionesPrueba" [tipoAccion]="tipo" [habilitarAcciones]="true" [habilitarCheckBox]="true">\r\n                    </app-data-table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n\r\n            <div class="row" *ngIf="factura.documentoReferencia">\r\n              <div class="col-md-12">\r\n                <table class="table table-striped">\r\n                  <tbody>\r\n                    <tr *ngFor="let item of factura.documentoReferencia">\r\n                      <td>\r\n                        {{item.nombreTipoDocumento + \' \' + item.serieDocumentoDestino + \'-\' + item.correlativoDocumentoDestino}}\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n              <div class="col-md-12">\r\n                <div class="form-group label-floating">\r\n                  <label class="control-label">{{\'observaciones\' | translate}}</label>\r\n                  <textarea class="form-control" rows="3"></textarea>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class="row align-right">\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblOperacionesGrabadas" name="lblOperacionesGrabadas" class="control-label">{{\'operacionesGravadas\' | translate}}</label>\r\n                  <input type="text" id="txtOperacionesGrabadas" name="txtOperacionesGrabadas" formControlName="txtOperacionesGrabadas" class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblOperacionesInafectas" name="lblOperacionesInafectas" class="control-label">{{\'operacionesInafectas\' | translate}}</label>\r\n                  <input type="text" id="txtOperacionesInafectas" name="txtOperacionesInafectas" formControlName="txtOperacionesInafectas"\r\n                    class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblOperacionesExoneradas" name="lblOperacionesExoneradas" class="control-label">{{\'operacionesExoneradas\' | translate}}</label>\r\n                  <input type="text" id="txtOperacionesExoneradas" name="txtOperacionesExoneradas" formControlName="txtOperacionesExoneradas"\r\n                    class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblTotalDescuentos" name="lblTotalDescuentos" class="control-label">{{\'totalDescuentos\' | translate}}</label>\r\n                  <input type="text" id="txtTotalDescuentos" name="txtTotalDescuentos" formControlName="txtTotalDescuentos" class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblSumatoriaOtrosTributos" name="lblSumatoriaOtrosTributos" class="control-label">{{\'sumatoriaOtrosTributos\' | translate}}</label>\r\n                  <input type="text" id="txtSumatoriaOtrosTributos" name="txtSumatoriaOtrosTributos" formControlName="txtSumatoriaOtrosTributos"\r\n                    class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblSumatoriaOtrosCargos" name="lblSumatoriaOtrosCargos" class="control-label">{{\'sumatoriaOtrosCargos\' | translate}}</label>\r\n                  <input type="text" id="txtSumatoriaOtrosCargos" name="txtSumatoriaOtrosCargos" formControlName="txtSumatoriaOtrosCargos"\r\n                    class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblTotalAnticipos" name="lblTotalAnticipos" class="control-label">{{\'totalAnticipos\' | translate}}</label>\r\n                  <input type="text" id="txtTotalAnticipos" name="txtTotalAnticipos" formControlName="txtTotalAnticipos" class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblSumatoriaIsc" name="lblSumatoriaIsc" class="control-label">{{\'sumatoriaIsc\' | translate}}</label>\r\n                  <input type="text" id="txtSumatoriaIsc" name="txtSumatoriaIsc" formControlName="txtSumatoriaIsc" class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblSumatoriaIgv" name="lblSumatoriaIgv" class="control-label">{{\'sumatoriaIgv\' | translate}}</label>\r\n                  <input type="text" id="txtSumatoriaIgv" name="txtSumatoriaIgv" formControlName="txtSumatoriaIgv" class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblSubTotal" name="lblSubTotal" class="control-label">{{\'subTotal\' | translate}}</label>\r\n                  <input type="text" id="txtSubTotal" name="txtSubTotal" formControlName="txtImporteTotal" class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblImporteTotal" name="lblImporteTotal" class="control-label">{{\'importeTotal\' | translate}}</label>\r\n                  <input type="text" id="txtImporteTotal" name="txtImporteTotal" formControlName="txtImporteTotal" class="form-control">\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n              <div class="col-md-offset-6">\r\n                <div class="col-md-6 col-md-offset-6">\r\n                  <button type="submit" class="btn btn-default btn-block" [disabled]="!(flagVistaPrevia && facturaFormGroup.valid)">{{\'vistaPrevia\' | translate}}</button>\r\n                  <button type="button" class="btn btn-default btn-block" (click)="probarBotonVistaPrevia()">Probar Vista Previa</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="modal fade" id="modalCliente" tabindex="-1" role="dialog" aria-labelledby="modalCliente">\r\n    <div class="modal-dialog" role="document">\r\n      <persona-juridica></persona-juridica>\r\n    </div>\r\n</div>'},"./src/app/facturacion-electronica/comprobantes/factura/factura.component.ts":function(t,a,e){"use strict";var o=e("./node_modules/@angular/core/@angular/core.es5.js"),r=e("./node_modules/@angular/forms/@angular/forms.es5.js"),n=e("./src/app/facturacion-electronica/general/data-table/data-table.component.ts"),c=e("./src/app/facturacion-electronica/general/utils/rutas.service.ts"),i=e("./node_modules/@angular/router/@angular/router.es5.js"),s=e("./src/app/facturacion-electronica/comprobantes/models/detalleEbiz.ts"),l=e("./src/app/facturacion-electronica/general/data-table/utils/accion.ts"),u=e("./src/app/facturacion-electronica/general/data-table/utils/tipo-accion.ts"),d=e("./src/app/facturacion-electronica/general/data-table/utils/modo-vista-accion.ts"),m=e("./src/app/facturacion-electronica/comprobantes/services/persistencia.service.ts"),p=e("./src/app/facturacion-electronica/comprobantes/models/facturaEbiz.ts"),f=e("./src/app/facturacion-electronica/general/services/person.service.ts"),b=e("./src/app/facturacion-electronica/general/data-table/utils/tipoBotonAgregar.ts"),v=e("./src/app/facturacion-electronica/general/services/configuracionDocumento/parametroDocumento.servicio.ts"),h=e("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),g=e("./src/app/facturacion-electronica/comprobantes/models/cabeceraFactura.ts"),x=e("./src/app/facturacion-electronica/general/services/configuracionDocumento/series.service.ts"),F=e("./node_modules/rxjs/BehaviorSubject.js"),y=(e.n(F),e("./src/app/facturacion-electronica/general/services/organizacion/entidad.service.ts")),C=e("./src/app/facturacion-electronica/general/models/documento/tablaMaestra.ts"),S=e("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts");e.d(a,"a",function(){return R});var _=this&&this.__decorate||function(t,a,e,o){var r,n=arguments.length,c=n<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,a,e,o);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(n<3?r(c):n>3?r(a,e,c):r(a,e))||c);return n>3&&c&&Object.defineProperty(a,e,c),c},O=this&&this.__metadata||function(t,a){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,a)},R=function(){function t(t,a,e,o,r,n,c,i,s){this._persistenciaService=t,this._rutas=a,this._route=e,this.parametroServicio=o,this.personaServicio=r,this._tipos=n,this.seriesService=c,this._entidadServices=i,this._tablaMaestraService=s,this.titulo="factura",this.cabecera=[],this.atributos=[],this.dtoOutSeries=[],this.series=[],this.dtoOuMonedas=[],this.TipoAccion=u.a,this.tipo=d.a.ICONOS,this.tipoBotonAgregar=b.a.COMBO,this.AccionesPrueba=[new l.b("editar",new l.c("edit","btn-success"),u.a.EDITAR),new l.b("eliminar",new l.c("delete","btn-danger"),u.a.ELIMINAR)],this.searchData=[],this.monedas=new F.BehaviorSubject([]),this.factura=new p.a,this.cabeceraDatosFactura=new g.a,this.esFacturaAnticipo=!1,this.listaProductos=[],this.cabecera=["cantidad","codigo","descripcion","unidadMedida","valorUnitario","igv","isc","descuento","valorVenta"],this.atributos=["cantidad","codigoItem","descripcionItem","detalle.unidadMedida","precioUnitario","montoIgv","detalle.subtotalIsc","detalle.descuento","precioTotal"],this.cargarServicios()}return t.prototype.ngOnInit=function(){var t=this;this.initFormGroup(),this.cargarFactura(),this.setFlagVistaPrevia(),this.seriesService.obtenerTodo().subscribe(function(a){t.series=a}),this.listarrazonsocial()},t.prototype.noOnDestroy=function(){this.subscriptionSerie.unsubscribe()},t.prototype.cargarFactura=function(){this.factura.documentoReferencia=this._persistenciaService.getDocumentosReferencia(),this.fillCabecera()},t.prototype.fillCabecera=function(){if(this.cabeceraDatosFactura=this._persistenciaService.getCabeceraFactura(),this.cabeceraDatosFactura)this.facturaFormGroup.controls.txtRuc.setValue(this.cabeceraDatosFactura.ruc),this.facturaFormGroup.controls.txtRazonSocial.setValue(this.cabeceraDatosFactura.razonsSocial),this.facturaFormGroup.controls.txtDetraccion.setValue(this.cabeceraDatosFactura.detraccion),this.facturaFormGroup.controls.cmbSerie.setValue(this.cabeceraDatosFactura.serie),this.facturaFormGroup.controls.txtFechaEmision.setValue(this.cabeceraDatosFactura.fechaEmision),this.facturaFormGroup.controls.txtFechaVencimiento.setValue(this.cabeceraDatosFactura.fechaVencimiento),this.facturaFormGroup.controls.cmbMoneda.setValue(this.cabeceraDatosFactura.tipoMoneda),setTimeout(function(){$("select").each(function(){$(this.parentElement).removeClass("is-empty")})},200);else{var t=new Date,a=t.getDate().toString()+"/"+(t.getMonth()+1).toString()+"/"+t.getFullYear().toString();this.facturaFormGroup.controls.txtFechaEmision.setValue(a),this.facturaFormGroup.controls.txtFechaVencimiento.setValue(a)}},t.prototype.setFacturaCabecera=function(){console.log("CABECERA FACTURA"),console.log(this.cabeceraDatosFactura),console.log(this.facturaFormGroup),this.cabeceraDatosFactura=new g.a,this._persistenciaService.getCabeceraFactura(),this.cabeceraDatosFactura.ruc=this.facturaFormGroup.controls.txtRuc.value,this.cabeceraDatosFactura.razonsSocial=this.facturaFormGroup.controls.txtRazonSocial.value,this.cabeceraDatosFactura.detraccion=this.facturaFormGroup.controls.txtDetraccion.value,this.cabeceraDatosFactura.serie=this.facturaFormGroup.controls.cmbSerie.value,this.cabeceraDatosFactura.fechaEmision=this.facturaFormGroup.controls.txtFechaEmision.value,this.cabeceraDatosFactura.fechaVencimiento=this.facturaFormGroup.controls.txtFechaVencimiento.value,this.cabeceraDatosFactura.tipoMoneda=this.facturaFormGroup.controls.cmbMoneda.value,this._persistenciaService.setCabeceraFactura(this.cabeceraDatosFactura)},t.prototype.setFlagVistaPrevia=function(){this.listaProductos=this._persistenciaService.getListaProductos(),0==this.listaProductos.length?this.flagVistaPrevia=!1:this.flagVistaPrevia=!0},t.prototype.cargarServicios=function(){this.monedas=this._tablaMaestraService.obtenerPorIdTabla(C.b)},t.prototype.iniciarData=function(t){this.tabla.insertarData(this.listaProductos)},t.prototype.irDocumentoRelacionado=function(){this.setFacturaCabecera(),this._route.navigateByUrl(this._rutas.URL_COMPROBANTE_FACTURA_DOCUMENTO_RELACIONADO)},t.prototype.irAgregarServicio=function(){this.setFacturaCabecera(),this._route.navigateByUrl(this._rutas.URL_COMPROBANTE_FACTURA_SERVICIO_AGREGAR)},t.prototype.irAgregarBien=function(){this.setFacturaCabecera(),this._route.navigateByUrl(this._rutas.URL_COMPROBANTE_FACTURA_BIEN_AGREGAR)},t.prototype.irVistaPrevia=function(){this.factura.rucProveedor="11122233344",this.factura.razonSocialProveedor="GLORIA S.A.",this.factura.direccionProveedor="Cerro Colorado S/N",this.setFacturaCabecera(),this.cargarDataVistaPrevia(),this._route.navigateByUrl(this._rutas.URL_COMPROBANTE_FACTURA_VISTA_PREVIA)},t.prototype.agregarCliente=function(t){},t.prototype.cargarDataVistaPrevia=function(){this.factura.rucComprador=this.facturaFormGroup.controls.txtRuc.value,this.factura.razonSocialComprador=this.facturaFormGroup.controls.txtRazonSocial.value,this.factura.porcentajeDetracction=this.facturaFormGroup.controls.txtDetraccion.value,this.factura.fechaEmision=this.facturaFormGroup.controls.txtFechaEmision.value,this.factura.fechaVencimiento=this.facturaFormGroup.controls.txtFechaVencimiento.value,this.factura.moneda=this.facturaFormGroup.controls.cmbMoneda.value;for(var t=0;t<this.dtoOuMonedas.length;t++)if(this.factura.moneda==this.dtoOuMonedas[t].id.toString()){this.factura.nombreMoneda=this.dtoOuMonedas[t].sigla;break}this.factura.idSerie=this.facturaFormGroup.controls.cmbSerie.value,this.factura.direccionComprador="Av. Ejercito - Arequipa",this.factura.detalleEbiz=this._persistenciaService.getListaProductos(),this._persistenciaService.setFactura(this.factura)},t.prototype.seleccionFacturaAnticipo=function(t){var a=this;if(!0===t)if(0===this._persistenciaService.getListaProductos().length)this.tituloFacturaAnticipo="Ingrese el Importe Total de la Factura de Anticipo",this.invocarModalMontoacturaAnticipo(),this.esFacturaAnticipo=t;else{var e=this;this.esFacturaAnticipo=!1,$("#chkFacturaAnticipo").prop("checked",!1),swal({title:"Advertencia",text:"El comprobante ya tiene items ingresados, desea eliminarlos.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar"}).catch(function(t){return console.log("CANCEL")}).then(function(t){t?(e._persistenciaService.eliminarListaItemsFactura(),e.listaProductos=e._persistenciaService.getListaProductos(),e.tabla.insertarData(e.listaProductos),a.tituloFacturaAnticipo="Item(s) eliminado(s) correctamente.<br>Ingrese el monto de la factura de anticipo",a.invocarModalMontoacturaAnticipo()):console.log("Cancelado")})}else this.esFacturaAnticipo=!t},t.prototype.invocarModalMontoacturaAnticipo=function(){var t=this;swal({title:this.tituloFacturaAnticipo,input:"text",showCancelButton:!0,confirmButtonText:"Guardar",inputPlaceholder:"Importe Total",showLoaderOnConfirm:!0,preConfirm:function(a){return new Promise(function(e){setTimeout(function(){var e;(e=Number(a))>0&&(t.setFacturaAnticipo(e),swal({type:"success",title:"Monto ingresado correctamente."}))},2e3)})},allowOutsideClick:!1}).catch(function(t){return console.log("CANCEL")}).then(function(a){a||(t.esFacturaAnticipo=!1,$("#chkFacturaAnticipo").prop("checked",!1))})},t.prototype.setFacturaAnticipo=function(t){console.log("Monto Factura Anticipo"),console.log(t)},t.prototype.initFormGroup=function(){var t=new Date,a=t.getDate().toString()+"/"+(t.getMonth()+1).toString()+"/"+t.getFullYear().toString();this.facturaFormGroup=new r.FormGroup({txtRuc:new r.FormControl("",[r.Validators.required,r.Validators.pattern("[0-9]+"),r.Validators.maxLength(11),r.Validators.minLength(11)]),txtRazonSocial:new r.FormControl("",[r.Validators.required,r.Validators.pattern("[A-Za-z0-9áéíóúÁÉÍÓÚ/%\\s-.;]+"),r.Validators.maxLength(100),r.Validators.minLength(1)]),txtDetraccion:new r.FormControl("",[r.Validators.required,r.Validators.pattern("[0-9]+[.][0-9]{2}"),r.Validators.maxLength(15),r.Validators.minLength(4)]),cmbSerie:new r.FormControl("",[r.Validators.required]),txtFechaEmision:new r.FormControl(a,[r.Validators.required,r.Validators.pattern("[0-9]{2}[/][0-9]{2}[/][0-9]{4}"),r.Validators.maxLength(10),r.Validators.minLength(10)]),txtFechaVencimiento:new r.FormControl(a,[r.Validators.required,r.Validators.pattern("[0-9]{2}[/][0-9]{2}[/][0-9]{4}"),r.Validators.maxLength(10),r.Validators.minLength(10)]),cmbMoneda:new r.FormControl("",[r.Validators.required]),chkFacturaAnticipo:new r.FormControl(""),txtOperacionesGrabadas:new r.FormControl({value:"",disabled:!0}),txtOperacionesInafectas:new r.FormControl({value:"",disabled:!0}),txtOperacionesExoneradas:new r.FormControl({value:"",disabled:!0}),txtTotalDescuentos:new r.FormControl({value:"",disabled:!0}),txtSumatoriaOtrosTributos:new r.FormControl("0.00"),txtSumatoriaOtrosCargos:new r.FormControl("0.00"),txtTotalAnticipos:new r.FormControl({value:"",disabled:!0}),txtSumatoriaIsc:new r.FormControl({value:"",disabled:!0}),txtSumatoriaIgv:new r.FormControl({value:"",disabled:!0}),txtSubtotal:new r.FormControl({value:"",disabled:!0}),txtImporteTotal:new r.FormControl({value:"",disabled:!0})})},t.prototype.consultarPorRazonSocial=function(){console.log("ENTER PRESIONADO")},t.prototype.eliminar=function(t){console.log("eliminar parent "),console.log(t),this._persistenciaService.setListaProductos(t)},t.prototype.agregarItem=function(t){console.log("agregar parent "),console.log(t)},t.prototype.ejecutarAccion=function(t){var a=t[0],e=new s.a;switch(e=t[1],a){case u.a.ELIMINAR:this._persistenciaService.eliminarItem(e),this.recargarTabla(),this.setFlagVistaPrevia();break;case u.a.EDITAR:console.log(this._rutas.URL_COMPROBANTE_EDITAR_BASE+"/"+e.id),this._route.navigate([this._rutas.URL_COMPROBANTE_EDITAR_BASE,e.id])}},t.prototype.recargarTabla=function(){this.listaProductos=this._persistenciaService.getListaProductos(),this.iniciarData(!0)},t.prototype.tipoProductoSeleccionado=function(t){switch(t.codigo){case this._tipos.TIPO_PRODUCTO_BIEN:this.irAgregarBien();break;case this._tipos.TIPO_PRODUCTO_SERVICIO:this.irAgregarServicio()}},t.prototype.probarBotonVistaPrevia=function(){console.log(this.facturaFormGroup.controls),console.log("!( "+this.flagVistaPrevia+" && "+this.facturaFormGroup.valid+" )"),console.log(!(this.flagVistaPrevia&&this.facturaFormGroup.valid))},t.prototype.busquedaruc=function(t){if(13==t.keyCode&&11==this.facturaFormGroup.get("txtRuc").value.length){var a=this._entidadServices.buscarPorRuc(this.facturaFormGroup.get("txtRuc").value);console.log(a),null!=a?a.subscribe(function(t){console.log("--data--"),console.log(t),setTimeout(function(){$("input").each(function(){$(this.parentElement).removeClass("is-empty")})},200)}):swal("Oops...","Something went wrong!","error")}},t.prototype.listarrazonsocial=function(){var t=this,a=(new Date).getTime();setTimeout(function(){var e=(new Date).getTime();a+4e3<=e&&t._entidadServices.buscarPorRazonSocial(t.facturaFormGroup.get("txtRazonSocial").value).subscribe(function(a){console.log(a),t.searchData=a})},4e3)},t.prototype.autocompleListFormatter=function(t){return t.organizacion.denominacion},t}();_([e.i(o.ViewChild)("otro"),O("design:type","function"==typeof(D=void 0!==n.a&&n.a)&&D||Object)],R.prototype,"tabla",void 0),R=_([e.i(o.Component)({selector:"app-factura",template:e("./src/app/facturacion-electronica/comprobantes/factura/factura.component.html"),styles:[e("./src/app/facturacion-electronica/comprobantes/factura/factura.component.css")]}),O("design:paramtypes",["function"==typeof(A=void 0!==m.a&&m.a)&&A||Object,"function"==typeof(P=void 0!==c.a&&c.a)&&P||Object,"function"==typeof(j=void 0!==i.b&&i.b)&&j||Object,"function"==typeof(w=void 0!==v.a&&v.a)&&w||Object,"function"==typeof(I=void 0!==f.a&&f.a)&&I||Object,"function"==typeof(T=void 0!==h.a&&h.a)&&T||Object,"function"==typeof(V=void 0!==x.a&&x.a)&&V||Object,"function"==typeof(E=void 0!==y.a&&y.a)&&E||Object,"function"==typeof(M=void 0!==S.a&&S.a)&&M||Object])],R);var D,A,P,j,w,I,T,V,E,M},"./src/app/facturacion-electronica/comprobantes/factura/factura.module.ts":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e("./node_modules/@angular/core/@angular/core.es5.js"),r=e("./node_modules/@angular/common/@angular/common.es5.js"),n=e("./src/app/facturacion-electronica/comprobantes/factura/factura.routing.module.ts"),c=e("./src/app/facturacion-electronica/comprobantes/factura/factura.component.ts"),i=e("./node_modules/@angular/forms/@angular/forms.es5.js"),s=e("./src/app/directives/datepicker.module.ts"),l=e("./src/app/facturacion-electronica/comprobantes/item/item.module.ts"),u=e("./src/app/facturacion-electronica/general/data-table/data-table.module.ts"),d=e("./src/app/facturacion-electronica/comprobantes/comprobante-vista-previa/comprobante-vista-previa.module.ts"),m=e("./src/app/facturacion-electronica/general/consulta/consulta.module.ts"),p=e("./src/app/facturacion-electronica/comprobantes/comprobante-documento-relacionado/comprobante-documento-relacionado.module.ts"),f=e("./src/app/facturacion-electronica/comprobantes/comprobante-item/comprobante-item.module.ts"),b=e("./src/app/facturacion-electronica/comprobantes/comprobante-emitir/comprobante-emitir.module.ts"),v=e("./src/app/facturacion-electronica/general/services/person.service.ts"),h=e("./src/app/facturacion-electronica/general/services/configuracionDocumento/parametroDocumento.servicio.ts"),g=e("./node_modules/@ngx-translate/core/index.js"),x=e("./node_modules/ng2-auto-complete/dist/index.js"),F=(e.n(x),e("./node_modules/ng2-completer/index.js")),y=e("./src/app/facturacion-electronica/general/directivas/directivas.module.ts"),C=e("./src/app/service/spinner.service.ts"),S=e("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts");e.d(a,"FacturaModule",function(){return O});var _=this&&this.__decorate||function(t,a,e,o){var r,n=arguments.length,c=n<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,a,e,o);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(n<3?r(c):n>3?r(a,e,c):r(a,e))||c);return n>3&&c&&Object.defineProperty(a,e,c),c},O=function(){function t(){}return t}();O=_([e.i(o.NgModule)({imports:[r.CommonModule,n.a,i.ReactiveFormsModule,s.a,l.a,u.a,f.a,d.a,p.a,m.a,b.a,g.a,F.a,x.Ng2AutoCompleteModule,y.a],declarations:[c.a],providers:[h.a,v.a,C.a,S.a]})],O)},"./src/app/facturacion-electronica/comprobantes/factura/factura.routing.module.ts":function(t,a,e){"use strict";var o=e("./node_modules/@angular/core/@angular/core.es5.js"),r=e("./node_modules/@angular/router/@angular/router.es5.js"),n=e("./src/app/facturacion-electronica/comprobantes/factura/factura.component.ts"),c=e("./src/app/facturacion-electronica/comprobantes/item/item.component.ts"),i=e("./src/app/facturacion-electronica/comprobantes/comprobante-vista-previa/comprobante-vista-previa.component.ts"),s=e("./src/app/facturacion-electronica/comprobantes/comprobante-item/comprobante-item.component.ts"),l=e("./src/app/facturacion-electronica/general/consulta/consulta.component.ts"),u=e("./src/app/facturacion-electronica/comprobantes/comprobante-documento-relacionado/comprobante-documento-relacionado.component.ts"),d=e("./src/app/facturacion-electronica/comprobantes/comprobante-emitir/comprobante-emitir.component.ts"),m=e("./src/app/facturacion-electronica/comprobantes/comprobante-item/comprobante-editar-base.component.ts");e.d(a,"a",function(){return b});var p=this&&this.__decorate||function(t,a,e,o){var r,n=arguments.length,c=n<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,a,e,o);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(n<3?r(c):n>3?r(a,e,c):r(a,e))||c);return n>3&&c&&Object.defineProperty(a,e,c),c},f=[{path:"",children:[{path:"",pathMatch:"full",redirectTo:"crear"},{path:"crear",component:n.a,data:{codigo:"01",mostrarCombo:!0}},{path:"emitir",component:d.a,data:{codigo:"01",tipoDocumento:"01",titulo:"Factura",mostrarCombo:!1}},{path:"crear/vistaprevia",component:i.a,data:{codigo:"01",tipoDocumento:"01",titulo:"Factura",mostrarCombo:!1}},{path:"crear/servicio/agregar",component:s.a,data:{codigo:"01",tipoAccion:1,tipoDocumento:"01",mostrarCombo:!1}},{path:"crear/servicio/editar/:id",component:s.a,data:{codigo:"01",tipoAccion:2,tipoDocumento:"01",mostrarCombo:!1}},{path:"crear/bien/agregar",component:s.a,data:{codigo:"01",tipoAccion:3,tipoDocumento:"01",mostrarCombo:!1}},{path:"crear/bien/editar/:id",component:s.a,data:{codigo:"01",tipoAccion:4,tipoDocumento:"01",mostrarCombo:!1}},{path:"crear/docRelacionado/buscar",component:l.a,data:{codigo:"01",tipoConsulta:9,titulo:"consultaDocumentoRelacionadoFactura",mostrarCombo:!1}},{path:"crear/docRelacionado",component:u.a,data:{codigo:"01",tipoDocumento:"01",mostrarCombo:!1}},{path:"editarProducto/:id",component:m.a},{path:":tipoItem",component:c.a}]}],b=function(){function t(){}return t}();b=p([e.i(o.NgModule)({imports:[r.a.forChild(f)],exports:[r.a]})],b)},"./src/app/facturacion-electronica/comprobantes/item/item.component.css":function(t,a,e){a=t.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),a.push([t.i,"",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/item/item.component.html":function(t,a){t.exports='<div class="card">\r\n  <div class="card-header card-header-text" data-background-color="blue">\r\n    <h4 class="card-title">{{titulo}}</h4>\r\n  </div>\r\n  <div class="card-content">\r\n    <form class="form-horizontal" [formGroup]="">\r\n      <div class="row">\r\n        <div class="col-md-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">Cantidad<span class="star">*</span></label>\r\n            <input type="text" class="form-control">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</div>\r\n'},"./src/app/facturacion-electronica/comprobantes/item/item.component.ts":function(t,a,e){"use strict";var o=e("./node_modules/@angular/core/@angular/core.es5.js"),r=e("./node_modules/@angular/router/@angular/router.es5.js");e.d(a,"a",function(){return i});var n=this&&this.__decorate||function(t,a,e,o){var r,n=arguments.length,c=n<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,a,e,o);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(n<3?r(c):n>3?r(a,e,c):r(a,e))||c);return n>3&&c&&Object.defineProperty(a,e,c),c},c=this&&this.__metadata||function(t,a){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,a)},i=function(){function t(t,a){this.router=t,this.route=a,this.titulo=""}return t.prototype.ngOnInit=function(){this.route.params.subscribe(function(t){t.tipoItem})},t}();i=n([e.i(o.Component)({selector:"app-item",template:e("./src/app/facturacion-electronica/comprobantes/item/item.component.html"),styles:[e("./src/app/facturacion-electronica/comprobantes/item/item.component.css")]}),c("design:paramtypes",["function"==typeof(s=void 0!==r.b&&r.b)&&s||Object,"function"==typeof(l=void 0!==r.c&&r.c)&&l||Object])],i);var s,l},"./src/app/facturacion-electronica/comprobantes/item/item.module.ts":function(t,a,e){"use strict";var o=e("./node_modules/@angular/core/@angular/core.es5.js"),r=e("./node_modules/@angular/common/@angular/common.es5.js"),n=e("./src/app/facturacion-electronica/comprobantes/item/item.component.ts"),c=e("./node_modules/@angular/forms/@angular/forms.es5.js");e.d(a,"a",function(){return s});var i=this&&this.__decorate||function(t,a,e,o){var r,n=arguments.length,c=n<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,a,e,o);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(n<3?r(c):n>3?r(a,e,c):r(a,e))||c);return n>3&&c&&Object.defineProperty(a,e,c),c},s=function(){function t(){}return t}();s=i([e.i(o.NgModule)({imports:[r.CommonModule,c.ReactiveFormsModule],declarations:[n.a]})],s)},"./src/app/facturacion-electronica/general/services/configuracionDocumento/parametroDocumento.servicio.ts":function(t,a,e){"use strict";var o=e("./node_modules/@angular/core/@angular/core.es5.js"),r=e("./node_modules/@angular/common/@angular/common/http.es5.js"),n=e("./src/app/facturacion-electronica/general/services/servidores.ts");e.d(a,"a",function(){return s});var c=this&&this.__decorate||function(t,a,e,o){var r,n=arguments.length,c=n<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,a,e,o);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(n<3?r(c):n>3?r(a,e,c):r(a,e))||c);return n>3&&c&&Object.defineProperty(a,e,c),c},i=this&&this.__metadata||function(t,a){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,a)},s=function(){function t(t,a){this.httpClient=t,this.servidores=a,this.url="/parametros",this.buscar="/search",this.buscarPorIdParametro=this.buscar+"/findByIdParametro",this.buscarPorParametro="/search/dominios",this.url=this.servidores.AFEDOCUQRY+this.url,this.parametrosDocumento=[],this.obtenerTodos()}return t.prototype.obtenerTodos=function(){return this.obtener(this.url),this.obtenerParametrosDocumento()},t.prototype.obtener=function(t,a){var e=this;void 0===a&&(a=new r.d),this.httpClient.get(t,{params:a}).subscribe(function(t){e.parametrosDocumento=t._embedded.parametroRedises,console.log("parametros"),console.log(e.parametrosDocumento),console.log(t)})},t.prototype.obtenerPorId=function(t){var a=(new r.d).set("id_parametro",t.toString());return this.obtener(this.url+this.buscarPorIdParametro,a),1==this.obtenerParametrosDocumento().length?this.obtenerParametrosDocumento()[0]:null},t.prototype.obtenerParametrosPorId=function(t){var a=(new r.d).set("idparametro",t.toString());return this.obtener(this.url+this.buscarPorParametro,a),1==this.obtenerParametrosDocumento().length?this.obtenerParametrosDocumento()[0]:null},t.prototype.obtenerParametrosDocumento=function(){return this.parametrosDocumento},t}();s=c([e.i(o.Injectable)(),i("design:paramtypes",["function"==typeof(l=void 0!==r.b&&r.b)&&l||Object,"function"==typeof(u=void 0!==n.a&&n.a)&&u||Object])],s);var l,u},"./src/app/facturacion-electronica/general/services/person.service.ts":function(t,a,e){"use strict";var o=e("./node_modules/@angular/common/@angular/common/http.es5.js"),r=e("./node_modules/@angular/core/@angular/core.es5.js"),n=e("./node_modules/rxjs/BehaviorSubject.js"),c=(e.n(n),e("./src/app/facturacion-electronica/general/services/base.paginacion.ts")),i=e("./src/app/facturacion-electronica/general/services/servidores.ts");e.d(a,"a",function(){return u});var s=this&&this.__decorate||function(t,a,e,o){var r,n=arguments.length,c=n<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,a,e,o);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(n<3?r(c):n>3?r(a,e,c):r(a,e))||c);return n>3&&c&&Object.defineProperty(a,e,c),c},l=this&&this.__metadata||function(t,a){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,a)},u=function(){function t(t,a,e){this.httpClient=t,this.servidores=a,this.paginacion=e,this.url="/people",this.url=this.servidores.server+this.url,this.data=new n.BehaviorSubject([]),this.paginacion=new c.a}return t.prototype.get=function(t,a){void 0===a&&(a=this.url);var e=this;this.httpClient.get(a,{params:t}).take(1).subscribe(function(t){e.data.next(t._embedded.people),e.paginacion.pagina.next(t.page.number),e.paginacion.totalItems.next(t.page.totalElements),e.paginacion.totalPaginas.next(t.page.totalPages-1),t._links.next?e.paginacion.next.next(t._links.next.href):e.paginacion.next.next(""),t._links.last?e.paginacion.last.next(t._links.last.href):e.paginacion.last.next(""),t._links.first?e.paginacion.first.next(t._links.first.href):e.paginacion.first.next(""),t._links.prev?e.paginacion.previous.next(t._links.prev.href):e.paginacion.previous.next("")})},t}();u=s([e.i(r.Injectable)(),l("design:paramtypes",["function"==typeof(d=void 0!==o.b&&o.b)&&d||Object,"function"==typeof(m=void 0!==i.a&&i.a)&&m||Object,"function"==typeof(p=void 0!==c.a&&c.a)&&p||Object])],u);var d,m,p}});