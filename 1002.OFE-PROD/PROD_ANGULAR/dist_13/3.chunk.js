webpackJsonp([3],{"./src/app/facturacion-electronica/percepcion-retencion/item-crear-editar/item-crear-editar.component.html":function(e,t){e.exports='<div class="row col-md-12">\r\n  <div class="card">\r\n    <div class="card-header card-header-text" data-background-color="blue">\r\n      <h4 class="card-title">{{titulo | translate}}</h4>\r\n    </div>\r\n    <div class="card-content">\r\n      <form [formGroup]="itemFormGroup" (ngSubmit)="agregaritem()">\r\n        <div class="row">\r\n          <div class="col-md-4">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'tipoDocumento\' | translate}} <span class="star">*</span></label>\r\n              <select name="cmbtipodocrp" formControlName="cmbtipodocrp" class="form-control">\r\n                <option *ngFor="let tiposComprobante of tiposComprobantes | async" [value]="tiposComprobante.codigo"> {{tiposComprobante.descripcionLarga}}</option>\r\n              </select>\r\n              <span *ngIf="!itemFormGroup.get(\'cmbtipodocrp\').valid && itemFormGroup.get(\'cmbtipodocrp\').touched">\r\n                <span *ngIf="itemFormGroup.controls[\'cmbtipodocrp\'].hasError(\'required\')" class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-2">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label"> {{\'serie\' | translate}} <span class="star">*</span></label>\r\n              <input [SerieDirective]="true" id="txtserie" formControlName="txtserie" autocomplete="off" class="form-control" type="text" minlength="4" min="4" maxlength="4" max="4" >\r\n              <span *ngIf="!itemFormGroup.get(\'txtserie\').valid && itemFormGroup.get(\'txtserie\').touched">\r\n                <span *ngIf="itemFormGroup.controls[\'txtserie\'].hasError(\'required\')"  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtserie\'].hasError(\'pattern\')"   class="text-danger">{{\'formatoInvalido\' | translate}}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtserie\'].hasError(\'minlength\')" class="text-danger">{{\'minimoDigitos\' | translate:{digito:\'4\'} }}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtserie\'].hasError(\'maxlength\')" class="text-danger">{{\'maximoDigitos\' | translate:{digito:\'4\'} }}</span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-2">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'correlativo\' | translate}}<span class="star">*</span></label>\r\n              <input correlativoDirective id="txtcorrelativo" autocomplete="off" formControlName="txtcorrelativo" class="form-control" type="text">\r\n              <span *ngIf="!itemFormGroup.get(\'txtcorrelativo\').valid && itemFormGroup.get(\'txtcorrelativo\').touched">\r\n                <span *ngIf="itemFormGroup.controls[\'txtcorrelativo\'].hasError(\'required\')" class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-4">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'fechaEmision\' | translate}}<span class="star">*</span> </label>\r\n              <input id="datefechaemision" formControlName="datefechaemision" autocomplete="off" type="text" class="form-control" datepicker/>\r\n              <span *ngIf="!itemFormGroup.get(\'datefechaemision\').valid && itemFormGroup.get(\'datefechaemision\').touched">\r\n                <span *ngIf="itemFormGroup.controls[\'datefechaemision\'].hasError(\'required\')" class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n              </span>\r\n              <span *ngIf="itemFormGroup.controls[\'datefechaemision\'].hasError(\'errorFecha\')" class="text-danger">{{itemFormGroup.controls[\'datefechaemision\'].getError(\'errorFecha\') | translate}}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="row">\r\n          <div class="col-md-4">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'tipoMoneda\' | translate}} <span class="star">*</span></label>\r\n              <select name="cmbMoneda" formControlName="cmbMoneda" autocomplete="off" class="form-control" (change)="seleccionarMoneda()">\r\n                <option *ngFor="let moneda of todosTiposMonedas | async" [value]="moneda.codigo"> {{moneda.descripcionCorta}}</option>\r\n              </select>\r\n              <span *ngIf="!itemFormGroup.get(\'cmbMoneda\').valid && itemFormGroup.get(\'cmbMoneda\').touched">\r\n                <span *ngIf="itemFormGroup.controls[\'cmbMoneda\'].hasError(\'required\')" class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-4">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'importeTotal\' | translate}} <span class="star">*</span></label>\r\n              <input precioDirectiva id="txtmonto" formControlName="txtmonto" autocomplete="off" class="form-control" type="text" (keyup)="ready()">\r\n              <span *ngIf="!itemFormGroup.get(\'txtmonto\').valid && itemFormGroup.get(\'txtmonto\').touched">\r\n                <span *ngIf="itemFormGroup.controls[\'txtmonto\'].hasError(\'required\')"  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtmonto\'].hasError(\'pattern\')"   class="text-danger">{{\'formatoInvalido\' | translate}}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtmonto\'].hasError(\'minlength\')" class="text-danger">{{\'minimoDigitos\' | translate:{digito:\'4\'} }}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtmonto\'].hasError(\'maxlength\')" class="text-danger">{{\'maximoDigitos\' | translate:{digito:\'16\'} }}</span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-4">\r\n            <div class="form-group label-floating">\r\n              <label  class="control-label">{{\'tipoCambio\' | translate}}</label>\r\n              <input precioDirectiva id="txtTipoCambio" formControlName="txtTipoCambio" autocomplete="off" class="form-control" type="text" (keyup)="ready()" >\r\n              <span *ngIf="!itemFormGroup.get(\'txtTipoCambio\').valid && itemFormGroup.get(\'txtTipoCambio\').touched">\r\n                <span *ngIf="itemFormGroup.controls[\'txtTipoCambio\'].hasError(\'required\')"  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtTipoCambio\'].hasError(\'pattern\')"   class="text-danger">{{\'formatoInvalido\' | translate}}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtTipoCambio\'].hasError(\'minlength\')" class="text-danger">{{\'minimoDigitos\' | translate:{digito:\'4\'} }}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtTipoCambio\'].hasError(\'maxlength\')" class="text-danger">{{\'maximoDigitos\' | translate:{digito:\'16\'} }}</span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n          <div class="col-md-4">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'importeSoles\' | translate}}</label>\r\n              <input precioDirectiva id="txtImporteSoles" formControlName="txtImporteSoles" autocomplete="off" class="form-control" disabled type="text">\r\n              <span *ngIf="!itemFormGroup.get(\'txtImporteSoles\').valid && itemFormGroup.get(\'txtImporteSoles\').touched">\r\n                <span *ngIf="itemFormGroup.controls[\'txtImporteSoles\'].hasError(\'required\')"  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtImporteSoles\'].hasError(\'pattern\')"   class="text-danger">Ej. 10.00</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtImporteSoles\'].hasError(\'minlength\')" class="text-danger">{{\'minimoDigitos\' | translate:{digito:\'4\'} }}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtImporteSoles\'].hasError(\'maxlength\')" class="text-danger">{{\'maximoDigitos\' | translate:{digito:\'16\'} }}</span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-4">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'impretencion\' | translate}} <span class="star">*</span></label>\r\n              <input precioDirectiva id="txtretencion" formControlName="txtretencion" autocomplete="off" class="form-control" (keyup)="ready()" type="text">\r\n              <span *ngIf="!itemFormGroup.get(\'txtretencion\').valid && itemFormGroup.get(\'txtretencion\').touched">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtretencion\'].hasError(\'required\')"  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                  <span *ngIf="itemFormGroup.controls[\'txtretencion\'].hasError(\'pattern\')"   class="text-danger">Ej. 10.00</span>\r\n                  <span *ngIf="itemFormGroup.controls[\'txtretencion\'].hasError(\'minlength\')" class="text-danger">{{\'minimoDigitos\' | translate:{digito:\'4\'} }}</span>\r\n                  <span *ngIf="itemFormGroup.controls[\'txtretencion\'].hasError(\'maxlength\')" class="text-danger">{{\'maximoDigitos\' | translate:{digito:\'16\'} }}</span>\r\n                </span>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-4">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">{{\'porcentajeRetencion\' | translate}} <span class="star">*</span> </label>\r\n                <input precioDirectiva id="txtretencionxciento" formControlName="txtretencionxciento" autocomplete="off" class="form-control" type="text">\r\n                <span *ngIf="!itemFormGroup.get(\'txtretencionxciento\').valid && itemFormGroup.get(\'txtretencionxciento\').touched">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtretencionxciento\'].hasError(\'required\')"  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                  <span *ngIf="itemFormGroup.controls[\'txtretencionxciento\'].hasError(\'pattern\')"   class="text-danger">{{\'formatoInvalido\' | translate}}</span>\r\n                  <span *ngIf="itemFormGroup.controls[\'txtretencionxciento\'].hasError(\'minlength\')" class="text-danger">{{\'minimoDigitos\' | translate:{digito:\'4\'} }}</span>\r\n                  <span *ngIf="itemFormGroup.controls[\'txtretencionxciento\'].hasError(\'maxlength\')" class="text-danger">{{\'maximoDigitos\' | translate:{digito:\'16\'} }}</span>\r\n                </span>\r\n              </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n          <div class="col-md-12" align="right">\r\n            <button *ngIf="editable" id="btnGuardar" name="btnGuardar" type="button" class="btn btn-default" [disabled]="!itemFormGroup.valid" (click)="editaritem()"> Guardar </button>\r\n            <button *ngIf="editablelimpiar" id="btnEditar" name="btnEditar" type="button" class="btn btn-default" (click)="cambiarestado()"> Editar</button>\r\n            <button *ngIf="editableaceptar" id="btnAceptar" name="btnAceptar" type="submit" class="btn btn-default"\r\n                    [disabled]="!(itemFormGroup.valid && validarporcentaje())"> {{\'agregarItem\' | translate}}\r\n            </button>\r\n            <button type="button" id="btnCancelar" name="btnCancelar" class="btn btn-default" (click)="cancelaritem()"> {{\'regresar \' | translate}}</button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n'},"./src/app/facturacion-electronica/percepcion-retencion/item-crear-editar/item-crear-editar.component.ts":function(e,t,r){"use strict";var o=r("./node_modules/@angular/core/@angular/core.es5.js"),i=r("./node_modules/@angular/forms/@angular/forms.es5.js"),n=r("./node_modules/@angular/router/@angular/router.es5.js"),a=r("./src/app/facturacion-electronica/percepcion-retencion/models/retencionebiz.ts"),c=r("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.service.ts"),s=r("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),l=r("./node_modules/rxjs/BehaviorSubject.js"),p=(r.n(l),r("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts")),d=r("./src/app/facturacion-electronica/general/models/documento/tablaMaestra.ts"),u=r("./src/app/facturacion-electronica/percepcion-retencion/services/validadortabla.ts"),m=r("./src/app/facturacion-electronica/general/services/utils/validadorPersonalizado.ts");r.d(t,"a",function(){return b});var v=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(t,r,a):i(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e,t,r,o,i){this.route=e,this.router=t,this.persistenciaService=r,this._tipos=o,this._tablaMaestraService=i,this.monedas=[],this.editablelimpiar=!0,this.fechaedicion=!0,this.flagedit="",this.tiposComprobantes=new l.BehaviorSubject([]),this.todosTiposMonedas=new l.BehaviorSubject([]),this.todosTiposComprobantes=new l.BehaviorSubject([]),this.cargarServiciosArranque(),this.retencionEbiz=new a.a,this.flagedit="FLAG EDIT",this.mesnorm="",this.dianorm=""}return e.prototype.deshabilitar=function(){this.itemFormGroup.disable(),$("#datefechaemision").prop("disabled",!0),this.fechaedicion=!1},e.prototype.cargarServiciosArranque=function(){this.todosTiposComprobantes=this._tablaMaestraService.obtenerPorIdTabla(d.a),this.todosTiposMonedas=this._tablaMaestraService.obtenerPorIdTabla(d.b)},e.prototype.setTipoComprobante=function(){var e=[];e=[this._tipos.TIPO_DOCUMENTO_FACTURA,this._tipos.TIPO_DOCUMENTO_NOTA_CREDITO,this._tipos.TIPO_DOCUMENTO_NOTA_DEBITO],this.tiposComprobantes=this._tablaMaestraService.obtenerPorCodigoDeTablaMaestra(this.todosTiposComprobantes,e)},e.prototype.setTipoItem=function(){switch(this.tipoaccion){case 1:this.editable=!1,this.editableaceptar=!0,this.editablelimpiar=!1;break;case 2:this.editable=!1,this.editableaceptar=!1,this.cargarProductoEditar()}},e.prototype.validarporcentaje=function(){var e=this.itemFormGroup.valid;return this.itemFormGroup.controls.txtretencionxciento.value.length<=0&&1==e?this.validarporcentajes=!1:this.validarporcentajes=!0,this.validarporcentajes},e.prototype.obtenerParametros=function(){var e=this;this.tipoAccion=this.route.snapshot.data.tipoAccion,this.tipoDocumento=this.route.snapshot.data.tipoDocumento;this.route.params.subscribe(function(t){e.idPosicion=+t.id});this.setTipoItem()},e.prototype.ngOnInit=function(){this.obtenerParametros(),this.initForm(),this.titulo=this.route.snapshot.data.titulo,this.tipoaccion=this.route.snapshot.data.tipoaccion,this.setTipoItem(),this.itemFormGroup.controls.txtTipoCambio.disable()},e.prototype.seleccionarMoneda=function(){switch(this.itemFormGroup.controls.cmbMoneda.value){case this._tipos.TIPO_MONEDA_SOL:this.itemFormGroup.controls.txtTipoCambio.disable(),this.itemFormGroup.controls.txtImporteSoles.disable(),this.itemFormGroup.controls.txtTipoCambio.setValue(1..toFixed(2)),this.tipoCambio(),this.calcular_porcentaje_retencion(),this.ready(),this.eliminarEstiloInputNormal("txtTipoCambio","is-empty");break;default:this.itemFormGroup.controls.txtTipoCambio.enable(),this.itemFormGroup.controls.txtImporteSoles.disable(),"EDICION"!=this.flagedit&&this.itemFormGroup.get("txtTipoCambio").reset(),this.flagedit="FLAG EDITADO",this.tipoCambio(),this.calcular_porcentaje_retencion(),this.ready()}},e.prototype.tipoCambio=function(){var e=this.itemFormGroup.get("txtmonto").value,t=this.itemFormGroup.get("txtTipoCambio").value;if(this.calcular_porcentaje_retencion(),Number(e)>0&&Number(t)>0){var r=this.itemFormGroup.get("txtmonto").value,o=this.itemFormGroup.get("txtTipoCambio").value,i=Number(r*o).toFixed(2);this.itemFormGroup.controls.txtImporteSoles.setValue(i),setTimeout(function(){$("input").each(function(){$(this.parentElement).removeClass("is-empty")})},200)}else this.itemFormGroup.controls.txtImporteSoles.setValue("")},e.prototype.eliminarEstiloInputNormal=function(e,t){setTimeout(function(){$("#"+e).parent().removeClass(t)},200)},e.prototype.editaritem=function(){this.validarMontoMinimoRetencion()||this.validarMontoMinimoRetencionsoles()?(this.editaritemproducto(),swal({type:"success",title:"Acción Exitosa",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Sí"}),this.router.navigateByUrl("percepcion-retencion/retencion/crear/individual")):swal({title:"Alerta",html:'<div class="text-center"> El Importe Total mínimo debe ser de 701.00 soles.</div>',type:"warning",confirmButtonText:"Sí",confirmButtonClass:"btn btn-warning"})},e.prototype.editaritemproducto=function(){this.fillProducto(),this.persistenciaService.editarProducto(this.retencionEbiz,this.idPosicion)},e.prototype.agregaritem=function(){this.validarMontoMinimoRetencion()||this.validarMontoMinimoRetencionsoles()?(swal({type:"success",title:"Acción Exitosa",buttonsStyling:!1,confirmButtonText:"SÍ",confirmButtonClass:"btn btn-success"}),this.grabar(),this.router.navigateByUrl("percepcion-retencion/retencion/crear/individual")):swal({title:"Alerta",html:'<div class="text-center"> El Importe Total mínimo debe ser de 700.00 Soles.</div>',type:"warning",confirmButtonText:"Sí",confirmButtonClass:"btn btn-warning"})},e.prototype.validarMontoMinimoRetencion=function(){return Number(this.itemFormGroup.controls.txtmonto.value)>700},e.prototype.validarMontoMinimoRetencionsoles=function(){return Number(this.itemFormGroup.controls.txtImporteSoles.value)>700},e.prototype.ready=function(){this.tipoCambio(),this.calcular_porcentaje_retencion(),this.calcular_porcentaje_retencion()},e.prototype.calcular_porcentaje_retencion=function(){var e=this.itemFormGroup.get("txtImporteSoles").value,t=this.itemFormGroup.get("txtretencion").value;if(Number(t)<=Number(e)&&Number(e)>0&&Number(t)>0){if(""!=e&&""!=t){var r=this.itemFormGroup.get("txtImporteSoles").value,o=this.itemFormGroup.get("txtretencion").value,i=o/r,n=(100*i).toFixed(2);this.itemFormGroup.controls.txtretencionxciento.setValue(n),setTimeout(function(){$("input").each(function(){$(this.parentElement).removeClass("is-empty")})},200)}}else this.itemFormGroup.controls.txtretencionxciento.setValue("")},e.prototype.cancelaritem=function(){this.router.navigateByUrl("percepcion-retencion/retencion/crear/individual")},e.prototype.initForm=function(){var e=new Date,t=e.getDate().toString()+"/"+(e.getMonth()+1).toString()+"/"+e.getFullYear().toString();this.itemFormGroup=new i.FormGroup({cmbtipodocrp:new i.FormControl("",[i.Validators.required]),txtserie:new i.FormControl("",[i.Validators.required,i.Validators.pattern("[A-Z0-9]{4}"),i.Validators.minLength(4),i.Validators.maxLength(4)]),txtcorrelativo:new i.FormControl("",[i.Validators.required]),txtmonto:new i.FormControl("",[i.Validators.required,i.Validators.pattern("[0-9]+[.][0-9]{2}"),i.Validators.minLength(4),i.Validators.maxLength(15),u.a.HayValoresenlaTabla()]),txtretencion:new i.FormControl("",[i.Validators.required,i.Validators.pattern("[0-9]+[.][0-9]{2}"),i.Validators.minLength(4),i.Validators.maxLength(15),u.a.HayValoresenlaTabla()]),txtretencionxciento:new i.FormControl({value:"",disabled:!0},[i.Validators.required,i.Validators.pattern("[0-9]+[.][0-9]{2}"),i.Validators.minLength(4),i.Validators.maxLength(15),u.a.HayValoresenlaTabla()]),datefechaemision:new i.FormControl(t,[i.Validators.required,m.a.fechaDeberiaSerMenorAHoy("errorFecha")]),cmbMoneda:new i.FormControl("",[i.Validators.required]),txtTipoCambio:new i.FormControl("",[i.Validators.required,i.Validators.pattern("[0-9]+[.][0-9]{2}"),i.Validators.minLength(4),i.Validators.maxLength(15),u.a.HayValoresenlaTabla()]),txtImporteSoles:new i.FormControl("",[i.Validators.required,i.Validators.pattern("[0-9]+[.][0-9]{2}"),i.Validators.minLength(4),i.Validators.maxLength(15),u.a.HayValoresenlaTabla()])}),this.setTipoComprobante()},e.prototype.cargarProductoEditar=function(){if(this.retencionEbizedit=this.persistenciaService.getItemProducto(this.idPosicion),null!=this.retencionEbizedit){this.itemFormGroup.controls.cmbtipodocrp.setValue(this.retencionEbizedit.tipoDocumentoDestino),this.itemFormGroup.controls.txtserie.setValue(this.retencionEbizedit.serieDocumentoDestino),this.itemFormGroup.controls.txtcorrelativo.setValue(this.retencionEbizedit.correlativoDocumentoDestino),this.itemFormGroup.controls.txtmonto.setValue(this.retencionEbizedit.totalImporteDestino),this.itemFormGroup.controls.txtretencion.setValue(this.retencionEbizedit.totalImporteAuxiliarDestino),this.itemFormGroup.controls.txtretencionxciento.setValue(this.retencionEbizedit.totalPorcentajeAuxiliarDestino);var e=this.retencionEbizedit.fechaEmisionDestino.split("-"),t=e[0],r=e[1],o=e[2],i=r+"/"+o+"/"+t,n=new Date(i),a=n.getFullYear().toString(),c=(n.getMonth()+1).toString(),s=n.getDate().toString(),l=s+"/"+c+"/"+a;this.itemFormGroup.controls.datefechaemision.setValue(l),this.itemFormGroup.controls.cmbMoneda.setValue(this.retencionEbizedit.idMoneda),this.itemFormGroup.controls.txtImporteSoles.setValue(this.retencionEbizedit.totalMonedaDestino),this.itemFormGroup.controls.txtTipoCambio.setValue(this.retencionEbizedit.auxiliar1),setTimeout(function(){$("select").each(function(){$(this.parentElement).removeClass("is-empty")})},200),this.deshabilitar()}else this.router.navigateByUrl("percepcion-retencion/retencion/crear/individual")},e.prototype.limpiar=function(e){this.itemFormGroup.reset()},e.prototype.cambiarestado=function(){this.fechaedicion=!1,$("#datefechaemision").prop("disabled",!1),this.editablelimpiar=!1,this.editable=!0,this.itemFormGroup.enable(),this.itemFormGroup.controls.txtretencionxciento.disable(),this.flagedit="EDICION",this.seleccionarMoneda()},e.prototype.filtro=function(e){this.fillProducto()},e.prototype.fillProducto=function(){var e=this,t=this.itemFormGroup.get("datefechaemision").value.toString().split("/"),r=t[0],o=t[1];o.length<2&&Number(o)<10?this.mesnorm="0"+o:this.mesnorm=o,r.length<2&&Number(r)<10?this.dianorm="0"+r:this.dianorm=r;var i=t[2];this.retencionEbiz.fechaEmisionDestino=i+"-"+this.mesnorm+"-"+this.dianorm;var n=this.tiposComprobantes.getValue().findIndex(function(t){return t.codigo==e.itemFormGroup.get("cmbtipodocrp").value});this.retencionEbiz.tipoDocumentoDestino=this.itemFormGroup.get("cmbtipodocrp").value,this.retencionEbiz.tipoDocumentoDestinoDescripcion=-1==n?"":this.tiposComprobantes.getValue()[n].descripcionLarga,this.retencionEbiz.tipoDocumentoOrigen="20",this.retencionEbiz.tipoDocumentoOrigenDescripcion="RETENCION",this.retencionEbiz.correlativoDocumentoDestino=this.itemFormGroup.get("txtcorrelativo").value,this.retencionEbiz.serieDocumentoDestino=this.itemFormGroup.get("txtserie").value,this.retencionEbiz.totalMonedaDestino=this.itemFormGroup.get("txtmonto").value,this.retencionEbiz.totalImporteAuxiliarDestino=this.itemFormGroup.get("txtretencion").value,this.retencionEbiz.totalPorcentajeAuxiliarDestino=this.itemFormGroup.get("txtretencionxciento").value,this.retencionEbiz.idMoneda=this.itemFormGroup.get("cmbMoneda").value,this.retencionEbiz.polizaFactura="-";var a=this.todosTiposMonedas.getValue().findIndex(function(t){return t.codigo==e.itemFormGroup.get("cmbMoneda").value});this.retencionEbiz.monedaDestino=-1==n?"":this.todosTiposMonedas.getValue()[a].descripcionCorta,"PEN"==this.retencionEbiz.monedaDestino?(this.retencionEbiz.totalImporteDestino=this.itemFormGroup.get("txtmonto").value,this.retencionEbiz.auxiliar1=1..toFixed(2)):(this.retencionEbiz.auxiliar1=this.itemFormGroup.get("txtTipoCambio").value,this.retencionEbiz.totalImporteDestino=this.itemFormGroup.get("txtImporteSoles").value),this.retencionEbiz.auxiliar2=(Number(this.retencionEbiz.totalMonedaDestino)-Number(this.retencionEbiz.totalImporteAuxiliarDestino)).toString()},e.prototype.grabar=function(){this.fillProducto(),this.persistenciaService.agregarProducto(this.retencionEbiz)},e}();b=v([r.i(o.Component)({selector:"app-item-crear-editar",template:r("./src/app/facturacion-electronica/percepcion-retencion/item-crear-editar/item-crear-editar.component.html"),styles:[r("./src/app/facturacion-electronica/percepcion-retencion/item-crear-editar/item-crear-editar.css")]}),h("design:paramtypes",["function"==typeof(f=void 0!==n.c&&n.c)&&f||Object,"function"==typeof(g=void 0!==n.b&&n.b)&&g||Object,"function"==typeof(x=void 0!==c.a&&c.a)&&x||Object,"function"==typeof(_=void 0!==s.a&&s.a)&&_||Object,"function"==typeof(y=void 0!==p.a&&p.a)&&y||Object])],b);var f,g,x,_,y},"./src/app/facturacion-electronica/percepcion-retencion/item-crear-editar/item-crear-editar.css":function(e,t,r){t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"input.ng-invalid.ng-touched,mat-select.ng-invalid.ng-touched{border-bottom:1px solid red}mat-select{border-bottom:1px solid #aaa}.text-danger{font-size:11px;font-weight:700}",""]),e.exports=e.exports.toString()},"./src/app/facturacion-electronica/percepcion-retencion/item-crear-editar/item-crear-editar.module.ts":function(e,t,r){"use strict";var o=r("./node_modules/@angular/core/@angular/core.es5.js"),i=r("./node_modules/@angular/common/@angular/common.es5.js"),n=r("./node_modules/@angular/forms/@angular/forms.es5.js"),a=r("./node_modules/@ngx-translate/core/index.js"),c=r("./src/app/facturacion-electronica/general/directivas/directivas.module.ts"),s=r("./node_modules/ng2-auto-complete/dist/index.js"),l=(r.n(s),r("./src/app/facturacion-electronica/general/services/servidores.ts")),p=r("./src/app/facturacion-electronica/percepcion-retencion/item-crear-editar/item-crear-editar.component.ts"),d=r("./src/app/facturacion-electronica/general/data-table/data-table.module.ts"),u=r("./src/app/facturacion-electronica/general/pdf-viewer/pdf-viewer.module.ts"),m=r("./node_modules/@angular/http/@angular/http.es5.js"),v=r("./src/app/directives/datepicker.module.ts"),h=r("./node_modules/ng2-completer/index.js"),b=r("./src/app/facturacion-electronica/general/consulta/consulta.module.ts"),f=r("./node_modules/@angular/common/@angular/common/http.es5.js"),g=r("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia-post.ts"),x=r("./src/app/facturacion-electronica/general/services/comprobantes/comprobantes.service.ts"),_=r("./src/app/facturacion-electronica/percepcion-retencion/services/retencionpersiscabecera.service.ts"),y=r("./src/app/facturacion-electronica/general/services/documento/nuevoDocumento.ts"),F=r("./src/app/facturacion-electronica/general/services/comprobantes/retencion.service.ts"),C=r("./src/app/facturacion-electronica/general/services/comprobantes/retenciones.service.ts"),E=r("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.entidad.service.ts"),D=r("./src/app/facturacion-electronica/general/services/archivos/archivo.service.ts"),S=r("./src/app/facturacion-electronica/percepcion-retencion/services/percepcion-retencion-referencias.service.ts"),I=r("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.service.ts"),G=r("./src/app/facturacion-electronica/percepcion-retencion/services/archivoMasiva.service.ts"),w=r("./src/app/facturacion-electronica/general/utils/estadoArchivo.service.ts");r.d(t,"a",function(){return O});var j=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(t,r,a):i(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a},O=function(){function e(){}return e}();O=j([r.i(o.NgModule)({imports:[i.CommonModule,n.ReactiveFormsModule,c.a,n.FormsModule,m.HttpModule,f.a,v.a,u.a,d.a,b.a,a.a,c.a,h.a,s.Ng2AutoCompleteModule],declarations:[p.a],exports:[p.a],providers:[l.a,I.a,_.a,w.a,G.a,y.a,E.a,C.a,C.a,D.a,g.a,x.a,F.a,S.a]})],O)},"./src/app/facturacion-electronica/percepcion-retencion/models/archivoMasiva.ts":function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return i});var o=function(){function e(){}return e.prototype.crearArchivoMasivaEntrada=function(e,t,r){this.nombreArchivo=e,this.tamanhoArchivo=t,this.data=r},e}(),i=function(){function e(){}return e}();!function(){function e(){}}()},"./src/app/facturacion-electronica/percepcion-retencion/models/retencionmasivaebiz.ts":function(e,t,r){"use strict";r.d(t,"a",function(){return o});var o=function(){function e(){this.usuario="",this.fecha=Date.prototype,this.hora=Date.prototype,this.nombrearchivo="",this.tamañoarchivo="",this.ticket="",this.estado="",this.estadoId=-1}return e}()},"./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion-masiva/retencion-masiva.component.css":function(e,t,r){t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"input.ng-invalid.ng-touched,mat-select.ng-invalid.ng-touched{border-bottom:1px solid red}mat-select{border-bottom:1px solid #aaa}.control-label{display:-webkit-box;display:-ms-flexbox;display:flex;.:center}.text-danger{font-size:11px;font-weight:700}.navbar.navbar-info{margin:0 15px 15px}.btn.btn-default.btn-simple{color:#0079bf}",""]),e.exports=e.exports.toString()},"./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion-masiva/retencion-masiva.component.html":function(e,t){e.exports='<div class="card">\r\n  <div class="card-content">\r\n    <div class="row">\r\n      <div class="col-md-8">\r\n        <div class="col-md-1"></div>\r\n        <div class="col-md-11">\r\n          <div class="row"><label><h3><b>{{\'instrucciones\' | translate}}</b></h3></label></div>\r\n          <div class="row">\r\n            <label>{{\'instruccionesRetencion\' | translate}}</label>\r\n          </div>\r\n          <div class="row">\r\n            <label><i class="material-icons" style="font-size: 10px">play_arrow</i>\r\n              &nbsp; {{\'regla1Retencion\' | translate}}\r\n            </label>\r\n          </div>\r\n          <div class="row">\r\n            <label><i class="material-icons" style="font-size: 10px">play_arrow</i>\r\n              &nbsp; {{\'regla2Retencion\' | translate}}\r\n            </label>\r\n          </div>\r\n          <div class="row">\r\n            <label><i class="material-icons" style="font-size: 10px">play_arrow</i>\r\n              &nbsp; {{\'regla3Retencion\' | translate}}\r\n            </label>\r\n          </div>\r\n          <div class="row">\r\n            <label><i class="material-icons" style="font-size: 10px">play_arrow</i>\r\n              &nbsp; {{\'regla4Retencion\' | translate}}\r\n            </label>\r\n          </div>\r\n          <div class="row">\r\n            <label><i class="material-icons" style="font-size: 10px">play_arrow</i>\r\n              &nbsp; {{\'regla5Retencion\' | translate}}\r\n            </label>\r\n          </div>\r\n          <div class="row">\r\n            <label><i class="material-icons" style="font-size: 10px">play_arrow</i>\r\n              &nbsp; {{\'regla6Retencion\' | translate}}\r\n            </label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="col-md-4">\r\n        <div class="row" style="text-align: center">\r\n          <div class="center-block">\r\n            <label><h3><b>{{\'formato\' | translate}}</b></h3></label>\r\n          </div>\r\n        </div>\r\n        <div class="row" style="text-align: center">\r\n          <div class="center-block">\r\n            <button class="btn btn-default btn-simple" title="{{\'descargarFormatoArchivo\' | translate}}"\r\n                    (click)="descargarFormatoMasiva()"><i class="material-icons"\r\n                                                          style="font-size: 75px">file_download</i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="row">\r\n      <div class="col-md-1"></div>\r\n      <div class="col-md-11">\r\n        <div class="row">\r\n          <div class="col-md-3"><label><h4><b>{{\'seleccioneArchivo\' | translate}}</b></h4></label></div>\r\n          <form #formArchivo>\r\n            <div class="fileinput fileinput-new text-center" data-provides="fileinput">\r\n              <div class="row">\r\n                <div>\r\n                  <span class="btn btn-file btn-default blue">\r\n                      <span class="fileinput-new">{{\'seleccioneArchivo\' | translate}}</span>\r\n                      <span class="fileinput-exists">{{\'cambiar\' | translate}}</span>\r\n                      <input type="file" name="..."\r\n                             [(ngModel)]="archivo"\r\n                             archivoDirectiva\r\n                             #archivo1="ngModel"\r\n                             (change)="cambioArchivo($event)"\r\n                             #inputArchivo\r\n                      />\r\n                  </span>\r\n                  <a class="btn btn-danger fileinput-exists" data-dismiss="fileinput"\r\n                     (click)="clickEliminarArchivo()"><i\r\n                    class="fa fa-times"></i> {{\'eliminar\' | translate}}</a>\r\n                </div>\r\n                <div class="fileinput-preview fileinput-exists"></div>\r\n                <div class="fileinput-new">\r\n                  <label> &nbsp; {{\'ningunArchivoSeleccionado\' | translate}}</label>\r\n                </div>\r\n              </div>\r\n              <div class="row" *ngIf="!desahibilitarEliminarArchivo">\r\n                <span style="color: red" *ngIf="archivo1.errors">\r\n                  <strong *ngIf="archivo1.errors.tipo">\r\n                    {{archivo1.errors.tipo | translate}}\r\n                  </strong>\r\n                  <br>\r\n                  <strong *ngIf="archivo1.errors.tamanio">\r\n                    {{archivo1.errors.tamanio | translate}}\r\n                  </strong>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="row">\r\n      <div class="col-md-12" align="right">\r\n        <button type="submit" class="btn btn-default" (click)="cargarmasiva()"\r\n                [disabled]="(archivo1.errors || desahibilitarEliminarArchivo || desahibilitarEliminarArchivoAux)">\r\n          {{\'cargar\' | translate}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div class="row">\r\n      <div class="card">\r\n        <div class="card-header card-header-icon" data-background-color="blue">\r\n          <i class="material-icons">list</i>\r\n        </div>\r\n        <div class="row"><h3>{{\'listaArchivos\' | translate}}</h3></div>\r\n        <div class="row"><p>&nbsp;</p></div>\r\n        <nav class="navbar navbar-info" role="navigation"></nav>\r\n        <div class="card-content">\r\n          <app-data-table #tablamasiva\r\n                          [idTabla]="\'tablaMasiva\'"\r\n                          [cabecera]="cabeceramasiva"\r\n                          [atributos]="atributosmasiva"\r\n                          [ordenarPorElCampo]="ordenarPorElCampoMasiva"\r\n\r\n                          [usaServicio]="true"\r\n                          [servicio]="_archivoMasivaService"\r\n                          [parametros]="parametrosMasiva"\r\n                          [tipoAtributoServicio]="tipoMetodoMasiva"\r\n                          [urlServicio]="urlArchivoMasivaService"\r\n\r\n                          [acciones]="AccionesMasiva"\r\n                          [tipoAccion]="tipomasiva"\r\n                          [habilitarAcciones]="true"\r\n                          (iniciarData)="iniciarDataMasiva($event)"\r\n                          (accion)="ejecutarAccionMasiva($event)">\r\n          </app-data-table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},"./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion-masiva/retencion-masiva.component.ts":function(e,t,r){"use strict";var o=r("./node_modules/@angular/core/@angular/core.es5.js"),i=r("./node_modules/@angular/router/@angular/router.es5.js"),n=r("./src/app/facturacion-electronica/general/data-table/utils/accion.ts"),a=r("./src/app/facturacion-electronica/general/data-table/utils/tipo-accion.ts"),c=r("./src/app/facturacion-electronica/general/data-table/data-table.component.ts"),s=r("./src/app/facturacion-electronica/general/data-table/utils/modo-vista-accion.ts"),l=r("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.service.ts"),p=r("./src/app/facturacion-electronica/percepcion-retencion/models/retencionmasivaebiz.ts"),d=r("./src/app/facturacion-electronica/percepcion-retencion/services/retencionpersiscabecera.service.ts"),u=r("./src/app/facturacion-electronica/general/utils/estadoArchivo.service.ts"),m=r("./src/app/facturacion-electronica/general/services/organizacion/entidad.service.ts"),v=r("./src/app/facturacion-electronica/general/models/organizacion/entidad.ts"),h=r("./src/app/facturacion-electronica/percepcion-retencion/services/archivoMasiva.service.ts"),b=r("./src/app/facturacion-electronica/percepcion-retencion/models/archivoMasiva.ts"),f=r("./node_modules/@angular/common/@angular/common/http.es5.js"),g=r("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.entidad.service.ts"),x=r("./src/app/facturacion-electronica/general/services/configuracionDocumento/series.service.ts"),_=r("./src/app/facturacion-electronica/general/services/archivos/archivo.service.ts"),y=r("./node_modules/@ngx-translate/core/index.js"),F=r("./node_modules/rxjs/BehaviorSubject.js"),C=(r.n(F),r("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts")),E=r("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),D=r("./src/app/facturacion-electronica/general/models/archivos/tipoArchivo.ts");r.d(t,"a",function(){return G});var S=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(t,r,a):i(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a},I=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},G=function(){function e(e,t,r,o,i,c,l,p,d,u,m,h,b,g,x){this.httpClient=e,this.httpClient1=t,this.route=r,this.router=o,this.persistenciaService=i,this.RetencionCabecerapersistenciaService=c,this._estadoArchivo=l,this._entidadServices=p,this._entidadPersistenciaService=d,this.serieService=u,this._archivoMasivaService=m,this._archivoService=h,this._translateService=b,this._tipos=g,this._tablaMaestraService=x,this.titulo="Retención",this.desahibilitarEliminarArchivo=!1,this.desahibilitarEliminarArchivoAux=!0,this.series=[],this.entidad=[],this.entidad_uno=new v.a,this.mostrarretencion=!1,this.tiposComprobantes=new F.BehaviorSubject([]),this.todosTiposComprobantes=new F.BehaviorSubject([]),this.cabeceramasiva=[],this.atributosmasiva=[],this.tipomasiva=s.a.ICONOS,this.AccionesMasiva=[new n.b("visualizar",new n.c("visibility","btn-info"),a.a.VISUALIZAR),new n.b("descargar",new n.c("file_download","btn-info"),a.a.DESCARGAR)],this.activarRetencionSimple=!0,this.listaitemsmasiva=[],this.ordenarPorElCampoMasiva="fecha",this.cabeceramasiva=["usuario","fecha","nombreArchivo","tamañoArchivo","ticket","estado"],this.atributosmasiva=["usuario","fecha","nombreArchivo","tamanhoArchivo","ticket","estado"],this.tipoMetodoMasiva=this._archivoMasivaService.TIPO_ATRIBUTO_DOCUMENTO_MASIVO,this.parametrosMasiva=(new f.e).set("id_entidad",localStorage.getItem("id_entidad")),this.urlArchivoMasivaService=this._archivoMasivaService.urlQry,this.pathFormatoArchivoMasivo=this._archivoService.pathFormatoArchivoMasivo,this.archivoSeleccionado=new F.BehaviorSubject(null)}return e.prototype.ngOnInit=function(){},e.prototype.cambioArchivo=function(e){this.archivo;this.inputArchivo.nativeElement.cancelable=!0,0===e.target.files.length?null!==this.archivoSeleccionado.value?(this.inputArchivo.nativeElement.files=this.archivoSeleccionado.value,this.desahibilitarEliminarArchivo=!1,this.desahibilitarEliminarArchivoAux=!1):(this.desahibilitarEliminarArchivo=!0,this.desahibilitarEliminarArchivoAux=!0):(this.archivoSeleccionado.next(e.target.files),this.desahibilitarEliminarArchivo=!1,this.desahibilitarEliminarArchivoAux=!1)},e.prototype.clickEliminarArchivo=function(){this.desahibilitarEliminarArchivo=!0,this.desahibilitarEliminarArchivoAux=!1},e.prototype.iniciarDataMasiva=function(){},e.prototype.cargarmasiva=function(){var e=this,t=this,r="";t._translateService.get("deseaCargarArchivo").take(1).subscribe(function(e){return r=e});var o="";t._translateService.get("deseaCargarArchivos").take(1).subscribe(function(e){return o=e});var i="";t._translateService.get("si").take(1).subscribe(function(e){return i=e});var n="";t._translateService.get("no").take(1).subscribe(function(e){return n=e});var a="";t._translateService.get("accionCancelada").take(1).subscribe(function(e){return a=e});var c="";t._translateService.get("archivoNoSubido").take(1).subscribe(function(e){return c=e}),swal({title:r,padding:"20",type:"warning",showCancelButton:!0,confirmButtonText:i,cancelButtonText:n,confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(t){e.cargarMasivaArchivo()},function(e){swal(a,"","error")})},e.prototype.cargarMasivaArchivo=function(){this.listaitemsmasiva=[new p.a];var e=new FileReader,t=this.inputArchivo.nativeElement.files[0];e.readAsDataURL(t);var r="",o=this;e.onload=function(i){r=e.result.split(",")[1];var n=t.name,a=(t.size/1024).toFixed(2).toString()+"KB",c=r,s=new b.a;s.crearArchivoMasivaEntrada(n,a,c),o._archivoMasivaService.crearArchivoMasiva(s).subscribe(function(e){e&&setTimeout(function(){o.formArchivo.nativeElement.reset(),o.tablamasiva.cargarData()},1e3)})}},e.prototype.setEstadoTicketRetencionMasiva=function(e){switch(this.listaitemsmasiva[e].estadoId){case this._estadoArchivo.TIPO_ESTADO_ARCHIVO_PROCESADO:return this._estadoArchivo.TIPO_ESTADO_ARCHIVO_PROCESADO_NOMBRE;case this._estadoArchivo.TIPO_ESTADO_ARCHIVO_CON_ERROR:return this.listaitemsmasiva[e].ticket="-",this._estadoArchivo.TIPO_ESTADO_ARCHIVO_CON_ERROR_NOMBRE;case this._estadoArchivo.TIPO_ESTADO_ARCHIVO_EN_PROCESO:return this._estadoArchivo.TIPO_ESTADO_ARCHIVO_EN_PROCESO_NOMBRE}},e.prototype.ejecutarAccionMasiva=function(e){var t=e[0],r=new b.b;switch(r=e[1],t){case a.a.VISUALIZAR:this.router.navigate(["percepcion-retencion/retencion/masiva/detalle/",r.idDocumentoMasivo],{queryParams:{idDocumentoMasivo:r.idDocumentoMasivo,totalRegistros:r.totalRegistros,nombreArchivo:r.nombreArchivo,totalErrores:r.totalRegistrosErroneos},skipLocationChange:!0});break;case a.a.DESCARGAR:this._archivoService.descargararchivotipo(r.nombreArchivo,D.a.idArchivo)}},e.prototype.descargarFormatoMasiva=function(){this._archivoService.descargarFormatoArchivoMasiva()},e}();S([r.i(o.ViewChild)("tablamasiva"),I("design:type","function"==typeof(w=void 0!==c.a&&c.a)&&w||Object)],G.prototype,"tablamasiva",void 0),S([r.i(o.ViewChild)("inputArchivo"),I("design:type","function"==typeof(j=void 0!==o.ElementRef&&o.ElementRef)&&j||Object)],G.prototype,"inputArchivo",void 0),S([r.i(o.ViewChild)("formArchivo"),I("design:type","function"==typeof(O=void 0!==o.ElementRef&&o.ElementRef)&&O||Object)],G.prototype,"formArchivo",void 0),G=S([r.i(o.Component)({selector:"app-retencion-masiva",template:r("./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion-masiva/retencion-masiva.component.html"),styles:[r("./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion-masiva/retencion-masiva.component.css")]}),I("design:paramtypes",["function"==typeof(R=void 0!==f.b&&f.b)&&R||Object,"function"==typeof(A=void 0!==f.b&&f.b)&&A||Object,"function"==typeof(M=void 0!==i.c&&i.c)&&M||Object,"function"==typeof(T=void 0!==i.b&&i.b)&&T||Object,"function"==typeof(P=void 0!==l.a&&l.a)&&P||Object,"function"==typeof(z=void 0!==d.a&&d.a)&&z||Object,"function"==typeof(N=void 0!==u.a&&u.a)&&N||Object,"function"==typeof(V=void 0!==m.a&&m.a)&&V||Object,"function"==typeof(q=void 0!==g.a&&g.a)&&q||Object,"function"==typeof(k=void 0!==x.a&&x.a)&&k||Object,"function"==typeof(B=void 0!==h.a&&h.a)&&B||Object,"function"==typeof(L=void 0!==_.a&&_.a)&&L||Object,"function"==typeof($=void 0!==y.c&&y.c)&&$||Object,"function"==typeof(U=void 0!==E.a&&E.a)&&U||Object,"function"==typeof(H=void 0!==C.a&&C.a)&&H||Object])],G);var w,j,O,R,A,M,T,P,z,N,V,q,k,B,L,$,U,H},"./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion-unitaria/retencion-unitaria.component.css":function(e,t,r){t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"input.ng-invalid.ng-touched,mat-select.ng-invalid.ng-touched{border-bottom:1px solid red}mat-select{border-bottom:1px solid #aaa}.control-label{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.text-danger{font-size:11px;font-weight:700}.navbar.navbar-info{margin:0 15px 15px}.btn.btn-default.btn-simple{color:#0079bf}",""]),e.exports=e.exports.toString()},"./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion-unitaria/retencion-unitaria.component.html":function(e,t){e.exports='<div class="card">\r\n  <div class="card-content">\r\n    <form [formGroup]="productFormGroup">\r\n      <div class="row">\r\n        <div class="col-xs-12 col-sm-4 col-md-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'serie\' | translate}}<span class="star">*</span></label>\r\n            <select name="cmbserie" formControlName="cmbserie" class="form-control">\r\n              <option *ngFor="let serie of series" [value]="serie.idSerie"> {{serie.serie}}</option>\r\n            </select>\r\n            <span *ngIf="!productFormGroup.get(\'cmbserie\').valid && productFormGroup.get(\'cmbserie\').touched">\r\n              <span *ngIf="productFormGroup.controls[\'cmbserie\'].hasError(\'required\')" class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="col-xs-12 col-sm-4 col-md-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'fechaEmision\' | translate}} <span class="star">*</span> </label>\r\n            <input id="datefechapago" formControlName="datefechapago" type="text" class="form-control" autocomplete="off" datepicker/>\r\n            <span *ngIf="!productFormGroup.get(\'datefechapago\').valid && productFormGroup.get(\'datefechapago\').touched">\r\n              <span *ngIf="productFormGroup.controls[\'datefechapago\'].hasError(\'required\')" class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n            </span>\r\n            <span *ngIf="productFormGroup.controls[\'datefechapago\'].hasError(\'errorFecha\')" class="text-danger">{{productFormGroup.controls[\'datefechapago\'].getError(\'errorFecha\') | translate}}</span>\r\n          </div>\r\n        </div>\r\n        <div class="col-xs-12 col-sm-4 col-md-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'tipoMoneda\' | translate}} <span class="star">*</span> </label>\r\n            <input id="txttipomoneda" formControlName="txttipomoneda" class="form-control" autocomplete="off" type="text">\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row">\r\n        <div class="col-xs-12 col-sm-4 col-md-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label"> <i class="material-icons" style="font-size: 1.5rem;\r\n                  margin-right: 0.5rem;">search</i> {{\'ruc\' | translate}} <span class="star">*</span></label>\r\n            <input rucDirective id="txtruc" formControlName="txtruc" class="form-control" type="text" autocomplete="off"\r\n                   (keyup)="busquedaruc($event)">\r\n            <span *ngIf="!productFormGroup.get(\'txtruc\').valid && productFormGroup.get(\'txtruc\').touched">\r\n              <span *ngIf="productFormGroup.controls[\'txtruc\'].hasError(\'required\')" class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div class="col-xs-12 col-sm-4 col-md-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label"> <i class="material-icons" style="font-size: 1.5rem;\r\n                  margin-right: 0.5rem;">search</i>{{\'razonSocial\' | translate}}<span class="star">*</span></label>\r\n            <input ng2-auto-complete\r\n                   autocomplete="off"\r\n                   #inputrazonsocial\r\n                   type="text"\r\n                   id="razonsocial"\r\n                   formControlName="razonsocial"\r\n                   [source]="listarOrganizacionesDeAutcompletado.bind(this)"\r\n                   [list-formatter]="autocompleListFormatter"\r\n                   [value-formatter]="autocompleListFormatter"\r\n                   [loading-text]="\'cargando\' | translate"\r\n                   (valueChanged)="busqueda()"\r\n                   (change)="cambioAutocomplete()"\r\n                   min-chars=1\r\n                   [no-match-found-text]="\'noSeEncontraronResultados\' | translate"\r\n                   class="form-control">\r\n            <span\r\n              *ngIf="!productFormGroup.get(\'razonsocial\').valid && productFormGroup.get(\'razonsocial\').touched">\r\n                            <span *ngIf="productFormGroup.controls[\'razonsocial\'].hasError(\'required\')"\r\n                                  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                          </span>\r\n          </div>\r\n        </div>\r\n        <div class="col-xs-12 col-sm-4 col-md-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'txtcorreo\' | translate}} <span class="star">*</span> </label>\r\n            <input id="txtcorreo" formControlName="txtcorreo" class="form-control" autocomplete="off" type="email">\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-xs-12 col-sm-12 col-md-8">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'txtdireccionfiscal\' | translate}} <span class="star">*</span> </label>\r\n            <input id="txtdireccionfiscal" formControlName="txtdireccionfiscal" autocomplete="off" class="form-control" type="text">\r\n            <span *ngIf="!productFormGroup.get(\'txtdireccionfiscal\').valid && productFormGroup.get(\'txtdireccionfiscal\').touched">\r\n              <span *ngIf="productFormGroup.controls[\'txtdireccionfiscal\'].hasError(\'required\')" class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n    <div class="card">\r\n      <div class="card-header card-header-icon" data-background-color="blue">\r\n        <i class="material-icons">list</i>\r\n      </div>\r\n      <div class="row"><h3>{{\'listaItems\' | translate}}</h3></div>\r\n      <div class="row"><p>&nbsp;</p></div>\r\n      <nav class="navbar navbar-info" role="navigation"></nav>\r\n      <div class="card-content">\r\n        <app-data-table (iniciarData)="iniciarData($event)"\r\n                        (accion)="ejecutarAccion($event)"\r\n                        (eliminar)="eliminar($event)"\r\n                        (agregar)="agregarItem($event)"\r\n                        #tablaNormal [idTabla]="\'tabla1\'"\r\n                        [cabecera]="cabecera"\r\n                        [atributos]="atributos"\r\n                        [acciones]="AccionesPrueba"\r\n                        [tipoAccion]="tipo"\r\n                        [habilitarAcciones]="true"\r\n                        [habilitarCheckBox]="true"\r\n                        [habilitarAgregar]="true"\r\n                        [ordenarPorElCampo]="ordenarPorElCampo"\r\n                        [habilitarEliminar]="true"></app-data-table>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-12">\r\n          <form [formGroup]="productFormGroup">\r\n            <div class="row">\r\n              <div class="col-md-12">\r\n                <div class="col-md-9">&nbsp;</div>\r\n                <div class="col-md-3">\r\n                  <div class="form-group label-floating">\r\n                    <label class="control-label">{{\'total\' | translate}}</label>\r\n                    <input type="text" id="txttotal" formControlName="txttotal" class="form-control"  disabled>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="row"><p> &nbsp;</p></div>\r\n    <div class="row">\r\n      <div class="col-md-12">\r\n        <form [formGroup]="productFormGroup">\r\n          <div class="label-floating">\r\n            <label class="control-label">{{\'observaciones\' | translate}}</label>\r\n            <input id="txtobservacion" formControlName="txtobservacion" class="form-control" type="text">\r\n            <span\r\n              *ngIf="!productFormGroup.get(\'txtobservacion\').valid && productFormGroup.get(\'txtobservacion\').touched">\r\n                            <span *ngIf="productFormGroup.controls[\'txtobservacion\'].hasError(\'maxLength\')"\r\n                                  class="text-danger">{{\'maximoCaracteres\' | translate: {digito: 500} }}</span>\r\n                          </span>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    <div class="row"><p> &nbsp;</p></div>\r\n    <div class="row">\r\n      <div class="col-md-12" align="right">\r\n        <button type="button" class="btn btn-default" (click)=" vistaprevia()"\r\n                [disabled]="!productFormGroup.valid">{{\'vistaPrevia\' | translate}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n'},"./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion-unitaria/retencion-unitaria.component.ts":function(e,t,r){"use strict";var o=r("./node_modules/@angular/core/@angular/core.es5.js"),i=r("./node_modules/@angular/forms/@angular/forms.es5.js"),n=r("./node_modules/@angular/router/@angular/router.es5.js"),a=r("./src/app/facturacion-electronica/general/data-table/utils/accion.ts"),c=r("./src/app/facturacion-electronica/general/data-table/utils/tipo-accion.ts"),s=r("./src/app/facturacion-electronica/general/data-table/data-table.component.ts"),l=r("./src/app/facturacion-electronica/percepcion-retencion/models/retencionebiz.ts"),p=r("./src/app/facturacion-electronica/general/data-table/utils/modo-vista-accion.ts"),d=r("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.service.ts"),u=r("./src/app/facturacion-electronica/percepcion-retencion/models/retencion-cabecera.ts"),m=r("./src/app/facturacion-electronica/percepcion-retencion/services/retencionpersiscabecera.service.ts"),v=r("./src/app/facturacion-electronica/percepcion-retencion/models/principal-retencion.ts"),h=r("./src/app/facturacion-electronica/general/utils/estadoArchivo.service.ts"),b=r("./src/app/facturacion-electronica/general/services/organizacion/entidad.service.ts"),f=r("./src/app/facturacion-electronica/general/models/organizacion/entidad.ts"),g=r("./node_modules/@angular/common/@angular/common/http.es5.js"),x=r("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.entidad.service.ts"),_=r("./src/app/facturacion-electronica/general/services/configuracionDocumento/series.service.ts"),y=r("./node_modules/rxjs/BehaviorSubject.js"),F=(r.n(y),r("./src/app/facturacion-electronica/general/models/documento/tablaMaestra.ts")),C=r("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),E=r("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),D=r("./node_modules/rxjs/Observable.js"),S=(r.n(D),r("./src/app/facturacion-electronica/percepcion-retencion/services/archivoMasiva.service.ts")),I=r("./src/app/facturacion-electronica/percepcion-retencion/services/validadortabla.ts"),G=r("./src/app/facturacion-electronica/general/services/utils/validadorPersonalizado.ts");r.d(t,"a",function(){return O});var w=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(t,r,a):i(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a},j=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=function(){function e(e,t,r,o,i,n,s,l,d,m,h,b,g){this.httpClient=e,this.httpClient1=t,this.route=r,this.router=o,this.persistenciaService=i,this.RetencionCabecerapersistenciaService=n,this._estadoArchivo=s,this._entidadServices=l,this._entidadPersistenciaService=d,this.serieService=m,this._archivoMasivaService=h,this._tipos=b,this._tablaMaestraService=g,this.titulo="Retención",this.series=[],this.estadoautocomplete=new y.BehaviorSubject(!1),this.entidad=[],this.entidad_uno=new f.a,this.tiposComprobantes=new y.BehaviorSubject([]),this.todosTiposComprobantes=new y.BehaviorSubject([]),this.cabecera=[],this.atributos=[],this.tipo=p.a.ICONOS,this.AccionesPrueba=[new a.b("editar",new a.c("visibility","btn-info"),c.a.EDITAR)],this.retencioncab=new u.a,this.retencion_principal=new v.a,this.total_retencion=0,this.listaitems=[],this.cabecera=["tipo","serie","numeroCorrelativo","fechaEmision","Moneda Origen","importeTotal","importeTotalsoles","importeRetencionsoles"],this.atributos=["tipoDocumentoDestinoDescripcion","serieDocumentoDestino","correlativoDocumentoDestino","fechaEmisionDestino","monedaDestino","totalImporteDestino","totalMonedaDestino","totalImporteAuxiliarDestino"],this.ordenarPorElCampo="fechaEmisionDestino"}return e.prototype.ngOnInit=function(){var e=this;this.initForm(),this.cargarProductoEditarLleno(),this.cargarServiciosArranque(),this.setTipoComprobante(),this.serieService.filtroSeries(localStorage.getItem("id_entidad"),this._tipos.TIPO_DOCUMENTO_RETENCION,this._tipos.TIPO_SERIE_ONLINE.toString()).subscribe(function(t){e.series=t})},e.prototype.vistaprevia=function(){this.fillProducto(),this.RetencionCabecerapersistenciaService.setCabeceraRetencion(this.retencioncab),this.router.navigateByUrl("percepcion-retencion/retencion/crear/individual/vista-previa")},e.prototype.initForm=function(){var e=new Date,t=e.getDate().toString()+"/"+(e.getMonth()+1).toString()+"/"+e.getFullYear().toString();this.productFormGroup=new i.FormGroup({cmbserie:new i.FormControl("",[i.Validators.required]),txtruc:new i.FormControl("",[i.Validators.required]),razonsocial:new i.FormControl("",[i.Validators.required]),txtdireccionfiscal:new i.FormControl({value:"",disabled:!0},[i.Validators.required]),txtcorreo:new i.FormControl({value:"",disabled:!0},[i.Validators.required]),txttipomoneda:new i.FormControl({value:"PEN",disabled:!0}),txtobservacion:new i.FormControl("",[i.Validators.maxLength(500)]),datefechapago:new i.FormControl(t,[i.Validators.required,G.a.fechaDeberiaSerMenorAHoy("errorFecha")]),txttotal:new i.FormControl(this.total_retencion,[i.Validators.required,I.a.HayValoresenlaTabla()])})},e.prototype.autocompleListFormatter=function(e){return e.denominacion},e.prototype.cargarProductoEditarLleno=function(){var e=new u.a;(e=this.RetencionCabecerapersistenciaService.getCabeceraRetencion())&&(this.retencioncabedit=this.RetencionCabecerapersistenciaService.getCabeceraRetencion(),void 0!=this.retencioncabedit.rucComprador?(this.estadoautocomplete.next(!0),this.busqueda()):(this.productFormGroup.controls.txtruc.setValue(this.retencioncabedit.rucComprador),this.productFormGroup.controls.razonsocial.setValue(this.retencioncabedit.razonSocialComprador),this.productFormGroup.controls.txtdireccionfiscal.setValue(this.retencioncabedit.direccioncomprador)),this.productFormGroup.controls.cmbserie.setValue(this.retencioncabedit.idserie),this.productFormGroup.controls.txtobservacion.setValue(this.retencioncabedit.observacionComprobante),this.productFormGroup.controls.datefechapago.setValue(this.retencioncabedit.fecPago),setTimeout(function(){$("select").each(function(){$(this.parentElement).removeClass("is-empty")})},200))},e.prototype.cargarServiciosArranque=function(){this.todosTiposComprobantes=this._tablaMaestraService.obtenerPorIdTabla(F.a)},e.prototype.setTipoComprobante=function(){var e=[];e=[this._tipos.TIPO_DOCUMENTO_RETENCION],this.tiposComprobantes=this._tablaMaestraService.obtenerPorCodigoDeTablaMaestra(this.todosTiposComprobantes,e)},e.prototype.listarOrganizacionesDeAutcompletado=function(e){return e?this._entidadServices.buscarPorRazonSocial(e,"6"):D.Observable.of([])},e.prototype.iniciarData=function(e){this.listaitems=this.persistenciaService.getListaProductos(),this.tabla.insertarData(this.listaitems),this.calcularMontoTotal()},e.prototype.calcularMontoTotal=function(){this.total_retencion=0,this.total_importe=0,this.listaitems=this.persistenciaService.getListaProductos();for(var e=0;e<this.listaitems.length;e++)this.total_retencion+=Number(this.listaitems[e].totalImporteAuxiliarDestino),this.total_importe+=Number(this.listaitems[e].totalImporteDestino);0!=this.total_retencion&&(this.productFormGroup.get("txttotal").setValue(parseFloat(this.total_retencion.toString()).toFixed(2)),this.retencioncab.totalimporte=Number(parseFloat(this.total_importe.toString()).toFixed(2)),this.eliminarEstiloInputNormal("txttotal","is-empty")),0===this.listaitems.length&&(this.retencioncab.totalimporte=Number(parseFloat(this.total_importe.toString()).toFixed(2)),this.productFormGroup.get("txttotal").reset()),this.productFormGroup.get("txttotal").setValue(parseFloat(this.total_retencion.toString()).toFixed(2)),this.retencioncab.totalimporte=Number(parseFloat(this.total_importe.toString()).toFixed(2))},e.prototype.limpiar=function(e){this.productFormGroup.reset()},e.prototype.filtro=function(e){this.fillProducto()},e.prototype.busquedaruc=function(e){var t=this;if(11==this.productFormGroup.controls.txtruc.value.length){var r=this._entidadServices.buscarPorRuc(this.productFormGroup.get("txtruc").value);null!=r&&r.subscribe(function(e){t.entidad_uno=e||new f.a,t.productFormGroup.controls.razonsocial.setValue(t.entidad_uno.denominacion),t.productFormGroup.controls.txtcorreo.setValue(t.entidad_uno.correoElectronico),t.productFormGroup.controls.txtdireccionfiscal.setValue(t.entidad_uno.direccionFiscal),t.entidad_uno.correoElectronico?t.productFormGroup.controls.txtcorreo.disable():t.productFormGroup.controls.txtcorreo.enable(),t._entidadPersistenciaService.setEntidad(t.entidad_uno),setTimeout(function(){$("input").each(function(){$(this.parentElement).removeClass("is-empty")})},200),t.eliminarEstiloInput("razonsocial","is-empty")})}else this.productFormGroup.controls.razonsocial.reset(),this.productFormGroup.controls.txtcorreo.reset(),this.productFormGroup.controls.txtdireccionfiscal.reset()},e.prototype.cambioAutocomplete=function(){"object"==typeof this.productFormGroup.get("razonsocial").value?this.estadoautocomplete.next(!0):(this.productFormGroup.get("txtruc").reset(),this.productFormGroup.get("txtdireccionfiscal").reset(),this.productFormGroup.get("razonsocial").reset(),this.estadoautocomplete.next(!1))},e.prototype.eliminarEstiloInput=function(e,t){setTimeout(function(){$("#"+e).parent().parent().removeClass(t)},200)},e.prototype.eliminarEstiloInputNormal=function(e,t){setTimeout(function(){$("#"+e).parent().removeClass(t)},200)},e.prototype.busqueda=function(){var e=this,t=new u.a;t=this.RetencionCabecerapersistenciaService.getCabeceraRetencion(),1==this.estadoautocomplete.value?this.rucquery=t.rucComprador.toString():this.rucquery=this.productFormGroup.get("razonsocial").value.documento,this.estadoautocomplete.next(!1),void 0!=this.productFormGroup.get("razonsocial").value&&this._entidadServices.buscarPorRuc(this.rucquery).subscribe(function(t){e.entidad_uno=t||new f.a,e.productFormGroup.controls.txtruc.setValue(e.entidad_uno.documento),e.productFormGroup.controls.txtdireccionfiscal.setValue(e.entidad_uno.direccionFiscal),e.productFormGroup.controls.razonsocial.setValue(e.entidad_uno.denominacion),e.productFormGroup.controls.txtcorreo.setValue(e.entidad_uno.correoElectronico),e.entidad_uno.correoElectronico?e.productFormGroup.controls.txtcorreo.disable():(e.productFormGroup.controls.txtcorreo.enable(),e.retencioncabedit&&e.productFormGroup.controls.txtcorreo.setValue(e.retencioncabedit.email)),e._entidadPersistenciaService.setEntidad(e.entidad_uno),$("input").each(function(){$(this.parentElement).removeClass("is-empty")}),e.eliminarEstiloInput("razonsocial","is-empty")})},e.prototype.fillProducto=function(){var e=this;this.retencioncab.idserie=this.productFormGroup.get("cmbserie").value;var t=this.series.findIndex(function(t){return t.idSerie==e.productFormGroup.get("cmbserie").value});this.retencioncab.serie=-1==t?"":this.series[t].serie,this.retencioncab.rucComprador=this.productFormGroup.get("txtruc").value,this.retencioncab.razonSocialComprador=this.productFormGroup.get("razonsocial").value,this.retencioncab.razonSocialProveedor=localStorage.getItem("org_nombre"),this.retencioncab.rucProveedor=Number(localStorage.getItem("org_ruc")),this.retencioncab.direccioncomprador=this.productFormGroup.get("txtdireccionfiscal").value,this.retencioncab.email=this.productFormGroup.get("txtcorreo").value,this.retencioncab.direccionproveedor=localStorage.getItem("org_direccion"),this.retencioncab.fecPago=this.productFormGroup.get("datefechapago").value,this.retencioncab.moneda=this.productFormGroup.get("txttipomoneda").value,this.retencioncab.observacionComprobante=this.productFormGroup.get("txtobservacion").value,this.retencioncab.total=this.productFormGroup.get("txttotal").value,this.retencioncab.porcentajeImpuesto="",this.tiposComprobantes.getValue().length>0?(this.retencioncab.idtipocomprobanteproveedor=this.tiposComprobantes.getValue()[0].codigo,this.retencioncab.tipocomprobanteproveedor=this.tiposComprobantes.getValue()[0].descripcionCorta,this.retencioncab.idTablaTipoComprobante=this.tiposComprobantes.getValue()[0].tabla.toString()):(this.retencioncab.idtipocomprobanteproveedor="20",this.retencioncab.tipocomprobanteproveedor="Retencion",this.retencioncab.tipocomprobanteproveedor="20"),this.retencioncab.idTipoComprobante="20"},e.prototype.eliminar=function(e){this.persistenciaService.setListaProductos(e),this.calcularMontoTotal()},e.prototype.agregarItem=function(e){this.fillProducto(),this.RetencionCabecerapersistenciaService.setCabeceraRetencion(this.retencioncab),this.router.navigateByUrl("percepcion-retencion/retencion/crear/individual/agregar-item")},e.prototype.ejecutarAccion=function(e){var t=e[0],r=new l.a;switch(r=e[1],t){case c.a.ELIMINAR:break;case c.a.EDITAR:this.router.navigate(["percepcion-retencion/retencion/crear/individual/editar-item",r.id]),this.fillProducto(),this.RetencionCabecerapersistenciaService.setCabeceraRetencion(this.retencioncab)}},e}();w([r.i(o.ViewChild)("tablaNormal"),j("design:type","function"==typeof(R=void 0!==s.a&&s.a)&&R||Object)],O.prototype,"tabla",void 0),w([r.i(o.ViewChild)("inputrazonsocial"),j("design:type","function"==typeof(A=void 0!==o.ElementRef&&o.ElementRef)&&A||Object)],O.prototype,"razonautocomplete",void 0),O=w([r.i(o.Component)({selector:"app-retencion-unitaria",template:r("./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion-unitaria/retencion-unitaria.component.html"),styles:[r("./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion-unitaria/retencion-unitaria.component.css")]}),j("design:paramtypes",["function"==typeof(M=void 0!==g.b&&g.b)&&M||Object,"function"==typeof(T=void 0!==g.b&&g.b)&&T||Object,"function"==typeof(P=void 0!==n.c&&n.c)&&P||Object,"function"==typeof(z=void 0!==n.b&&n.b)&&z||Object,"function"==typeof(N=void 0!==d.a&&d.a)&&N||Object,"function"==typeof(V=void 0!==m.a&&m.a)&&V||Object,"function"==typeof(q=void 0!==h.a&&h.a)&&q||Object,"function"==typeof(k=void 0!==b.a&&b.a)&&k||Object,"function"==typeof(B=void 0!==x.a&&x.a)&&B||Object,"function"==typeof(L=void 0!==_.a&&_.a)&&L||Object,"function"==typeof(U=void 0!==S.a&&S.a)&&U||Object,"function"==typeof(H=void 0!==E.a&&E.a)&&H||Object,"function"==typeof(Y=void 0!==C.a&&C.a)&&Y||Object])],O);var R,A,M,T,P,z,N,V,q,k,B,L,U,H,Y},"./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion.component.css":function(e,t,r){t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},"./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion.component.html":function(e,t){e.exports='<div class="card">\r\n  <form method="#" action="#">\r\n    <div class="card-header card-header-text" data-background-color="blue">\r\n      <h4 class="card-title">{{titulo}}</h4>\r\n    </div>\r\n    <div class="card-content">\r\n      <div class="row">\r\n        <ul class="nav nav-pills nav-pills-circle nav-pills-warning">\r\n          <li #unitaria>\r\n            <a data-toggle="tab" (click)="llamar_unitaria()">\r\n              {{\'retencionUnitaria\' | translate}}\r\n            </a>\r\n          </li>\r\n          \x3c!--li #masiva>\r\n            <a data-toggle="tab" (click)="llamar_masiva()">\r\n              {{\'retencionMasiva\' | translate}}\r\n            </a>\r\n          </li--\x3e\r\n        </ul>\r\n        <div class="tab-content">\r\n          <div class="tab-pane active">\r\n            <router-outlet></router-outlet>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</div>\r\n'},"./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion.component.ts":function(e,t,r){"use strict";var o=r("./node_modules/@angular/core/@angular/core.es5.js"),i=r("./node_modules/@angular/router/@angular/router.es5.js");r.d(t,"a",function(){return c});var n=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(t,r,a):i(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.router=e,this.route=t,this.titulo="Crear Retención",this.constunitaria="RetencionUnitariaComponent"}return e.prototype.ngOnInit=function(){this.route.children[0].data.value.id;this.constunitaria,this.unitaria.nativeElement.className="active"},e.prototype.llamar_unitaria=function(){this.router.navigateByUrl("percepcion-retencion/retencion/crear/individual")},e}();n([r.i(o.ViewChild)("unitaria"),a("design:type","function"==typeof(s=void 0!==o.ElementRef&&o.ElementRef)&&s||Object)],c.prototype,"unitaria",void 0),c=n([r.i(o.Component)({selector:"app-retencion",template:r("./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion.component.html"),styles:[r("./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion.component.css")]}),a("design:paramtypes",["function"==typeof(l=void 0!==i.b&&i.b)&&l||Object,"function"==typeof(p=void 0!==i.c&&i.c)&&p||Object])],c);var s,l,p},"./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion.module.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@angular/core/@angular/core.es5.js"),i=r("./node_modules/@angular/common/@angular/common.es5.js"),n=r("./node_modules/@ngx-translate/core/index.js"),a=r("./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion.component.ts"),c=r("./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion.routing.module.ts"),s=r("./src/app/facturacion-electronica/percepcion-retencion/services/archivoMasiva.service.ts"),l=r("./src/app/facturacion-electronica/general/services/comprobantes/retencion.service.ts"),p=r("./src/app/facturacion-electronica/percepcion-retencion/services/retencionpersiscabecera.service.ts"),d=r("./src/app/facturacion-electronica/general/services/archivos/archivo.service.ts"),u=r("./src/app/facturacion-electronica/general/services/comprobantes/comprobantes.service.ts"),m=r("./src/app/facturacion-electronica/general/services/documento/nuevoDocumento.ts"),v=r("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.entidad.service.ts"),h=r("./src/app/facturacion-electronica/general/services/comprobantes/retenciones.service.ts"),b=r("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.service.ts"),f=r("./src/app/facturacion-electronica/percepcion-retencion/services/percepcion-retencion-referencias.service.ts"),g=r("./src/app/facturacion-electronica/general/utils/estadoArchivo.service.ts"),x=r("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia-post.ts"),_=r("./node_modules/ng2-auto-complete/dist/index.js"),y=(r.n(_),r("./node_modules/@angular/common/@angular/common/http.es5.js")),F=r("./node_modules/@angular/forms/@angular/forms.es5.js"),C=r("./src/app/facturacion-electronica/general/consulta/consulta.module.ts"),E=r("./src/app/directives/datepicker.module.ts"),D=r("./src/app/facturacion-electronica/general/pdf-viewer/pdf-viewer.module.ts"),S=r("./src/app/facturacion-electronica/general/directivas/directivas.module.ts"),I=r("./node_modules/@angular/http/@angular/http.es5.js"),G=r("./src/app/facturacion-electronica/general/data-table/data-table.module.ts"),w=r("./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion-unitaria/retencion-unitaria.component.ts"),j=r("./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion-masiva/retencion-masiva.component.ts"),O=r("./src/app/facturacion-electronica/percepcion-retencion/item-crear-editar/item-crear-editar.module.ts"),R=r("./src/app/facturacion-electronica/percepcion-retencion/retencion-masiva-detalle/retencion-masiva-detalle.module.ts"),A=r("./src/app/facturacion-electronica/percepcion-retencion/vistaprevia-retencion/vistaprevia-retencion.module.ts"),M=r("./src/app/facturacion-electronica/percepcion-retencion/emision-percepcion-retencion/emision-percepcion-retencion.module.ts");r.d(t,"RetencionModule",function(){return P});var T=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(t,r,a):i(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a},P=function(){function e(){}return e}();P=T([r.i(o.NgModule)({imports:[i.CommonModule,c.a,F.FormsModule,I.HttpModule,F.ReactiveFormsModule,y.a,E.a,D.a,G.a,C.a,n.a,S.a,_.Ng2AutoCompleteModule,O.a,R.a,A.a,M.a],declarations:[a.a,w.a,j.a],providers:[b.a,p.a,g.a,s.a,m.a,v.a,h.a,h.a,d.a,x.a,u.a,l.a,f.a],exports:[a.a,w.a,j.a]})],P)},"./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion.routing.module.ts":function(e,t,r){"use strict";var o=r("./node_modules/@angular/core/@angular/core.es5.js"),i=r("./node_modules/@angular/router/@angular/router.es5.js"),n=r("./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion.component.ts"),a=r("./src/app/facturacion-electronica/percepcion-retencion/retencion/retencion-unitaria/retencion-unitaria.component.ts"),c=r("./src/app/facturacion-electronica/percepcion-retencion/item-crear-editar/item-crear-editar.component.ts"),s=r("./src/app/facturacion-electronica/percepcion-retencion/vistaprevia-retencion/vistaprevia-retencion.component.ts"),l=r("./src/app/facturacion-electronica/percepcion-retencion/emision-percepcion-retencion/emision-percepcion-retencion.component.ts");r.d(t,"a",function(){return u});var p=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(t,r,a):i(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a},d=[{path:"",children:[{path:"",pathMatch:"full",redirectTo:"crear"},{path:"crear",component:n.a,children:[{path:"",pathMatch:"full",redirectTo:"individual"},{path:"individual",component:a.a,data:{mostrarCombo:!0,codigo:"RT",id:"RetencionUnitariaComponent"}}]},{path:"crear/individual/agregar-item",component:c.a,data:{mostrarCombo:!1,tipoaccion:1,codigo:"RT",titulo:"agregarItem"}},{path:"crear/individual/editar-item/:id",component:c.a,data:{mostrarCombo:!1,tipoaccion:2,codigo:"RT",titulo:"editarItem",button:"guardar"}},{path:"crear/individual/vista-previa",component:s.a,data:{mostrarCombo:!1,codigo:"RT"}},{path:"crear/individual/emision/:id",component:l.a,data:{mostrarCombo:!1,codigo:"20"}}]}],u=function(){function e(){}return e}();u=p([r.i(o.NgModule)({imports:[i.a.forChild(d)],exports:[i.a]})],u)},"./src/app/facturacion-electronica/percepcion-retencion/services/validadortabla.ts":function(e,t,r){"use strict";r.d(t,"a",function(){return o});var o=function(){function e(){}return e.HayValoresenlaTabla=function(){return function(e){return 0==e.value?{error:"Debe ser Mayor"}:null}},e}()},"./src/app/facturacion-electronica/percepcion-retencion/vistaprevia-retencion/vistaprevia-retencion.component.html":function(e,t){e.exports='<div class="row col-md-12">\r\n  <div class="card">\r\n    <div class="card-header card-header-text" data-background-color="blue">\r\n      <h4 class="card-title">{{\'vistaPrevia\' | translate}}</h4>\r\n    </div>\r\n    <div class="card-content">\r\n      <div class="row">\r\n        <div class="col-md-4">\r\n          <label><h5><b>{{razonsocialemisor}}</b></h5></label>\r\n        </div>\r\n        <div class="col-md-4 col-md-offset-4">\r\n          <div class="row">\r\n            <div class="col-md-3">\r\n              <label><h4><b>RUC N°:</b></h4></label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label><h5>{{rucemisor}}</h5></label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-4">\r\n          <label><h5><b>{{domiciliofiscalemisor}}</b></h5></label>\r\n        </div>\r\n        <div class="col-md-4 col-md-offset-4">\r\n          <label><h3><b>RETENCIÓN ELECTRÓNICA</b></h3></label>\r\n        </div>\r\n      </div>\r\n      <br>\r\n      <div class="row">\r\n        <div class="col-md-3 col-md-offset-8">\r\n          <div class="row">\r\n            <div class="col-md-offset-4">\r\n              <label><h3><b>Serie: </b>{{series}}</h3></label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <br>\r\n      <div class="row">\r\n        <div class="col-md-6">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label><b>Señor(es):</b></label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label>{{razonsocialreceptor}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-4 col-md-offset-2">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label><b>Tipo de Cambio:</b></label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label>{{tipocambio}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-6">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label><b>RUC:</b></label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label>{{rucreceptor}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-4 col-md-offset-2">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label><b>Banco</b></label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label>{{banco}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-6">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label><b>Domicilio Fiscal:</b></label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label>{{domiciliofiscalreceptor}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-6">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label><b>Fecha de Emisión:</b></label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label>{{fechaemisiones}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-6">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label><b>Tipo de Moneda:</b></label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label>{{tipo_moneda}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <br>\r\n      <app-data-table (iniciarData)="iniciarData($event)"\r\n                      #tablaNormal [idTabla]="\'tabla1\'"\r\n                      [ordenarPorElCampo]="\'fechaEmisionDestino\'"\r\n                      [cabecera]="cabecera"\r\n                      [atributos]="atributos"></app-data-table>\r\n      <br>\r\n      <div class="row">\r\n        <div class="col-md-1 col-lg-1">\r\n          <label><b>Observación:</b></label>\r\n        </div>\r\n        <div class="col-md-1 col-lg-1"></div>\r\n        <div class="col-md-10 col-lg-10">\r\n          <label>{{observacion}}</label>\r\n        </div>\r\n      </div>\r\n      <br>\r\n      <div class="row">\r\n        <div class="col-md-2 col-md-offset-5">\r\n          <label><b>Total Importe :</b></label>\r\n        </div>\r\n        <div class="col-md-5">\r\n          <label>{{total_importe}}</label>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-2 col-md-offset-5">\r\n          <label><b> Total Importe Retención:</b></label>\r\n        </div>\r\n        <div class="col-md-5">\r\n          <label>{{totales}}</label>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-2 col-md-offset-5">\r\n          <label><b>Son:</b></label>\r\n        </div>\r\n        <div class="col-md-5">\r\n          <label>{{totalespalabaras | uppercase}}</label>\r\n        </div>\r\n      </div>\r\n      <br>\r\n      <br>\r\n    </div>\r\n    <div class="row">\r\n      <div class="col-md-12" align="right">\r\n        <button name="btnregresar" type="button" class="btn btn-default" style="right: 15px;" (click)="regresar()">Regresar </button>\r\n        <button name="btnemitir" type="button" class="btn btn-default" style="right: 15px;" (click)="emitir()">Emitir </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n'},"./src/app/facturacion-electronica/percepcion-retencion/vistaprevia-retencion/vistaprevia-retencion.component.ts":function(e,t,r){"use strict";var o=r("./node_modules/@angular/core/@angular/core.es5.js"),i=r("./node_modules/@angular/router/@angular/router.es5.js"),n=r("./src/app/facturacion-electronica/general/data-table/data-table.component.ts"),a=r("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.service.ts"),c=r("./src/app/facturacion-electronica/percepcion-retencion/services/retencionpersiscabecera.service.ts"),s=r("./node_modules/written-number/lib/index.js"),l=(r.n(s),r("./src/app/facturacion-electronica/percepcion-retencion/models/principal-retencion.ts")),p=r("./src/app/facturacion-electronica/general/services/documento/nuevoDocumento.ts"),d=r("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.entidad.service.ts"),u=r("./src/app/facturacion-electronica/general/models/organizacion/entidad.ts"),m=r("./node_modules/@angular/common/@angular/common/http.es5.js"),v=r("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia-post.ts"),h=r("./src/app/facturacion-electronica/percepcion-retencion/models/post_retencion.ts"),b=r("./src/app/facturacion-electronica/percepcion-retencion/models/rdetalle.ts"),f=r("./src/app/facturacion-electronica/general/utils/tipos.service.ts");r.d(t,"a",function(){return _});var g=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(t,r,a):i(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a},x=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(){function e(e,t,r,o,i,n,a,c,s){this.route=e,this.router=t,this.persistenciaService=r,this.RetencionCabecerapersistenciaService=o,this._nuevodocumento=i,this._entidadPersistenciaService=n,this.httpClient=a,this._postpersisservice=c,this._tipos=s,this.documentoreferenciaunit=new b.a,this.cabecera=[],this.atributos=[],this.retencion_principal=new l.a,this.entidadlogueo=new u.a,this.org_busqueda=new u.a,this.entidadreceptora=new u.a,this.listaitems=[],this.cabecera=["tipo","serie","numeroCorrelativo","fechaEmision","Moneda Origen","importeTotal","importeTotalsoles","importeRetencionsoles","Nro Doc ERP"],this.atributos=["tipoDocumentoDestinoDescripcion","serieDocumentoDestino","correlativoDocumentoDestino","fechaEmisionDestino","monedaDestino","totalImporteDestino","totalMonedaDestino","totalImporteAuxiliarDestino","polizaFactura"]}return e.prototype.ngOnInit=function(){if(this.retencioncab=this.RetencionCabecerapersistenciaService.getCabeceraRetencion(),this.org_busqueda=this._entidadPersistenciaService.getEntidad(),null!=this.retencioncab){this.total_importe=0,this.listaitems=this.persistenciaService.getListaProductos();for(var e=0;e<this.listaitems.length;e++)this.total_importe+=Number(this.listaitems[e].totalImporteDestino);var t=this.retencioncab.fecPago.toString().split("/"),r=t[0],o=t[1];o.length<2&&Number(o)<10?this.mesnorm="0"+o:this.mesnorm=o,r.length<2&&Number(r)<10?this.dianorm="0"+r:this.dianorm=r;var i=t[2],n=this.retencioncab.total.toString().split("."),a=n[0],c=n[1];this.rucemisor=this.retencioncab.rucProveedor,this.razonsocialemisor=this.retencioncab.razonSocialProveedor,this.domiciliofiscalemisor=this.retencioncab.direccionproveedor,this.rucreceptor=this.retencioncab.rucComprador,this.razonsocialreceptor=this.retencioncab.razonSocialComprador,this.domiciliofiscalreceptor=this.retencioncab.direccioncomprador,this.observacion=this.retencioncab.observacionComprobante,this.fechaemisiones=i+"-"+this.mesnorm+"-"+this.dianorm,this.totales=this.retencioncab.total,this.total_importe=Number(parseFloat(this.total_importe.toString()).toFixed(2)),this.tipo_moneda=this.retencioncab.moneda.toString(),this.totalespalabaras=s(Number(a),{lang:"es"})+" "+this.tipo_moneda+" CON "+s(Number(c),{lang:"es"})+" CENTÍMOS.",this.tipocambio="-",this.banco="-",this.series=this.retencioncab.serie}else this.router.navigateByUrl("percepcion-retencion/retencion/crear");this.entidadlogueo.idTipoEntidad="1",this.entidadlogueo.idEntidad=localStorage.getItem("id_entidad"),this.entidadlogueo.tipoDocumento="6",this.entidadlogueo.documento=localStorage.getItem("org_ruc"),this.entidadlogueo.denominacion=localStorage.getItem("org_nombre"),this.entidadlogueo.nombreComercial=localStorage.getItem("org_nombre"),this.entidadlogueo.direccionFiscal=localStorage.getItem("org_direccion"),this.entidadlogueo.ubigeo="040101",this.entidadlogueo.correo=localStorage.getItem("org_email"),this.entidadlogueo.notifica="S",this.entidadreceptora.idTipoEntidad="2",this.entidadreceptora.idEntidad=this.org_busqueda.idEntidad,this.entidadreceptora.tipoDocumento="6",this.entidadreceptora.documento=this.org_busqueda.documento,this.entidadreceptora.denominacion=this.org_busqueda.denominacion,this.entidadreceptora.nombreComercial=this.org_busqueda.denominacion,this.entidadreceptora.direccionFiscal=this.org_busqueda.direccionFiscal,this.entidadreceptora.ubigeo=this.org_busqueda.ubigeo,null!=this.org_busqueda.correoElectronico?this.entidadreceptora.correo=this.org_busqueda.correoElectronico:this.entidadreceptora.correo=this.retencioncab.email,this.entidadreceptora.notifica="S"},e.prototype.regresar=function(){this.router.navigateByUrl("percepcion-retencion/retencion/crear/individual")},e.prototype.armarjson=function(){var e=this.retencioncab.fecPago.toString().split("/"),t=e[0],r=e[1],o=e[2],i=o+"-"+r+"-"+t;this.retencion_principal.numeroComprobante=this.retencioncab.serie,this.retencion_principal.rucProveedor=this.retencioncab.rucProveedor.toString(),this.retencion_principal.rucComprador=this.retencioncab.rucComprador.toString(),this.retencion_principal.idTablaTipoComprobante=this.retencioncab.idTablaTipoComprobante,this.retencion_principal.idRegistroTipoComprobante=this.retencioncab.idtipocomprobanteproveedor,this.retencion_principal.idTipoComprobante=this.retencioncab.idTipoComprobante,this.retencion_principal.razonSocialComprador=this.retencioncab.razonSocialComprador,this.retencion_principal.razonSocialProveedor=this.retencioncab.razonSocialProveedor,this.retencion_principal.moneda=this.retencioncab.moneda,this.retencion_principal.porcentajeImpuesto=this.retencioncab.porcentajeImpuesto,this.retencion_principal.fechaEmision=new Date(i).getTime(),this.retencion_principal.observacionComprobante=this.retencioncab.observacionComprobante,this.retencion_principal.tipoComprobante=this.retencioncab.tipocomprobanteproveedor,this.retencion_principal.montoPagado=this.retencioncab.totalimporte-this.retencioncab.total,this.retencion_principal.monedaDescuento="PEN",this.retencion_principal.montoDescuento=this.retencioncab.total,this.retencion_principal.descuento=0,this.retencion_principal.totalComprobante=this.retencioncab.totalimporte,this.retencion_principal.tipoItem=3,this.retencion_principal.idTablaMoneda=this._tipos.ID_TABLA_TIPO_MONEDA,this.retencion_principal.idRegistroMoneda=this._tipos.TIPO_MONEDA_SOL,this.retencion_principal.idSerie=this.retencioncab.idserie,this.retencion_principal.pagoBanco="-",this.retencion_principal.detalleEbiz=[],this.retencion_principal.documentoConcepto=[],this.retencion_principal.documentoParametro=[],this.retencion_principal.documentoEntidad.push(this.entidadreceptora),this.retencion_principal.documentoEntidad.push(this.entidadlogueo);for(var n=this.persistenciaService.getListaProductos(),a=0;a<n.length;a++)this.documentoreferenciaunit=new b.a,this.documentoreferenciaunit.idDocumentoDestino=n[a].idDocumentoDestino,this.documentoreferenciaunit.tipoDocumentoOrigen=n[a].tipoDocumentoOrigen,this.documentoreferenciaunit.serieDocumentoDestino=n[a].serieDocumentoDestino,this.documentoreferenciaunit.correlativoDocumentoDestino=n[a].correlativoDocumentoDestino,this.documentoreferenciaunit.fechaEmisionDestino=new Date(n[a].fechaEmisionDestino).getTime(),this.documentoreferenciaunit.totalImporteDestino=n[a].totalImporteDestino,this.documentoreferenciaunit.totalImporteAuxiliarDestino=n[a].totalImporteAuxiliarDestino,this.documentoreferenciaunit.totalPorcentajeAuxiliarDestino=n[a].totalPorcentajeAuxiliarDestino,this.documentoreferenciaunit.tipoDocumentoOrigenDescripcion=n[a].tipoDocumentoOrigenDescripcion,this.documentoreferenciaunit.tipoDocumentoDestinoDescripcion=n[a].tipoDocumentoDestinoDescripcion,this.documentoreferenciaunit.monedaDestino=n[a].monedaDestino,this.documentoreferenciaunit.totalMonedaDestino=n[a].totalMonedaDestino,this.documentoreferenciaunit.auxiliar1=n[a].auxiliar1,this.documentoreferenciaunit.auxiliar2=n[a].auxiliar2,this.documentoreferenciaunit.tipoDocumentoDestino=n[a].tipoDocumentoDestino,this.documentoreferenciaunit.polizaFactura=n[a].polizaFactura,this.retencion_principal.documentoReferencia.push(this.documentoreferenciaunit)},e.prototype.emitir=function(){var e=this;this.armarjson(),this._nuevodocumento.subir(this.retencion_principal).subscribe(function(t){var r=(new h.a,e);setTimeout(function(){t&&r.router.navigate(["percepcion-retencion/retencion/crear/individual/emision",t.id])},3e3)},function(e){}),this.persistenciaService.vaciar_data(),this.RetencionCabecerapersistenciaService.vaciar_data(),this._entidadPersistenciaService.eliminar()},e.prototype.iniciarData=function(e){this.listaitems=this.persistenciaService.getListaProductos(),this.tabla.insertarData(this.listaitems)},e}();g([r.i(o.ViewChild)("tablaNormal"),x("design:type","function"==typeof(y=void 0!==n.a&&n.a)&&y||Object)],_.prototype,"tabla",void 0),_=g([r.i(o.Component)({selector:"app-vistaprevia",template:r("./src/app/facturacion-electronica/percepcion-retencion/vistaprevia-retencion/vistaprevia-retencion.component.html"),styles:[r("./src/app/facturacion-electronica/percepcion-retencion/vistaprevia-retencion/vistaprevia-retencion.css")]}),x("design:paramtypes",["function"==typeof(F=void 0!==i.c&&i.c)&&F||Object,"function"==typeof(C=void 0!==i.b&&i.b)&&C||Object,"function"==typeof(E=void 0!==a.a&&a.a)&&E||Object,"function"==typeof(D=void 0!==c.a&&c.a)&&D||Object,"function"==typeof(S=void 0!==p.a&&p.a)&&S||Object,"function"==typeof(I=void 0!==d.a&&d.a)&&I||Object,"function"==typeof(G=void 0!==m.b&&m.b)&&G||Object,"function"==typeof(w=void 0!==v.a&&v.a)&&w||Object,"function"==typeof(j=void 0!==f.a&&f.a)&&j||Object])],_);var y,F,C,E,D,S,I,G,w,j},"./src/app/facturacion-electronica/percepcion-retencion/vistaprevia-retencion/vistaprevia-retencion.css":function(e,t,r){t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},"./src/app/facturacion-electronica/percepcion-retencion/vistaprevia-retencion/vistaprevia-retencion.module.ts":function(e,t,r){"use strict";var o=r("./node_modules/@angular/core/@angular/core.es5.js"),i=r("./node_modules/@angular/common/@angular/common.es5.js"),n=r("./node_modules/@angular/forms/@angular/forms.es5.js"),a=r("./node_modules/@ngx-translate/core/index.js"),c=r("./src/app/facturacion-electronica/general/directivas/directivas.module.ts"),s=r("./node_modules/ng2-auto-complete/dist/index.js"),l=(r.n(s),r("./src/app/facturacion-electronica/general/services/servidores.ts")),p=r("./src/app/facturacion-electronica/general/data-table/data-table.module.ts"),d=r("./src/app/facturacion-electronica/general/pdf-viewer/pdf-viewer.module.ts"),u=r("./node_modules/@angular/http/@angular/http.es5.js"),m=r("./src/app/directives/datepicker.module.ts"),v=r("./node_modules/ng2-completer/index.js"),h=r("./src/app/facturacion-electronica/general/consulta/consulta.module.ts"),b=r("./node_modules/@angular/common/@angular/common/http.es5.js"),f=r("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia-post.ts"),g=r("./src/app/facturacion-electronica/general/services/comprobantes/comprobantes.service.ts"),x=r("./src/app/facturacion-electronica/percepcion-retencion/services/retencionpersiscabecera.service.ts"),_=r("./src/app/facturacion-electronica/general/services/documento/nuevoDocumento.ts"),y=r("./src/app/facturacion-electronica/general/services/comprobantes/retencion.service.ts"),F=r("./src/app/facturacion-electronica/general/services/comprobantes/retenciones.service.ts"),C=r("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.entidad.service.ts"),E=r("./src/app/facturacion-electronica/general/services/archivos/archivo.service.ts"),D=r("./src/app/facturacion-electronica/percepcion-retencion/services/percepcion-retencion-referencias.service.ts"),S=r("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.service.ts"),I=r("./src/app/facturacion-electronica/percepcion-retencion/services/archivoMasiva.service.ts"),G=r("./src/app/facturacion-electronica/general/utils/estadoArchivo.service.ts"),w=r("./src/app/facturacion-electronica/percepcion-retencion/vistaprevia-retencion/vistaprevia-retencion.component.ts");r.d(t,"a",function(){return O});var j=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(t,r,a):i(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a},O=function(){function e(){}return e}();O=j([r.i(o.NgModule)({imports:[i.CommonModule,n.ReactiveFormsModule,c.a,n.FormsModule,u.HttpModule,b.a,m.a,d.a,p.a,h.a,a.a,c.a,v.a,s.Ng2AutoCompleteModule],declarations:[w.a],exports:[w.a],providers:[l.a,S.a,x.a,G.a,I.a,_.a,C.a,F.a,F.a,E.a,f.a,g.a,y.a,D.a]})],O)}});