webpackJsonp([1],{"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/detalleDetalleNotaCredito.ts":function(t,o,e){"use strict";e.d(o,"a",function(){return r});var r=function(){function t(){this.idTipoIgv="",this.codigoTipoIgv="",this.descripcionTipoIgv="",this.idTipoIsc="",this.codigoTipoIsc="",this.descripcionTipoIsc="",this.idTipoPrecio="",this.codigoTipoPrecio="",this.descripcionTipoPrecio="",this.idProducto="",this.numeroItem="0.00",this.precioUnitarioVenta="0.00",this.unidadMedida="",this.subtotalVenta="0.00",this.subtotalIgv="0.00",this.subtotalIsc="0.00",this.descuento="0.00"}return t.prototype.copiar=function(){var o=new t;return o.idTipoIgv=this.idTipoIgv,o.codigoTipoIgv=this.codigoTipoIgv,o.descripcionTipoIgv=this.descripcionTipoIgv,o.idTipoIsc=this.idTipoIsc,o.codigoTipoIsc=this.codigoTipoIsc,o.descripcionTipoIsc=this.descripcionTipoIsc,o.idTipoPrecio=this.idTipoPrecio,o.codigoTipoPrecio=this.codigoTipoPrecio,o.descripcionTipoPrecio=this.descripcionTipoPrecio,o.idProducto=this.idProducto,o.numeroItem=this.numeroItem,o.precioUnitarioVenta=this.precioUnitarioVenta,o.unidadMedida=this.unidadMedida,o.subtotalVenta=this.subtotalVenta,o.subtotalIgv=this.subtotalIgv,o.subtotalIsc=this.subtotalIsc,o.descuento=this.descuento,o},t}()},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/detalleNotaCredito.ts":function(t,o,e){"use strict";var r=e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/detalleDetalleNotaCredito.ts");e.d(o,"a",function(){return a});var a=function(){function t(){this.descripcionItem="",this.idRegistroUnidad="",this.idTablaUnidad="",this.codigoUnidadMedida="",this.posicion="",this.codigoItem="",this.precioUnitario="",this.precioTotal="",this.cantidad="",this.montoImpuesto="",this.cambioDetalle=!1,this.detalle=new r.a}return t.prototype.copiar=function(){var o=new t;return o.descripcionItem=this.descripcionItem,o.idRegistroUnidad=this.idRegistroUnidad,o.idTablaUnidad=this.idTablaUnidad,o.codigoUnidadMedida=this.codigoUnidadMedida,o.posicion=this.posicion,o.codigoItem=this.codigoItem,o.precioUnitario=this.precioUnitario,o.precioTotal=this.precioTotal,o.cantidad=this.cantidad,o.montoImpuesto=this.montoImpuesto,o.cambioDetalle=this.cambioDetalle,o.detalle=this.detalle.copiar(),o},t}()},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/documentoConceptoNotaCredito.ts":function(t,o,e){"use strict";var r=e("./src/app/facturacion-electronica/general/models/comprobantes/documentoConceptoGeneral.ts");e.d(o,"a",function(){return i});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])};return function(o,e){function r(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),i=function(t){function o(){var o=t.call(this)||this;return o.idConcepto="",o.codigoConcepto="",o.descripcionConcepto="",o.importe="0.00",o}return a(o,t),o}(r.a)},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/documentoParametroNotaCredito.ts":function(t,o,e){"use strict";var r=e("./src/app/facturacion-electronica/general/models/comprobantes/documentoParametroGeneral.ts");e.d(o,"a",function(){return i});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])};return function(o,e){function r(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),i=function(t){function o(){var o=t.call(this)||this;return o.idParametro="",o.descripcionParametro="",o.json="",o}return a(o,t),o}(r.a)},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/documentoReferenciaNotaCredito.ts":function(t,o,e){"use strict";var r=e("./src/app/facturacion-electronica/general/models/comprobantes/documentoReferenciaGeneral.ts");e.d(o,"a",function(){return i});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])};return function(o,e){function r(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),i=function(t){function o(){var o=t.call(this)||this;return o.idDocumentoDestino="",o.tipoDocumentoOrigen="",o.tipoDocumentoDestino="",o.serieDocumentoDestino="",o.correlativoDocumentoDestino="",o.fechaEmisionDestino=0,o.totalImporteDestino="0.00",o.totalImporteAuxiliarDestino="0.00",o.totalPorcentajeAuxiliarDestino="0.00",o.tipoDocumentoOrigenDescripcion="",o.tipoDocumentoDestinoDescripcion="",o.monedaDestino="",o.totalMonedaDestino="0.00",o.auxiliar1="",o.auxiliar2="",o}return a(o,t),o}(r.a)},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/entidadNotaCredito.ts":function(t,o,e){"use strict";var r=e("./src/app/facturacion-electronica/general/models/organizacion/entidadGeneral.ts");e.d(o,"a",function(){return i});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])};return function(o,e){function r(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),i=function(t){function o(){var o=t.call(this)||this;return o.idTipoEntidad="",o.descripcionTipoEntidad="",o.idEntidad="",o.tipoDocumento="",o.documento="",o.denominacion="",o.nombreComercial="",o.direccionFiscal="",o.ubigeo="",o.correo="",o.notifica="",o}return a(o,t),o}(r.a)},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/jsonDocumentoParametroNotaCredito.ts":function(t,o,e){"use strict";e.d(o,"a",function(){return r});var r=function(){function t(){this.tipo=0,this.valor="",this.auxiliarEntero=0,this.auxiliarCaracter="",this.auxiliarFecha="",this.auxiliarImporte=0}return t}()},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/leyendaComprobante.ts":function(t,o,e){"use strict";e.d(o,"a",function(){return r});var r=function(){function t(){this.importeReferencial="0.00",this.montoPagado="0.00",this.descuentos="0.00",this.subTotal="0.00",this.igv="0.00",this.isc="0.00",this.total="0.00",this.otrosTributos="0.00"}return t}()},"./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.css":function(t,o,e){o=t.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),o.push([t.i,"",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.html":function(t,o){t.exports='<div class="card">\r\n  <div class="card-header card-header-text" data-background-color="blue">\r\n    <h4 class="card-title">{{titulo | translate}}</h4>\r\n  </div>\r\n  <div class="card-content">\r\n    <form [formGroup]="notaDeCreditoFormGroup" (ngSubmit)="vistaPrevia()" autocomplete="off">\r\n      <div class="row">\r\n        <div class="col-md-3">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'tipoComprobante\' | translate}}<span class="star">*</span></label>\r\n            <select id="cmbTipoComprobante"\r\n                    name="cmbTipoComprobante"\r\n                    formControlName="cmbTipoComprobante"\r\n                    class="form-control"\r\n                    (change)="cambioTipoComprobante()">\r\n              <option *ngFor="let tipoComprobante of tiposDeComprobantes | async" [value]="tipoComprobante.codigo">\r\n                {{tipoComprobante.descripcionLarga | translate}}\r\n              </option>\r\n            </select>\r\n            <div class="row" *ngIf="!notaDeCreditoFormGroup.get(\'cmbTipoComprobante\').valid && notaDeCreditoFormGroup.get(\'cmbTipoComprobante\').touched">\r\n              <div class="col-md-12">\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'cmbTipoComprobante\').hasError(\'required\')"\r\n                    class="text-danger">{{\'campoRequerido\' | translate}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-3">\r\n          <div class="form-group label-floating">\r\n            <label id="lblCodigo" class="control-label">{{\'numeroComprobante\' | translate}}<span class="star">*</span></label>\r\n            <input  ng2-auto-complete\r\n                    type="text"\r\n                    id="txtNumeroComprobante"\r\n                    formControlName="txtNumeroComprobante"\r\n                    [source]="listarProductosDeAutcompletado.bind(this)"\r\n                    [list-formatter]="formatoDeListaAutocompletado"\r\n                    [value-formatter] = "formatoDeValorAutocompletado"\r\n                    [no-match-found-text] = "\'noSeEncontraronResultados\' | translate"\r\n\r\n                    open-on-focus = true\r\n                    close-on-focus = true\r\n                    auto-select-first-item = false\r\n                    min-chars = 1\r\n                    [loading-text] = "\'cargando\' | translate"\r\n\r\n                    (valueChanged)="cambioLaSeleccionDelComprobante($event)"\r\n                    (change)="cambioLaBusquedaDeAutocompleteDeComprobante()"\r\n                    class="form-control">\r\n            <div class="row" *ngIf="!notaDeCreditoFormGroup.get(\'txtNumeroComprobante\').valid && notaDeCreditoFormGroup.get(\'txtNumeroComprobante\').touched">\r\n              <div class="col-md-12">\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'txtNumeroComprobante\').hasError(\'required\')"\r\n                      class="text-danger">{{\'campoRequerido\' | translate}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-3">\r\n          <div class="form-group">\r\n            <button id="btnVisualizar" type="button" class="btn btn-xs btn-default"\r\n                    (click)="visualizarComprobanteReferencia()"\r\n                    [disabled]="!(escogioUnComprobante | async)">\r\n              <span class="btn-label ">\r\n                  <i class="material-icons">visibility</i>\r\n              </span>\r\n              {{\'verComprobante\' | translate}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-3">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'serie\' | translate}}<span class="star">*</span></label>\r\n            <select id="cmbSerie"\r\n                    name="cmbSerie"\r\n                    formControlName="cmbSerie"\r\n                    class="form-control">\r\n              <option *ngFor="let serie of series | async" [value]="serie.idSerie">\r\n                {{serie.serie}}\r\n              </option>\r\n            </select>\r\n            <div class="row" *ngIf="!notaDeCreditoFormGroup.get(\'cmbSerie\').valid && notaDeCreditoFormGroup.get(\'cmbSerie\').touched">\r\n              <div class="col-md-12">\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'cmbSerie\').hasError(\'required\')"\r\n                      class="text-danger">{{\'campoRequerido\' | translate}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row">\r\n        <div class="col-md-3">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'tipoNotaCredito\' | translate}}<span class="star">*</span></label>\r\n            <select id="cmbTipoNotaCredito"\r\n                    name="cmbTipoNotaCredito"\r\n                    formControlName="cmbTipoNotaCredito"\r\n                    class="form-control"\r\n                    (change)="cambioTipoNotaCredito()">\r\n              <option *ngFor="let tipoDeNotaDeCredito of tiposDeNotasDeCreditos | async" [value]="tipoDeNotaDeCredito.codigo_dominio">\r\n                {{tipoDeNotaDeCredito.descripcion_dominio | translate}}\r\n              </option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-3">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'documento\' | translate}}</label>\r\n            <input type="text" class="form-control"\r\n                   id="txtDocumento"\r\n                   formControlName="txtDocumento">\r\n          </div>\r\n        </div>\r\n        <div class="col-md-6">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'razonSocial\' | translate}}</label>\r\n            <input type="text" class="form-control"\r\n                   id="txtRazonSocial"\r\n                   formControlName="txtRazonSocial">\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-12">\r\n          <div class="form-group label-floating">\r\n            <label id="lblMotivo" class="control-label">{{\'motivoNotaDeCredito\' | translate}}<span class="star">*</span></label>\r\n            <textarea class="form-control" type="text" formControlName="txtMotivoNotaCredito" rows="3"></textarea>\r\n            <div class="row" *ngIf="!notaDeCreditoFormGroup.get(\'txtMotivoNotaCredito\').valid && notaDeCreditoFormGroup.get(\'txtMotivoNotaCredito\').touched">\r\n              <div class="col-md-12">\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'txtMotivoNotaCredito\').hasError(\'maxlength\')"\r\n                      class="text-danger">{{\'maximoCaracteres\' | translate: {digito: 250} }}\r\n                </span>\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'txtMotivoNotaCredito\').hasError(\'required\')"\r\n                      class="text-danger">{{\'campoRequerido\' | translate}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <ng-container [ngSwitch]="habilitarPorTipoDeNotaDeCredito">\r\n        <ng-container *ngSwitchCase="TiposVistasNotaCredito.NORMAL">\r\n          <app-tipo-nota-credito-normal\r\n            #tipoVistaNormalNotaCredito\r\n            [padreFormGroup] = "notaDeCreditoFormGroup"\r\n            [nombreControl] = "controlNameVistaNormal"\r\n          >\r\n          </app-tipo-nota-credito-normal>\r\n        </ng-container>\r\n        <ng-container *ngSwitchCase="TiposVistasNotaCredito.TABLA">\r\n          <div class="card">\r\n            <div class="card-header card-header-icon" data-background-color="blue">\r\n              <i class="material-icons">list</i>\r\n            </div>\r\n            <div class="row"><h3>{{\'listaItems\' | translate}}</h3></div>\r\n            <div class="row"><p>&nbsp;</p></div>\r\n            <nav class="navbar navbar-info" role="navigation"></nav>\r\n            <div class="card-content">\r\n              <app-tipo-nota-credito-datatable\r\n                #tipoVistaTablaNotaCredito\r\n              >\r\n              </app-tipo-nota-credito-datatable>\r\n            </div>\r\n          </div>\r\n        </ng-container>\r\n      </ng-container>\r\n\r\n      <div class="row">\r\n        <div class="col-md-12">\r\n          <div class="label-floating">\r\n            <label class="control-label">{{\'observaciones\' | translate}}</label>\r\n            <textarea id="txtObservacion" name="txtObservacion" formControlName="txtObservacionesNotaCredito" class="form-control" rows="3"></textarea>\r\n            <div class="row" *ngIf="!notaDeCreditoFormGroup.get(\'txtObservacionesNotaCredito\').valid && notaDeCreditoFormGroup.get(\'txtObservacionesNotaCredito\').touched">\r\n              <div class="col-md-12">\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'txtObservacionesNotaCredito\').hasError(\'maxlength\')"\r\n                      class="text-danger">{{\'maximoCaracteres\' | translate: {digito: 250} }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row pull-right">\r\n        <button id="btnVistaPrevia" type="submit" class="btn btn-default"\r\n                [disabled]="!(notaDeCreditoFormGroup.valid)">\r\n          {{\'vistaPrevia\' | translate}}\r\n        </button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</div>\r\n'},"./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/@angular/forms/@angular/forms.es5.js"),i=e("./node_modules/rxjs/Observable.js"),n=(e.n(i),e("./src/app/facturacion-electronica/general/services/comprobantes/comprobantes.service.ts")),s=e("./node_modules/@angular/common/@angular/common/http.es5.js"),c=e("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),l=e("./src/app/facturacion-electronica/general/models/documento/tablaMaestra.ts"),d=e("./node_modules/rxjs/BehaviorSubject.js"),p=(e.n(d),e("./src/app/facturacion-electronica/general/utils/tipos.service.ts")),u=e("./src/app/facturacion-electronica/general/services/configuracionDocumento/parametros.service.ts"),m=e("./src/app/facturacion-electronica/general/services/archivos/archivo.service.ts"),v=e("./src/app/facturacion-electronica/comprobantes/nota-credito/utils/TiposVistaNotaCredito.ts"),b=e("./node_modules/@angular/router/@angular/router.es5.js"),h=e("./src/app/facturacion-electronica/general/services/configuracionDocumento/series.service.ts"),f=e("./src/app/facturacion-electronica/general/services/utils/persistenciaDatos.service.ts"),C=e("./src/app/facturacion-electronica/general/utils/estilos.services.ts"),g=e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/notaCredito.ts"),I=e("./src/app/facturacion-electronica/general/services/documento/conceptoDocumento.service.ts"),D=e("./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts");e.d(o,"a",function(){return N});var x=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},_=this&&this.__metadata||function(t,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)},N=function(){function t(t,o,e,r,a,i,n,s,c,l,d,p){this._comprobantesService=t,this._tablaMaestraService=o,this._tiposService=e,this._parametrosServicie=r,this._archivoService=a,this._seriesService=i,this.router=n,this.route=s,this._estilosService=c,this._notaCreditoPersistenciaService=l,this._conceptoDocumentoService=d,this._notaCreditoService=p,this.titulo="notaCredito",this.TiposVistasNotaCredito=v.a,this.tiposVistasDeNotaCredito=v.a}return t.prototype.ngOnInit=function(){this._notaCreditoService.pasoAVistaPrevia.next(!1),this._notaCreditoService.notaCredito.next(new g.a),this.inicializarVariables(),this.cargarSeries(),this.iniciarNotaDeCreditoFormGroup(),this.cargarTiposDeComprobantes(),this.cargarDatosNotaCreditoPersistencia()},t.prototype.ngOnDestroy=function(){},t.prototype.inicializarVariables=function(){this.escogioUnComprobante=new d.BehaviorSubject(!1),this.estaUsandoPersistencia=!1,this.habilitarPorTipoDeNotaDeCredito=-1,this._notaCreditoPersistenciaService.nombrePersistencia="notaCreditoPersistencia",this.controlNameVistaNormal="vistaNormal",this.controlNameVistaDataTable="vistaDataTable",this.notaCredito=new g.a,this.todosTiposDeNotasDeCreditos=this._parametrosServicie.obtenerParametrosPorId(this._tiposService.PARAMETRO_TIPO_NOTA_CREDITO_ELECTRONICA),this.todosTipoConceptos=this._conceptoDocumentoService.obtenerTodosConceptosDocumentos();var t=[this._tiposService.CONCEPTO_OPERACION_GRAVADA_CODIGO,this._tiposService.CONCEPTO_OPERACION_INAFECTAS_CODIGO,this._tiposService.CONCEPTO_OPERACION_EXONERADO_CODIGO,this._tiposService.CONCEPTO_OPERACION_GRATUITA_CODIGO,this._tiposService.CONCEPTO_OPERACION_SUB_TOTAL_VENTA_CODIGO,this._tiposService.CONCEPTO_OPERACION_TOTAL_DESCUENTOS_CODIGO];this.tiposConceptos=this._conceptoDocumentoService.obtenerPorCodigos(this.todosTipoConceptos,t),this.todosTiposMonedas=this._tablaMaestraService.obtenerPorIdTabla(l.b),this.todosTiposUnidades=this._tablaMaestraService.obtenerPorIdTabla(l.d)},t.prototype.cargarSeries=function(){this.todasSeries=this._seriesService.filtroSeries(localStorage.getItem("id_entidad"),this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO,this._tiposService.TIPO_SERIE_ONLINE.toString())},t.prototype.filtrarSeries=function(t){void 0===t&&(t=!1);var o=this.notaDeCreditoFormGroup.controls.cmbTipoComprobante.value;if(this.notaDeCreditoFormGroup.controls.cmbSerie.enable(),t){var e=this.notaCredito.documentoReferencia[0];void 0!==e&&(o=e.tipoDocumentoDestino),this.notaDeCreditoFormGroup.controls.cmbSerie.setValue(this.notaCredito.idSerie),this._estilosService.eliminarEstiloInput("cmbSerie","is-empty")}this.series=this._seriesService.filtrarSeriesPorIdTipoComprobante(this.todasSeries,o)},t.prototype.cargarDatosNotaCreditoPersistencia=function(){var t=this._notaCreditoPersistenciaService.obtener();null!==t?(this.notaCredito=t,this.estaUsandoPersistencia=!0,this.cargarCabecera(),this.cargarDocumentoReferencia(),this.cargarDocumentoParametro()):this.estaUsandoPersistencia=!1},t.prototype.cargarDocumentoReferencia=function(){void 0!==this.notaCredito.documentoReferencia[0]&&(this.notaDeCreditoFormGroup.controls.cmbTipoComprobante.setValue(this.notaCredito.documentoReferencia[0].tipoDocumentoDestino),this._notaCreditoService.buscarComprobanteReferencia(this.notaCredito.documentoReferencia[0].idDocumentoDestino,this.todosTiposUnidades),this.notaDeCreditoFormGroup.controls.txtNumeroComprobante.setValue(this.notaCredito.documentoReferencia[0].serieDocumentoDestino+"-"+this.notaCredito.documentoReferencia[0].correlativoDocumentoDestino),this.escogioUnComprobante.next(!0),this._estilosService.eliminarEstiloInputAutocomplete("txtNumeroComprobante","is-empty"),this._estilosService.eliminarEstiloInput("cmbTipoComprobante","is-empty"),this.notaDeCreditoFormGroup.controls.txtNumeroComprobante.enable())},t.prototype.cargarDocumentoParametro=function(){if(void 0!==this.notaCredito.documentoParametro[0]){var t=JSON.parse(this.notaCredito.documentoParametro[0].json);this.notaDeCreditoFormGroup.controls.cmbTipoNotaCredito.setValue(t.auxiliarCaracter),this.notaDeCreditoFormGroup.controls.cmbTipoNotaCredito.enable(),this.cargarTiposDeNotasDeCredito(!0)}},t.prototype.cargarCabecera=function(){this.filtrarSeries(!0),this.notaDeCreditoFormGroup.controls.txtMotivoNotaCredito.setValue(this.notaCredito.motivoComprobante),this.notaDeCreditoFormGroup.controls.txtObservacionesNotaCredito.setValue(this.notaCredito.observacionComprobante),this.notaDeCreditoFormGroup.controls.txtDocumento.setValue(this.notaCredito.rucComprador),this.notaDeCreditoFormGroup.controls.txtRazonSocial.setValue(this.notaCredito.razonSocialComprador),this._estilosService.eliminarEstiloInput("txtMotivoNotaCredito","is-empty"),this._estilosService.eliminarEstiloInput("txtObservacionesNotaCredito","is-empty"),this._estilosService.eliminarEstiloInput("txtDocumento","is-empty"),this._estilosService.eliminarEstiloInput("txtRazonSocial","is-empty")},t.prototype.cargarTiposDeNotasDeCredito=function(t){var o=this;void 0===t&&(t=!1);var e=[];switch(this.notaDeCreditoFormGroup.get("cmbTipoComprobante").value){case this._tiposService.TIPO_DOCUMENTO_FACTURA:case this._tiposService.TIPO_DOCUMENTO_BOLETA:e=[this._tiposService.TIPO_NOTA_CREDITO_ANULACION_DE_OPERACION,this._tiposService.TIPO_NOTA_CREDITO_ANULACION_POR_ERROR_RUC,this._tiposService.TIPO_NOTA_CREDITO_CORRECCION_DE_LA_DESCRIPCION,this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_GLOBAL,this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_POR_ITEM,this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_TOTAL,this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_POR_ITEM,this._tiposService.TIPO_NOTA_CREDITO_BONIFICACION,this._tiposService.TIPO_NOTA_CREDITO_DISMINUCION_EN_EL_VALOR]}this.escogioUnComprobante.subscribe(function(r){r?(o.tiposDeNotasDeCreditos=o._parametrosServicie.obtenerPorCodigoDeTipoDeComprobante(o.todosTiposDeNotasDeCreditos,e),o._estilosService.eliminarEstiloInput("cmbTipoNotaCredito","is-empty"),o.notaDeCreditoFormGroup.get("cmbTipoNotaCredito").enable(),t||o.notaDeCreditoFormGroup.get("cmbTipoNotaCredito").setValue(e[0]),o.cambioTipoNotaCredito()):o.notaDeCreditoFormGroup.get("cmbTipoNotaCredito").disable()})},t.prototype.cargarTiposDeComprobantes=function(){this.todosTiposComprobantes=this._tablaMaestraService.obtenerPorIdTabla(l.a);var t=[this._tiposService.TIPO_DOCUMENTO_FACTURA,this._tiposService.TIPO_DOCUMENTO_BOLETA];this.tiposDeComprobantes=this._tablaMaestraService.obtenerPorCodigoDeTablaMaestra(this.todosTiposComprobantes,t)},t.prototype.iniciarNotaDeCreditoFormGroup=function(){this.notaDeCreditoFormGroup=new a.FormGroup({cmbSerie:new a.FormControl({value:"",disabled:!0},[a.Validators.required]),cmbTipoComprobante:new a.FormControl("",[a.Validators.required]),txtNumeroComprobante:new a.FormControl({value:"",disabled:!0},[a.Validators.required]),cmbTipoNotaCredito:new a.FormControl({value:"",disabled:!0},[a.Validators.required]),txtMotivoNotaCredito:new a.FormControl("",[a.Validators.required,a.Validators.maxLength(250)]),txtObservacionesNotaCredito:new a.FormControl("",[a.Validators.maxLength(250)]),txtDocumento:new a.FormControl({value:"",disabled:!0},[a.Validators.required]),txtRazonSocial:new a.FormControl({value:"",disabled:!0},[a.Validators.required])})},t.prototype.formatoDeListaAutocompletado=function(t){return t.vcSerie+" - "+t.vcCorrelativo},t.prototype.formatoDeValorAutocompletado=function(t){return t.vcSerie+" - "+t.vcCorrelativo},t.prototype.cambioLaSeleccionDelComprobante=function(t){void 0!==t&&(this.escogioUnComprobante.next(!0),this._notaCreditoService.buscarComprobanteReferencia(t.inIdcomprobantepago,this.todosTiposUnidades),this.notaDeCreditoFormGroup.get("txtDocumento").setValue(t.entidadcompradora.vcDocumento),this.notaDeCreditoFormGroup.get("txtRazonSocial").setValue(t.entidadcompradora.vcDenominacion),this._estilosService.eliminarEstiloInput("txtDocumento","is-empty"),this._estilosService.eliminarEstiloInput("txtRazonSocial","is-empty"))},t.prototype.visualizarComprobanteReferencia=function(){this._archivoService.retornarArchivoRetencionPercepcionbase(this.notaDeCreditoFormGroup.get("txtNumeroComprobante").value.inIdcomprobantepago).subscribe(function(t){if(t){var o='<embed width=100% height=100% type="application/pdf" src="data:application/pdf;base64,'+t+'"> </embed>';window.open("","PDF","dependent = yes, locationbar = no, menubar = yes, resizable, screenX = 50, screenY = 50, width = 800, height = 800").document.write(o)}})},t.prototype.cambioLaBusquedaDeAutocompleteDeComprobante=function(){"object"==typeof this.notaDeCreditoFormGroup.get("txtNumeroComprobante").value?this.escogioUnComprobante.next(!0):(this.limpiar(),this.escogioUnComprobante.next(!1),this._notaCreditoService.comprobanteReferencia.next(null))},t.prototype.limpiar=function(){this.notaDeCreditoFormGroup.get("txtDocumento").reset(),this.notaDeCreditoFormGroup.get("txtRazonSocial").reset(),this._estilosService.agregarEstiloInput("txtDocumento","is-empty"),this._estilosService.agregarEstiloInput("txtRazonSocial","is-empty"),this.notaCredito=new g.a},t.prototype.cambioTipoNotaCredito=function(){var t=this.notaDeCreditoFormGroup.get("cmbTipoNotaCredito").value;switch(this._notaCreditoService.ponerTipoNotaCredito(t),t){case this._tiposService.TIPO_NOTA_CREDITO_ANULACION_DE_OPERACION:this.cargarAnulacionOperacion();break;case this._tiposService.TIPO_NOTA_CREDITO_ANULACION_POR_ERROR_RUC:this.cargarErrorRuc();break;case this._tiposService.TIPO_NOTA_CREDITO_CORRECCION_DE_LA_DESCRIPCION:this.cargarCoreccionDescripcion();break;case this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_GLOBAL:this.cargarDescuentoGlobal();break;case this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_POR_ITEM:this.cargarDescuentoItem();break;case this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_TOTAL:this.cargarDevolucionTotal();break;case this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_POR_ITEM:this.cargarDevolucionItem();break;case this._tiposService.TIPO_NOTA_CREDITO_BONIFICACION:this.cargarBonificacion();break;case this._tiposService.TIPO_NOTA_CREDITO_DISMINUCION_EN_EL_VALOR:this.cargarDisminucionValor()}},t.prototype.cargarAnulacionOperacion=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.NORMAL},t.prototype.cargarErrorRuc=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.NORMAL},t.prototype.cargarCoreccionDescripcion=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.TABLA},t.prototype.cargarDescuentoGlobal=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.NORMAL},t.prototype.cargarDescuentoItem=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.TABLA},t.prototype.cargarDevolucionTotal=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.NORMAL},t.prototype.cargarDevolucionItem=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.TABLA},t.prototype.cargarBonificacion=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.TABLA},t.prototype.cargarDisminucionValor=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.TABLA},t.prototype.listarProductosDeAutcompletado=function(t){if(!t)return i.Observable.of([]);var o=this.notaDeCreditoFormGroup.get("cmbTipoComprobante").value;if(null!=o){var e=(new s.e).set("idEntidadEmisora",localStorage.getItem("id_entidad")).set("tipoComprobanteTabla",l.a.toString()).set("tipoComprobanteRegistro",o).set("fechaEmisionDel","").set("fechaEmisionAl","").set("ticketBaja","").set("nroPagina","0").set("regXPagina","10").set("ordenar","inIdcomprobantepago").set("tipoDocumento","").set("correlativoInicial","").set("correlativoFinal","").set("fechaBajaDel","").set("fechaBajaAl","").set("nroDocumento","").set("nroSerie","").set("estado","").set("ticket","");return this._comprobantesService.buscarParaAutoComplete(e)}},t.prototype.cambioTipoComprobante=function(){this.notaDeCreditoFormGroup.get("txtDocumento").reset(),this.notaDeCreditoFormGroup.get("txtRazonSocial").reset(),this.notaDeCreditoFormGroup.get("txtNumeroComprobante").reset(),this.notaDeCreditoFormGroup.get("cmbTipoNotaCredito").reset(),this._estilosService.agregarEstiloInput("txtDocumento","is-empty"),this._estilosService.agregarEstiloInput("txtRazonSocial","is-empty"),this._estilosService.agregarEstiloInputAutocomplete("txtNumeroComprobante","is-empty"),this._estilosService.agregarEstiloInput("cmbTipoNotaCredito","is-empty"),this.habilitarPorTipoDeNotaDeCredito=-1,this.escogioUnComprobante.next(!1),this.cargarTiposDeNotasDeCredito(),this.filtrarSeries(),this.notaDeCreditoFormGroup.get("txtNumeroComprobante").enable()},t.prototype.vistaPrevia=function(){this._notaCreditoService.pasoAVistaPrevia.next(!0),this._notaCreditoService.setDatosPersistencia(this.tiposConceptos,this.tiposDeNotasDeCreditos,this.notaDeCreditoFormGroup.controls.cmbTipoNotaCredito.value,this.series,this.notaDeCreditoFormGroup.controls.cmbSerie.value,this.notaDeCreditoFormGroup.controls.txtMotivoNotaCredito.value,this.notaDeCreditoFormGroup.controls.txtObservacionesNotaCredito.value),this.router.navigate(["./vistaPrevia"],{relativeTo:this.route})},t}();N=x([e.i(r.Component)({selector:"app-nota-credito",template:e("./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.html"),styles:[e("./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.css")]}),_("design:paramtypes",["function"==typeof(T=void 0!==n.a&&n.a)&&T||Object,"function"==typeof(O=void 0!==c.a&&c.a)&&O||Object,"function"==typeof(y=void 0!==p.a&&p.a)&&y||Object,"function"==typeof(F=void 0!==u.a&&u.a)&&F||Object,"function"==typeof(R=void 0!==m.a&&m.a)&&R||Object,"function"==typeof(E=void 0!==h.a&&h.a)&&E||Object,"function"==typeof(S=void 0!==b.b&&b.b)&&S||Object,"function"==typeof(P=void 0!==b.c&&b.c)&&P||Object,"function"==typeof(V=void 0!==C.a&&C.a)&&V||Object,"function"==typeof(G=void 0!==f.a&&f.a)&&G||Object,"function"==typeof(A=void 0!==I.a&&I.a)&&A||Object,"function"==typeof(M=void 0!==D.a&&D.a)&&M||Object])],N);var T,O,y,F,R,E,S,P,V,G,A,M},"./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.module.ts":function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/@angular/common/@angular/common.es5.js"),i=e("./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.routing.module.ts"),n=e("./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.ts"),s=e("./node_modules/@ngx-translate/core/index.js"),c=e("./node_modules/@angular/forms/@angular/forms.es5.js"),l=e("./node_modules/ng2-auto-complete/dist/index.js"),d=(e.n(l),e("./src/app/facturacion-electronica/general/services/comprobantes/comprobantes.service.ts")),p=e("./src/app/facturacion-electronica/general/services/servidores.ts"),u=e("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),m=e("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),v=e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.module.ts"),b=e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.module.ts"),h=e("./src/app/facturacion-electronica/general/services/configuracionDocumento/parametros.service.ts"),f=e("./src/app/facturacion-electronica/general/services/archivos/archivo.service.ts"),C=e("./src/app/facturacion-electronica/general/vista-previa-comprobantes/vista-previa-comprobantes.module.ts"),g=e("./src/app/facturacion-electronica/general/services/configuracionDocumento/series.service.ts"),I=e("./src/app/facturacion-electronica/general/services/utils/persistenciaDatos.service.ts"),D=e("./src/app/facturacion-electronica/general/utils/estilos.services.ts"),x=e("./src/app/facturacion-electronica/general/services/documento/conceptoDocumento.service.ts"),_=e("./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts");e.d(o,"NotaCreditoModule",function(){return T});var N=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},T=function(){function t(){}return t}();T=N([e.i(r.NgModule)({imports:[a.CommonModule,c.ReactiveFormsModule,i.a,s.a,l.Ng2AutoCompleteModule,v.a,b.a,C.a],declarations:[n.a],providers:[d.a,p.a,u.a,m.a,h.a,f.a,I.a,g.a,D.a,x.a,_.a]})],T)},"./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.routing.module.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/@angular/router/@angular/router.es5.js"),i=e("./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.ts"),n=e("./src/app/facturacion-electronica/general/vista-previa-comprobantes/vista-previa-comprobantes.component.ts"),s=e("./src/app/facturacion-electronica/general/emision-comprobante/emision-comprobante.component.ts");e.d(o,"a",function(){return d});var c=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},l=[{path:"",children:[{path:"",pathMatch:"full",redirectTo:"crear"},{path:"crear",component:i.a,data:{codigo:"07",mostrarCombo:!0}},{path:"crear/vistaPrevia",component:n.a,data:{codigo:"07",mostrarCombo:!1,titulo:"notaCredito"}},{path:"emision/:id",component:s.a,data:{codigo:"07",mostrarCombo:!0,titulo:"notaCredito"}}]}],d=function(){function t(){}return t}();d=c([e.i(r.NgModule)({imports:[a.a.forChild(l)],exports:[a.a]})],d)},"./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/rxjs/BehaviorSubject.js"),i=(e.n(a),e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/detalleNotaCredito.ts")),n=e("./src/app/facturacion-electronica/general/services/comprobantes/comprobantes.service.ts"),s=e("./node_modules/rxjs/Subscription.js"),c=(e.n(s),e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/detalleDetalleNotaCredito.ts")),l=e("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),d=e("./src/app/facturacion-electronica/general/services/utils/persistenciaDatos.service.ts"),p=e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/notaCredito.ts"),u=e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/jsonDocumentoParametroNotaCredito.ts"),m=e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/documentoParametroNotaCredito.ts"),v=e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/entidadNotaCredito.ts"),b=e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/documentoConceptoNotaCredito.ts"),h=e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/documentoReferenciaNotaCredito.ts"),f=e("./src/app/facturacion-electronica/general/utils/tipos.service.ts");e.d(o,"a",function(){return I});var C=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},g=this&&this.__metadata||function(t,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)},I=function(){function t(t,o,e,r){this._comprobanteService=t,this._tablaMaestraService=o,this._notaCreditoPersistenciaService=e,this._tiposService=r,this.tipoNotaCredito=new a.BehaviorSubject(""),this.detalleModificadoLista=new a.BehaviorSubject([]),this.detalleOriginalLista=[],this.comprobanteReferencia=new a.BehaviorSubject(null),this.comprobanteReferenciaSubscription=new s.Subscription,this.notaCredito=new a.BehaviorSubject(new p.a),this.pasoAVistaPrevia=new a.BehaviorSubject(!1),this.padreFormGroup=new a.BehaviorSubject(null)}return t.prototype.ngOnDestroy=function(){this.comprobanteReferenciaSubscription.unsubscribe()},t.prototype.buscarComprobanteReferencia=function(t,o){var e=this;this.comprobanteReferenciaSubscription=this._comprobanteService.buscarPorUuid(t).subscribe(function(t){null!==t&&(e.cargarDetalleDecomprobanteReferencia(t,o),e.comprobanteReferencia.next(t))})},t.prototype.cargarDetalleDecomprobanteReferencia=function(t,o){for(var e=[],r=[],a=this,n=0,s=t.detalle;n<s.length;n++){var l=s[n];!function(t){var n=new i.a;n.codigoItem=t.vcCodigoProducto,n.cantidad=t.deCantidaddespachada,n.codigoUnidadMedida=t.vcUnidadmedida,n.descripcionItem=t.vcDescripcionitem;var s=new c.a;s.idTipoIgv=t.inItipoAfectacionigv,s.codigoTipoIgv=t.inCodigoAfectacionigv,s.descripcionTipoIgv=t.vcDescAfectacionigv,s.idTipoIsc=t.inItipoCalculoisc,s.codigoTipoIsc=t.inCodigoCalculoisc,s.descripcionTipoIsc=t.vcDescCalculoisc,s.idTipoPrecio=t.inItipoPrecioventa,s.codigoTipoPrecio=t.inCodigoPrecioventa,s.descripcionTipoPrecio=t.vcDescPrecioventa,s.idProducto=t.inIproducto,s.numeroItem=t.deCantidaddespachada,s.precioUnitarioVenta=t.dePreciounitarioitem,s.subtotalIsc=t.nuSubtotalIsc,s.subtotalVenta=t.dePreciototalitem,s.subtotalIgv=t.nuSubtotalIgv,s.unidadMedida=t.vcUnidadmedida,s.descuento=t.nuDescuento.toString(),n.detalle=s,n.montoImpuesto=t.deMontoimpuesto,n.posicion=t.vcPosicion,n.precioTotal=t.dePreciototalitem,n.precioUnitario=t.dePreciounitarioitem,a._tablaMaestraService.obtenerPorAtributoDeTablaMaestra(o,[t.producto.chUniMedida],"iso").take(1).subscribe(function(t){1===t.length&&(n.idRegistroUnidad=t[0].codigo,n.idTablaUnidad=t[0].tabla.toString())}),e.push(n),r.push(n.copiar())}(l)}this.ponerDetalle(e),this.detalleOriginalLista=r},t.prototype.ponerTipoNotaCredito=function(t){this.tipoNotaCredito.next(t)},t.prototype.ponerDetalle=function(t){this.detalleModificadoLista.next(t)},t.prototype.obtenerDetalleOriginal=function(){return this.detalleOriginalLista},t.prototype.setDatosPersistencia=function(t,o,e,r,a,i,n){var s=this;this.setDetallePersistencia(),this.setEntidadPersistencia(),this.setDocumentoParametro(o,e),this.setDocumentoReferencia(),this.setCabeceraPersistencia(r,a,i,n),this.setDocumentoConcepto(t),this.pasoAVistaPrevia.subscribe(function(t){t&&(s._notaCreditoPersistenciaService.agregar(s.notaCredito.value),s.pasoAVistaPrevia.next(!1))})},t.prototype.setDetallePersistencia=function(){},t.prototype.setEntidadPersistencia=function(){if(null!==this.comprobanteReferencia.value){var t=new v.a,o=new v.a;t.idTipoEntidad="1",t.descripcionTipoEntidad="Emisor",t.idEntidad=this.comprobanteReferencia.value.entidadproveedora.seIentidad,t.tipoDocumento=this.comprobanteReferencia.value.entidadproveedora.vcTipoDocumento,t.denominacion=this.comprobanteReferencia.value.entidadproveedora.vcDenominacion,t.direccionFiscal=this.comprobanteReferencia.value.entidadproveedora.vcDirFiscal,t.documento=this.comprobanteReferencia.value.entidadproveedora.vcDocumento,t.nombreComercial=this.comprobanteReferencia.value.entidadproveedora.vcNomComercia,t.notifica="N",t.ubigeo=this.comprobanteReferencia.value.entidadproveedora.vcUbigeo,t.correo=this.comprobanteReferencia.value.entidadproveedora.vcCorreo,o.idTipoEntidad="2",o.descripcionTipoEntidad="Receptor",o.idEntidad=this.comprobanteReferencia.value.entidadcompradora.seIentidad,o.tipoDocumento=this.comprobanteReferencia.value.entidadcompradora.vcTipoDocumento,o.denominacion=this.comprobanteReferencia.value.entidadcompradora.vcDenominacion,o.direccionFiscal=this.comprobanteReferencia.value.entidadcompradora.vcDirFiscal,o.documento=this.comprobanteReferencia.value.entidadcompradora.vcDocumento,o.nombreComercial=this.comprobanteReferencia.value.entidadcompradora.vcNomComercia,o.notifica="S",o.ubigeo=this.comprobanteReferencia.value.entidadcompradora.vcUbigeo,o.correo=this.comprobanteReferencia.value.entidadcompradora.vcCorreo,this.notaCredito.value.documentoEntidad.push(t),this.notaCredito.value.documentoEntidad.push(o)}},t.prototype.setDocumentoConcepto=function(t){var o=this,e=new b.a,r=new b.a,a=new b.a,i=new b.a,n=new b.a,s=new b.a;t.subscribe(function(t){for(var c=0,l=t;c<l.length;c++){var d=l[c];switch(d.codigo){case o._tiposService.CONCEPTO_OPERACION_GRAVADA_CODIGO:e.idConcepto=d.idConcepto,e.descripcionConcepto=d.descripcion,e.codigoConcepto=d.codigo;break;case o._tiposService.CONCEPTO_OPERACION_INAFECTAS_CODIGO:r.idConcepto=d.idConcepto,r.descripcionConcepto=d.descripcion,r.codigoConcepto=d.codigo;break;case o._tiposService.CONCEPTO_OPERACION_EXONERADO_CODIGO:a.idConcepto=d.idConcepto,a.descripcionConcepto=d.descripcion,a.codigoConcepto=d.codigo;break;case o._tiposService.CONCEPTO_OPERACION_GRATUITA_CODIGO:i.idConcepto=d.idConcepto,i.descripcionConcepto=d.descripcion,i.codigoConcepto=d.codigo;break;case o._tiposService.CONCEPTO_OPERACION_SUB_TOTAL_VENTA_CODIGO:n.idConcepto=d.idConcepto,n.descripcionConcepto=d.descripcion,n.codigoConcepto=d.codigo;break;case o._tiposService.CONCEPTO_OPERACION_TOTAL_DESCUENTOS_CODIGO:s.idConcepto=d.idConcepto,s.descripcionConcepto=d.descripcion,s.codigoConcepto=d.codigo}}o.notaCredito.value.documentoConcepto.push(e),o.notaCredito.value.documentoConcepto.push(r),o.notaCredito.value.documentoConcepto.push(a),o.notaCredito.value.documentoConcepto.push(i),o.notaCredito.value.documentoConcepto.push(n),o.notaCredito.value.documentoConcepto.push(s)})},t.prototype.setDocumentoParametro=function(t,o){var e=this;t.subscribe(function(t){var r=t.find(function(t){return t.codigo_dominio===o}),a=new m.a;a.idParametro=r.idparametro.toString(),a.descripcionParametro=r.parametro_descripcion;var i=new u.a;i.tipo=3,i.valor=r.descripcion_dominio,i.auxiliarCaracter=r.codigo_dominio,a.json=JSON.stringify(i),e.notaCredito.value.documentoParametro.push(a)})},t.prototype.setDocumentoReferencia=function(){var t=new h.a;if(t.tipoDocumentoOrigen=this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO,t.tipoDocumentoOrigenDescripcion=this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO_NOMBRE,null!==this.comprobanteReferencia.value){t.idDocumentoDestino=this.comprobanteReferencia.value.inIdcomprobantepago,t.tipoDocumentoDestino=this.comprobanteReferencia.value.vcIdregistrotipocomprobante,t.correlativoDocumentoDestino=this.comprobanteReferencia.value.vcCorrelativo,t.serieDocumentoDestino=this.comprobanteReferencia.value.vcSerie,t.fechaEmisionDestino=this.comprobanteReferencia.value.tsFechaemision,t.totalImporteDestino=Number(this.comprobanteReferencia.value.deTotalcomprobantepago).toFixed(2);for(var o=0,e=0,r=this.comprobanteReferencia.value.detalle;e<r.length;e++){o+=r[e].nuSubtotalIgv}t.totalImporteAuxiliarDestino=Number(o).toFixed(2),t.monedaDestino=this.comprobanteReferencia.value.chMonedacomprobantepago.toString(),t.tipoDocumentoDestinoDescripcion=this.comprobanteReferencia.value.vcTipocomprobante,t.totalMonedaDestino=this.comprobanteReferencia.value.deTotalcomprobantepago,t.totalPorcentajeAuxiliarDestino=Number(0).toFixed(2)}this.notaCredito.value.documentoReferencia.push(t)},t.prototype.setCabeceraPersistencia=function(t,o,e,r){var a=this;t.subscribe(function(t){if(t.length>0){var e=t.find(function(t){return t.idSerie===Number(o)});null!=e&&(a.notaCredito.value.numeroComprobante=e.serie)}}),null!=this.comprobanteReferencia.value&&(this.notaCredito.value.rucProveedor=this.comprobanteReferencia.value.entidadproveedora.vcDocumento,this.notaCredito.value.razonSocialProveedor=this.comprobanteReferencia.value.entidadproveedora.vcDenominacion,this.notaCredito.value.idTablaMoneda=this.comprobanteReferencia.value.vcIdtablamoneda,this.notaCredito.value.idRegistroMoneda=this.comprobanteReferencia.value.vcIdregistromoneda,this.notaCredito.value.idTablaTipoComprobante=this.comprobanteReferencia.value.vcIdtablatipocomprobante,this.notaCredito.value.moneda=this.comprobanteReferencia.value.chMonedacomprobantepago.toString(),this.notaCredito.value.rucComprador=this.comprobanteReferencia.value.entidadcompradora.vcDocumento,this.notaCredito.value.razonSocialComprador=this.comprobanteReferencia.value.entidadcompradora.vcDenominacion),this.notaCredito.value.idRegistroTipoComprobante=this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO,this.notaCredito.value.idTipoComprobante=this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO,this.notaCredito.value.tipoComprobante=this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO,this.notaCredito.value.observacionComprobante=r,this.notaCredito.value.tipoComprobante=this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO_NOMBRE,this.notaCredito.value.motivoComprobante=e,this.notaCredito.value.usuarioCreacion=localStorage.getItem("username"),this.notaCredito.value.usuarioModificacion=localStorage.getItem("username"),this.notaCredito.value.idSerie=o},t.prototype.setCabeceraNormal=function(t){this.notaCredito.value.montoPagado=Number(t.montoPagado).toFixed(2),this.notaCredito.value.igv=Number(t.igv).toFixed(2),this.notaCredito.value.isc=Number(t.isc).toFixed(2),this.notaCredito.value.descuento=Number(t.descuentos).toFixed(2),this.notaCredito.value.totalComprobante=Number(t.total).toFixed(2),this.notaCredito.value.subtotalComprobante=Number(t.subTotal).toFixed(2),this.notaCredito.value.importeReferencial=Number(t.importeReferencial).toFixed(2),this.notaCredito.value.otrosTributos=Number(t.otrosTributos).toFixed(2)},t.prototype.setDetalleNormal=function(t){this.notaCredito.value.detalleEbiz=null!==t?[t]:this.detalleModificadoLista.value},t.prototype.setCabeceraDataTable=function(t){t?this.ponerValoresEnCabecera(0,0,0,0,0,0,0,0):this.reCalcularTotalesDeDetalle()},t.prototype.ponerValoresEnCabecera=function(t,o,e,r,a,i,n,s){this.notaCredito.value.montoPagado=Number(t).toFixed(2),this.notaCredito.value.igv=Number(o).toFixed(2),this.notaCredito.value.isc=Number(e).toFixed(2),this.notaCredito.value.otrosTributos=Number(r).toFixed(2),this.notaCredito.value.importeReferencial=Number(a).toFixed(2),this.notaCredito.value.subtotalComprobante=Number(i).toFixed(2),this.notaCredito.value.totalComprobante=Number(s).toFixed(2),this.notaCredito.value.descuento=Number(n).toFixed(2)},t.prototype.reCalcularTotalesDeDetalle=function(){for(var t=0,o=0,e=0,r=0,a=0,i=0,n=0,s=0,c=this.notaCredito.value.detalleEbiz;s<c.length;s++){var l=c[s];t+=Number(l.precioTotal),o+=Number(l.detalle.subtotalIgv),e+=Number(l.detalle.subtotalIsc),r+=Number(l.montoImpuesto),a+=Number(l.detalle.subtotalVenta),i+=Number(l.precioTotal),n+=Number(l.detalle.descuento)}this.ponerValoresEnCabecera(t,o,e,0,r,a,n,i)},t.prototype.setDetalleDataTable=function(t){this.notaCredito.value.detalleEbiz=t},t}();I=C([e.i(r.Injectable)(),g("design:paramtypes",["function"==typeof(D=void 0!==n.a&&n.a)&&D||Object,"function"==typeof(x=void 0!==l.a&&l.a)&&x||Object,"function"==typeof(_=void 0!==d.a&&d.a)&&_||Object,"function"==typeof(N=void 0!==f.a&&f.a)&&N||Object])],I);var D,x,_,N},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.component.css":function(t,o,e){o=t.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),o.push([t.i,"",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.component.html":function(t,o){t.exports='<div class="row">\r\n  <div class="col-md-12">\r\n    <app-data-table\r\n      #tablaDetalle\r\n      [idTabla]="\'tablaDetalle\'"\r\n      [cabecera]="cabecera"\r\n      [atributos]="atributos"\r\n      [ordenarPorElCampo]="ordenarPorElCampo"\r\n      [nombreIdDelItem]="nombreIdDelItem"\r\n\r\n      [acciones]="acciones"\r\n      [tipoAccion]="tipoAccion"\r\n      [habilitarAcciones]="true"\r\n      (iniciarData)="iniciarData($event)"\r\n      (accion)="ejecutarAccion($event)"\r\n      [pintarFilas]="pintarFilas"\r\n      [nombreCampoParaPintarFilas]="nombreCampoParaPintarFilas"\r\n      >\r\n    </app-data-table>\r\n  </div>\r\n</div>\r\n<app-tipo-nota-credito-editar-item\r\n  #editarItemComponent\r\n  [idModal]="idModal"\r\n>\r\n</app-tipo-nota-credito-editar-item>\r\n'},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.component.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./src/app/facturacion-electronica/general/data-table/utils/accion.ts"),i=e("./src/app/facturacion-electronica/general/data-table/utils/tipo-accion.ts"),n=e("./src/app/facturacion-electronica/general/data-table/utils/modo-vista-accion.ts"),s=e("./src/app/facturacion-electronica/general/data-table/data-table.component.ts"),c=e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.ts"),l=e("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),d=e("./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts");e.d(o,"a",function(){return m});var p=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},u=this&&this.__metadata||function(t,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)},m=function(){function t(t,o){this._tiposService=t,this._notaCreditoService=o,this.idModal="modal",this.cabecera=["cantidad","codigo","descripcion","unidadMedida","valorUnitario","igv","isc","descuento","valorVenta"],this.atributos=["cantidad","codigoItem","descripcionItem","detalle.unidadMedida","precioUnitario","montoIgv","detalle.subtotalIsc","detalle.descuento","precioTotal"],this.ordenarPorElCampo="descripcionItem",this.acciones=[new a.b("editar",new a.c("visibility","btn-info"),i.a.EDITAR)],this.pintarFilas=!0,this.nombreCampoParaPintarFilas="cambioDetalle",this.nombreIdDelItem="posicion",this.tipoAccion=n.a.ICONOS,this.detalleLista=[]}return t.prototype.ngOnInit=function(){var t=this;this.tipoNotaCreditoSubscription=this._notaCreditoService.tipoNotaCredito.subscribe(function(o){t.tipoNotaCredito=o}),this.pasoAVistaPreviaSubscription=this._notaCreditoService.pasoAVistaPrevia.subscribe(function(o){o&&(t.enviarDetalle(),t.enviarCabecera())})},t.prototype.ngOnDestroy=function(){this.tipoNotaCreditoSubscription.unsubscribe(),this.detalleListaSubscription.unsubscribe()},t.prototype.iniciarData=function(t){var o=this;this.detalleListaSubscription=this._notaCreditoService.detalleModificadoLista.subscribe(function(t){o.detalleLista=t,o.tablaDetalle.insertarData(o.detalleLista)})},t.prototype.enviarDetalle=function(){this.filtrarDetallesModificados(),this._notaCreditoService.setDetalleDataTable(this.detalleLista)},t.prototype.enviarCabecera=function(){var t=!1;this.tipoNotaCredito===this._tiposService.TIPO_NOTA_CREDITO_CORRECCION_DE_LA_DESCRIPCION&&(t=!0),this._notaCreditoService.setCabeceraDataTable(t)},t.prototype.filtrarDetallesModificados=function(){this.detalleLista=this.detalleLista.filter(function(t){return t.cambioDetalle})},t.prototype.ejecutarAccion=function(t){var o=t[0];switch(this.itemAEditar=t[1],o){case i.a.EDITAR:this.abrirEditarModal()}},t.prototype.abrirEditarModal=function(){this.editarItemComponent.llenarDatosItem(this.itemAEditar),this.editarItemComponent.abrirModal()},t}();p([e.i(r.ViewChild)("tablaDetalle"),u("design:type","function"==typeof(v=void 0!==s.a&&s.a)&&v||Object)],m.prototype,"tablaDetalle",void 0),p([e.i(r.ViewChild)("editarItemComponent"),u("design:type","function"==typeof(b=void 0!==c.a&&c.a)&&b||Object)],m.prototype,"editarItemComponent",void 0),m=p([e.i(r.Component)({selector:"app-tipo-nota-credito-datatable",template:e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.component.html"),styles:[e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.component.css")]}),u("design:paramtypes",["function"==typeof(h=void 0!==l.a&&l.a)&&h||Object,"function"==typeof(f=void 0!==d.a&&d.a)&&f||Object])],m);var v,b,h,f},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.module.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/@angular/common/@angular/common.es5.js"),i=e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.component.ts"),n=e("./node_modules/@ngx-translate/core/index.js"),s=e("./src/app/facturacion-electronica/general/data-table/data-table.module.ts"),c=e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.module.ts"),l=e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.module.ts");e.d(o,"a",function(){return p});var d=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},p=function(){function t(){}return t}();p=d([e.i(r.NgModule)({imports:[a.CommonModule,n.a,s.a,c.a,l.a],declarations:[i.a],exports:[i.a],providers:[]})],p)},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.css":function(t,o,e){o=t.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),o.push([t.i,".modal-title{background:#0079bf;box-shadow:none;border-radius:3px;color:#fff;padding:1rem}",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.html":function(t,o){t.exports='<div class="modal fade" #modalEditar [id]="idModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n  <div class="modal-dialog">\r\n    <div class="modal-content">\r\n      <div class="modal-header">\r\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="material-icons">clear</i></button>\r\n        <div class="row">\r\n          <div class="col-md-4">\r\n            <h5 class="modal-title" id="myModalLabel">{{\'editarItem\' | translate}}</h5>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <form [formGroup]="editarItemFormGroup" autocomplete="off">\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblCantidad" class="control-label">{{\'cantidad\' | translate}}</label>\r\n                <input class="form-control" id="txtCantidad" formControlName="txtCantidad" type="text" precioDirectiva>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtCantidad\').valid && editarItemFormGroup.get(\'txtCantidad\').touched">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtCantidad\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtCantidad} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtCantidad\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblCodigo" class="control-label">{{\'codigo\' | translate}}</label>\r\n                <input class="form-control" id="txtCodigo" formControlName="txtCodigo" type="text">\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtCodigo\').valid && editarItemFormGroup.get(\'txtCodigo\').touched">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtCodigo\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtCodigo} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtCodigo\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblDescripcion" class="control-label">{{\'descripcion\' | translate}}</label>\r\n                <textarea class="form-control" id="txtDescripcion" formControlName="txtDescripcion" type="text" rows="3"></textarea>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtDescripcion\').valid && editarItemFormGroup.get(\'txtDescripcion\').touched">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescripcion\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtDescripcion} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescripcion\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblUnidadMedida" class="control-label">{{\'unidadMedida\' | translate}}</label>\r\n                <input class="form-control" id="txtUnidadMedida" formControlName="txtUnidadMedida" type="text">\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtUnidadMedida\').valid && editarItemFormGroup.get(\'txtUnidadMedida\').touched">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtUnidadMedida\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtUnidadMedida} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtUnidadMedida\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblValorUnitario" class="control-label">{{\'valorUnitario\' | translate}}</label>\r\n                <input class="form-control" id="txtValorUnitario" formControlName="txtValorUnitario" type="text" precioDirectiva>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtValorUnitario\').valid && editarItemFormGroup.get(\'txtValorUnitario\').touched">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorUnitario\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtValorUnitario} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorUnitario\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblIgv" class="control-label">{{\'igv\' | translate}}</label>\r\n                <input class="form-control" id="txtIgv" formControlName="txtIgv" type="text" precioDirectiva>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtIgv\').valid && editarItemFormGroup.get(\'txtIgv\').touched">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIgv\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtIgv} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIgv\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblIsc" class="control-label">{{\'isc\' | translate}}</label>\r\n                <input class="form-control" id="txtIsc" formControlName="txtIsc" type="text" precioDirectiva>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtIsc\').valid && editarItemFormGroup.get(\'txtIsc\').touched">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIsc\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtIsc} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIsc\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblDescuento" class="control-label">{{\'descuento\' | translate}}</label>\r\n                <input class="form-control" id="txtDescuento" formControlName="txtDescuento" type="text" precioDirectiva>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtDescuento\').valid && editarItemFormGroup.get(\'txtDescuento\').touched">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescuento\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtDescuento} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescuento\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblValorVenta" class="control-label">{{\'valorVenta\' | translate}}</label>\r\n                <input class="form-control" id="txtValorVenta" formControlName="txtValorVenta" type="text" precioDirectiva>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtValorVenta\').valid && editarItemFormGroup.get(\'txtValorVenta\').touched">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorVenta\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtValorVenta} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorVenta\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer text-center">\r\n          <button type="submit" class="btn btn-default" data-dismiss="modal" [disabled]="!editarItemFormGroup.valid" (click)="guardarItem()">{{\'guardar\' | translate}}</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/@angular/forms/@angular/forms.es5.js"),i=e("./src/app/facturacion-electronica/general/utils/estilos.services.ts"),n=e("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),s=e("./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts");e.d(o,"a",function(){return d});var c=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},l=this&&this.__metadata||function(t,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)},d=function(){function t(t,o,e){this._estilosService=t,this._tiposService=o,this._notaCreditoService=e,this.iniciarTamanios()}return t.prototype.iniciarTamanios=function(){this.tamanioTxtCantidad=16,this.tamanioTxtCodigo=30,this.tamanioTxtDescripcion=250,this.tamanioTxtUnidadMedida=3,this.tamanioTxtValorUnitario=15,this.tamanioTxtIgv=15,this.tamanioTxtIsc=15,this.tamanioTxtDescuento=15,this.tamanioTxtValorVenta=15},t.prototype.iniciarFormGroup=function(){this.editarItemFormGroup=new a.FormGroup({txtCantidad:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtCantidad)]),txtCodigo:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtCodigo)]),txtDescripcion:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtDescripcion)]),txtUnidadMedida:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtUnidadMedida)]),txtValorUnitario:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtValorUnitario)]),txtIgv:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtIgv)]),txtIsc:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtIsc)]),txtDescuento:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtDescuento)]),txtValorVenta:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtValorVenta)])})},t.prototype.ngOnInit=function(){var t=this;this.iniciarFormGroup(),this.detalleLista=this._notaCreditoService.obtenerDetalleOriginal(),this.tipoNotaCreditoSubscription=this._notaCreditoService.tipoNotaCredito.subscribe(function(o){t.tipoNotaCredito=o})},t.prototype.ngOnDestroy=function(){this.tipoNotaCreditoSubscription.unsubscribe()},t.prototype.recalcularDetalleEbiz=function(t,o,e,r,a,i,n){var s=this;this.editarItemFormGroup.controls[t].valueChanges.subscribe(function(t){if(t&&s.editarItemFormGroup.valid){console.log("cambiando-----------"),console.log(t),console.log("sin cambiar"),console.log(s.detalleEbizSinModificar);var c=Number(s.editarItemFormGroup.controls[o].value),l=Number(s.editarItemFormGroup.controls[e].value),d=Number(s.editarItemFormGroup.controls[a].value),p=c*l+d,u=.18*p,m=Number(s.editarItemFormGroup.controls[i].value),v=p+u-m;s.editarItemFormGroup.controls[r].setValue(Number(u).toFixed(2)),s.editarItemFormGroup.controls[n].setValue(Number(v).toFixed(2))}})},t.prototype.abrirModal=function(){$("#"+this.idModal).modal("show")},t.prototype.habilitarFormsControl=function(t,o){for(var e=0,r=o;e<r.length;e++){var a=r[e];this.editarItemFormGroup.controls[a].disable(),$("#"+a).parent().children("label").children("span").remove()}for(var i=0,n=t;i<n.length;i++){var s=n[i];this.editarItemFormGroup.controls[s].enable(),$("#"+s).parent().children("label").children("span").remove(),$("#"+s).parent().children("label").append("<span class='star'>*</span>")}},t.prototype.guardarItem=function(){console.log("guardar----------"),this.detalleEbiz.cantidad=this.editarItemFormGroup.controls.txtCantidad.value,this.detalleEbiz.codigoItem=this.editarItemFormGroup.controls.txtCodigo.value,this.detalleEbiz.descripcionItem=this.editarItemFormGroup.controls.txtDescripcion.value,this.detalleEbiz.detalle.unidadMedida=this.editarItemFormGroup.controls.txtUnidadMedida.value,this.detalleEbiz.precioUnitario=this.editarItemFormGroup.controls.txtValorUnitario.value,this.detalleEbiz.detalle.subtotalIgv=this.editarItemFormGroup.controls.txtIgv.value,this.detalleEbiz.detalle.subtotalIsc=this.editarItemFormGroup.controls.txtIsc.value,this.detalleEbiz.detalle.descuento=this.editarItemFormGroup.controls.txtDescuento.value,this.detalleEbiz.precioTotal=this.editarItemFormGroup.controls.txtValorVenta.value,this.verificarSiCambioItem()},t.prototype.verificarSiCambioItem=function(){Number(this.detalleEbiz.cantidad)!==Number(this.detalleEbizSinModificar.cantidad)||Number(this.detalleEbiz.precioUnitario)!==Number(this.detalleEbizSinModificar.precioUnitario)||this.detalleEbiz.descripcionItem!==this.detalleEbizSinModificar.descripcionItem?this.detalleEbiz.cambioDetalle=!0:this.detalleEbiz.cambioDetalle=!1},t.prototype.llenarDatosItem=function(t){var o=this;this.detalleEbiz=t,this.detalleEbizSinModificar=this.detalleLista.find(function(t){return t.posicion===o.detalleEbiz.posicion}),this.verificarTipoNotaCredito(),this.editarItemFormGroup.controls.txtCantidad.setValue(this.detalleEbiz.cantidad),this.editarItemFormGroup.controls.txtCodigo.setValue(this.detalleEbiz.codigoItem),this.editarItemFormGroup.controls.txtDescripcion.setValue(this.detalleEbiz.descripcionItem),this.editarItemFormGroup.controls.txtUnidadMedida.setValue(this.detalleEbiz.detalle.unidadMedida),this.editarItemFormGroup.controls.txtValorUnitario.setValue(this.detalleEbiz.precioUnitario),this.editarItemFormGroup.controls.txtIgv.setValue(this.detalleEbiz.detalle.subtotalIgv),this.editarItemFormGroup.controls.txtIsc.setValue(this.detalleEbiz.detalle.subtotalIsc),this.editarItemFormGroup.controls.txtDescuento.setValue(this.detalleEbiz.detalle.descuento),this.editarItemFormGroup.controls.txtValorVenta.setValue(this.detalleEbiz.precioTotal),this._estilosService.eliminarEstilosTodosTag("is-empty","input"),this._estilosService.eliminarEstilosTodosTag("is-empty","textarea")},t.prototype.verificarTipoNotaCredito=function(){switch(this.tipoNotaCredito){case this._tiposService.TIPO_NOTA_CREDITO_CORRECCION_DE_LA_DESCRIPCION:this.habilitarFormsControl(["txtDescripcion"],["txtCantidad","txtDescuento","txtValorUnitario","txtValorVenta"]);break;case this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_POR_ITEM:this.editarItemFormGroup.get("txtCantidad").setValidators([a.Validators.required,a.Validators.maxLength(this.tamanioTxtCantidad),a.Validators.max(Number(this.detalleEbizSinModificar.cantidad))]),this.habilitarFormsControl(["txtCantidad"],["txtDescripcion","txtDescuento","txtValorUnitario","txtValorVenta"]),this.recalcularDetalleEbiz("txtCantidad","txtCantidad","txtValorUnitario","txtIgv","txtIsc","txtDescuento","txtValorVenta");break;case this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_POR_ITEM:this.editarItemFormGroup.get("txtDescuento").setValidators([a.Validators.required,a.Validators.maxLength(this.tamanioTxtDescuento),a.Validators.max(Number(this.detalleEbizSinModificar.detalle.descuento))]),this.habilitarFormsControl(["txtDescuento"],["txtDescripcion","txtCantidad","txtValorUnitario","txtValorVenta"]),this.recalcularDetalleEbiz("txtDescuento","txtCantidad","txtValorUnitario","txtIgv","txtIsc","txtDescuento","txtValorVenta");break;case this._tiposService.TIPO_NOTA_CREDITO_BONIFICACION:this.editarItemFormGroup.get("txtCantidad").setValidators([a.Validators.required,a.Validators.maxLength(this.tamanioTxtCantidad),a.Validators.max(Number(this.detalleEbizSinModificar.cantidad))]),this.editarItemFormGroup.get("txtValorUnitario").setValidators([a.Validators.required,a.Validators.maxLength(this.tamanioTxtValorUnitario),a.Validators.max(Number(this.detalleEbizSinModificar.precioUnitario))]),this.habilitarFormsControl(["txtCantidad","txtValorUnitario"],["txtDescripcion","txtDescuento","txtValorVenta"]),this.recalcularDetalleEbiz("txtCantidad","txtCantidad","txtValorUnitario","txtIgv","txtIsc","txtDescuento","txtValorVenta"),this.recalcularDetalleEbiz("txtValorUnitario","txtCantidad","txtValorUnitario","txtIgv","txtIsc","txtDescuento","txtValorVenta");break;case this._tiposService.TIPO_NOTA_CREDITO_DISMINUCION_EN_EL_VALOR:this.editarItemFormGroup.get("txtValorUnitario").setValidators([a.Validators.required,a.Validators.maxLength(this.tamanioTxtValorUnitario),a.Validators.max(Number(this.detalleEbizSinModificar.precioUnitario))]),this.habilitarFormsControl(["txtValorUnitario"],["txtDescripcion","txtDescuento","txtCantidad","txtValorVenta"]),this.recalcularDetalleEbiz("txtValorUnitario","txtCantidad","txtValorUnitario","txtIgv","txtIsc","txtDescuento","txtValorVenta")}},t}();c([e.i(r.Input)(),l("design:type",String)],d.prototype,"idModal",void 0),c([e.i(r.ViewChild)("modalEditar"),l("design:type","function"==typeof(p=void 0!==r.ElementRef&&r.ElementRef)&&p||Object)],d.prototype,"modalEditar",void 0),d=c([e.i(r.Component)({selector:"app-tipo-nota-credito-editar-item",template:e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.html"),styles:[e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.css")]}),l("design:paramtypes",["function"==typeof(u=void 0!==i.a&&i.a)&&u||Object,"function"==typeof(m=void 0!==n.a&&n.a)&&m||Object,"function"==typeof(v=void 0!==s.a&&s.a)&&v||Object])],d);var p,u,m,v},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.module.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/@angular/common/@angular/common.es5.js"),i=e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.ts"),n=e("./node_modules/@ngx-translate/core/index.js"),s=e("./node_modules/@angular/forms/@angular/forms.es5.js"),c=e("./src/app/facturacion-electronica/general/directivas/directivas.module.ts");e.d(o,"a",function(){return d});var l=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},d=function(){function t(){}return t}();d=l([e.i(r.NgModule)({imports:[a.CommonModule,n.a,s.ReactiveFormsModule,c.a],declarations:[i.a],exports:[i.a],providers:[]})],d)},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.component.css":function(t,o,e){o=t.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),o.push([t.i,"",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.component.html":function(t,o){t.exports='<form [formGroup]="notaCreditoNormalFormGroup" autocomplete="off">\r\n  <div class="row">\r\n    <div class="col-md-3">\r\n      <div class="form-group label-floating">\r\n        <label id="lblDescuentos" class="control-label">\r\n          {{\'descuentos\' | translate}}\r\n        </label>\r\n        <input class="form-control" id="txtDescuentos" formControlName="txtDescuentos" type="text" precioDirectiva>\r\n        <div class="row" *ngIf="notaCreditoNormalFormGroup.errors">\r\n          <div class="col-md-12">\r\n            <span class="text-danger"\r\n                *ngIf="notaCreditoNormalFormGroup.errors[\'txtDescuentosMenorQue\']">\r\n                {{notaCreditoNormalFormGroup.errors[\'txtDescuentosMenorQue\'] | translate: {digito: notaCreditoNormalFormGroup.errors[\'valortxtDescuentosMenorQue\']} }}\r\n            </span>\r\n            <span class="text-danger"\r\n                  *ngIf="notaCreditoNormalFormGroup.errors[\'txtDescuentosMayorQue\']">\r\n                {{notaCreditoNormalFormGroup.errors[\'txtDescuentosMayorQue\'] | translate: {digito: notaCreditoNormalFormGroup.errors[\'valortxtDescuentosMayorQue\']} }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="col-md-3">\r\n      <div class="form-group label-floating">\r\n        <label id="lblIsc" class="control-label">{{\'isc\' | translate}}</label>\r\n        <input class="form-control" id="txtIsc" formControlName="txtIsc" type="text" precioDirectiva>\r\n        <div class="row" *ngIf="notaCreditoNormalFormGroup.errors">\r\n          <div class="col-md-12">\r\n            <span class="text-danger"\r\n                  *ngIf="notaCreditoNormalFormGroup.errors[\'txtIscMenorQue\']">\r\n              {{notaCreditoNormalFormGroup.errors[\'txtIscMenorQue\'] | translate: {digito: notaCreditoNormalFormGroup.errors[\'valortxtIscMenorQue\']} }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="col-md-3">\r\n      <div class="form-group label-floating">\r\n        <label id="lblIgv" class="control-label">{{\'igv\' | translate}}</label>\r\n        <input class="form-control" id="txtIgv" formControlName="txtIgv" type="text" precioDirectiva>\r\n      </div>\r\n    </div>\r\n    <div class="col-md-3">\r\n      <div class="form-group label-floating">\r\n        <label id="lblImporteTotal" class="control-label">\r\n          {{\'importeTotal\' | translate}}\r\n        </label>\r\n        <input class="form-control" id="txtImporteTotal" formControlName="txtImporteTotal" type="text" precioDirectiva>\r\n        <div class="row" *ngIf="notaCreditoNormalFormGroup.errors">\r\n          <div class="col-md-12">\r\n            <span class="text-danger"\r\n                  *ngIf="notaCreditoNormalFormGroup.errors[\'txtImporteTotalMenorQue\']">\r\n              {{notaCreditoNormalFormGroup.errors[\'txtImporteTotalMenorQue\'] | translate: {digito: notaCreditoNormalFormGroup.errors[\'valortxtImporteTotalMenorQue\']} }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>\r\n'},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.component.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/@angular/forms/@angular/forms.es5.js"),i=e("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),n=e("./src/app/facturacion-electronica/general/utils/estilos.services.ts"),s=e("./src/app/facturacion-electronica/general/services/utils/validadorPersonalizado.ts"),c=e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/leyendaComprobante.ts"),l=e("./node_modules/rxjs/BehaviorSubject.js"),d=(e.n(l),e("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/detalleNotaCredito.ts")),p=e("./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts");e.d(o,"a",function(){return v});var u=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},m=this&&this.__metadata||function(t,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)},v=function(){function t(t,o,e){this._tiposService=t,this._estilosServices=o,this._notaCreditoService=e}return t.prototype.ngOnInit=function(){var t=this;this.leyendaComprobante=new l.BehaviorSubject(new c.a),this.leyendaCambiada=new c.a,this.estaModificandoDetalle=!1,this.iniciarFormGroup(),this.verificarTipoNotaCredito(),this.tipoNotaCreditoSubscription=this._notaCreditoService.tipoNotaCredito.subscribe(function(o){t.tipoNotaCredito=o,t.verificarTipoNotaCredito(),t.reCargarDatos()}),this.comprobanteReferenciaSubscription=this._notaCreditoService.comprobanteReferencia.subscribe(function(o){t.comprobanteReferencia=o,null!==t.comprobanteReferencia&&t.cargarDatosLeyenda(t.comprobanteReferencia.dePagomontopagado,t.comprobanteReferencia.deTotalcomprobantepago,t.comprobanteReferencia.deImportereferencial,t.comprobanteReferencia.deSubtotalcomprobantepago,t.comprobanteReferencia.deDescuento,t.comprobanteReferencia.deImpuesto1,t.comprobanteReferencia.deImpuesto2,t.comprobanteReferencia.deImpuesto3,!1)}),this.pasoAVistaPreviaSubscription=this._notaCreditoService.pasoAVistaPrevia.subscribe(function(o){console.log(o),o&&(t._notaCreditoService.setCabeceraNormal(t.leyendaCambiada),t._notaCreditoService.setDetalleNormal(t.obtenerDetalle()))})},t.prototype.ngOnChanges=function(){var t=this;this.notaCreditoNormalFormGroup&&(this.notaCreditoNormalFormGroup.controls.txtDescuentos.valueChanges.subscribe(function(o){t.reCalcularImporteTotal()}),this.notaCreditoNormalFormGroup.controls.txtIsc.valueChanges.subscribe(function(o){t.reCalcularImporteTotal()}))},t.prototype.ngOnDestroy=function(){this.tipoNotaCreditoSubscription.unsubscribe(),this.comprobanteReferenciaSubscription.unsubscribe()},t.prototype.cargarDatosEnForm=function(t,o,e,r){var a=new c.a;a.total=Number(t).toFixed(2),a.descuentos=Number(o).toFixed(2),a.isc=Number(e).toFixed(2),a.igv=Number(r).toFixed(2),this.notaCreditoNormalFormGroup.controls.txtImporteTotal.setValue(a.total),this.notaCreditoNormalFormGroup.controls.txtDescuentos.setValue(a.descuentos),this.notaCreditoNormalFormGroup.controls.txtIsc.setValue(a.isc),this.notaCreditoNormalFormGroup.controls.txtIgv.setValue(a.igv),this._estilosServices.eliminarEstiloInput("txtImporteTotal","is-empty"),this._estilosServices.eliminarEstiloInput("txtDescuentos","is-empty"),this._estilosServices.eliminarEstiloInput("txtIsc","is-empty"),this._estilosServices.eliminarEstiloInput("txtIgv","is-empty"),this.reCalcularImporteTotal()},t.prototype.cargarDatosLeyenda=function(t,o,e,r,a,i,n,s,l){var d=new c.a;d.montoPagado=Number(t).toFixed(2),d.total=Number(o).toFixed(2),d.importeReferencial=Number(e).toFixed(2),d.descuentos=Number(a).toFixed(2),d.isc=Number(i).toFixed(2),d.igv=Number(n).toFixed(2),d.subTotal=Number(r).toFixed(2),d.otrosTributos=Number(s).toFixed(2),this.leyendaComprobante.next(d),l?this.leyendaCambiada=d:this.cargarDatosEnForm(o,a,i,n)},t.prototype.obtenerDetalle=function(){if(this.estaModificandoDetalle){var t=new d.a;return t.precioUnitario=Number(this.notaCreditoNormalFormGroup.controls.txtDescuentos.value).toFixed(2),t.detalle.subtotalIsc=Number(this.notaCreditoNormalFormGroup.controls.txtIsc.value).toFixed(2),t.detalle.subtotalIgv=Number(this.notaCreditoNormalFormGroup.controls.txtIgv.value).toFixed(2),t.precioTotal=Number(this.notaCreditoNormalFormGroup.controls.txtImporteTotal.value).toFixed(2),t}return null},t.prototype.reCargarDatos=function(){var t=this;this.estaModificandoDetalle?(this.limpiar(),this.leyendaCambiada=new c.a):this.leyendaComprobante.subscribe(function(o){t.notaCreditoNormalFormGroup.controls.txtDescuentos.setValue(o.descuentos),t.notaCreditoNormalFormGroup.controls.txtImporteTotal.setValue(o.montoPagado),t.notaCreditoNormalFormGroup.controls.txtIsc.setValue(o.isc),t.notaCreditoNormalFormGroup.controls.txtIgv.setValue(o.igv),t.leyendaCambiada=o})},t.prototype.reCalcularImporteTotal=function(){var t=Number(this.notaCreditoNormalFormGroup.controls.txtDescuentos.value),o=Number(this.notaCreditoNormalFormGroup.controls.txtIsc.value),e=t+o,r=.18*e;if(this.notaCreditoNormalFormGroup.controls.txtIgv.setValue(Number(r).toFixed(2)),e+=r,this.notaCreditoNormalFormGroup.controls.txtImporteTotal.setValue(Number(e).toFixed(2)),this.estaModificandoDetalle){var a=new c.a;a.total=this.notaCreditoNormalFormGroup.controls.txtImporteTotal.value,a.isc=this.notaCreditoNormalFormGroup.controls.txtIsc.value,a.igv=this.notaCreditoNormalFormGroup.controls.txtIgv.value,a.montoPagado=a.total,a.subTotal=Number(Number(a.total)-Number(a.isc)-Number(a.igv)).toFixed(2),this.leyendaCambiada=a}},t.prototype.limpiar=function(){this.notaCreditoNormalFormGroup.controls.txtDescuentos.setValue("0.00"),this.notaCreditoNormalFormGroup.controls.txtIsc.setValue("0.00"),this.notaCreditoNormalFormGroup.controls.txtIgv.setValue("0.00"),this.notaCreditoNormalFormGroup.controls.txtImporteTotal.setValue("0.00")},t.prototype.habilitarFormsControl=function(t,o){for(var e=0,r=o;e<r.length;e++){var a=r[e];this.notaCreditoNormalFormGroup.controls[a].disable(),$("#"+a).parent().children("label").children("span").remove()}for(var i=0,n=t;i<n.length;i++){var s=n[i];this.notaCreditoNormalFormGroup.controls[s].enable(),$("#"+s).parent().children("label").children("span").remove(),$("#"+s).parent().children("label").append("<span class='star'>*</span>")}},t.prototype.iniciarFormGroup=function(){this.notaCreditoNormalFormGroup=new a.FormGroup({txtImporteTotal:new a.FormControl({value:"0.00",disabled:!0},[a.Validators.required]),txtIsc:new a.FormControl({value:"0.00",disabled:!0},[a.Validators.required]),txtIgv:new a.FormControl({value:"0.00",disabled:!0},[a.Validators.required]),txtDescuentos:new a.FormControl({value:"0.00",disabled:!0},[a.Validators.required])},a.Validators.compose([s.a.formGroupAsyncMenorQue("txtDescuentos",this.leyendaComprobante,"subTotal","descuentosDeberiaSerMenorAImporteTotal"),s.a.formGroupAsyncMenorQue("txtIsc",this.leyendaComprobante,"isc","deberiaSerMenorA"),s.a.formGroupAsyncMenorQue("txtImporteTotal",this.leyendaComprobante,"total","deberiaSerMenorA")])),this.padreFormGroup.addControl(this.nombreControl,this.notaCreditoNormalFormGroup)},t.prototype.verificarTipoNotaCredito=function(){var t=this;switch(this.tipoNotaCredito){case this._tiposService.TIPO_NOTA_CREDITO_ANULACION_DE_OPERACION:case this._tiposService.TIPO_NOTA_CREDITO_ANULACION_POR_ERROR_RUC:this.estaModificandoDetalle=!1,this.habilitarFormsControl([],["txtDescuentos","txtImporteTotal","txtIsc","txtIgv"]);break;case this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_GLOBAL:this.leyendaComprobante.subscribe(function(o){t.estaModificandoDetalle=!0;var e=["txtDescuentos"],r=["txtImporteTotal","txtIsc","txtIgv"];Number(o.isc)>0&&(e=["txtDescuentos","txtIsc"],r=["txtImporteTotal","txtIgv"]),t.habilitarFormsControl(e,r)});break;case this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_TOTAL:this.estaModificandoDetalle=!1,this.habilitarFormsControl([],["txtDescuentos","txtImporteTotal","txtIsc","txtIgv"])}},t}();u([e.i(r.Input)("padreFormGroup"),m("design:type","function"==typeof(b=void 0!==a.FormGroup&&a.FormGroup)&&b||Object)],v.prototype,"padreFormGroup",void 0),u([e.i(r.Input)("nombreControl"),m("design:type",String)],v.prototype,"nombreControl",void 0),v=u([e.i(r.Component)({selector:"app-tipo-nota-credito-normal",template:e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.component.html"),styles:[e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.component.css")]}),m("design:paramtypes",["function"==typeof(h=void 0!==i.a&&i.a)&&h||Object,"function"==typeof(f=void 0!==n.a&&n.a)&&f||Object,"function"==typeof(C=void 0!==p.a&&p.a)&&C||Object])],v);var b,h,f,C},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.module.ts":function(t,o,e){"use strict";var r=e("./node_modules/@angular/core/@angular/core.es5.js"),a=e("./node_modules/@angular/common/@angular/common.es5.js"),i=e("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.component.ts"),n=e("./node_modules/@ngx-translate/core/index.js"),s=e("./node_modules/@angular/forms/@angular/forms.es5.js"),c=e("./src/app/facturacion-electronica/general/directivas/directivas.module.ts");e.d(o,"a",function(){return d});var l=this&&this.__decorate||function(t,o,e,r){var a,i=arguments.length,n=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(o,e,n):a(o,e))||n);return i>3&&n&&Object.defineProperty(o,e,n),n},d=function(){function t(){}return t}();d=l([e.i(r.NgModule)({imports:[a.CommonModule,n.a,s.ReactiveFormsModule,c.a],declarations:[i.a],exports:[i.a],providers:[]})],d)},"./src/app/facturacion-electronica/comprobantes/nota-credito/utils/TiposVistaNotaCredito.ts":function(t,o,e){"use strict";e.d(o,"a",function(){return r});var r;!function(t){t[t.NORMAL=0]="NORMAL",t[t.TABLA=1]="TABLA"}(r||(r={}))},"./src/app/facturacion-electronica/general/models/comprobantes/documentoConceptoGeneral.ts":function(t,o,e){"use strict";e.d(o,"a",function(){return r});var r=function(){function t(){}return t}()},"./src/app/facturacion-electronica/general/models/comprobantes/documentoParametroGeneral.ts":function(t,o,e){"use strict";e.d(o,"a",function(){return r});var r=function(){function t(){}return t}()},"./src/app/facturacion-electronica/general/models/comprobantes/documentoReferenciaGeneral.ts":function(t,o,e){"use strict";e.d(o,"a",function(){return r});var r=function(){function t(){}return t}()},"./src/app/facturacion-electronica/general/models/organizacion/entidadGeneral.ts":function(t,o,e){"use strict";e.d(o,"a",function(){return r});var r=function(){function t(){}return t}()}});