webpackJsonp([2],{"./src/app/facturacion-electronica/percepcion-retencion/item-crear-editar-percepcion/item-crear-editar-percepcion.component.html":function(e,t){e.exports='<div class="row col-md-12">\r\n  <div class="card">\r\n    <div class="card-header card-header-text" data-background-color="blue">\r\n      <h4 class="card-title">{{titulo | translate}}</h4>\r\n    </div>\r\n    <div class="card-content">\r\n      <form [formGroup]="itemFormGroup" (ngSubmit)="agregaritem()">\r\n        <div class="row">\r\n          <div class="col-md-4">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'tipoDocumento\' | translate}} <span class="star">*</span></label>\r\n              <select name="cmbtipodocrp" formControlName="cmbtipodocrp" class="form-control">\r\n                <option *ngFor="let tiposComprobante of tiposComprobantes | async" [value]="tiposComprobante.codigo"> {{tiposComprobante.descripcionLarga}}</option>\r\n              </select>\r\n              <span *ngIf="!itemFormGroup.get(\'cmbtipodocrp\').valid && itemFormGroup.get(\'cmbtipodocrp\').touched">\r\n                <span *ngIf="itemFormGroup.controls[\'cmbtipodocrp\'].hasError(\'required\')" class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-4">\r\n            <div class="form-group label-floating">\r\n              <label id="lblCodigo" class="control-label">{{\'numeroComprobante\' | translate}}<span class="star">*</span></label>\r\n              <input  ng2-auto-complete\r\n                      auto-complete="off"\r\n                      type="text"\r\n                      id="cmbTipoComprobante"\r\n                      formControlName="cmbTipoComprobante"\r\n                      [source]="listarProductosDeAutcompletado.bind(this)"\r\n                      [list-formatter]="formatoDeListaAutocompletado"\r\n                      [value-formatter] = "formatoDeValorAutocompletado"\r\n                      [no-match-found-text] = "\'noSeEncontraronResultados\' | translate"\r\n                      open-on-focus = true\r\n                      close-on-focus = true\r\n                      auto-select-first-item = false\r\n                      min-chars = 1\r\n                      [loading-text] = "\'cargando\' | translate"\r\n                      (valueChanged)="cambioLaSeleccionDelComprobante($event)"\r\n                      (change)="cambioLaBusquedaDeAutocompleteDeComprobante()"\r\n                      class="form-control">\r\n            </div>\r\n          </div>\r\n          <div class="col-md-4">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'fechaEmision\' | translate}}<span class="star">*</span> </label>\r\n              <input id="datefechaemision" formControlName="datefechaemision" autocomplete="off" type="text" class="form-control" datepicker/>\r\n              <span *ngIf="!itemFormGroup.get(\'datefechaemision\').valid && itemFormGroup.get(\'datefechaemision\').touched">\r\n                <span *ngIf="itemFormGroup.controls[\'datefechaemision\'].hasError(\'required\')" class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="row">\r\n          <div class="col-md-4">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'tipoMoneda\' | translate}} <span class="star">*</span></label>\r\n              <select name="cmbMoneda" formControlName="cmbMoneda" autocomplete="off" class="form-control" (change)="seleccionarMoneda()">\r\n                <option *ngFor="let moneda of todosTiposMonedas | async" [value]="moneda.codigo"> {{moneda.descripcionCorta}}</option>\r\n              </select>\r\n              <span *ngIf="!itemFormGroup.get(\'cmbMoneda\').valid && itemFormGroup.get(\'cmbMoneda\').touched">\r\n                <span *ngIf="itemFormGroup.controls[\'cmbMoneda\'].hasError(\'required\')" class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-4">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'importeTotal\' | translate}} <span class="star">*</span></label>\r\n              <input precioDirectiva id="txtmonto" formControlName="txtmonto" autocomplete="off" class="form-control" type="text" (keyup)="tipoCambio()">\r\n              <span *ngIf="!itemFormGroup.get(\'txtmonto\').valid && itemFormGroup.get(\'txtmonto\').touched">\r\n                <span *ngIf="itemFormGroup.controls[\'txtmonto\'].hasError(\'required\')"  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtmonto\'].hasError(\'pattern\')"   class="text-danger">{{\'formatoInvalido\' | translate}}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtmonto\'].hasError(\'minlength\')" class="text-danger">{{\'minimoDigitos\' | translate:{digito:\'4\'} }}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtmonto\'].hasError(\'maxlength\')" class="text-danger">{{\'maximoDigitos\' | translate:{digito:\'16\'} }}</span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-4">\r\n            <div class="form-group label-floating">\r\n              <label  class="control-label">{{\'tipoCambio\' | translate}}</label>\r\n              <input precioDirectiva id="txtTipoCambio" formControlName="txtTipoCambio" autocomplete="off" class="form-control" type="text" (keyup)="tipoCambio()" >\r\n              <span *ngIf="!itemFormGroup.get(\'txtTipoCambio\').valid && itemFormGroup.get(\'txtTipoCambio\').touched">\r\n                <span *ngIf="itemFormGroup.controls[\'txtTipoCambio\'].hasError(\'required\')"  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtTipoCambio\'].hasError(\'pattern\')"   class="text-danger">{{\'formatoInvalido\' | translate}}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtTipoCambio\'].hasError(\'minlength\')" class="text-danger">{{\'minimoDigitos\' | translate:{digito:\'4\'} }}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtTipoCambio\'].hasError(\'maxlength\')" class="text-danger">{{\'maximoDigitos\' | translate:{digito:\'16\'} }}</span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n          <div class="col-md-4">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'importeSoles\' | translate}}</label>\r\n              <input precioDirectiva id="txtImporteSoles" formControlName="txtImporteSoles" autocomplete="off" class="form-control" disabled type="text">\r\n              <span *ngIf="!itemFormGroup.get(\'txtImporteSoles\').valid && itemFormGroup.get(\'txtImporteSoles\').touched">\r\n                <span *ngIf="itemFormGroup.controls[\'txtImporteSoles\'].hasError(\'required\')"  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtImporteSoles\'].hasError(\'pattern\')"   class="text-danger">Ej. 10.00</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtImporteSoles\'].hasError(\'minlength\')" class="text-danger">{{\'minimoDigitos\' | translate:{digito:\'4\'} }}</span>\r\n                <span *ngIf="itemFormGroup.controls[\'txtImporteSoles\'].hasError(\'maxlength\')" class="text-danger">{{\'maximoDigitos\' | translate:{digito:\'16\'} }}</span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-4">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'porcentajeRetencion\' | translate}} <span class="star">*</span> </label>\r\n              <input precioDirectiva id="txtretencionxciento" formControlName="txtretencionxciento" autocomplete="off" class="form-control" type="text">\r\n              <span *ngIf="!itemFormGroup.get(\'txtretencionxciento\').valid && itemFormGroup.get(\'txtretencionxciento\').touched">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtretencionxciento\'].hasError(\'required\')"  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                  <span *ngIf="itemFormGroup.controls[\'txtretencionxciento\'].hasError(\'pattern\')"   class="text-danger">{{\'formatoInvalido\' | translate}}</span>\r\n                  <span *ngIf="itemFormGroup.controls[\'txtretencionxciento\'].hasError(\'minlength\')" class="text-danger">{{\'minimoDigitos\' | translate:{digito:\'4\'} }}</span>\r\n                  <span *ngIf="itemFormGroup.controls[\'txtretencionxciento\'].hasError(\'maxlength\')" class="text-danger">{{\'maximoDigitos\' | translate:{digito:\'16\'} }}</span>\r\n                </span>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-4">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'retencion\' | translate}} <span class="star">*</span></label>\r\n              <input precioDirectiva id="txtretencion" formControlName="txtretencion" autocomplete="off" class="form-control" type="text">\r\n              <span *ngIf="!itemFormGroup.get(\'txtretencion\').valid && itemFormGroup.get(\'txtretencion\').touched">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtretencion\'].hasError(\'required\')"  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                  <span *ngIf="itemFormGroup.controls[\'txtretencion\'].hasError(\'pattern\')"   class="text-danger">Ej. 10.00</span>\r\n                  <span *ngIf="itemFormGroup.controls[\'txtretencion\'].hasError(\'minlength\')" class="text-danger">{{\'minimoDigitos\' | translate:{digito:\'4\'} }}</span>\r\n                  <span *ngIf="itemFormGroup.controls[\'txtretencion\'].hasError(\'maxlength\')" class="text-danger">{{\'maximoDigitos\' | translate:{digito:\'16\'} }}</span>\r\n                </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n          <div class="col-md-12" align="right">\r\n            <button *ngIf="editable" id="btnGuardar" name="btnGuardar" type="button" class="btn btn-default" (click)="editaritem()"> {{buttonguardar}}\r\n            </button>\r\n            <button *ngIf="editableaceptar" id="btnAceptar" name="btnAceptar" type="submit" class="btn btn-default"\r\n                    [disabled]="!itemFormGroup.valid"> {{\'agregarItem\' | translate}}\r\n            </button>\r\n            <button type="button" id="btnCancelar" name="btnCancelar" class="btn btn-default" (click)="cancelaritem()"> {{\'regresar \' | translate}}</button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n'},"./src/app/facturacion-electronica/percepcion-retencion/item-crear-editar-percepcion/item-crear-editar-percepcion.component.ts":function(e,t,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./node_modules/@angular/forms/@angular/forms.es5.js"),n=o("./node_modules/@angular/router/@angular/router.es5.js"),c=o("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.service.ts"),a=o("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),s=o("./node_modules/rxjs/BehaviorSubject.js"),p=(o.n(s),o("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts")),l=o("./src/app/facturacion-electronica/general/models/documento/tablaMaestra.ts"),d=o("./node_modules/@angular/common/@angular/common/http.es5.js"),u=o("./src/app/facturacion-electronica/general/services/comprobantes/comprobantes.service.ts"),m=o("./node_modules/rxjs/Observable.js"),h=(o.n(m),o("./src/app/facturacion-electronica/percepcion-retencion/services/Percepcion/persistencia.percepcion.service.ts")),f=o("./src/app/facturacion-electronica/percepcion-retencion/models/Percepcion/percepcionebiz.ts");o.d(t,"a",function(){return g});var b=this&&this.__decorate||function(e,t,o,r){var i,n=arguments.length,c=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,o,c):i(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c},v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,t,o,r,i,n,c){this.route=e,this._comprobantesService=t,this.router=o,this.persistenciaService=r,this.persistenciaPercepcionService=i,this._tipos=n,this._tablaMaestraService=c,this.buttonguardar="Editar",this.monedas=[],this.fechaedicion=!0,this.tiposComprobantes=new s.BehaviorSubject([]),this.todosTiposMonedas=new s.BehaviorSubject([]),this.todosTiposComprobantes=new s.BehaviorSubject([]),this.escogioUnComprobante=new s.BehaviorSubject(!1),this.cargarServiciosArranque(),this.percepcionEbiz=new f.a}return e.prototype.deshabilitar=function(){this.itemFormGroup.disable(),$("#datefechaemision").prop("disabled",!0),this.fechaedicion=!1,console.log("FECHA DE EDICION"),console.log(this.fechaedicion)},e.prototype.deshabilitardate=function(){return this.fechaedicion=!1,this.fechaedicion},e.prototype.cargarServiciosArranque=function(){this.todosTiposComprobantes=this._tablaMaestraService.obtenerPorIdTabla(l.a),this.todosTiposMonedas=this._tablaMaestraService.obtenerPorIdTabla(l.b)},e.prototype.setTipoComprobante=function(){var e=[];e=[this._tipos.TIPO_DOCUMENTO_FACTURA,this._tipos.TIPO_DOCUMENTO_NOTA_CREDITO,this._tipos.TIPO_DOCUMENTO_NOTA_DEBITO],this.tiposComprobantes=this._tablaMaestraService.obtenerPorCodigoDeTablaMaestra(this.todosTiposComprobantes,e)},e.prototype.setTipoItem=function(){switch(this.tipoaccion){case 1:this.editable=!1,this.editableaceptar=!0;break;case 2:this.editable=!0,this.editableaceptar=!1,this.cargarProductoEditar()}},e.prototype.obtenerParametros=function(){var e=this;this.tipoAccion=this.route.snapshot.data.tipoAccion,this.tipoDocumento=this.route.snapshot.data.tipoDocumento;this.route.params.subscribe(function(t){e.idPosicion=+t.id});this.setTipoItem()},e.prototype.ngOnInit=function(){console.log("FECHA DE EDICION"),console.log(this.fechaedicion),this.obtenerParametros(),this.initForm(),this.titulo=this.route.snapshot.data.titulo,this.tipoaccion=this.route.snapshot.data.tipoaccion,this.setTipoItem()},e.prototype.seleccionarMoneda=function(){var e;switch(e=this.itemFormGroup.controls.cmbMoneda.value,console.log(e),e){case this._tipos.TIPO_MONEDA_SOL:this.itemFormGroup.controls.txtTipoCambio.disable(),this.itemFormGroup.controls.txtImporteSoles.disable(),this.itemFormGroup.controls.txtImporteSoles.setValue(""),this.itemFormGroup.controls.txtTipoCambio.setValue("");break;default:this.itemFormGroup.controls.txtTipoCambio.enable(),this.itemFormGroup.controls.txtImporteSoles.disable()}},e.prototype.tipoCambio=function(){var e=this.itemFormGroup.controls.cmbMoneda.value,t=this.itemFormGroup.get("txtmonto").value;console.log("importeTotal"),console.log(t);var o=this.itemFormGroup.get("txtTipoCambio").value;if(console.log("tipoCambio"),console.log(o),""!=t&&""!=o){var r=Number(t*o).toFixed(2);console.log("totalSoles"),console.log(r),this.itemFormGroup.controls.txtImporteSoles.setValue(r),setTimeout(function(){$("input").each(function(){$(this.parentElement).removeClass("is-empty")})},200)}else e==this._tipos.TIPO_MONEDA_SOL&&(this.itemFormGroup.controls.txtImporteSoles.setValue(Number(t).toFixed(2)),setTimeout(function(){$("input").each(function(){$(this.parentElement).removeClass("is-empty")})},200))},e.prototype.editaritem=function(){var e=this.persistenciaPercepcionService.getItemProducto(this.idPosicion);this.itemFormGroup.enable(),this.fechaedicion=!1,$("#datefechaemision").prop("disabled",!1),console.log("FECHA DE EDICION"),console.log(this.fechaedicion),this.itemFormGroup.controls.txtImporteSoles.disable(),"Editar"===this.buttonguardar?(this.buttonguardar=this.route.snapshot.data.button,"PEN"==e.monedaDestino&&this.itemFormGroup.controls.txtImporteSoles.setValue("")):this.validarMontoMinimoRetencion()||this.validarMontoMinimoRetencionsoles()?(this.editaritemproducto(),swal({type:"success",title:"Acción Exitosa",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Sí"}),this.router.navigateByUrl("percepcion-retencion/percepcion/crear")):swal({title:"Alerta",html:'<div class="text-center"> El Importe Total mínimo debe ser de 701.00 soles.</div>',type:"warning",confirmButtonText:"Sí",confirmButtonClass:"btn btn-warning"})},e.prototype.editaritemproducto=function(){this.fillProducto(),console.log("EDITANDO"),this.persistenciaPercepcionService.editarProducto(this.percepcionEbiz,this.idPosicion)},e.prototype.agregaritem=function(){this.validarMontoMinimoRetencion()||this.validarMontoMinimoRetencionsoles()?(swal({type:"success",title:"Acción Exitosa",buttonsStyling:!1,confirmButtonText:"SÍ",confirmButtonClass:"btn btn-success"}),this.grabar(),this.router.navigateByUrl("percepcion-retencion/percepcion/crear")):swal({title:"Alerta",html:'<div class="text-center"> El Importe Total mínimo debe ser de 700.00 soles.</div>',type:"warning",confirmButtonText:"Sí",confirmButtonClass:"btn btn-warning"})},e.prototype.validarMontoMinimoRetencion=function(){return Number(this.itemFormGroup.controls.txtmonto.value)>700},e.prototype.validarMontoMinimoRetencionsoles=function(){return Number(this.itemFormGroup.controls.txtImporteSoles.value)>700},e.prototype.cancelaritem=function(){this.router.navigateByUrl("percepcion-retencion/percepcion/crear")},e.prototype.initForm=function(){var e=new Date,t=e.getDate().toString()+"/"+(e.getMonth()+1).toString()+"/"+e.getFullYear().toString();console.log(t),this.itemFormGroup=new i.FormGroup({cmbtipodocrp:new i.FormControl("",[i.Validators.required]),cmbTipoComprobante:new i.FormControl(""),txtmonto:new i.FormControl("",[i.Validators.required,i.Validators.pattern("[0-9]+[.][0-9]{2}"),i.Validators.minLength(4),i.Validators.maxLength(15)]),txtretencion:new i.FormControl("",[i.Validators.required,i.Validators.pattern("[0-9]+[.][0-9]{2}"),i.Validators.minLength(4),i.Validators.maxLength(15)]),txtretencionxciento:new i.FormControl("",[i.Validators.required,i.Validators.pattern("[0-9]+[.][0-9]{2}"),i.Validators.minLength(4),i.Validators.maxLength(15)]),datefechaemision:new i.FormControl(t,[i.Validators.required]),cmbMoneda:new i.FormControl("",[i.Validators.required]),txtTipoCambio:new i.FormControl("",[i.Validators.required,i.Validators.pattern("[0-9]+[.][0-9]{2}"),i.Validators.minLength(4),i.Validators.maxLength(15)]),txtImporteSoles:new i.FormControl("",[i.Validators.required,i.Validators.pattern("[0-9]+[.][0-9]{2}"),i.Validators.minLength(4),i.Validators.maxLength(15)])}),this.setTipoComprobante()},e.prototype.cargarProductoEditar=function(){if(this.PercepcionEbizedit=this.persistenciaPercepcionService.getItemProducto(this.idPosicion),null!=this.PercepcionEbizedit){console.log("Cargar Productos"),console.log(this.PercepcionEbizedit),this.itemFormGroup.controls.cmbtipodocrp.setValue(this.PercepcionEbizedit.tipoDocumentoDestino),this.itemFormGroup.controls.cmbTipoComprobante.setValue(this.PercepcionEbizedit.vcPolizaFactura),this.itemFormGroup.controls.txtmonto.setValue(this.PercepcionEbizedit.totalImporteDestino),this.itemFormGroup.controls.txtretencion.setValue(this.PercepcionEbizedit.totalImporteAuxiliarDestino),this.itemFormGroup.controls.txtretencionxciento.setValue(this.PercepcionEbizedit.totalPorcentajeAuxiliarDestino);var e=this.PercepcionEbizedit.fechaEmisionDestino.split("-"),t=e[0],o=e[1],r=e[2];console.log(this.PercepcionEbizedit.fechaEmisionDestino),console.log(r+"/"+o+"/"+t);var i=o+"/"+r+"/"+t,n=new Date(i),c=n.getFullYear().toString(),a=(n.getMonth()+1).toString(),s=n.getDate().toString(),p=s+"/"+a+"/"+c;this.itemFormGroup.controls.datefechaemision.setValue(p),this.itemFormGroup.controls.cmbMoneda.setValue(this.PercepcionEbizedit.idMoneda),this.itemFormGroup.controls.txtImporteSoles.setValue(this.PercepcionEbizedit.totalMonedaDestino),this.itemFormGroup.controls.txtTipoCambio.setValue(this.PercepcionEbizedit.auxiliar1),console.log(this.itemFormGroup.value),setTimeout(function(){$("select").each(function(){$(this.parentElement).removeClass("is-empty")})},200),this.deshabilitar()}else this.router.navigateByUrl("percepcion-retencion/percepcion/crear")},e.prototype.limpiar=function(e){this.itemFormGroup.reset()},e.prototype.filtro=function(e){this.fillProducto()},e.prototype.fillProducto=function(){var e=this,t=this.itemFormGroup.get("datefechaemision").value.toString().split("/"),o=t[0],r=t[1],i=t[2],n=this.tiposComprobantes.getValue().findIndex(function(t){return t.codigo==e.itemFormGroup.get("cmbtipodocrp").value});this.percepcionEbiz.tipoDocumentoDestino=this.itemFormGroup.get("cmbtipodocrp").value,this.percepcionEbiz.tipoDocumentoDestinoDescripcion=-1==n?"":this.tiposComprobantes.getValue()[n].descripcionLarga,this.percepcionEbiz.tipoDocumentoOrigen="20",this.percepcionEbiz.tipoDocumentoOrigenDescripcion="RETENCION",this.percepcionEbiz.serieDocumentoDestino=this.itemFormGroup.get("cmbTipoComprobante").value,this.percepcionEbiz.fechaEmisionDestino=i+"-"+r+"-"+o,this.percepcionEbiz.totalImporteDestino=this.itemFormGroup.get("txtmonto").value,this.percepcionEbiz.totalImporteAuxiliarDestino=this.itemFormGroup.get("txtretencion").value,this.percepcionEbiz.totalPorcentajeAuxiliarDestino=this.itemFormGroup.get("txtretencionxciento").value,this.percepcionEbiz.idMoneda=this.itemFormGroup.get("cmbMoneda").value,this.percepcionEbiz.polizaFactura="-";var c=this.todosTiposMonedas.getValue().findIndex(function(t){return t.codigo==e.itemFormGroup.get("cmbMoneda").value});this.percepcionEbiz.monedaDestino=-1==n?"":this.todosTiposMonedas.getValue()[c].descripcionCorta,this.percepcionEbiz.auxiliar1=this.itemFormGroup.get("txtTipoCambio").value,"PEN"==this.percepcionEbiz.monedaDestino?this.percepcionEbiz.totalMonedaDestino=this.itemFormGroup.get("txtmonto").value:this.percepcionEbiz.totalMonedaDestino=this.itemFormGroup.get("txtImporteSoles").value},e.prototype.grabar=function(){this.fillProducto(),this.persistenciaPercepcionService.agregarProducto(this.percepcionEbiz)},e.prototype.listarProductosDeAutcompletado=function(e){if(!e)return m.Observable.of([]);var t=this.itemFormGroup.get("cmbtipodocrp").value;if(null!=t){var o=(new d.e).set("tipoComprobanteTabla",l.a.toString()).set("tipoComprobanteRegistro",t).set("fechaEmisionDel","").set("fechaEmisionAl","").set("ticketBaja","").set("nroPagina","0").set("regXPagina","10").set("ordenar","inIdcomprobantepago").set("tipoDocumento","").set("correlativoInicial","").set("correlativoFinal","").set("fechaBajaDel","").set("fechaBajaAl","").set("nroDocumento","").set("nroSerie","").set("estado","").set("ticket","").set("idEntidadEmisora",localStorage.getItem("id_entidad"));return this._comprobantesService.buscar(o)}},e.prototype.formatoDeListaAutocompletado=function(e){return e.vcSerie+" - "+e.vcCorrelativo},e.prototype.formatoDeValorAutocompletado=function(e){return e.vcSerie+" - "+e.vcCorrelativo},e.prototype.cambioLaSeleccionDelComprobante=function(e){console.log("-------entrodddd"),this.escogioUnComprobante.next(!0)},e.prototype.cambioLaBusquedaDeAutocompleteDeComprobante=function(){console.log("---------------comprobante"),"object"==typeof this.itemFormGroup.get("cmbTipoComprobante").value?this.escogioUnComprobante.next(!0):this.escogioUnComprobante.next(!1),console.log(this.escogioUnComprobante)},e}();g=b([o.i(r.Component)({selector:"app-item-crear-editar-percepcion",template:o("./src/app/facturacion-electronica/percepcion-retencion/item-crear-editar-percepcion/item-crear-editar-percepcion.component.html"),styles:[o("./src/app/facturacion-electronica/percepcion-retencion/item-crear-editar-percepcion/item-crear-editar-percepcion.css")]}),v("design:paramtypes",["function"==typeof(x=void 0!==n.c&&n.c)&&x||Object,"function"==typeof(C=void 0!==u.a&&u.a)&&C||Object,"function"==typeof(_=void 0!==n.b&&n.b)&&_||Object,"function"==typeof(y=void 0!==c.a&&c.a)&&y||Object,"function"==typeof(D=void 0!==h.a&&h.a)&&D||Object,"function"==typeof(P=void 0!==a.a&&a.a)&&P||Object,"function"==typeof(F=void 0!==p.a&&p.a)&&F||Object])],g);var x,C,_,y,D,P,F},"./src/app/facturacion-electronica/percepcion-retencion/item-crear-editar-percepcion/item-crear-editar-percepcion.css":function(e,t,o){t=e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"input.ng-invalid.ng-touched,mat-select.ng-invalid.ng-touched{border-bottom:1px solid red}mat-select{border-bottom:1px solid #aaa}.text-danger{font-size:11px;font-weight:700}",""]),e.exports=e.exports.toString()},"./src/app/facturacion-electronica/percepcion-retencion/item-crear-editar-percepcion/item-crear-editar-percepcion.module.ts":function(e,t,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./node_modules/@angular/common/@angular/common.es5.js"),n=o("./node_modules/@angular/forms/@angular/forms.es5.js"),c=o("./node_modules/@ngx-translate/core/index.js"),a=o("./src/app/facturacion-electronica/general/directivas/directivas.module.ts"),s=o("./node_modules/ng2-auto-complete/dist/index.js"),p=(o.n(s),o("./src/app/facturacion-electronica/general/services/servidores.ts")),l=o("./src/app/facturacion-electronica/percepcion-retencion/item-crear-editar-percepcion/item-crear-editar-percepcion.component.ts"),d=o("./src/app/facturacion-electronica/general/data-table/data-table.module.ts"),u=o("./src/app/facturacion-electronica/general/pdf-viewer/pdf-viewer.module.ts"),m=o("./node_modules/@angular/http/@angular/http.es5.js"),h=o("./src/app/directives/datepicker.module.ts"),f=o("./node_modules/ng2-completer/index.js"),b=o("./src/app/facturacion-electronica/general/consulta/consulta.module.ts"),v=o("./node_modules/@angular/common/@angular/common/http.es5.js"),g=o("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia-post.ts"),x=o("./src/app/facturacion-electronica/general/services/comprobantes/comprobantes.service.ts"),C=o("./src/app/facturacion-electronica/percepcion-retencion/services/retencionpersiscabecera.service.ts"),_=o("./src/app/facturacion-electronica/general/services/documento/nuevoDocumento.ts"),y=o("./src/app/facturacion-electronica/general/services/comprobantes/retencion.service.ts"),D=o("./src/app/facturacion-electronica/general/services/comprobantes/retenciones.service.ts"),P=o("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.entidad.service.ts"),F=o("./src/app/facturacion-electronica/general/services/archivos/archivo.service.ts"),S=o("./src/app/facturacion-electronica/percepcion-retencion/services/percepcion-retencion-referencias.service.ts"),E=o("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.service.ts"),I=o("./src/app/facturacion-electronica/percepcion-retencion/services/archivoMasiva.service.ts"),j=o("./src/app/facturacion-electronica/general/utils/estadoArchivo.service.ts");o.d(t,"a",function(){return G});var O=this&&this.__decorate||function(e,t,o,r){var i,n=arguments.length,c=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,o,c):i(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c},G=function(){function e(){}return e}();G=O([o.i(r.NgModule)({imports:[i.CommonModule,n.ReactiveFormsModule,a.a,n.FormsModule,m.HttpModule,v.a,h.a,u.a,d.a,b.a,c.a,a.a,f.a,s.Ng2AutoCompleteModule],declarations:[l.a],exports:[l.a],providers:[p.a,E.a,C.a,j.a,I.a,_.a,P.a,D.a,D.a,F.a,g.a,x.a,y.a,S.a]})],G)},"./src/app/facturacion-electronica/percepcion-retencion/models/Percepcion/pdetalle.ts":function(e,t,o){"use strict";o.d(t,"a",function(){return r});var r=function(){function e(){}return e}()},"./src/app/facturacion-electronica/percepcion-retencion/models/Percepcion/percepcion-cabecera.ts":function(e,t,o){"use strict";o.d(t,"a",function(){return r});var r=function(){function e(){this.serie="",this.idserie="",this.rucProveedor=0,this.rucComprador=0,this.estadoComprobante="PENDIENTE",this.idUsuarioCreacion="GMENDEZ",this.idUsuarioModificacion="GMENDEZ",this.razonSocialProveedor="",this.direccion="",this.razonSocialComprador="",this.moneda="",this.observacionComprobante="",this.total=0,this.totalimporte=0,this.tipocomprobanteproveedor="",this.idtipocomprobanteproveedor="",this.idTablaTipoComprobante="",this.idTipoComprobante=""}return e}()},"./src/app/facturacion-electronica/percepcion-retencion/models/Percepcion/percepcionebiz.ts":function(e,t,o){"use strict";o.d(t,"a",function(){return r});var r=function(){function e(){this.idDocumentoOrigen="",this.idDocumentoDestino="",this.tipoDocumentoOrigen="",this.tipoDocumentoDestino="",this.serieDocumentoDestino="",this.correlativoDocumentoDestino="",this.totalImporteDestino="",this.totalImporteAuxiliarDestino="",this.totalPorcentajeAuxiliarDestino=0,this.deTotMoneDes="",this.tipoDocumentoOrigenDescripcion="RETENCION",this.tipoDocumentoDestinoDescripcion="",this.monedaDestino="",this.totalMonedaDestino=0,this.auxiliar1=0,this.polizaFactura="",this.anticipo=0,this.fechaEmisionDestino="",this.observaciones="",this.vcPolizaFactura=""}return e}()},"./src/app/facturacion-electronica/percepcion-retencion/models/Percepcion/post_percepcion.ts":function(e,t,o){"use strict";o.d(t,"a",function(){return r});var r=function(){function e(){this.id="",this.numerocomprobante="",this.fechaEmision="",this.tipocomprobante=""}return e}()},"./src/app/facturacion-electronica/percepcion-retencion/models/Percepcion/principal-percepcion.ts":function(e,t,o){"use strict";o.d(t,"a",function(){return r});var r=function(){function e(){this.documentoReferencia=[],this.documentoEntidad=[]}return e}()},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-crear/percepcion-crear.component.css":function(e,t,o){t=e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-crear/percepcion-crear.component.html":function(e,t){e.exports='<div class="card">\r\n  <div class="card-content">\r\n    <form [formGroup]="productFormGroup">\r\n      <div class="row">\r\n        <div class="col-md-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'serie\' | translate}}<span class="star">*</span></label>\r\n            <select name="cmbserie" formControlName="cmbserie" class="form-control">\r\n              <option *ngFor="let serie of series" [value]="serie.idSerie"> {{serie.serie}}</option>\r\n            </select>\r\n            <span *ngIf="!productFormGroup.get(\'cmbserie\').valid && productFormGroup.get(\'cmbserie\').touched">\r\n                                            <span *ngIf="productFormGroup.controls[\'cmbserie\'].hasError(\'required\')"\r\n                                                  class="text-danger">{{\'formato\' | translate}}</span>\r\n                          </span>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="col-md-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'fechaPago\' | translate}} <span class="star">*</span> </label>\r\n            <input id="datefechapago" formControlName="datefechapago" autocomplete="off" type="text" class="form-control" datepicker/>\r\n            <span\r\n              *ngIf="!productFormGroup.get(\'datefechapago\').valid && productFormGroup.get(\'datefechapago\').touched">\r\n                            <span *ngIf="productFormGroup.controls[\'datefechapago\'].hasError(\'required\')"\r\n                                  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                          </span>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'tipoMoneda\' | translate}} <span class="star">*</span> </label>\r\n            <input id="txttipomoneda"  formControlName="txttipomoneda" class="form-control" type="text">\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row">\r\n        <div class="col-md-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label"> <i class="material-icons" style="font-size: 1.5rem;\r\n                  margin-right: 0.5rem;">search</i> {{\'ruc\' | translate}} <span class="star">*</span></label>\r\n            <input rucDirective id="txtruc" formControlName="txtruc" autocomplete="off" class="form-control" type="text"\r\n                   (keydown)="busquedaruc($event)">\r\n          </div>\r\n        </div>\r\n        <div class="col-md-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label"> <i class="material-icons" style="font-size: 1.5rem;\r\n                  margin-right: 0.5rem;">search</i>{{\'razonSocial\' | translate}}<span class="star">*</span></label>\r\n            <input ng2-auto-complete\r\n                   type="text"\r\n                   autocomplete="off"\r\n                   id="razonsocial"\r\n                   formControlName="razonsocial"\r\n                   [source]="listarOrganizacionesDeAutcompletado.bind(this)"\r\n                   [list-formatter]="autocompleListFormatter"\r\n                   [value-formatter]="autocompleListFormatter"\r\n                   [loading-text]="\'cargando\' | translate"\r\n                   (valueChanged)="busqueda()"\r\n                   (change)="cambioAutocomplete()"\r\n                   min-chars=1\r\n                   [no-match-found-text]="\'noSeEncontraronResultados\' | translate"\r\n                   class="form-control">\r\n            <span\r\n              *ngIf="!productFormGroup.get(\'razonsocial\').valid && productFormGroup.get(\'razonsocial\').touched">\r\n                            <span *ngIf="productFormGroup.controls[\'razonsocial\'].hasError(\'required\')"\r\n                                  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                          </span>\r\n          </div>\r\n        </div>\r\n        <div class="col-lg-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'txtcorreo\' | translate}} <span class="star">*</span> </label>\r\n            <input id="txtcorreo" formControlName="txtcorreo" class="form-control" autocomplete="off" type="text">\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-8">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'txtdireccionfiscal\' | translate}} <span class="star">*</span> </label>\r\n            <input id="txtdireccionfiscal" formControlName="txtdireccionfiscal" autocomplete="off" class="form-control" type="text">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n    <div class="card">\r\n      <div class="card-header card-header-icon" data-background-color="blue">\r\n        <i class="material-icons">list</i>\r\n      </div>\r\n      <div class="row"><h3>{{\'listaItems\' | translate}}</h3></div>\r\n      <div class="row"><p>&nbsp;</p></div>\r\n      <nav class="navbar navbar-info" role="navigation"></nav>\r\n      <div class="card-content">\r\n        <app-data-table (iniciarData)="iniciarData($event)"\r\n                        (accion)="ejecutarAccion($event)"\r\n                        (eliminar)="eliminar($event)"\r\n                        (agregar)="agregarItem($event)"\r\n                        #tablaNormal [idTabla]="\'tabla1\'"\r\n                        [cabecera]="cabecera"\r\n                        [atributos]="atributos"\r\n                        [acciones]="AccionesPrueba"\r\n                        [tipoAccion]="tipo"\r\n                        [habilitarAcciones]="true"\r\n                        [habilitarCheckBox]="true"\r\n                        [habilitarAgregar]="true"\r\n                        [habilitarEliminar]="true"></app-data-table>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-12">\r\n          <form [formGroup]="productFormGroup">\r\n            <div class="row">\r\n              <div class="col-md-12">\r\n                <div class="col-md-9">&nbsp;</div>\r\n                <div class="col-md-3">\r\n                  <div class="form-group label-floating">\r\n                    <label class="control-label">{{\'total\' | translate}}</label>\r\n                    <input type="text" id="txttotal" formControlName="txttotal" class="form-control">\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="row"><p> &nbsp;</p></div>\r\n    <div class="row">\r\n      <div class="col-md-12">\r\n        <form [formGroup]="productFormGroup">\r\n          <div class="label-floating">\r\n            <label class="control-label">{{\'observaciones\' | translate}}</label>\r\n            <input id="txtobservacion" formControlName="txtobservacion" class="form-control" type="text">\r\n            <span\r\n              *ngIf="!productFormGroup.get(\'txtobservacion\').valid && productFormGroup.get(\'txtobservacion\').touched">\r\n                            <span *ngIf="productFormGroup.controls[\'txtobservacion\'].hasError(\'maxLength\')"\r\n                                  class="text-danger">{{\'maximoCaracteres\' | translate: {digito: 500} }}</span>\r\n                          </span>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    <div class="row"><p> &nbsp;</p></div>\r\n    <div class="row">\r\n      <div class="col-md-12" align="right">\r\n        <button type="submit" class="btn btn-default" (click)=" vistaprevia()"\r\n                [disabled]="!productFormGroup.valid">{{\'vistaPrevia\' | translate}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n'},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-crear/percepcion-crear.component.ts":function(e,t,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./node_modules/@angular/forms/@angular/forms.es5.js"),n=o("./node_modules/@angular/router/@angular/router.es5.js"),c=o("./src/app/facturacion-electronica/general/data-table/utils/accion.ts"),a=o("./src/app/facturacion-electronica/general/data-table/utils/tipo-accion.ts"),s=o("./src/app/facturacion-electronica/general/data-table/data-table.component.ts"),p=o("./src/app/facturacion-electronica/general/data-table/utils/modo-vista-accion.ts"),l=o("./src/app/facturacion-electronica/general/utils/estadoArchivo.service.ts"),d=o("./src/app/facturacion-electronica/general/services/organizacion/entidad.service.ts"),u=o("./src/app/facturacion-electronica/general/models/organizacion/entidad.ts"),m=o("./node_modules/@angular/common/@angular/common/http.es5.js"),h=o("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.entidad.service.ts"),f=o("./src/app/facturacion-electronica/general/services/configuracionDocumento/series.service.ts"),b=o("./node_modules/rxjs/BehaviorSubject.js"),v=(o.n(b),o("./src/app/facturacion-electronica/general/models/documento/tablaMaestra.ts")),g=o("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),x=o("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),C=o("./node_modules/rxjs/Observable.js"),_=(o.n(C),o("./src/app/facturacion-electronica/percepcion-retencion/models/Percepcion/percepcion-cabecera.ts")),y=o("./src/app/facturacion-electronica/percepcion-retencion/services/Percepcion/percepcioncabecera.service.ts"),D=o("./src/app/facturacion-electronica/percepcion-retencion/models/Percepcion/percepcionebiz.ts"),P=o("./src/app/facturacion-electronica/percepcion-retencion/services/Percepcion/persistencia.percepcion.service.ts"),F=o("./src/app/facturacion-electronica/percepcion-retencion/models/Percepcion/principal-percepcion.ts"),S=o("./src/app/facturacion-electronica/percepcion-retencion/models/retencion-cabecera.ts");o.d(t,"a",function(){return j});var E=this&&this.__decorate||function(e,t,o,r){var i,n=arguments.length,c=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,o,c):i(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c},I=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},j=function(){function e(e,t,o,r,i,n,s,l,d,m,h,f){this.httpClient=e,this.httpClient1=t,this.route=o,this.router=r,this.persistenciapercepcionService=i,this.PercepcionCabecerapersistenciapercepcionService=n,this._estadoArchivo=s,this._entidadServices=l,this._entidadpersistenciapercepcionService=d,this.serieService=m,this._tipos=h,this._tablaMaestraService=f,this.titulo="Crear Percepción",this.series=[],this.estadoautocomplete=new b.BehaviorSubject(!1),this.entidad=[],this.entidad_uno=new u.a,this.tiposComprobantes=new b.BehaviorSubject([]),this.todosTiposComprobantes=new b.BehaviorSubject([]),this.cabecera=[],this.atributos=[],this.tipo=p.a.ICONOS,this.AccionesPrueba=[new c.b("editar",new c.c("visibility","btn-info"),a.a.EDITAR)],this.percepcioncab=new _.a,this.percepcion_principal=new F.a,this.total_retencion=0,this.listaitems=[],this.cabecera=["tipo","serie","numeroCorrelativo","fechaEmision","Moneda Origen","importeTotal","importeTotalsoles","importeRetencionsoles"],this.atributos=["tipoDocumentoDestinoDescripcion","serieDocumentoDestino","correlativoDocumentoDestino","fechaEmisionDestino","monedaDestino","totalImporteDestino","totalMonedaDestino","totalImporteAuxiliarDestino"]}return e.prototype.ngOnInit=function(){var e=this;this.initForm(),this.cargarProductoEditarLleno(),this.cargarServiciosArranque(),this.setTipoComprobante(),this.serieService.filtroSeries(localStorage.getItem("id_entidad"),this._tipos.TIPO_DOCUMENTO_RETENCION,this._tipos.TIPO_SERIE_ONLINE.toString()).subscribe(function(t){e.series=t})},e.prototype.vistaprevia=function(){this.fillProducto(),this.PercepcionCabecerapersistenciapercepcionService.setCabeceraPercepcion(this.percepcioncab),this.router.navigateByUrl("percepcion-retencion/percepcion/crear/vista-previa")},e.prototype.initForm=function(){var e=new Date,t=e.getDate().toString()+"/"+(e.getMonth()+1).toString()+"/"+e.getFullYear().toString();console.log(t),this.productFormGroup=new i.FormGroup({cmbserie:new i.FormControl("",[i.Validators.required]),txtruc:new i.FormControl("",[i.Validators.required,i.Validators.pattern("[0-9]{11}"),i.Validators.minLength(11),i.Validators.maxLength(11)]),razonsocial:new i.FormControl(""),txtcorreo:new i.FormControl({value:"",disabled:!0},[i.Validators.required]),txtdireccionfiscal:new i.FormControl({value:"",disabled:!0},[i.Validators.required]),txttipomoneda:new i.FormControl({value:"PEN",disabled:!0}),txtobservacion:new i.FormControl("",[i.Validators.maxLength(500)]),datefechapago:new i.FormControl(t,[i.Validators.required]),txttotal:new i.FormControl({value:this.total_retencion,disabled:!0},[i.Validators.required,i.Validators.min(.01),i.Validators.minLength(3)])})},e.prototype.autocompleListFormatter=function(e){return e.organizacion.denominacion},e.prototype.cargarProductoEditarLleno=function(){var e=new _.a;(e=this.PercepcionCabecerapersistenciapercepcionService.getCabeceraPercepcion())&&(this.percepcioncabedit=this.PercepcionCabecerapersistenciapercepcionService.getCabeceraPercepcion(),void 0!=this.percepcioncabedit.rucComprador.toString()?(console.log(this.percepcioncabedit.razonSocialComprador),this.estadoautocomplete.next(!0),this.busqueda()):(this.productFormGroup.controls.txtruc.setValue(this.percepcioncabedit.rucComprador),this.productFormGroup.controls.razonsocial.setValue(this.percepcioncabedit.razonSocialComprador),this.productFormGroup.controls.txtdireccionfiscal.setValue(this.percepcioncabedit.direccioncomprador)),this.productFormGroup.controls.cmbserie.setValue(this.percepcioncabedit.idserie),this.productFormGroup.controls.txtobservacion.setValue(this.percepcioncabedit.observacionComprobante),this.productFormGroup.controls.datefechapago.setValue(this.percepcioncabedit.fecPago),setTimeout(function(){$("select").each(function(){$(this.parentElement).removeClass("is-empty")})},200))},e.prototype.cargarServiciosArranque=function(){this.todosTiposComprobantes=this._tablaMaestraService.obtenerPorIdTabla(v.a),console.log(this.todosTiposComprobantes)},e.prototype.setTipoComprobante=function(){var e=[];e=[this._tipos.TIPO_DOCUMENTO_RETENCION],this.tiposComprobantes=this._tablaMaestraService.obtenerPorCodigoDeTablaMaestra(this.todosTiposComprobantes,e),console.log(this.tiposComprobantes),console.log(this.todosTiposComprobantes)},e.prototype.listarOrganizacionesDeAutcompletado=function(e){return e?this._entidadServices.buscarPorRazonSocial(e):C.Observable.of([])},e.prototype.iniciarData=function(e){this.total_retencion=0,this.total_importe=0,this.listaitems=this.persistenciapercepcionService.getListaProductos(),this.tabla.insertarData(this.listaitems);for(var t=0;t<this.listaitems.length;t++)this.total_retencion+=Number(this.listaitems[t].totalImporteAuxiliarDestino),this.total_importe+=Number(this.listaitems[t].totalImporteDestino);this.productFormGroup.get("txttotal").setValue(parseFloat(this.total_retencion.toString()).toFixed(2)),this.percepcioncab.totalimporte=Number(parseFloat(this.total_importe.toString()).toFixed(2))},e.prototype.limpiar=function(e){this.productFormGroup.reset()},e.prototype.filtro=function(e){this.fillProducto()},e.prototype.busquedaruc=function(e){var t=this;if(13==e.keyCode&&11==this.productFormGroup.get("txtruc").value.length){var o=this._entidadServices.buscarPorRuc(this.productFormGroup.get("txtruc").value);console.log(o),null!=o?o.subscribe(function(e){console.log("--data--"),console.log(e),t.entidad_uno=e||new u.a,t.productFormGroup.controls.razonsocial.setValue(t.entidad_uno.denominacion),t._entidadpersistenciapercepcionService.setEntidad(t.entidad_uno),setTimeout(function(){$("input").each(function(){$(this.parentElement).removeClass("is-empty")})},200)}):swal("Oops...","Something went wrong!","error")}},e.prototype.cambioAutocomplete=function(){"object"==typeof this.productFormGroup.get("razonsocial").value?this.estadoautocomplete.next(!0):(this.productFormGroup.get("txtruc").reset(),this.productFormGroup.get("txtdireccionfiscal").reset(),this.productFormGroup.get("razonsocial").reset(),this.estadoautocomplete.next(!1)),console.log(this.estadoautocomplete)},e.prototype.eliminarEstiloInput=function(e,t){setTimeout(function(){$("#"+e).parent().parent().removeClass(t)},200)},e.prototype.busqueda=function(){var e=this,t=new S.a;t=this.PercepcionCabecerapersistenciapercepcionService.getCabeceraPercepcion(),1==this.estadoautocomplete.value?this.rucquery=t.rucComprador.toString():this.rucquery=this.productFormGroup.get("razonsocial").value.organizacion.documento,this.estadoautocomplete.next(!1),void 0!=this.productFormGroup.get("razonsocial").value&&this._entidadServices.buscarPorRuc(this.rucquery).subscribe(function(t){e.entidad_uno=t||new u.a,console.log(e.entidad_uno),e.productFormGroup.controls.txtruc.setValue(e.entidad_uno.documento),e.productFormGroup.controls.txtdireccionfiscal.setValue(e.entidad_uno.direccionFiscal),e.productFormGroup.controls.razonsocial.setValue(e.entidad_uno.denominacion),e.productFormGroup.controls.txtcorreo.setValue(e.entidad_uno.correoElectronico),e._entidadpersistenciapercepcionService.setEntidad(e.entidad_uno),$("input").each(function(){$(this.parentElement).removeClass("is-empty")}),e.eliminarEstiloInput("razonsocial","is-empty")})},e.prototype.fillProducto=function(){var e=this;this.percepcioncab.idserie=this.productFormGroup.get("cmbserie").value;var t=this.series.findIndex(function(t){return t.idSerie==e.productFormGroup.get("cmbserie").value});this.percepcioncab.serie=-1==t?"":this.series[t].serie,this.percepcioncab.rucComprador=this.productFormGroup.get("txtruc").value,this.percepcioncab.razonSocialComprador=this.productFormGroup.get("razonsocial").value,this.percepcioncab.razonSocialProveedor=localStorage.getItem("org_nombre"),this.percepcioncab.rucProveedor=Number(localStorage.getItem("org_ruc")),this.percepcioncab.direccioncomprador=this.productFormGroup.get("txtdireccionfiscal").value,this.percepcioncab.direccionproveedor=localStorage.getItem("org_direccion"),this.percepcioncab.fecPago=this.productFormGroup.get("datefechapago").value,this.percepcioncab.moneda=this.productFormGroup.get("txttipomoneda").value,this.percepcioncab.observacionComprobante=this.productFormGroup.get("txtobservacion").value,this.percepcioncab.total=this.productFormGroup.get("txttotal").value,console.log(this.tiposComprobantes),this.percepcioncab.idtipocomprobanteproveedor=this.tiposComprobantes.getValue()[0].codigo,this.percepcioncab.tipocomprobanteproveedor=this.tiposComprobantes.getValue()[0].descripcionCorta,this.percepcioncab.idTablaTipoComprobante=this.tiposComprobantes.getValue()[0].tabla.toString(),this.percepcioncab.idTipoComprobante="3",console.log(this.percepcioncab)},e.prototype.eliminar=function(e){var t=this;swal({title:"¿Está Seguro?",html:'<div class="text-center"> Desea eliminar el/los item(s).  </div>',padding:"20",type:"warning",showCancelButton:!0,confirmButtonText:"SÍ",cancelButtonText:"NO",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).catch(function(e){}).then(function(o){o?(t.persistenciapercepcionService.setListaProductos(e),swal({title:"Acción Exitosa",html:'<div class="text-center">Item(s) eliminado(s) correctamente.  </div>',type:"success",confirmButtonClass:"btn btn-success",buttonsStyling:!1})):(console.log("CANCELADOP"),swal({title:"Cancelado",html:'<div class="text-center">Item(s) no fue eliminado(s) correctamente.  </div>',type:"error",confirmButtonClass:"btn btn-success",buttonsStyling:!1}))}),this.total_retencion=0,this.listaitems=this.persistenciapercepcionService.getListaProductos();for(var o=0;o<this.listaitems.length;o++)this.total_retencion+=Number(this.listaitems[o].totalImporteAuxiliarDestino),this.total_importe+=Number(this.listaitems[o].totalImporteDestino);this.productFormGroup.get("txttotal").setValue(parseFloat(this.total_retencion.toString()).toFixed(2)),this.percepcioncab.totalimporte=Number(parseFloat(this.total_importe.toString()).toFixed(2))},e.prototype.agregarItem=function(e){this.fillProducto(),this.PercepcionCabecerapersistenciapercepcionService.setCabeceraPercepcion(this.percepcioncab),this.router.navigateByUrl("percepcion-retencion/percepcion/crear/agregar-item")},e.prototype.ejecutarAccion=function(e){var t=e[0],o=new D.a;switch(o=e[1],t){case a.a.ELIMINAR:break;case a.a.EDITAR:this.router.navigate(["percepcion-retencion/percepcion/crear/editar-item",o.id]),this.fillProducto(),this.PercepcionCabecerapersistenciapercepcionService.setCabeceraPercepcion(this.percepcioncab)}},e}();E([o.i(r.ViewChild)("tablaNormal"),I("design:type","function"==typeof(O=void 0!==s.a&&s.a)&&O||Object)],j.prototype,"tabla",void 0),j=E([o.i(r.Component)({selector:"app-percepcion-crear",template:o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-crear/percepcion-crear.component.html"),styles:[o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-crear/percepcion-crear.component.css")]}),I("design:paramtypes",["function"==typeof(G=void 0!==m.b&&m.b)&&G||Object,"function"==typeof(w=void 0!==m.b&&m.b)&&w||Object,"function"==typeof(T=void 0!==n.c&&n.c)&&T||Object,"function"==typeof(R=void 0!==n.b&&n.b)&&R||Object,"function"==typeof(M=void 0!==P.a&&P.a)&&M||Object,"function"==typeof(A=void 0!==y.a&&y.a)&&A||Object,"function"==typeof(L=void 0!==l.a&&l.a)&&L||Object,"function"==typeof(z=void 0!==d.a&&d.a)&&z||Object,"function"==typeof(N=void 0!==h.a&&h.a)&&N||Object,"function"==typeof(V=void 0!==f.a&&f.a)&&V||Object,"function"==typeof(q=void 0!==x.a&&x.a)&&q||Object,"function"==typeof(B=void 0!==g.a&&g.a)&&B||Object])],j);var O,G,w,T,R,M,A,L,z,N,V,q,B},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.component.css":function(e,t,o){t=e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.component.html":function(e,t){e.exports='<div class="card">\r\n  <form method="#" action="#">\r\n    <div class="card-header card-header-text" data-background-color="blue">\r\n      <h4 class="card-title">Crear Percepción</h4>\r\n    </div>\r\n    <div class="card-content">\r\n      <router-outlet></router-outlet>\r\n    </div>\r\n  </form>\r\n</div>\r\n\r\n\r\n\r\n'},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.component.ts":function(e,t,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js");o.d(t,"a",function(){return c});var i=this&&this.__decorate||function(e,t,o,r){var i,n=arguments.length,c=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,o,c):i(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(){this.titulo="Crear Percepción"}return e.prototype.ngOnInit=function(){},e}();c=i([o.i(r.Component)({selector:"app-percepcion",template:o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.component.html"),styles:[o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.component.css")]}),n("design:paramtypes",[])],c)},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.module.ts":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./node_modules/@angular/common/@angular/common.es5.js"),n=o("./node_modules/@ngx-translate/core/index.js"),c=o("./src/app/facturacion-electronica/percepcion-retencion/services/archivoMasiva.service.ts"),a=o("./src/app/facturacion-electronica/general/services/comprobantes/retencion.service.ts"),s=o("./src/app/facturacion-electronica/percepcion-retencion/services/retencionpersiscabecera.service.ts"),p=o("./src/app/facturacion-electronica/general/services/archivos/archivo.service.ts"),l=o("./src/app/facturacion-electronica/general/services/comprobantes/comprobantes.service.ts"),d=o("./src/app/facturacion-electronica/general/services/documento/nuevoDocumento.ts"),u=o("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.entidad.service.ts"),m=o("./src/app/facturacion-electronica/general/services/comprobantes/retenciones.service.ts"),h=o("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.service.ts"),f=o("./src/app/facturacion-electronica/percepcion-retencion/services/percepcion-retencion-referencias.service.ts"),b=o("./src/app/facturacion-electronica/general/utils/estadoArchivo.service.ts"),v=o("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia-post.ts"),g=o("./node_modules/ng2-auto-complete/dist/index.js"),x=(o.n(g),o("./node_modules/@angular/common/@angular/common/http.es5.js")),C=o("./node_modules/@angular/forms/@angular/forms.es5.js"),_=o("./src/app/facturacion-electronica/general/consulta/consulta.module.ts"),y=o("./src/app/directives/datepicker.module.ts"),D=o("./src/app/facturacion-electronica/general/pdf-viewer/pdf-viewer.module.ts"),P=o("./src/app/facturacion-electronica/general/directivas/directivas.module.ts"),F=o("./node_modules/@angular/http/@angular/http.es5.js"),S=o("./src/app/facturacion-electronica/general/data-table/data-table.module.ts"),E=o("./src/app/facturacion-electronica/percepcion-retencion/retencion-masiva-detalle/retencion-masiva-detalle.module.ts"),I=o("./src/app/facturacion-electronica/percepcion-retencion/emision-percepcion-retencion/emision-percepcion-retencion.module.ts"),j=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.routing.module.ts"),O=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.component.ts"),G=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-crear/percepcion-crear.component.ts"),w=o("./src/app/facturacion-electronica/percepcion-retencion/item-crear-editar-percepcion/item-crear-editar-percepcion.module.ts"),T=o("./src/app/facturacion-electronica/percepcion-retencion/vistaprevia-percepcion/vistaprevia-percepcion.module.ts"),R=o("./src/app/facturacion-electronica/percepcion-retencion/services/Percepcion/percepcioncabecera.service.ts"),M=o("./src/app/facturacion-electronica/percepcion-retencion/services/Percepcion/persistencia.percepcion.service.ts"),A=o("./src/app/facturacion-electronica/percepcion-retencion/services/Percepcion/persistencia-percepcion-post.ts");o.d(t,"PercepcionModule",function(){return z});var L=this&&this.__decorate||function(e,t,o,r){var i,n=arguments.length,c=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,o,c):i(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c},z=function(){function e(){}return e}();z=L([o.i(r.NgModule)({imports:[j.a,i.CommonModule,n.a,C.FormsModule,F.HttpModule,C.ReactiveFormsModule,x.a,y.a,D.a,S.a,_.a,n.a,P.a,g.Ng2AutoCompleteModule,w.a,E.a,T.a,I.a],declarations:[O.a,G.a],providers:[h.a,s.a,b.a,c.a,d.a,u.a,m.a,m.a,p.a,v.a,l.a,a.a,f.a,R.a,M.a,A.a]})],z)},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.routing.module.ts":function(e,t,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./node_modules/@angular/router/@angular/router.es5.js"),n=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-crear/percepcion-crear.component.ts"),c=o("./src/app/facturacion-electronica/percepcion-retencion/item-crear-editar-percepcion/item-crear-editar-percepcion.component.ts"),a=o("./src/app/facturacion-electronica/percepcion-retencion/vistaprevia-percepcion/vistaprevia-percepcion.component.ts"),s=o("./src/app/facturacion-electronica/percepcion-retencion/emision-percepcion-retencion/emision-percepcion-retencion.component.ts");o.d(t,"a",function(){return d});var p=this&&this.__decorate||function(e,t,o,r){var i,n=arguments.length,c=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,o,c):i(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c},l=[{path:"",children:[{path:"",pathMatch:"full",redirectTo:"crear"},{path:"crear",component:n.a,data:{mostrarCombo:!0,codigo:"20"}},{path:"crear/agregar-item",component:c.a,data:{mostrarCombo:!1,tipoaccion:1,titulo:"Agregar Percepcion Item"}},{path:"crear/editar-item/:id",component:c.a,data:{mostrarCombo:!1,tipoaccion:2,titulo:"Agregar Percepcion Item",button:"guardar"}},{path:"crear/vista-previa",component:a.a,data:{mostrarCombo:!1}},{path:"crear/emision/:id",component:s.a,data:{mostrarCombo:!1}}]}],d=function(){function e(){}return e}();d=p([o.i(r.NgModule)({imports:[i.a.forChild(l)],exports:[i.a]})],d)},"./src/app/facturacion-electronica/percepcion-retencion/services/Percepcion/percepcioncabecera.service.ts":function(e,t,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./node_modules/angular-persistence/index.js"),n=o("./src/app/facturacion-electronica/percepcion-retencion/models/Percepcion/percepcion-cabecera.ts");o.d(t,"a",function(){return s});var c=this&&this.__decorate||function(e,t,o,r){var i,n=arguments.length,c=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,o,c):i(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.persistenceService=e,this.listacabecera=new n.a}return e.prototype.setCabeceraPercepcion=function(e){this.persistenceService.remove("PercepcionCabecera",i.b.LOCAL),this.persistenceService.set("PercepcionCabecera",e,{type:i.b.LOCAL,timeout:36e5})},e.prototype.getCabeceraPercepcion=function(){var e;return e=this.persistenceService.get("PercepcionCabecera",i.b.LOCAL),console.log(e),void 0==e?null:e},e.prototype.vaciar_data=function(){this.persistenceService.remove("PercepcionCabecera",i.b.LOCAL)},e}();s=c([o.i(r.Injectable)(),a("design:paramtypes",["function"==typeof(p=void 0!==i.c&&i.c)&&p||Object])],s);var p},"./src/app/facturacion-electronica/percepcion-retencion/services/Percepcion/persistencia-percepcion-post.ts":function(e,t,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./node_modules/angular-persistence/index.js"),n=o("./node_modules/rxjs/BehaviorSubject.js"),c=(o.n(n),o("./src/app/facturacion-electronica/percepcion-retencion/models/Percepcion/post_percepcion.ts"));o.d(t,"a",function(){return p});var a=this&&this.__decorate||function(e,t,o,r){var i,n=arguments.length,c=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,o,c):i(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e){this.persistenceService=e,this.postpersistencia=new c.a}return e.prototype.setPostPercepcion=function(e){console.log("nueva uiid del servicio"),console.log(e.id),this.persistenceService.remove("Post_percepcion",i.b.LOCAL),this.persistenceService.set("Post_percepcion",e,{type:i.b.LOCAL,timeout:36e5})},e.prototype.getPostPercepcion=function(){var e,t=new n.BehaviorSubject(new c.a);return e=this.persistenceService.get("Post_percepcion",i.b.LOCAL),console.log(e),void 0==e?null:(t.next(e),t)},e.prototype.removePostPercepcion=function(){this.persistenceService.remove("Post_percepcion",i.b.LOCAL)},e}();p=a([o.i(r.Injectable)(),s("design:paramtypes",["function"==typeof(l=void 0!==i.c&&i.c)&&l||Object])],p);var l},"./src/app/facturacion-electronica/percepcion-retencion/services/Percepcion/persistencia.percepcion.service.ts":function(e,t,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./node_modules/angular-persistence/index.js");o.d(t,"a",function(){return a});var n=this&&this.__decorate||function(e,t,o,r){var i,n=arguments.length,c=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,o,c):i(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.persistenceService=e,this.lista=[]}return e.prototype.agregarProducto=function(e){console.log(this.lista),this.lista=this.getListaProductos(),console.log(this.lista),e.id=this.lista.length.toString(),this.lista.push(e),console.log(this.lista),this.persistenceService.remove("listapercepcion",i.b.LOCAL),this.persistenceService.set("listapercepcion",this.lista,{type:i.b.LOCAL,timeout:36e5})},e.prototype.getListaProductos=function(){var e;return e=this.persistenceService.get("listapercepcion",i.b.LOCAL),void 0===e?[]:e},e.prototype.setListaProductos=function(e){this.persistenceService.remove("listapercepcion",i.b.LOCAL),this.persistenceService.set("listapercepcion",e,{type:i.b.LOCAL,timeout:36e5})},e.prototype.getItemProducto=function(e){return this.lista=this.getListaProductos(),this.lista[e]},e.prototype.editarProducto=function(e,t){this.lista=this.getListaProductos(),0!==this.lista.length&&(e.id=this.lista[t].id,this.lista[t]=e,this.persistenceService.remove("listapercepcion",i.b.LOCAL),this.persistenceService.set("listapercepcion",this.lista,{type:i.b.LOCAL}),console.log("LISTA "),console.log(this.lista))},e.prototype.mostrar=function(){console.log(this.persistenceService.get("listapercepcion",i.b.LOCAL))},e.prototype.eliminar=function(e){this.persistenceService.remove("listapercepcion",i.b.LOCAL),this.persistenceService.set("listapercepcion",e,{type:i.b.LOCAL})},e.prototype.vaciar_data=function(){this.persistenceService.remove("listapercepcion",i.b.LOCAL)},e.prototype.setUUIDConsultaRetencion=function(e){console.log("SET UUID"),console.log(e),this.persistenceService.remove("UUIDConsultaRetencion",i.b.LOCAL),this.persistenceService.set("UUIDConsultaRetencion",e,{type:i.b.LOCAL,timeout:36e5})},e.prototype.getUUIDConsultaRetenecion=function(){var e;return e=this.persistenceService.get("UUIDConsultaRetencion",i.b.LOCAL),void 0===e?null:e},e}();a=n([o.i(r.Injectable)(),c("design:paramtypes",["function"==typeof(s=void 0!==i.c&&i.c)&&s||Object])],a);var s},"./src/app/facturacion-electronica/percepcion-retencion/vistaprevia-percepcion/vistaprevia-percepcion.component.html":function(e,t){e.exports='<div class="row col-md-12">\r\n  <div class="card">\r\n    <div class="card-header card-header-text" data-background-color="blue">\r\n      <h4 class="card-title">{{\'vistaPrevia\' | translate}}</h4>\r\n    </div>\r\n    <div class="card-content">\r\n      <div class="row">\r\n        <div class="col-md-4">\r\n          <label><h5><b>{{razonsocialemisor}}</b></h5></label>\r\n        </div>\r\n        <div class="col-md-4 col-md-offset-4">\r\n          <div class="row">\r\n            <div class="col-md-3">\r\n              <label><h4><b>RUC N°:</b></h4></label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label><h5>{{rucemisor}}</h5></label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-4">\r\n          <label><h5><b>{{domiciliofiscalemisor}}</b></h5></label>\r\n        </div>\r\n        <div class="col-md-4 col-md-offset-4">\r\n          <label><h3><b>RETENCIÓN ELECTRÓNICA</b></h3></label>\r\n        </div>\r\n      </div>\r\n      <br>\r\n      <div class="row">\r\n        <div class="col-md-3 col-md-offset-8">\r\n          <div class="row">\r\n            <div class="col-md-offset-4">\r\n              <label><h3><b>Serie: </b>{{series}}</h3></label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <br>\r\n      <div class="row">\r\n        <div class="col-md-6">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label><b>Señor(es):</b></label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label>{{razonsocialreceptor}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-4 col-md-offset-2">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label><b>Tipo de Cambio:</b></label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label>{{tipocambio}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-6">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label><b>RUC:</b></label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label>{{rucreceptor}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-4 col-md-offset-2">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label><b>Banco</b></label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label>{{banco}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-6">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label><b>Domicilio Fiscal:</b></label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label>{{domiciliofiscalreceptor}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-6">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label><b>Fecha de Emisión:</b></label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label>{{fechaemisiones}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-6">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label><b>Tipo de Moneda:</b></label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label>{{tipo_moneda}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <br>\r\n      <app-data-table (iniciarData)="iniciarData($event)"\r\n                      #tablaNormal [idTabla]="\'tabla1\'"\r\n                      [cabecera]="cabecera"\r\n                      [atributos]="atributos"></app-data-table>\r\n      <br>\r\n      <br>\r\n      <div class="row">\r\n        <div class="col-md-2 col-md-offset-5">\r\n          <label><b>Total Importe:</b></label>\r\n        </div>\r\n        <div class="col-md-5">\r\n          <label>{{total_importe}}</label>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-2 col-md-offset-5">\r\n          <label><b>Total Importe Retención:</b></label>\r\n        </div>\r\n        <div class="col-md-5">\r\n          <label>{{totales}}</label>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-2 col-md-offset-5">\r\n          <label><b>Son:</b></label>\r\n        </div>\r\n        <div class="col-md-5">\r\n          <label>{{totalespalabaras | uppercase}}</label>\r\n        </div>\r\n      </div>\r\n      <br>\r\n      <br>\r\n    </div>\r\n    <div class="row">\r\n      <div class="col-md-12" align="right">\r\n        <button name="btnregresar" type="button" class="btn btn-default" style="right: 15px;" (click)="regresar()">Regresar </button>\r\n        <button name="btnemitir" type="button" class="btn btn-default" style="right: 15px;" (click)="emitir()">Emitir </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n'},"./src/app/facturacion-electronica/percepcion-retencion/vistaprevia-percepcion/vistaprevia-percepcion.component.ts":function(e,t,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./node_modules/@angular/router/@angular/router.es5.js"),n=o("./src/app/facturacion-electronica/general/data-table/data-table.component.ts"),c=o("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.service.ts"),a=o("./node_modules/written-number/lib/index.js"),s=(o.n(a),o("./src/app/facturacion-electronica/general/services/documento/nuevoDocumento.ts")),p=o("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.entidad.service.ts"),l=o("./src/app/facturacion-electronica/general/models/organizacion/entidad.ts"),d=o("./node_modules/@angular/common/@angular/common/http.es5.js"),u=o("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia-post.ts"),m=o("./node_modules/rxjs/BehaviorSubject.js"),h=(o.n(m),o("./src/app/facturacion-electronica/percepcion-retencion/models/Percepcion/pdetalle.ts")),f=o("./src/app/facturacion-electronica/percepcion-retencion/models/Percepcion/principal-percepcion.ts"),b=o("./src/app/facturacion-electronica/percepcion-retencion/services/Percepcion/percepcioncabecera.service.ts"),v=o("./src/app/facturacion-electronica/percepcion-retencion/models/Percepcion/post_percepcion.ts");o.d(t,"a",function(){return C});var g=this&&this.__decorate||function(e,t,o,r){var i,n=arguments.length,c=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,o,c):i(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c},x=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=function(){function e(e,t,o,r,i,n,c,a){this.route=e,this.router=t,this.persistenciaService=o,this.PercepcionCabecerapersistenciaService=r,this._nuevodocumento=i,this._entidadPersistenciaService=n,this.httpClient=c,this._postpersisservice=a,this.documentoreferenciaunit=new h.a,this.cabecera=[],this.atributos=[],this.percepcion_principal=new f.a,this.entidadlogueo=new l.a,this.org_busqueda=new l.a,this.entidadreceptora=new l.a,this.listaitems=[],this.cabecera=["tipo","serie","numeroCorrelativo","fechaEmision","Moneda Origen","importeTotal","importeTotalsoles","importeRetencionsoles","Nro Doc ERP"],this.atributos=["tipoDocumentoDestinoDescripcion","serieDocumentoDestino","correlativoDocumentoDestino","fechaEmisionDestino","monedaDestino","totalImporteDestino","totalMonedaDestino","totalImporteAuxiliarDestino","numdocerp"]}return e.prototype.ngOnInit=function(){if(this.percepcioncab=this.PercepcionCabecerapersistenciaService.getCabeceraPercepcion(),this.org_busqueda=this._entidadPersistenciaService.getEntidad(),null!=this.percepcioncab){this.total_importe=0,this.listaitems=this.persistenciaService.getListaProductos();for(var e=0;e<this.listaitems.length;e++)this.total_importe+=Number(this.listaitems[e].totalImporteDestino);var t=this.percepcioncab.total.toString().split("."),o=t[0],r=t[1];this.rucemisor=this.percepcioncab.rucProveedor,this.razonsocialemisor=this.percepcioncab.razonSocialProveedor,this.domiciliofiscalemisor=this.percepcioncab.direccionproveedor,this.rucreceptor=this.percepcioncab.rucComprador,this.razonsocialreceptor=this.percepcioncab.razonSocialComprador,this.domiciliofiscalreceptor=this.percepcioncab.direccioncomprador,this.fechaemisiones=this.percepcioncab.fecPago,this.totales=this.percepcioncab.total,this.total_importe=Number(parseFloat(this.total_importe.toString()).toFixed(2)),this.tipo_moneda=this.percepcioncab.moneda.toString(),this.totalespalabaras=a(Number(o),{lang:"es"})+" "+this.tipo_moneda+" CON "+a(Number(r),{lang:"es"})+" CENTÍMOS.",this.tipocambio="",this.banco="",this.series=this.percepcioncab.serie}else this.router.navigateByUrl("percepcion-retencion/percepcion/crear");this.entidadlogueo.estado="1",this.entidadlogueo.id=localStorage.getItem("org_id"),this.entidadlogueo.idTipoEntidad="1",this.entidadlogueo.descripcionTipoEntidad="EMISOR",this.entidadlogueo.idEntidad=localStorage.getItem("id_entidad"),this.entidadlogueo.tipoDocumento="6",this.entidadlogueo.ubigeo="040101",this.entidadlogueo.documento=localStorage.getItem("org_ruc"),this.entidadlogueo.denominacion=localStorage.getItem("org_nombre"),this.entidadlogueo.nombreComercial=localStorage.getItem("org_nombre"),this.entidadlogueo.direccionFiscal=localStorage.getItem("org_direccion"),this.entidadlogueo.correo=localStorage.getItem("org_correo"),this.entidadlogueo.idComprobante="",this.entidadreceptora.usuarioCreacion=this.org_busqueda.usuarioCreacion,this.entidadreceptora.usuarioModificacion=this.org_busqueda.usuarioModificacion,this.entidadreceptora.fechaCreacion=this.org_busqueda.fechaCreacion,this.entidadreceptora.fechaModificacion=this.org_busqueda.fechaModificacion,this.entidadreceptora.estado=this.org_busqueda.estado,this.entidadreceptora.id=this.org_busqueda.id,this.entidadreceptora.idTipoEntidad="2",this.entidadreceptora.descripcionTipoEntidad="RECEPTOR",this.entidadreceptora.idEntidad=this.org_busqueda.idEntidad,this.entidadreceptora.tipoDocumento="6",this.entidadreceptora.ubigeo=this.org_busqueda.ubigeo,this.entidadreceptora.documento=this.org_busqueda.documento,this.entidadreceptora.denominacion=this.org_busqueda.denominacion,this.entidadreceptora.direccionFiscal=this.org_busqueda.direccionFiscal,this.entidadreceptora.correo=this.org_busqueda.correo,this.entidadreceptora.idComprobante=""},e.prototype.regresar=function(){this.router.navigateByUrl("percepcion-retencion/percepcion/crear")},e.prototype.armarjson=function(){var e=this.percepcioncab.fecPago.toString().split("/"),t=e[0],o=e[1],r=e[2],i=r+"-"+o+"-"+t;this.percepcion_principal.id="",this.percepcion_principal.idTipoComprobante=this.percepcioncab.idTipoComprobante,this.percepcion_principal.numeroComprobante=this.percepcioncab.serie,this.percepcion_principal.idSerie=this.percepcioncab.idserie,this.percepcion_principal.idProveedor="",this.percepcion_principal.idOrganizacionCompradora="",this.percepcion_principal.rucProveedor="PE"+this.percepcioncab.rucProveedor,this.percepcion_principal.rucComprador="PE"+this.percepcioncab.rucComprador,this.percepcion_principal.estadoComprobante=this.percepcioncab.estadoComprobante,this.percepcion_principal.usuarioCreacion="gmendez",this.percepcion_principal.usuarioModificacion="gmendez",this.percepcion_principal.razonSocialComprador=this.percepcioncab.razonSocialComprador,this.percepcion_principal.razonSocialProveedor=this.percepcioncab.razonSocialProveedor,this.percepcion_principal.moneda=this.percepcioncab.moneda,this.percepcion_principal.fechaCreacion=i,this.percepcion_principal.fechaRegistro=i,this.percepcion_principal.fechaEmision=i,this.percepcion_principal.idTablaTipoComprobante=this.percepcioncab.idTablaTipoComprobante,this.percepcion_principal.observacionComprobante=this.percepcioncab.observacionComprobante,this.percepcion_principal.idRegistroTipoComprobante=this.percepcioncab.idtipocomprobanteproveedor,this.percepcion_principal.tipoComprobante=this.percepcioncab.tipocomprobanteproveedor,this.percepcion_principal.version="1",this.percepcion_principal.montoComprobante=0,this.percepcion_principal.montoPagado=0,this.percepcion_principal.montoDescuento=this.percepcioncab.total,this.percepcion_principal.fechaDocumentoRetencion=i,this.percepcion_principal.totalComprobante=this.percepcioncab.totalimporte,this.percepcion_principal.detalleEbiz=[],this.percepcion_principal.observacionComprobante=this.percepcioncab.observacionComprobante,this.percepcion_principal.documentoConcepto=[],this.percepcion_principal.documentoParametro=[],this.percepcion_principal.documentoEntidad.push(this.entidadreceptora),this.percepcion_principal.documentoEntidad.push(this.entidadlogueo);for(var n=this.persistenciaService.getListaProductos(),c=0;c<n.length;c++)this.documentoreferenciaunit.idDocumentoOrigen=n[c].idDocumentoOrigen,this.documentoreferenciaunit.idDocumentoDestino=n[c].idDocumentoDestino,this.documentoreferenciaunit.tipoDocumentoOrigen=n[c].tipoDocumentoOrigen,this.documentoreferenciaunit.tipoDocumentoDestino=n[c].tipoDocumentoDestino,this.documentoreferenciaunit.serieDocumentoDestino=n[c].serieDocumentoDestino,this.documentoreferenciaunit.correlativoDocumentoDestino=n[c].correlativoDocumentoDestino,this.documentoreferenciaunit.totalImporteDestino=n[c].totalImporteDestino,this.documentoreferenciaunit.totalImporteAuxiliarDestino=n[c].totalImporteAuxiliarDestino,this.documentoreferenciaunit.totalPorcentajeAuxiliarDestino=n[c].totalPorcentajeAuxiliarDestino,this.documentoreferenciaunit.tipoDocumentoOrigenDescripcion=n[c].tipoDocumentoOrigenDescripcion,this.documentoreferenciaunit.tipoDocumentoDestinoDescripcion=n[c].tipoDocumentoDestinoDescripcion,this.documentoreferenciaunit.monedaDestino=n[c].monedaDestino,this.documentoreferenciaunit.totalMonedaDestino=n[c].totalMonedaDestino,this.documentoreferenciaunit.auxiliar1=n[c].auxiliar1,this.documentoreferenciaunit.polizaFactura=n[c].polizaFactura,this.documentoreferenciaunit.anticipo=n[c].anticipo,this.documentoreferenciaunit.fechaEmisionDestino=n[c].fechaEmisionDestino,this.documentoreferenciaunit.observaciones=n[c].observaciones,this.documentoreferenciaunit.idMoneda=n[c].idMoneda,this.percepcion_principal.documentoReferencia.push(this.documentoreferenciaunit);console.log(this.percepcion_principal.documentoReferencia)},e.prototype.emitir=function(){var e=this;this.armarjson();var t=new m.BehaviorSubject(new v.a);this._nuevodocumento.subir(this.percepcion_principal).subscribe(function(o){var r=new v.a;r.id=o.id,r.fechaEmision=o.fechaEmision,r.numerocomprobante=o.numerocomprobante,r.tipocomprobante=o.tipocomprobante,e._postpersisservice.setPostRetencion(r),t.next(r),console.log("uuid del frnot doc"),console.log(o.id),e.router.navigate(["percepcion-retencion/percepcion/crear/emision",o.id])},function(e){console.log("error"),console.log(e)})},e.prototype.iniciarData=function(e){this.listaitems=this.persistenciaService.getListaProductos(),this.tabla.insertarData(this.listaitems)},e}();g([o.i(r.ViewChild)("tablaNormal"),x("design:type","function"==typeof(_=void 0!==n.a&&n.a)&&_||Object)],C.prototype,"tabla",void 0),C=g([o.i(r.Component)({selector:"app-vistaprevia-percepcion",template:o("./src/app/facturacion-electronica/percepcion-retencion/vistaprevia-percepcion/vistaprevia-percepcion.component.html"),styles:[o("./src/app/facturacion-electronica/percepcion-retencion/vistaprevia-percepcion/vistaprevia-percepcion.css")]}),x("design:paramtypes",["function"==typeof(y=void 0!==i.c&&i.c)&&y||Object,"function"==typeof(D=void 0!==i.b&&i.b)&&D||Object,"function"==typeof(P=void 0!==c.a&&c.a)&&P||Object,"function"==typeof(F=void 0!==b.a&&b.a)&&F||Object,"function"==typeof(S=void 0!==s.a&&s.a)&&S||Object,"function"==typeof(E=void 0!==p.a&&p.a)&&E||Object,"function"==typeof(I=void 0!==d.b&&d.b)&&I||Object,"function"==typeof(j=void 0!==u.a&&u.a)&&j||Object])],C);var _,y,D,P,F,S,E,I,j},"./src/app/facturacion-electronica/percepcion-retencion/vistaprevia-percepcion/vistaprevia-percepcion.css":function(e,t,o){t=e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},"./src/app/facturacion-electronica/percepcion-retencion/vistaprevia-percepcion/vistaprevia-percepcion.module.ts":function(e,t,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./node_modules/@angular/common/@angular/common.es5.js"),n=o("./node_modules/@angular/forms/@angular/forms.es5.js"),c=o("./node_modules/@ngx-translate/core/index.js"),a=o("./src/app/facturacion-electronica/general/directivas/directivas.module.ts"),s=o("./node_modules/ng2-auto-complete/dist/index.js"),p=(o.n(s),o("./src/app/facturacion-electronica/general/services/servidores.ts")),l=o("./src/app/facturacion-electronica/general/data-table/data-table.module.ts"),d=o("./src/app/facturacion-electronica/general/pdf-viewer/pdf-viewer.module.ts"),u=o("./node_modules/@angular/http/@angular/http.es5.js"),m=o("./src/app/directives/datepicker.module.ts"),h=o("./node_modules/ng2-completer/index.js"),f=o("./src/app/facturacion-electronica/general/consulta/consulta.module.ts"),b=o("./node_modules/@angular/common/@angular/common/http.es5.js"),v=o("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia-post.ts"),g=o("./src/app/facturacion-electronica/general/services/comprobantes/comprobantes.service.ts"),x=o("./src/app/facturacion-electronica/percepcion-retencion/services/retencionpersiscabecera.service.ts"),C=o("./src/app/facturacion-electronica/general/services/documento/nuevoDocumento.ts"),_=o("./src/app/facturacion-electronica/general/services/comprobantes/retencion.service.ts"),y=o("./src/app/facturacion-electronica/general/services/comprobantes/retenciones.service.ts"),D=o("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.entidad.service.ts"),P=o("./src/app/facturacion-electronica/general/services/archivos/archivo.service.ts"),F=o("./src/app/facturacion-electronica/percepcion-retencion/services/percepcion-retencion-referencias.service.ts"),S=o("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.service.ts"),E=o("./src/app/facturacion-electronica/percepcion-retencion/services/archivoMasiva.service.ts"),I=o("./src/app/facturacion-electronica/general/utils/estadoArchivo.service.ts"),j=o("./src/app/facturacion-electronica/percepcion-retencion/vistaprevia-percepcion/vistaprevia-percepcion.component.ts");o.d(t,"a",function(){return G});var O=this&&this.__decorate||function(e,t,o,r){var i,n=arguments.length,c=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,o,c):i(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c},G=function(){function e(){}return e}();G=O([o.i(r.NgModule)({imports:[i.CommonModule,n.ReactiveFormsModule,a.a,n.FormsModule,u.HttpModule,b.a,m.a,d.a,l.a,f.a,c.a,a.a,h.a,s.Ng2AutoCompleteModule],declarations:[j.a],exports:[j.a],providers:[p.a,S.a,x.a,I.a,E.a,C.a,D.a,y.a,y.a,P.a,v.a,g.a,_.a,F.a]})],G)}});