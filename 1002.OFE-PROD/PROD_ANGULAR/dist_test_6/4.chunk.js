webpackJsonp([4],{"./src/app/factura/comprador/buscar/facturacompradorbuscar.component.html":function(t,r){t.exports='<div class="main-content">\r\n    <div class="container-fluid">\r\n        <div class="row">\r\n            <div class="col-sm-12">\r\n                <div class="card">\r\n                    <form method="#" action="#">\r\n                        <div class="card-header card-header-text" data-background-color="blue">\r\n                            <h4 class="card-title">Buscar Comprobante de Pago</h4>\r\n                        </div>\r\n                        <div class="card-content">\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Número Comprobante de Pago\r\n                                        </label>\r\n                                        <input [(ngModel)]="filtro.nrocomprobantepago" name="nrocomprobantepago" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Razón Social Proveedor\r\n                                        </label>\r\n                                        <input [(ngModel)]="filtro.razonsocialproveedor" name="razonsocialcliente" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">RUC Proveedor\r\n                                        </label>\r\n                                        <input [(ngModel)]="filtro.rucproveedor" name="ruccliente" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                \r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Estado\r\n                                        </label>\r\n                                        <select [(ngModel)]="filtro.estado" name="estado" class="form-control">\r\n                                            <option value="NONE" selected>TODOS</option>\r\n                                            <option *ngFor="let opt of listEstadoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Emitida despues de</label>\r\n                                        <input type="text" [(ngModel)]="filtro.fechaemisioninicio" name="fechaemisioninicio" class="form-control" datepicker />\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Emitida antes de</label>\r\n                                        <input type="text" [(ngModel)]="filtro.fechaemisionfin" name="fechaemisionfin" class="form-control" datepicker />\r\n                                    </div>\r\n                                </div>\r\n                              \r\n                                \r\n                              \r\n                                \r\n                            </div>\r\n                          <div class="row">\r\n                            <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Moneda\r\n                                        </label>\r\n                                        <select [(ngModel)]="filtro.moneda" name="moneda" class="form-control">\r\n                                            <option value="NONE" selected>TODOS</option>\r\n                                            <option *ngFor="let opt of listMonedaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            <div class="col-sm-4">\r\n                                      <div class="form-group label-floating">\r\n                                          <label class="label-on-left">Tipo de Emisión</label>\r\n                                          <div class="togglebutton">\r\n                                              <label>\r\n                                                  <input type="checkbox" [checked]="filtro.tipoemisionfisico" (change)="filtro.tipoemisionfisico = !filtro.tipoemisionfisico" > Físico\r\n                                              </label>\r\n                                              <label>\r\n                                                  <input type="checkbox" [checked]="filtro.tipoemisionelectronico"  (change)="filtro.tipoemisionelectronico = !filtro.tipoemisionelectronico" > Electrónico\r\n                                          </label>\r\n                                          </div>\r\n                                      </div>\r\n                                  </div>\r\n                            \r\n                            <div class="col-sm-4">\r\n                                    <div class="form-group">\r\n                                      \r\n                                        <button class="btn btn-default" (click)="clicked($event)">Buscar</button>\r\n                                        <button class="btn btn-default" (click)="limpiar($event)">Limpiar</button>\r\n                                    </div>\r\n                                </div>\r\n                          </div>\r\n                            <nav class="navbar navbar-info navbar-without-margin" role="navigation">\r\n                                <div class="container-fluid">\r\n                                    <div class="navbar-header">\r\n\r\n                                        <span class="navbar-brand">Resultados</span>\r\n                                    </div>\r\n                                   \r\n                                </div>\r\n                            </nav>\r\n                            <div class="row">    \r\n                                    <div class="col-sm-8">\r\n                                        </div>                                    \r\n                                    <div class="col-sm-4">\r\n                                        <div class="form-group form-group-without-margin">\r\n                             \r\n                                            <button class="btn btn-default" >Anular</button>\r\n                                        </div>\r\n                                    </div>\r\n                            </div>\r\n                            <div class="material-datatables table-responsive">\r\n                                <table id="dtResultados" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th class="disabled-sorting text-right">\r\n                                                <div class="checkbox text-right">\r\n                                                    <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                                                </div>\r\n                                            </th>\r\n                                            <th>No. Doc. de Pago</th>\r\n                                            <th>Organización Proveedora</th>\r\n                                            <th>Tipo Doc</th>\r\n                                            <th>Documento ERP</th>\r\n                                           \r\n                                            <th>Forma de Pago</th>\r\n                                            <th>Importe Total</th>\r\n                                            <th>Estado</th>\r\n                                            \r\n                                            <th>Fecha de Emisión</th>\r\n                                            <th>Fecha Prog. Pago</th>\r\n                                            <th>Fecha Pago</th>\r\n                                            <th>Notas</th>\r\n                                            <th class="disabled-sorting text-center">Acciones</th>\r\n                                        </tr>\r\n                                    </thead>\r\n\r\n                                </table>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div id="mdlObservaciones" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog modal-lg" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Observaciones</h4>\r\n\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n          \r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n                <div class="col-sm-12 text-center">\r\n                  <b>Observaciones Comprobante de pago:</b><p></p>\r\n                </div>\r\n              </div>\r\n              <div class="row">\r\n                <div class="col-sm-12">\r\n                  <span id="mdlObservaciones_obs"></span>\r\n                </div>\r\n              </div>\r\n              <div class="row">\r\n                <div class="col-sm-12 text-center" >\r\n                  <p></p><b>Observaciones de pago:</b><p></p>\r\n                </div>\r\n              </div>\r\n              <div class="row">\r\n                <div class="col-sm-12">\r\n                  <span id="mdlObservaciones_obs_pago"></span>\r\n                </div>\r\n              </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>'},"./src/app/factura/comprador/buscar/facturacompradorbuscar.component.ts":function(t,r,a){"use strict";function n(){d=$("#dtResultados").on("init.dt",function(t,r,a){DatatableFunctions.initDatatable(t,r,a,d)}).DataTable({searching:!1,serverSide:!0,ajax:{beforeSend:function(t){s.util.tokenValid()&&(t.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token")),t.setRequestHeader("origen_datos","PEB2M"),t.setRequestHeader("tipo_empresa","C"),t.setRequestHeader("org_id",localStorage.getItem("org_id")),t.setRequestHeader("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key")))},url:c.l,dataSrc:"data",data:function(t){if(""!=s.filtro.nrocomprobantepago&&(t.NumeroFactura=s.filtro.nrocomprobantepago),""!=s.filtro.razonsocialproveedor&&(t.RazonSocialProveedor=s.filtro.razonsocialproveedor),""!=s.filtro.rucproveedor&&(t.RucProveedor=s.filtro.rucproveedor),"NONE"!=s.filtro.estado&&(t.Estado=s.filtro.estado),"NONE"!=s.filtro.moneda&&(t.Moneda=s.filtro.moneda),s.filtro.fechaemisioninicio){var r=DatatableFunctions.ConvertStringToDatetime(s.filtro.fechaemisioninicio);t.FechaEmision_inicio=DatatableFunctions.FormatDatetimeForMicroService(r)}if(s.filtro.fechaemisionfin){var a=DatatableFunctions.AddDayEndDatetime(DatatableFunctions.ConvertStringToDatetime(s.filtro.fechaemisionfin));t.FechaEmision_fin=DatatableFunctions.FormatDatetimeForMicroService(a)}t.column_names="IdComprobante,NumeroFactura,RazonSocialProveedor,TipoComprobante,DocumentoErp,FormaPago,Total,Moneda,Estado,FechaEmision,FechaProgramadaPago,FechaPago,Observaciones,ObservacionesPago"}},columns:[{data:"NumeroFactura",name:"NumeroFactura"},{data:"NumeroFactura",name:"NumeroFactura"},{data:"RazonSocialProveedor",name:"RazonSocialProveedor"},{data:"TipoComprobante",name:"TipoComprobante"},{data:"DocumentoErp",name:"DocumentoErp"},{data:"FormaPago",name:"FormaPago"},{data:"Total",name:"Total"},{data:"Estado",name:"Estado"},{data:"FechaEmision",name:"FechaEmision"},{data:"FechaProgramadaPago",name:"FechaProgramadaPago",visible:!1},{data:"FechaPago",name:"FechaPago"},{data:"NumeroFactura",name:"Nota"},{data:"NumeroFactura",name:"NumeroFactura"},{data:"ObservacionesPago",name:"ObservacionesPago",visible:!1},{data:"Observaciones",name:"Observaciones",visible:!1}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5,6,7,8,9,10,11,12]},{render:function(t,r,a){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" name="optionsCheckboxes"></label></div></div>'},targets:0},{render:function(t,r,a){return a.Moneda+" "+a.Total},targets:6},{render:function(t,r,a){return'<div class="text-center"><a class="editar" href="/factura/comprador/formulario/'+a.IdComprobante+'" row-id="'+a.IdComprobante+'"><button class="btn btn-simple btn-info btn-icon edit" rel="tooltip" title="Ver" data-placement="left"><i class="material-icons">visibility</i></button></a></div>'},targets:12},{render:function(t,r,a){return'<a data-toggle="modal" class="observaciones" data-target="#mdlObservaciones" style="cursor:hand">Observaciones</a>'},targets:11}]}),d.on("click",".observaciones",function(t){var r=$(this).closest("tr"),a=d.row(r).data();$("#mdlObservaciones_obs").html(a.Observaciones),$("#mdlObservaciones_obs_pago").html(null==a.ObservacionesPago?"":DatatableFunctions.ReplaceToken(a.ObservacionesPago)),t.preventDefault()}),d.on("click",".edit",function(t){var r=$(this).closest("tr");d.row(r).data();console.log("click edit",t);var a=r.find("a.editar").attr("row-id"),n=["/factura/comprador/formulario",a];s.navigate(n),t.preventDefault()}),d.on("click",".buscar-propuesta",function(t){var r=$(this).closest("tr"),a=(d.row(r).data(),["/factura/comprador/buscar"]);s.navigate(a),t.preventDefault()})}var o=a("./node_modules/@angular/core/@angular/core.es5.js"),e=a("./node_modules/@angular/router/@angular/router.es5.js"),i=a("./src/app/utils/app.utils.ts"),l=a("./src/app/service/masterservice.ts"),c=a("./src/app/utils/app.constants.ts");a.d(r,"a",function(){return p});var s,d,u=this&&this.__decorate||function(t,r,a,n){var o,e=arguments.length,i=e<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,a,n);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(i=(e<3?o(i):e>3?o(r,a,i):o(r,a))||i);return e>3&&i&&Object.defineProperty(r,a,i),i},b=this&&this.__metadata||function(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)},p=function(){function t(t,r,a){this.router=t,this.route=r,this._masterService=a,this.util=new i.a(this.router,this._masterService)}return t.prototype.navigate=function(t){this.router.navigate(t,{relativeTo:this.route})},t.prototype.validarfiltros=function(){if(null!=this.filtro.fechaemisioninicio&&""!=this.filtro.fechaemisioninicio.toString()&&null!=this.filtro.fechaemisionfin&&""!=this.filtro.fechaemisionfin.toString()){var t=DatatableFunctions.ConvertStringToDatetime(s.filtro.fechaemisioninicio),r=DatatableFunctions.ConvertStringToDatetime(s.filtro.fechaemisionfin);if(DatatableFunctions.FormatDatetimeForMicroService(t)>DatatableFunctions.FormatDatetimeForMicroService(r))return swal({text:"El rango de Fechas de creación seleccionado no es correcto.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1}return!0},t.prototype.clicked=function(t){this.validarfiltros()&&d.ajax.reload(),t.preventDefault()},t.prototype.limpiar=function(t){this.filtroDefecto(),setTimeout(function(){$("input").each(function(){$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")})},200),t.preventDefault()},t.prototype.filtroDefecto=function(){var t=new Date;t.setMonth(t.getMonth()-1),this.filtro={nrocomprobantepago:"",razonsocialproveedor:"",rucproveedor:"",estado:"NONE",moneda:"NONE",fechaemisioninicio:t,fechaemisionfin:new Date,tipoemisionfisico:!0,tipoemisionelectronico:!0}},t.prototype.ngOnInit=function(){s=this,this.filtroDefecto(),this.util.listMonedas(function(t){s.listMonedaCombo=t}),this.util.listEstadoCP(function(t){s.listEstadoCombo=t})},t.prototype.ngAfterViewInit=function(){n(),DatatableFunctions.registerCheckAll()},t}();p=u([a.i(o.Component)({selector:"facturacompradorbuscar-cmp",template:a("./src/app/factura/comprador/buscar/facturacompradorbuscar.component.html"),providers:[l.a]}),b("design:paramtypes",["function"==typeof(f=void 0!==e.b&&e.b)&&f||Object,"function"==typeof(m=void 0!==e.c&&e.c)&&m||Object,"function"==typeof(g=void 0!==l.a&&l.a)&&g||Object])],p);var f,m,g},"./src/app/factura/comprador/formulario/facturacompradorformulario.component.html":function(t,r){t.exports='<div class="main-content">\r\n  <div class="container-fluid">\r\n    <div class="row">\r\n      <div class="col-sm-12">\r\n        <div class="card">\r\n          <form method="#" action="#">\r\n            <div class="card-header card-header-text" data-background-color="blue">\r\n              <h4 class="card-title">Comprobante de Pago</h4>\r\n            </div>\r\n            <div class="card-content" id="secCabecera">\r\n              <div class="card-header">\r\n                <h4 class="card-title">Comprobante de Pago Cabecera</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-8 col-sm-offset-2">\r\n                    <div class="row">\r\n                      <div class="col-sm-10">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">RUC Cliente \r\n                          </label>\r\n                          <input name="txtRucCliente" type="text" readonly="true" value="PE122565752" class="form-control">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-2">\r\n                        <button data-toggle="modal" data-target="#mdlBuscarCliente" class="btn btn-fill btn-default" disabled>Buscar</button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-8 col-sm-offset-2">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Razón Social Cliente \r\n                      </label>\r\n                      <input name="txtRazonSocialCliente" type="text" readonly="true" value="CENTENARIO RETAIL S.A.C." class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="card-content" id="secFactura">\r\n              <div class="card-header">\r\n                <h4 class="card-title">Comprobante de Pago Cabecera</h4>\r\n              </div>\r\n              <div class="card-content">\r\n\r\n\r\n                <div class="row">\r\n                  <div class="col-sm-1">\r\n\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">No.  <span class="star">*</span></label>\r\n                      <input name="nocomprobantepago1" id="nocomprobantepago1" [(ngModel)]="factura.nocomprobantepago1" pattern="[a-zA-Z0-9\\s]+"\r\n                        type="text" maxlength="3" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class="col-sm-3">\r\n\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Comprobante de Pago  <span class="star">*</span></label>\r\n                      <input name="nocomprobantepago2" id="nocomprobantepago2" [(ngModel)]="factura.nocomprobantepago2" pattern="[a-zA-Z0-9\\s]+"\r\n                        type="text" maxlength="7" disabled class="form-control">\r\n\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">RUC Org. Compradora <span class="star">*</span>\r\n                      </label>\r\n                      <input name="ruccliente" [(ngModel)]="factura.ruccliente" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Razón Social Org. Compradora <span class="star">*</span>\r\n                      </label>\r\n                      <input name="razonsocialcliente" [(ngModel)]="factura.razonsocialcliente" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  \r\n                </div>\r\n                <div class=\'row\'>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Tipo de Emisión\r\n                      </label>\r\n                      <div class="radio">\r\n                        <label> Físico\r\n                          <input type="radio" [checked]="factura.esfisico" name="optionsCheckboxes" disabled>\r\n                          </label>\r\n                        <label> Electrónico\r\n                          <input type="radio" [checked]="factura.eselectronico" name="optionsCheckboxes" disabled>\r\n                          </label>\r\n                      </div>\r\n\r\n\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">RUC Org. Proveedora <span class="star">*</span>\r\n                      </label>\r\n                      <input name="rucproveedor" [(ngModel)]="factura.rucproveedor" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Razón Social Org. Proveedora <span class="star">*</span>\r\n                      </label>\r\n                      <input name="razonsocialproveedor" [(ngModel)]="factura.razonsocialproveedor" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha Emisión <span class="star">*</span>\r\n                      </label>\r\n                      <input name="fechaemision" [(ngModel)]="factura.fechaemision" id="txtFechaEmision" datepicker type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Tipo Documento <span class="star">*</span>\r\n                      </label>\r\n                      <select id="tipodocumento" name="tipodocumento" class="form-control" [(ngModel)]="factura.tipodocumento" disabled>\r\n                        <option disabled=""></option>\r\n                        <option value="Factura" selected> Factura </option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Estado\r\n                      </label>\r\n                      <select id="estadocomprador" [(ngModel)]="factura.estadocomprador" name="estadocomprador" class="form-control" disabled>\r\n                        <option disabled="" selected=""></option>\r\n                        <option *ngFor="let opt of listEstadoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  \x3c!--\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha Vencimiento\r\n                      </label>\r\n                      <input name="txtFechaVencimiento" id="txtFechaProgPago" datepicker [(ngModel)]="factura.fechavencimiento" type="text" disabled\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>!--\x3e\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha de Recepción\r\n                      </label>\r\n                      <input name="fecharecepcion" id="fecharecepcion" datepicker [(ngModel)]="factura.fecharecepcion" type="text" disabled\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha de Registro\r\n                      </label>\r\n                      <input name="fecharegistro" id="fecharegistro" datepicker [(ngModel)]="factura.fecharegistro" type="text" disabled\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Orden de Compra/Servicio/Contrato\r\n                      </label>\r\n                      <input name="ordencompraserviciocontrato" [(ngModel)]="factura.ordencompraserviciocontrato" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Guías de Despacho\r\n                      </label>\r\n                      <input name="guiasdespacho" type="text" [(ngModel)]="factura.guiasdespacho" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">SubTotal \r\n                      </label>\r\n                      <input name="subtotal" [(ngModel)]="factura.subtotal" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Total Descuento \r\n                      </label>\r\n                      <input name="dsctomonto" [(ngModel)]="factura.dsctomonto" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Documento ERP \r\n                      </label>\r\n                      <input name="documentoerp" type="text" [(ngModel)]="factura.documentoerp" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Forma de Pago\r\n                      </label>\r\n                      <input name="formapago" type="text" [(ngModel)]="factura.formapago" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Moneda\r\n                          </label>\r\n                      <select [(ngModel)]="factura.moneda" name="moneda" class="form-control" disabled>\r\n                        <option disabled="" selected=""></option>\r\n                        <option *ngFor="let opt of listMonedaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                      </select>\r\n\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Bien/Servicio afecto a Detracción\r\n                      </label>\r\n                      <input name="bienserviciodetraccion" type="text" disabled [(ngModel)]="factura.bienserviciodetraccion" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Condición Pago\r\n                      </label>\r\n                      <input name="condicionpago" type="text" [(ngModel)]="factura.condicionpago" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="card">\r\n                  <div class="card-header card-header-icon" data-background-color="blue">\r\n                    <i class="material-icons">assignment</i>\r\n                  </div>\r\n                  <div class="card-content">\r\n                    <h4 class="card-title">Detalle</h4>\r\n\r\n                    <div class="material-datatables table-responsive" style="display:block">\r\n                      <table id="dtArticulos" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                        <thead>\r\n                          <tr>\r\n\r\n                            <th width="10%">No. Item</th>\r\n                            <th width="10%">No. Guía</th>\r\n                            <th width="15%">No. Orden de Compra</th>\r\n                            <th width="10%">No. Item OC</th>\r\n\r\n                            <th width="20%">Descripción del Producto</th>\r\n\r\n                            <th width="10%">Cantidad</th>\r\n                            <th width="15%">Importe Total Item</th>\r\n\r\n                          </tr>\r\n                        </thead>\r\n                      </table>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="row">\r\n              <div class="col-sm-4 col-sm-offset-8">\r\n                <div class="form-group label-floating">\r\n                  <label class="control-label">Sub-Total\r\n                  </label>\r\n                  <input name="subtotal" type="text" [(ngModel)]="factura.subtotal" disabled class="form-control">\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="row">\r\n              <div class="col-sm-4 col-sm-offset-8">\r\n                <div class="form-group label-floating">\r\n                  <label class="control-label">IGV\r\n                  </label>\r\n                  <input name="igv" type="text" [(ngModel)]="factura.igv" disabled class="form-control">\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="row">\r\n              <div class="col-sm-4 col-sm-offset-8">\r\n                <div class="form-group label-floating">\r\n                  <label class="control-label">Total\r\n                  </label>\r\n                  <input name="txtTotal" type="text" [(ngModel)]="factura.total" disabled class="form-control">\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="card-content">\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group">\r\n                      <label class="control-label">{{factura.totaltexto}}</label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="row">\r\n                <div class="col-md-12">\r\n                  <div class="card">\r\n                    <div class="card-header card-header-icon" data-background-color="blue">\r\n                      <i class="material-icons">assignment</i>\r\n                    </div>\r\n                    <div class="card-content">\r\n                      <h4 class="card-title">Archivos Adjuntos</h4>\r\n                      <div class="toolbar" [hidden]="toggleButton">\r\n                        <div class="row">\r\n                          <div class="col-sm-12">\r\n                            <nav class="navbar navbar-info" role="navigation">\r\n                              <div class="container-fluid">\r\n                                <div class="navbar-header">\r\n                                  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">\r\n                                            <span class="sr-only">Acciones</span>\r\n                                            <span class="icon-bar"></span>\r\n                                            <span class="icon-bar"></span>\r\n                                            <span class="icon-bar"></span>\r\n                                        </button>\r\n                                  <a class="navbar-brand disabled"></a>\r\n                                </div>\r\n                                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n                                  <ul class="nav navbar-nav">\r\n                                    <li><a href="#mdlArchivosAdjuntos" data-toggle="modal" (click)="agregarArchivo($event)" data-target="#mdlArchivosAdjuntos">Agregar</a></li>\r\n                                    <li><a (click)="eliminarArchivos($event)">Eliminar</a></li>\r\n                                  </ul>\r\n                                </div>\r\n                              </div>\r\n                            </nav>\r\n\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div class="material-datatables table-responsive">\r\n                        <table id="dtArchivos" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                          <thead>\r\n                            <tr>\r\n                              <th class="disabled-sorting text-right">\r\n\r\n                              </th>\r\n                              <th width="20%">Nombre</th>\r\n                              <th width="60%">Descripción</th>\r\n                              <th class="disabled-sorting text-center" width="20%">Acciones</th>\r\n                            </tr>\r\n                          </thead>\r\n\r\n\r\n                        </table>\r\n                      </div>\r\n                    </div>\r\n                    \x3c!-- end content--\x3e\r\n                  </div>\r\n                  \x3c!--  end card  --\x3e\r\n                </div>\r\n                \x3c!-- end col-md-12 --\x3e\r\n              </div>\r\n              <div class="card-header">\r\n                <h4 class="card-title">Datos de Pago</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Tipo Pago\r\n                      </label>\r\n                      <input name="tipopago" type="text" [(ngModel)]="factura.tipopago" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Nro. Documento  \r\n                      </label>\r\n                      <input name="nrodocumento" type="text" [(ngModel)]="factura.nrodocumento" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Banco \r\n                      </label>\r\n                      <input name="txtBabanconco" type="text" [(ngModel)]="factura.banco" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha de Pago\r\n                      </label>\r\n                      <input name="fechapago" type="text" [(ngModel)]="factura.fechapago" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Monto\r\n                      </label>\r\n                      <input name="monto" type="text" [(ngModel)]="factura.monto" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Moneda \r\n                      </label>\r\n                      <input name="datospagomoneda" type="text" [(ngModel)]="factura.datospagomoneda" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Nro. Cheque\r\n                      </label>\r\n                      <input name="nrocheque" type="text" [(ngModel)]="factura.nrocheque" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="card-header">\r\n                <h4 class="card-title">Datos de Descuento por Retención o Detracción</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Tipo Descuento\r\n                      </label>\r\n                      <input name="tipodescuento" type="text" [(ngModel)]="factura.tipodescuento" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Nro. Comprobante\r\n                      </label>\r\n                      <input name="nrocomprobante" type="text" [(ngModel)]="factura.nrocomprobante" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Monto\r\n                      </label>\r\n                      <input name="dsctomonto" type="text" [(ngModel)]="factura.dsctomonto" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Moneda\r\n                      </label>\r\n                      <input name="dsctomoneda" type="text" [(ngModel)]="factura.dsctomoneda" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="card-header">\r\n                <h4 class="card-title">Observaciones Comprobante de Pago</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">\r\n                      </label>\r\n                      <input name="observaciones" type="text" [(ngModel)]="factura.observaciones" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="card-header">\r\n                <h4 class="card-title">Observaciones de Pago</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-12">\r\n                    <div [innerHTML]="factura.obscomprobantepago" style="text-align: left;">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n             \r\n            </div>\r\n\r\n            <div class="card-footer">\r\n              <button class="btn btn-fill btn-default pull-right" routerLink="/factura/comprador/buscar">Regresar</button>\r\n              <button class="btn btn-fill btn-default pull-right" (click)="print($event)" *ngIf="id!=\'0\'">Imprimir</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div id="mdlBuscarCliente" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog modal-lg" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Buscar Cliente</h4>\r\n\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Nombre de Compañía</label>\r\n                <input type="text" id="txtBuscarNroOC" name="txtBuscarNroOC" class="form-control" value="" disabled>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-1">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label"></label>\r\n                <select name="cmbPais" class="form-control" disabled>\r\n                 <option Value="PE">PE</option>\r\n               </select>\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-5">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Código</label>\r\n                <input type="text" id="txtBuscarCodCliente" name="txtBuscarCodCliente" class="form-control" value="" disabled>\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-2">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label"></label>\r\n                <button type="button" class="btn btn-default" data-dismiss="modal">Buscar</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="material-datatables table-responsive">\r\n                <table id="dtBuscarCliente" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                  <thead>\r\n                    <tr>\r\n                      <th class="disabled-sorting text-right">\r\n\r\n                      </th>\r\n                      <th style="width:50%">Nombre de Compañía</th>\r\n                      <th style="width:50%">Código</th>\r\n                    </tr>\r\n                  </thead>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Seleccionar</button>\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n  <div id="mdlGuias" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog modal-lg" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Buscar Guía</h4>\r\n\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-sm-6">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Nro. Guía</label>\r\n                <input type="text" id="txtBuscarNroOC" name="txtBuscarNroOC" class="form-control" value="" disabled>\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-6">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Estado</label>\r\n                <select name="cmbBuscarEstado" id="cmbBuscarEstado" class="form-control" disabled>\r\n                  <option Value="Aceptada">Aceptada</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-5">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Emitida/Enviada después de</label>\r\n                <input type="text" id="txtGuiaEmitidaDesde" name="txtGuiaEmitidaDesde" datepicker class="form-control" value="" disabled>\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-5">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Emitida/Enviada antes de</label>\r\n                <input type="text" id="txtGuiaEmitidaHasta" name="txtGuiaEmitidaHasta" datepicker class="form-control" value="" disabled>\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-2">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label"></label>\r\n                <button type="button" class="btn btn-default" data-dismiss="modal">Buscar</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="material-datatables table-responsive">\r\n                <table id="dtBuscarGuia" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                  <thead>\r\n                    <tr>\r\n                      <th class="disabled-sorting text-right">\r\n                        <div class="checkbox">\r\n                          <label>\r\n                          <input type="checkbox" name="optionsCheckboxes">\r\n                          </label>\r\n                        </div>\r\n                      </th>\r\n                      <th>N° Guía</th>\r\n                      <th>Estado (proveedor/cliente)</th>\r\n                      <th>Proveedor</th>\r\n                      <th>Fecha de Emisión</th>\r\n                      <th>Fecha de Inicio de Traslado</th>\r\n                      <th>Fecha Probable de Arribo</th>\r\n                    </tr>\r\n                  </thead>\r\n\r\n\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Añadir</button>\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n</div>\r\n\r\n<div style="display:none">\r\n    <div id="print-section" style=\'font-family: Arial, Helvetica, sans-serif;color: #000;font-size: 12px;\'>\r\n      <table width="100%" cellpadding="0" cellspacing="0" align="center" bgcolor="#ffffff" style=\'font-family: Arial, Helvetica, sans-serif;color: #000;font-size: 12px;\'>\r\n        <tbody>\r\n          <tr>\r\n            <td align="center">\r\n  \r\n  \r\n              <table width="900" cellpadding="0" cellspacing="0" border="0" bgcolor="#fff">\r\n                <tbody>\r\n                  <tr>\r\n                    <td colspan="2" bgcolor="#fff" align="center" valign="middle">\r\n                      Imprimir Comprobante de Pago Nº{{factura.nocomprobantepago}}<br/><br/>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td colspan="2" bgcolor="#fff" align="center" valign="top" style="font-size: 20px">\r\n                      <b>IMPRESION DE COMPROBANTE DE PAGO</b><br><br>\r\n                    </td>\r\n                  </tr>\r\n  \r\n  \r\n  \r\n  \r\n                </tbody>\r\n              </table>\r\n  \r\n              <table width="900" class="print-table" cellpadding="5" border=\'0\' style="border:0px solid #999;border-collapse: collapse;"\r\n                cellspacing="0" bgcolor="#fff">\r\n                <tbody>\r\n  \r\n                  <tr style="border:1px solid #999;">\r\n                    <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n  \r\n                    </td>\r\n                    <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      {{factura.razonsocialproveedor}}\r\n                    </td>\r\n                    <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      {{factura.rucproveedor}}<br/> {{factura.tipodocumento_text}}\r\n                      <br/>\r\n                      <b> {{factura.nocomprobantepago}}</b><br/>\r\n  \r\n                    </td>\r\n                  </tr>\r\n                  <tr style="border:1px solid #999;">\r\n                    <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                      <b style="font-size: 20px; color:#0067a3">Datos Generales:</b>\r\n                    </td>\r\n                  </tr>\r\n                  <tr style="border:1px solid #999;">\r\n                    <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b> Cliente:</b>\r\n                    </td>\r\n  \r\n                    <td colspan="3" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      {{factura.razonsocialcliente}}\r\n                    </td>\r\n  \r\n                    <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b>  RUC N°:</b>\r\n                    </td>\r\n  \r\n                    <td colspan="3" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      {{factura.ruccliente}}\r\n                    </td>\r\n  \r\n                    <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b> Estado:</b>\r\n                    </td>\r\n                    <td colspan="3" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      {{factura.estado_text}}\r\n                    </td>\r\n                  </tr>\r\n                  <tr style="border:1px solid #999;">\r\n                    <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b> Fecha de Emision:</b>\r\n                    </td>\r\n  \r\n                    <td colspan="3" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      {{factura.fechaemision}}\r\n                    </td>\r\n  \r\n                    <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b> Guias de Despacho:</b>\r\n                    </td>\r\n  \r\n                    <td colspan="7" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      {{factura.guiasdespacho}}\r\n                    </td>\r\n  \r\n  \r\n                  </tr>\r\n                  <tr style="border:1px solid #999;">\r\n                    <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                      <b>Orden de Compra/Servicio/Contrato:</b> {{factura.ordencompraserviciocontrato}}\r\n                    </td>\r\n                  </tr>\r\n  \r\n                  <tr style="border:1px solid #999;">\r\n                    <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b> Fecha de Vencimiento:</b> {{factura.fecharegistro}}\r\n                    </td>\r\n  \r\n  \r\n                    <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b>  Fecha de Recepcion:</b> {{factura.fecharecepcion}}\r\n                    </td>\r\n  \r\n  \r\n  \r\n                    <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b> Fecha de Registro:</b> {{factura.fecharegistro}}\r\n                    </td>\r\n  \r\n                  </tr>\r\n  \r\n                  <tr style="border:1px solid #999;">\r\n                    <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                      <b>Orden de Compra/Servicio/Contrato:</b> {{factura.ordencompraserviciocontrato}}\r\n                    </td>\r\n                  </tr>\r\n  \r\n                  <tr style="border:1px solid #999;">\r\n                    <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b> Documento ERP:</b> {{factura.documentoerp}}\r\n                    </td>\r\n  \r\n  \r\n                    <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b>  Forma de Pago:</b> {{factura.formapago}}\r\n                    </td>\r\n  \r\n  \r\n  \r\n                    <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b> Moneda:</b> {{factura.moneda_text}}\r\n                    </td>\r\n  \r\n                  </tr>\r\n                  <tr style="border:0px solid #999;">\r\n                    <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:0px solid #999;">\r\n                      &nbsp;\r\n                    </td>\r\n                  </tr>\r\n                  <tr style="border:1px solid #999;">\r\n                    <td colspan="12" bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                      <b style="font-size: 20px; color:#0067a3">Detalle</b>\r\n                    </td>\r\n                  </tr>\r\n  \r\n                  <tr style="border:1px solid #999;">\r\n                    <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      <b>No. <br>Item</b>\r\n                    </td>\r\n                    <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      <b>Num. Guía</b>\r\n                    </td>\r\n  \r\n                    <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      <b>Num. OC</b>\r\n                    </td>\r\n                    <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      <b>Num. Item OC</b>\r\n                    </td>\r\n                    <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      <b>Descripción del Producto</b>\r\n                    </td>\r\n  \r\n                    <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      <b>Cantidad</b>\r\n                    </td>\r\n  \r\n                    <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      <b>Precio Unitario Referencial</b>\r\n                    </td>\r\n  \r\n                    <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      <b>Importe Total Item</b>\r\n                    </td>\r\n  \r\n  \r\n                  </tr>\r\n  \r\n                  <tr *ngFor="let row of factura.detallefactura" style="border:1px solid #999;">\r\n                    <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      {{row.noitem}}\r\n                    </td>\r\n                    <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      {{row.noguia}}\r\n                    </td>\r\n  \r\n                    <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      {{row.nooc}}\r\n                    </td>\r\n                    <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      {{row.noitemoc}}\r\n                    </td>\r\n                    <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      \r\n                      <div [innerHTML]="row.descproducto" style="text-align: center;">\r\n                        </div>\r\n                    </td>\r\n  \r\n                    <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      {{row.cantidad}}\r\n                    </td>\r\n  \r\n                    <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      {{row.preciounitreferencial}}\r\n                    </td>\r\n  \r\n                    <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      {{row.importetotalitem}}\r\n                    </td>\r\n  \r\n  \r\n                  </tr>\r\n                  <tr style="border:0px solid #999;">\r\n                    <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:0px solid #999;">\r\n                      &nbsp;\r\n                    </td>\r\n                  </tr>\r\n                  <tr style="border:0px solid #999;">\r\n                    <td colspan="7" bgcolor="#fff" align="center" valign="middle" style="border:0px solid #999;">\r\n                      &nbsp;\r\n                    </td>\r\n  \r\n                    <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      <b> Sub-Total:</b>\r\n                    </td>\r\n  \r\n                    <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      {{factura.moneda}}\r\n                    </td>\r\n  \r\n                    <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      {{factura.subtotal}}\r\n                    </td>\r\n  \r\n  \r\n                  </tr>\r\n  \r\n                  <tr style="border:0px solid #999;">\r\n                    <td colspan="7" bgcolor="#fff" align="center" valign="middle" style="border:0px solid #999;">\r\n                      &nbsp;\r\n                    </td>\r\n  \r\n                    <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      <b> IGV:</b>\r\n                    </td>\r\n  \r\n                    <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      {{factura.moneda}}\r\n                    </td>\r\n  \r\n                    <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      {{factura.igv}}\r\n                    </td>\r\n  \r\n  \r\n                  </tr>\r\n  \r\n                  <tr style="border:0px solid #999;">\r\n                    <td colspan="7" bgcolor="#fff" align="center" valign="middle" style="border:0px solid #999;">\r\n                      &nbsp;\r\n                    </td>\r\n  \r\n                    <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      <b> Total:</b>\r\n                    </td>\r\n  \r\n                    <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      {{factura.moneda}}\r\n                    </td>\r\n  \r\n                    <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                      {{factura.total}}\r\n                    </td>\r\n  \r\n  \r\n                  </tr>\r\n  \r\n                  <tr style="border:0px solid #999;">\r\n                    <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:0px solid #999;">\r\n                      {{factura.totaltexto}} SON: NUEVE MIL QUINIENTOS TRES CON 48/100 SOLES\r\n                    </td>\r\n                  </tr>\r\n  \r\n                  <tr style="border:1px solid #999;">\r\n                    <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                      <b style="font-size: 20px; color:#0067a3">Datos de Pago:</b>\r\n                    </td>\r\n                  </tr>\r\n  \r\n                  <tr style="border:1px solid #999;">\r\n                    <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b> Tipo Pago:</b> {{factura.tipopago}}\r\n                    </td>\r\n                    <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b> Nro. Documento:</b> {{factura.nrodocumento}}\r\n                    </td>\r\n                    <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b> Banco:</b> {{factura.banco}}\r\n                    </td>\r\n  \r\n                  </tr>\r\n  \r\n                  <tr style="border:1px solid #999;">\r\n                    <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b> Fecha de Pago:</b> {{factura.fechapago}}\r\n                    </td>\r\n                    <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b> Monto:</b> {{factura.monto}}\r\n                    </td>\r\n                    <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b> Moneda:</b> {{factura.datospagomoneda}}\r\n                    </td>\r\n  \r\n                  </tr>\r\n                  <tr style="border:1px solid #999;">\r\n                    <td colspan="12" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b> Nro. Cheque:</b> {{factura.nrocheque}}\r\n                    </td>\r\n                  </tr>\r\n  \r\n                  <tr style="border:1px solid #999;">\r\n                    <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                      <b style="font-size: 20px; color:#0067a3">Datos de Descuentos por Retención o Detracción:</b>\r\n                    </td>\r\n                  </tr>\r\n                  <tr style="border:1px solid #999;">\r\n                    <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b> Tipo Descuento:</b> {{factura.tipodescuento}}\r\n                    </td>\r\n                    <td colspan="8" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b>Nro. Comprobante:</b> {{factura.nrocomprobante}}\r\n                    </td>                \r\n                  </tr>\r\n  \r\n                  <tr style="border:1px solid #999;">\r\n                    <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b> Monto:</b> {{factura.dsctomonto}}\r\n                    </td>\r\n                    <td colspan="8" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                      <b>Moneda:</b> {{factura.dsctomoneda}}\r\n                    </td>                \r\n                  </tr>\r\n                  <tr style="border:0px solid #999;">\r\n                    <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:0px solid #999;">\r\n                      &nbsp;\r\n                    </td>\r\n                  </tr>\r\n  \r\n                  <tr style="border:1px solid #999;">\r\n                    <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                      <b style="font-size: 20px; color:#0067a3">Observaciones Comprobante de Pago:</b>\r\n                    </td>\r\n                  </tr>\r\n  \r\n                  <tr style="border:1px solid #999;" cellpadding="0" >\r\n                    <td colspan="12" bgcolor="#fff"  cellpadding="0" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                      <b style="font-size: 20px; color:#0067a3">Observaciones de Pago:</b>\r\n                      \r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n              <div [innerHTML]="factura.obscomprobantepago" style="text-align: left; align-content:center; width:900px;">\r\n              </div>\r\n  \r\n  \r\n  \r\n  \r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n  \r\n    </div>\r\n  </div>'},"./src/app/factura/comprador/formulario/facturacompradorformulario.component.ts":function(t,r,a){"use strict";var n=a("./node_modules/@angular/router/@angular/router.es5.js"),o=a("./node_modules/@angular/core/@angular/core.es5.js"),e=a("./src/app/model/factura.ts"),i=a("./src/app/service/masterservice.ts"),l=a("./src/app/service/facturaservice.ts"),c=a("./src/app/utils/app.utils.ts"),s=a("./src/app/service/adjuntoservice.ts");a.d(r,"a",function(){return g});var d,u,b,p,f=this&&this.__decorate||function(t,r,a,n){var o,e=arguments.length,i=e<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,a,n);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(i=(e<3?o(i):e>3?o(r,a,i):o(r,a))||i);return e>3&&i&&Object.defineProperty(r,a,i),i},m=this&&this.__metadata||function(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)},g=function(){function t(t,r,a,n,o){this.router=t,this.route=r,this._masterService=a,this._dataServiceAdjunto=n,this._dataService=o,this.step=1,this.id="",this.toggleButton=!0,this.activatedRoute=r,this.listDetalleFactura=[],this.util=new c.a(this.router,this._masterService)}return t.prototype.print=function(t){this.factura.tipodocumento_text=$("#tipodocumento option:selected").text(),this.factura.estado_text=$("#estadocomprador option:selected").text(),this.factura.moneda_text=$("#moneda option:selected").text(),setTimeout(function(){$("div#print-section").printArea({popTitle:"Comprobante de Pago",mode:"iframe",popClose:!1})},200)},t.prototype.ngOnInit=function(){var t=this;this.factura=new e.a,this.activatedRoute.params.subscribe(function(r){t.id=r.id}),"0"!=this.id?(this.toggleButton=!0,$("#btnAgregarItemOC").addClass("disabled"),$("#btnEliminarItemOC").addClass("disabled"),$("#secCabecera").hide(),$("#secFactura").show()):(this.toggleButton=!1,$("#secCabecera").show(),$("#secFactura").hide()),this.listDetalleFactura=[{noitem:1,noguia:"F003-00120347",nooc:"4510875643",noitemoc:"00010",noparte:"",descproducto:"ACEITE DE SOYA",preciounitreferencial:"988.9700",cantidad:"28370.0000",importetotalitem:"28,057.0800"}],this.listBuscarGuia=[{id:1,nroguia:"017-0002449",estado:"Facturada / Facturada",proveedor:"ASAP CONSULTING GROUP S.A.C.",fechaemision:"31/05/2010",fechainiciotraslado:"31/05/2010",fechaprobablearribo:"31/05/2010",documentoerp:"5045896541"},{id:2,nroguia:"7878-766666666",estado:"Recepción Total / Activa",proveedor:"ASAP CONSULTING GROUP S.A.C.",fechaemision:"31/05/2010",fechainiciotraslado:"31/05/2010",fechaprobablearribo:"31/05/2010",documentoerp:"5045896542"},{id:3,nroguia:"7878-766666666",estado:"Anulada / Activa",proveedor:"ASAP CONSULTING GROUP S.A.C.",fechaemision:"31/05/2010",fechainiciotraslado:"31/05/2010",fechaprobablearribo:"31/05/2010",documentoerp:"5045896543"},{id:4,nroguia:"00-2010053101",estado:"Activa / Activa",proveedor:"FERREYROS",fechaemision:"31/05/2010",fechainiciotraslado:"31/05/2010",fechaprobablearribo:"31/05/2010",documentoerp:"5045896544"}],this.listBuscarCliente=[{id:1,nombre:"CENTENARIO RETAIL S.A.C.",ruc:"122565752",codigo:""}],d=this,this.util.listEstadoCP(function(t){d.listEstadoCombo=t}),this.util.listMonedas(function(t){d.listMonedaCombo=t})},t.prototype.ngAfterViewInit=function(){var t=this;DatatableFunctions.ModalSettings(),this._dataService.obtener(this.id,"C").subscribe(function(r){t.factura=r,setTimeout(function(){$("input").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("select").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("textarea").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),d.DatatableConfig(),b.ajax.reload()},100)},function(t){return console.log(t)},function(){}),b=$("#dtArchivos").on("draw.dt",function(t,r,a){DatatableFunctions.initDatatable(t,r,a,b)}).DataTable({ajax:function(t,r,a){r({data:d.factura.docadjuntos})},columns:[{data:"id"},{data:"nombre"},{data:"descripcion"},{data:"id"}],columnDefs:[{className:"text-center",targets:[1,2,3]},{render:function(t,r,a){return""},targets:0,orderable:!1},{render:function(t,r,a){return'<a class="editar" href="javascript:void(0);" row-id="'+a.id+'"><button class="btn btn-simple btn-info btn-icon download" rel="tooltip" title="Bajar Archivo" data-placement="left"><i class="material-icons">get_app</i></button></a><button class="btn btn-simple btn-danger btn-icon remove" rel="tooltip" title="Eliminar" data-placement="left"><i class="material-icons">delete</i></button>'},targets:3}]}),b.on("click",".download",function(t){var r=$(this).closest("tr"),a=r.find("a.editar").attr("row-id"),n=d.factura.docadjuntos;p=n.find(function(t){return t.id==a}),d._dataServiceAdjunto.DescargarArchivo(p).subscribe(function(t){saveAs(t,p.nombre)},function(t){return console.log(t)},function(){}),t.preventDefault()}),DatatableFunctions.registerCheckAll()},t.prototype.ngOnChanges=function(t){},t.prototype.registrarFactura=function(t){$("#secCabecera").hide(),$("#secFactura").show(),this.step=2},t.prototype.habilitarEdicion=function(t){this.toggleButton=!1,$("#btnAgregarItemOC").removeClass("disabled"),$("#btnEliminarItemOC").removeClass("disabled")},t.prototype.DatatableConfig=function(){u=$("#dtArticulos").DataTable({ajax:function(t,r,a){r({data:d.factura.detallefactura})},createdRow:function(t,r,a){"10"===r.posicion||"20"===r.posicion?$(t).addClass("highlight"):$("td",t).eq(0).addClass("text-center")},columns:[{data:"noitem"},{data:"noguia"},{data:"nooc"},{data:"noitemoc"},{data:"descproducto"},{data:"cantidad"},{data:"importetotalitem"}],columnDefs:[{className:"text-center",targets:[0,1,2,3,4,5,6]}]})},t}();g=f([a.i(o.Component)({selector:"facturacompradorformulario-cmp",template:a("./src/app/factura/comprador/formulario/facturacompradorformulario.component.html"),providers:[s.a,i.a,l.a]}),m("design:paramtypes",["function"==typeof(v=void 0!==n.b&&n.b)&&v||Object,"function"==typeof(h=void 0!==n.c&&n.c)&&h||Object,"function"==typeof(x=void 0!==i.a&&i.a)&&x||Object,"function"==typeof(y=void 0!==s.a&&s.a)&&y||Object,"function"==typeof(C=void 0!==l.a&&l.a)&&C||Object])],g);var v,h,x,y,C},"./src/app/factura/factura.module.ts":function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=a("./node_modules/@angular/core/@angular/core.es5.js"),o=a("./node_modules/@angular/router/@angular/router.es5.js"),e=a("./node_modules/@angular/common/@angular/common.es5.js"),i=a("./node_modules/@angular/forms/@angular/forms.es5.js"),l=a("./src/app/utils/utils.module.ts"),c=a("./src/app/factura/proveedor/formulario/facturaproveedorformulario.component.ts"),s=a("./src/app/factura/comprador/formulario/facturacompradorformulario.component.ts"),d=a("./src/app/factura/proveedor/buscar/facturaproveedorbuscar.component.ts"),u=a("./src/app/factura/factura.routing.ts"),b=a("./src/app/directives/datepicker.module.ts"),p=a("./src/app/factura/comprador/buscar/facturacompradorbuscar.component.ts");a.d(r,"FacturaModule",function(){return m});var f=this&&this.__decorate||function(t,r,a,n){var o,e=arguments.length,i=e<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,a,n);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(i=(e<3?o(i):e>3?o(r,a,i):o(r,a))||i);return e>3&&i&&Object.defineProperty(r,a,i),i},m=function(){function t(){}return t}();m=f([a.i(n.NgModule)({imports:[e.CommonModule,o.a.forChild(u.a),i.a,l.a,b.a],declarations:[d.a,c.a,p.a,s.a]})],m)},"./src/app/factura/factura.routing.ts":function(t,r,a){"use strict";var n=a("./src/app/factura/proveedor/buscar/facturaproveedorbuscar.component.ts"),o=a("./src/app/factura/proveedor/formulario/facturaproveedorformulario.component.ts"),e=a("./src/app/factura/comprador/formulario/facturacompradorformulario.component.ts"),i=a("./src/app/factura/comprador/buscar/facturacompradorbuscar.component.ts"),l=a("./src/app/service/auth-guard.service.ts");a.d(r,"a",function(){return c});var c=[{path:"",children:[{path:"proveedor/formulario/:id",component:o.a,canActivate:[l.a]},{path:"proveedor/buscar",component:n.a,canActivate:[l.a]},{path:"comprador/buscar",component:i.a,canActivate:[l.a]},{path:"comprador/formulario/:id",component:e.a,canActivate:[l.a]}]}]},"./src/app/factura/proveedor/buscar/facturaproveedorbuscar.component.html":function(t,r){t.exports='<div class="main-content">\r\n    <div class="container-fluid">\r\n        <div class="row">\r\n            <div class="col-sm-12">\r\n                <div class="card">\r\n                    <form method="#" action="#">\r\n                        <div class="card-header card-header-text" data-background-color="blue">\r\n                            <h4 class="card-title">Buscar Comprobante de Pago</h4>\r\n                        </div>\r\n                        <div class="card-content">\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Número Comprobante de Pago\r\n                                        </label>\r\n                                        <input [(ngModel)]="filtro.nrocomprobantepago" name="nrocomprobantepago" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Razón Social Cliente\r\n                                        </label>\r\n                                        <input [(ngModel)]="filtro.razonsocialcliente" name="razonsocialcliente" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">RUC Cliente\r\n                                        </label>\r\n                                        <input [(ngModel)]="filtro.ruccliente" name="ruccliente" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                            <div class="row">\r\n                               \r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Emitida despues de</label>\r\n                                        <input type="text" [(ngModel)]="filtro.fechaemisioninicio" name="fechaemisioninicio" class="form-control" datepicker />\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Emitida antes de</label>\r\n                                        <input type="text" [(ngModel)]="filtro.fechaemisionfin" name="fechaemisionfin" class="form-control" datepicker />\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4" *ngIf="filtro.publicada">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Estado\r\n                                        </label>\r\n                                        <select [(ngModel)]="filtro.estado" name="estado" class="form-control">\r\n                                            <option value="NONE" selected>TODOS</option>\r\n                                            <option *ngFor="let opt of listEstadoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n\r\n\r\n\r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Moneda\r\n                                        </label>\r\n                                        <select [(ngModel)]="filtro.moneda" name="moneda" class="form-control">\r\n                                            <option value="NONE" selected>TODOS</option>\r\n                                            <option *ngFor="let opt of listMonedaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="label-on-left">Tipo de Emisión</label>\r\n                                        <div class="togglebutton">\r\n                                            <label>\r\n                                                  <input type="checkbox" [checked]="filtro.tipoemisionfisico" (change)="filtro.tipoemisionfisico = !filtro.tipoemisionfisico" > Físico\r\n                                              </label>\r\n                                            <label>\r\n                                                  <input type="checkbox" [checked]="filtro.tipoemisionelectronico"  (change)="filtro.tipoemisionelectronico = !filtro.tipoemisionelectronico" > Electrónico\r\n                                          </label>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group">\r\n                                       \r\n                                        <div class="togglebutton">\r\n                                            \r\n                                            <label>\r\n                                                <input type="checkbox" [checked]="!filtro.publicada"  (change)="filtro.publicada = !filtro.publicada;filtro.estado=\'NONE\';" > Borrador\r\n                                        </label>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                \r\n                            </div>\r\n                            <div class="row">\r\n                                    <div class="col-sm-8">\r\n                                    </div>\r\n                                    <div class="col-sm-4">\r\n                                            <div class="form-group">\r\n        \r\n                                                <button class="btn btn-default" (click)="clicked($event)">Buscar</button>\r\n                                                <button class="btn btn-default" (click)="limpiar($event)">Limpiar</button>\r\n                                            </div>\r\n                                        </div>\r\n                                </div>\r\n                            <nav class="navbar navbar-info navbar-without-margin" role="navigation">\r\n                                <div class="container-fluid">\r\n                                    <div class="navbar-header">\r\n                                        <span class="navbar-brand">Resultados</span>\r\n                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">\r\n                                            <span class="sr-only">Acciones</span>\r\n                                            <span class="icon-bar"></span>\r\n                                            <span class="icon-bar"></span>\r\n                                            <span class="icon-bar"></span>\r\n                                            \r\n                                        </button>\r\n                                        \r\n                                    </div>\r\n                                  \r\n                                </div>\r\n                            </nav>\r\n\r\n\r\n                            <div class="row">\r\n                                <div class="col-sm-6">\r\n                                </div>\r\n                                <div class="col-sm-6">\r\n                                    <div class="form-group form-group-without-margin">\r\n                                       \r\n                                        <button class="btn btn-default pull-right" *ngIf="!filtro.publicada" (click)="DescartarBorradores($event)">Descartar Borrador</button>\r\n                                        <button class="btn btn-default pull-right" [routerLink]="[\'/factura/proveedor/formulario\', \'0\']">Registrar Comprobante</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="material-datatables table-responsive">\r\n                                <table id="dtResultados" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                                    <thead>\r\n                                        <tr>\r\n\r\n                                            <th class="disabled-sorting text-right">\r\n                                                <div class="checkbox text-right">\r\n                                                    <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                                                </div>\r\n                                            </th>\r\n                                            <th>No. Doc. de Pago</th>\r\n                                            <th>Organización Compradora</th>\r\n                                            <th>Tipo Doc</th>\r\n                                            <th>Documento ERP</th>\r\n                                            <th>Forma de Pago</th>\r\n                                            <th>Importe Total</th>\r\n                                            <th>Estado</th>\r\n                                            <th>Fecha de Emisión</th>\r\n                                            <th>Fecha Prog. Pago</th>\r\n                                            <th>Fecha Pago</th>\r\n                                            <th>Notas</th>\r\n                                            <th class="disabled-sorting text-center">Acciones</th>\r\n                                        </tr>\r\n                                    </thead>\r\n\r\n                                </table>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div id="mdlObservaciones" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog modal-lg" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Observaciones</h4>\r\n\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n          \r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n                <div class="col-sm-12 text-center">\r\n                  <b>Observaciones Comprobante de pago:</b><p></p>\r\n                </div>\r\n              </div>\r\n              <div class="row">\r\n                <div class="col-sm-12">\r\n                  <span id="mdlObservaciones_obs"></span>\r\n                </div>\r\n              </div>\r\n              <div class="row">\r\n                <div class="col-sm-12 text-center" >\r\n                  <p></p><b>Observaciones de pago:</b><p></p>\r\n                </div>\r\n              </div>\r\n              <div class="row">\r\n                <div class="col-sm-12">\r\n                  <span id="mdlObservaciones_obs_pago"></span>\r\n                </div>\r\n              </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>'},"./src/app/factura/proveedor/buscar/facturaproveedorbuscar.component.ts":function(t,r,a){"use strict";function n(){var t=s.t;d.filtro.publicada&&(t=s.l),u=$("#dtResultados").on("init.dt",function(t,r,a){DatatableFunctions.initDatatable(t,r,a,u)}).DataTable({searching:!1,serverSide:!0,ajax:{beforeSend:function(t){d.util.tokenValid()&&(t.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token")),t.setRequestHeader("origen_datos","PEB2M"),t.setRequestHeader("tipo_empresa","P"),t.setRequestHeader("org_id",localStorage.getItem("org_id")),t.setRequestHeader("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key")))},url:t,dataSrc:"data",data:function(t){if(""!=d.filtro.nrocomprobantepago&&(t.NumeroFactura=d.filtro.nrocomprobantepago),""!=d.filtro.razonsocialproveedor&&(t.RazonSocialProveedor=d.filtro.razonsocialproveedor),""!=d.filtro.rucproveedor&&(t.RucProveedor=d.filtro.rucproveedor),"NONE"!=d.filtro.estado&&(t.Estado=d.filtro.estado),"NONE"!=d.filtro.moneda&&(t.Moneda=d.filtro.moneda),d.filtro.fechaemisioninicio){var r=DatatableFunctions.ConvertStringToDatetime(d.filtro.fechaemisioninicio);t.FechaEmision_inicio=DatatableFunctions.FormatDatetimeForMicroService(r)}if(d.filtro.fechaemisionfin){var a=DatatableFunctions.AddDayEndDatetime(DatatableFunctions.ConvertStringToDatetime(d.filtro.fechaemisionfin));t.FechaEmision_fin=DatatableFunctions.FormatDatetimeForMicroService(a)}t.column_names="IdComprobante,NumeroFactura,RazonSocialProveedor,TipoComprobante,DocumentoErp,FormaPago,Total,Moneda,Estado,FechaEmision,FechaProgramadaPago,FechaPago,Observaciones,ObservacionesPago,RazonSocialCliente",d.filtro.publicada||(t.column_names="[NumeroFactura,RazonSocialProveedor,RazonSocialCliente,TipoComprobante,DocumentoErp,FormaPago,Total,Moneda,Estado,FechaEmision,FechaProgramadaPago,FechaPago,Observaciones,ObservacionesPago]")}},columns:[{data:"NumeroFactura",name:"NumeroFactura"},{data:"NumeroFactura",name:"NumeroFactura"},{data:"RazonSocialCliente",name:"RazonSocialCliente"},{data:"TipoComprobante",name:"TipoComprobante"},{data:"NumeroFactura",name:"NumeroFactura"},{data:"FormaPago",name:"FormaPago"},{data:"Total",name:"Total"},{data:"Estado",name:"Estado"},{data:"FechaEmision",name:"FechaEmision"},{data:"FechaProgramadaPago",name:"FechaProgramadaPago",visible:!1},{data:"FechaPago",name:"FechaPago"},{data:"NumeroFactura",name:"Nota"},{data:"NumeroFactura",name:"NumeroFactura"}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5,6,7,8,9,10,11,12]},{render:function(t,r,a){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input class="checkboxCP" type="checkbox" value="'+a.IdComprobante+'"  name="optionsCheckboxes"></label></div></div>'},targets:0},{render:function(t,r,a){return a.DocumentoErp?a.DocumentoErp:""},targets:4},{render:function(t,r,a){return a.Moneda+" "+a.Total},targets:6},{render:function(t,r,a){var n=d.filtro.publicada?"0":"1",o="Ver/Editar";return d.filtro.publicada&&(o="Ver"),'<div class="text-center"><a class="editar" href="/factura/proveedor/formulario/'+a.IdComprobante+'" row-id="'+a.IdComprobante+'" esBorrador="'+n+'" id_doc="'+a.id_doc+'"><button class="btn btn-simple btn-info btn-icon edit" rel="tooltip" title="'+o+'" data-placement="left"><i class="material-icons">visibility</i></button></a></div>'},targets:12},{render:function(t,r,a){return'<a data-toggle="modal" class="observaciones" data-target="#mdlObservaciones" style="cursor:hand">Observaciones</a>'},targets:11}]}),u.on("click",".observaciones",function(t){var r=$(this).closest("tr"),a=u.row(r).data();$("#mdlObservaciones_obs").html(a.Observaciones),$("#mdlObservaciones_obs_pago").html(null==a.ObservacionesPago?"":DatatableFunctions.ReplaceToken(a.ObservacionesPago)),t.preventDefault()}),u.on("click",".edit",function(t){var r=$(this).closest("tr");u.row(r).data();console.log("click edit",t);var a=r.find("a.editar").attr("row-id"),n=r.find("a.editar").attr("esBorrador"),o=r.find("a").attr("id_doc"),e=["/factura/proveedor/formulario",a,{b:n,c:o}];d.navigate(e),t.preventDefault()})}var o=a("./node_modules/@angular/core/@angular/core.es5.js"),e=a("./node_modules/@angular/router/@angular/router.es5.js"),i=a("./src/app/utils/app.utils.ts"),l=a("./src/app/service/masterservice.ts"),c=a("./src/app/service/facturaservice.ts"),s=a("./src/app/utils/app.constants.ts");a.d(r,"a",function(){return g});var d,u,b=this&&this.__decorate||function(t,r,a,n){var o,e=arguments.length,i=e<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,a,n);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(i=(e<3?o(i):e>3?o(r,a,i):o(r,a))||i);return e>3&&i&&Object.defineProperty(r,a,i),i},p=this&&this.__metadata||function(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)},f=this&&this.__awaiter||function(t,r,a,n){return new(a||(a=Promise))(function(o,e){function i(t){try{c(n.next(t))}catch(t){e(t)}}function l(t){try{c(n.throw(t))}catch(t){e(t)}}function c(t){t.done?o(t.value):new a(function(r){r(t.value)}).then(i,l)}c((n=n.apply(t,r||[])).next())})},m=this&&this.__generator||function(t,r){function a(t){return function(r){return n([t,r])}}function n(a){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,e&&(i=e[2&a[0]?"return":a[0]?"throw":"next"])&&!(i=i.call(e,a[1])).done)return i;switch(e=0,i&&(a=[0,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,e=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(i=c.trys,!(i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=r.call(t,c)}catch(t){a=[6,t],e=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var o,e,i,l,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},g=function(){function t(t,r,a,n){this.cpService=t,this.router=r,this.route=a,this._masterService=n,this.util=new i.a(this.router,this._masterService)}return t.prototype.navigate=function(t){this.router.navigate(t,{relativeTo:this.route})},t.prototype.validarfiltros=function(){if(null!=this.filtro.fechaemisioninicio&&""!=this.filtro.fechaemisioninicio.toString()&&null!=this.filtro.fechaemisionfin&&""!=this.filtro.fechaemisionfin.toString()){var t=DatatableFunctions.ConvertStringToDatetime(d.filtro.fechaemisioninicio),r=DatatableFunctions.ConvertStringToDatetime(d.filtro.fechaemisionfin);if(DatatableFunctions.FormatDatetimeForMicroService(t)>DatatableFunctions.FormatDatetimeForMicroService(r))return swal({text:"El rango de Fechas de creación seleccionado no es correcto.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1}return!0},t.prototype.DescartarBorradoresAsincrono=function(t){return f(this,void 0,void 0,function(){var r,a,n,o,e;return m(this,function(i){switch(i.label){case 0:r=0,a=t,i.label=1;case 1:return r<a.length?(n=a[r],o=$(n).val(),[4,this.cpService.descartarBorrador(o).toPromise()]):[3,4];case 2:e=i.sent(),i.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},t.prototype.DescartarBorradores=function(t){return f(this,void 0,void 0,function(){var r;return m(this,function(a){return t.preventDefault(),r=$("#dtResultados").find(".checkboxCP:checked"),r.length<=0?(swal({text:"Debe seleccionar un comprobante de pago.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1]):(swal({html:"¿Está seguro de descartar los comprobantes de pagos seleccionados?",type:"warning",showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){d.DescartarBorradoresAsincrono(r),setTimeout(function(){u.ajax.reload(),swal({text:"Se descartó los comprobantes de pagos seleccionados.",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"})},1e3)},function(t){}),[2])})})},t.prototype.clicked=function(t){this.validarfiltros()&&(this.filtro.publicada?u.ajax.url(s.l).load():u.ajax.url(s.t).load()),t.preventDefault()},t.prototype.limpiar=function(t){this.filtroDefecto(),setTimeout(function(){$("input").each(function(){$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")})},200),t.preventDefault()},t.prototype.filtroDefecto=function(){var t=new Date;t.setMonth(t.getMonth()-1),this.filtro={nrocomprobantepago:"",razonsocialcliente:"",ruccliente:"",estado:"NONE",moneda:"NONE",fechaemisioninicio:t,fechaemisionfin:new Date,tipoemisionfisico:!0,tipoemisionelectronico:!0,publicada:!0}},t.prototype.ngOnInit=function(){d=this,this.filtroDefecto(),this.util.listMonedas(function(t){d.listMonedaCombo=t}),this.util.listEstadoCP(function(t){t=t.filter(function(t){return"CBORR"!=t.valor}),d.listEstadoCombo=t})},t.prototype.ngAfterViewInit=function(){n(),DatatableFunctions.registerCheckAll()},t}();g=b([a.i(o.Component)({selector:"facturaproveedorbuscar-cmp",template:a("./src/app/factura/proveedor/buscar/facturaproveedorbuscar.component.html"),providers:[l.a,c.a]}),p("design:paramtypes",["function"==typeof(v=void 0!==c.a&&c.a)&&v||Object,"function"==typeof(h=void 0!==e.b&&e.b)&&h||Object,"function"==typeof(x=void 0!==e.c&&e.c)&&x||Object,"function"==typeof(y=void 0!==l.a&&l.a)&&y||Object])],g);var v,h,x,y},"./src/app/factura/proveedor/formulario/facturaproveedorformulario.component.html":function(t,r){t.exports='<div class="main-content">\r\n  <div class="container-fluid">\r\n    <div class="row">\r\n      <div class="col-sm-12">\r\n        <div class="card">\r\n          <form method="#" action="#">\r\n            <div class="card-header card-header-text" data-background-color="blue">\r\n              <h4 class="card-title">Comprobante de Pago</h4>\r\n            </div>\r\n            <div class="card-content" id="secCabecera">\r\n              <div class="card-header">\r\n                <h4 class="card-title">Comprobante de Pago Cabecera</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-8 col-sm-offset-2">\r\n                    <div class="row">\r\n                      <div class="col-sm-10">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">RUC Organización Compradora <span class="star">*</span>\r\n                          </label>\r\n                          <input name="txtRucCliente" type="text" readonly="true" disabled [(ngModel)]="factura.ruccliente" class="form-control">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-2">\r\n                        <button data-toggle="modal" data-target="#mdlBuscarCliente" class="btn btn-fill btn-default" (click)="buscarCliente(event)"\r\n                          [disabled]="toggleButton">Buscar</button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-8 col-sm-offset-2">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Nombre de Organización Compradora <span class="star">*</span>\r\n                      </label>\r\n                      <input name="txtRazonSocialCliente" type="text" readonly="true" disabled [(ngModel)]="factura.razonsocialcliente" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-8 col-sm-offset-2">\r\n\r\n                    <div class="radio">\r\n                      <label> Guías de Material\r\n                          <input type="radio" [checked]="factura.esguiamaterial"  (change)="onEsMaterialChange($event)" name="tipofactura" >\r\n                          </label>\r\n                      <label> Hojas de Aceptación de Servicio\r\n                          <input type="radio"  [checked]="factura.eshas"  (change)="onEsHasChange($event)" name="tipofactura">\r\n                          </label>\r\n                    </div>\r\n\r\n\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="card-content" id="secFactura">\r\n              <div class="card-header">\r\n                <h4 class="card-title">Comprobante de Pago Cabecera</h4>\r\n              </div>\r\n              <div class="card-content">\r\n\r\n\r\n                <div class="row">\r\n                  <div class="col-sm-1">\r\n\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">No.  <span class="star">*</span></label>\r\n                      <input name="nocomprobantepago1" id="nocomprobantepago1" [(ngModel)]="factura.nocomprobantepago1" pattern="[a-zA-Z0-9\\s]+"\r\n                        type="text" maxlength="3" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class="col-sm-3">\r\n\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Comprobante de Pago  <span class="star">*</span></label>\r\n                      <input name="nocomprobantepago2" id="nocomprobantepago2" [(ngModel)]="factura.nocomprobantepago2" pattern="[a-zA-Z0-9\\s]+"\r\n                        type="text" maxlength="7" [disabled]="toggleButton" class="form-control">\r\n\r\n                    </div>\r\n                  </div>\r\n\r\n\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">RUC Org. Compradora <span class="star">*</span>\r\n                      </label>\r\n                      <input name="ruccliente" [(ngModel)]="factura.ruccliente" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Razón Social Org. Compradora <span class="star">*</span>\r\n                      </label>\r\n                      <input name="razonsocialcliente" [(ngModel)]="factura.razonsocialcliente" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\'row\'>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Tipo de Emisión\r\n                      </label>\r\n                      <div class="radio">\r\n                        <label> Físico\r\n                          <input type="radio" name="optionsCheckboxes" [checked]="factura.esfisico" [disabled]="toggleButton"  (change)="onEsFisicoChange($event)">\r\n                          </label>\r\n                        <label> Electrónico\r\n                          <input type="radio" name="optionsCheckboxes" [checked]="factura.eselectronico" [disabled]="toggleButton" (change)="onEsElectronicolChange($event)">\r\n                          </label>\r\n                      </div>\r\n\r\n\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">RUC Org. Proveedora <span class="star">*</span>\r\n                      </label>\r\n                      <input name="rucproveedor" [(ngModel)]="factura.rucproveedor" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Razón Social Org. Proveedora <span class="star">*</span>\r\n                      </label>\r\n                      <input name="razonsocialproveedor" [(ngModel)]="factura.razonsocialproveedor" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha Emisión <span class="star">*</span>\r\n                      </label>\r\n                      <input name="fechaemision" [(ngModel)]="factura.fechaemision" id="txtFechaEmision" datepicker type="text" [disabled]="toggleButton"\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Tipo Documento <span class="star">*</span>\r\n                      </label>\r\n                      <select id="tipodocumento" name="tipodocumento" class="form-control" [(ngModel)]="factura.tipodocumento" [disabled]="toggleButton">\r\n                        <option disabled=""></option>\r\n                        <option *ngFor="let opt of listTipoComprobante" value="{{opt.valor}}"> {{opt.desc}} </option> \r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4" *ngIf="id!=0">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Estado\r\n                      </label>\r\n                      <select id="estado" [(ngModel)]="factura.estado" name="estado" class="form-control" disabled>\r\n                        <option disabled="" selected=""></option>\r\n                        <option *ngFor="let opt of listEstadoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4" *ngIf="id==0">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha Vencimiento\r\n                      </label>\r\n                      <input name="txtFechaVencimiento" id="txtFechaProgPago" datepicker [(ngModel)]="factura.fechavencimiento" type="text" [disabled]="toggleButton"\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha de Recepción\r\n                      </label>\r\n                      <input name="fecharecepcion" id="fecharecepcion" datepicker [(ngModel)]="factura.fecharecepcion" type="text" [disabled]="toggleButton"\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha de Registro\r\n                      </label>\r\n                      <input name="fecharegistro" id="fecharegistro" datepicker [(ngModel)]="factura.fecharegistro" type="text" [disabled]="toggleButton"\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Orden de Compra/Servicio/Contrato\r\n                      </label>\r\n                      <input name="ordencompraserviciocontrato" [(ngModel)]="factura.ordencompraserviciocontrato" type="text" [disabled]="toggleButton"\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Guías de Despacho\r\n                      </label>\r\n                      <input name="guiasdespacho" type="text" [(ngModel)]="factura.guiasdespacho" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">SubTotal \r\n                      </label>\r\n                      <input name="subtotal" [(ngModel)]="factura.subtotal" type="text" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Total Descuento \r\n                      </label>\r\n                      <input name="dsctomonto" [(ngModel)]="factura.dsctomonto" type="text" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4" *ngIf="id!=0">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Documento ERP \r\n                      </label>\r\n                      <input name="documentoerp" type="text" [(ngModel)]="factura.documentoerp" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Forma de Pago\r\n                      </label>\r\n                      <input name="formapago" type="text" [(ngModel)]="factura.formapago" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Moneda <span class="star">*</span>\r\n                          </label>\r\n                      <select id="moneda" [(ngModel)]="factura.moneda" name="moneda" class="form-control" [disabled]="toggleButton">\r\n                        <option disabled="" selected=""></option>\r\n                        <option *ngFor="let opt of listMonedaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                      </select>\r\n\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Bien/Servicio afecto a Detracción\r\n                      </label>\r\n                      <input name="bienserviciodetraccion" type="text" [disabled]="toggleButton" [(ngModel)]="factura.bienserviciodetraccion"\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Condición Pago\r\n                      </label>\r\n                      <input name="condicionpago" type="text" [(ngModel)]="factura.condicionpago" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n              <div class="card-header">\r\n                <h4 class="card-title">Tipo de Impuesto</h4>\r\n                <small>El impuesto 1 se calcula por defecto al 18%</small>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Impuesto 1 <span class="star">*</span>\r\n                      </label>\r\n                      <input name="impuesto1" type="text" [(ngModel)]="factura.impuesto1" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Impuesto 2 \r\n                      </label>\r\n                      <input name="impuesto2" type="text" [(ngModel)]="factura.impuesto2" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Impuesto 3\r\n                      </label>\r\n                      <input name="impuesto3" type="text" [(ngModel)]="factura.impuesto3" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Importe Total <span class="star">*</span>\r\n                      </label>\r\n                      <input name="importetotal" type="text" [(ngModel)]="factura.importetotal" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Importe Referencial\r\n                      </label>\r\n                      <input name="importereferencial" type="text" [(ngModel)]="factura.importereferencial" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Observaciones\r\n                      </label>\r\n                      <input name="observaciones" type="text" [(ngModel)]="factura.observaciones" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n\r\n                <div class="card {{factura.eshas ? \'hidden\' : \'\'}}">\r\n                  <div class="card-header card-header-icon" data-background-color="blue">\r\n                    <i class="material-icons">assignment</i>\r\n                  </div>\r\n                  <div class="card-content">\r\n                    <h4 class="card-title">Detalle</h4>\r\n                    <div class="toolbar">\r\n                      <div class="row">\r\n                        <div class="col-sm-12">\r\n                          <nav class="navbar navbar-info" role="navigation">\r\n                            <div class="container-fluid">\r\n                              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n\r\n                              </div>\r\n                            </div>\r\n                          </nav>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div class="row" *ngIf="!toggleButton">\r\n                      <div class="col-sm-12">\r\n                        <div class="form-group form-group-without-margin">\r\n                          <button id="btnEliminarItemOC" [disabled]="toggleButton" class="btn btn-default pull-right" (click)="eliminarArticulos($event)">Eliminar</button>\r\n                          <button id="btnAgregarItemOC" [disabled]="toggleButton" class="btn btn-default pull-right" (click)="AbrirAgregarGuia($event)">Añadir Guía</button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div class="material-datatables table-responsive" style="display:block">\r\n                      <table id="dtArticulos" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                        <thead>\r\n                          <tr>\r\n\r\n                            <th class="disabled-sorting text-right">\r\n                              <div class="checkbox text-right">\r\n                                <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                              </div>\r\n                            </th>\r\n                            <th>No. Item</th>\r\n                            <th>No. Guía</th>\r\n                            <th>No. Orden de Compra</th>\r\n                            <th>No. Item OC</th>\r\n                            <th>No. de Parte</th>\r\n                            <th>Descripción del Producto</th>\r\n                            <th>Precio Unitario Referencial</th>\r\n                            <th>Cantidad</th>\r\n                            <th>Importe Total Item</th>\r\n\r\n                          </tr>\r\n                        </thead>\r\n                      </table>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="card {{factura.esguiamaterial ? \'hidden\' : \'\'}}">\r\n                  \r\n                  <div class="card-header card-header-icon" data-background-color="blue">\r\n                    <i class="material-icons">assignment</i>\r\n                  </div>\r\n                  <div class="card-content">\r\n\r\n                    <h4 class="card-title">Detalle</h4>\r\n                    <div class="toolbar">\r\n                      <div class="row">\r\n                        <div class="col-sm-12">\r\n                          <nav class="navbar navbar-info" role="navigation">\r\n                            <div class="container-fluid">\r\n                              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n\r\n                              </div>\r\n                            </div>\r\n                          </nav>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div class="row" *ngIf="!toggleButton">\r\n                      <div class="col-sm-12">\r\n                        <div class="form-group form-group-without-margin">\r\n                          <button id="btnAgregarItemOC" [disabled]="toggleButton" class="btn btn-default pull-right" (click)="AbrirAgregarAceptacionServicio($event)">Añadir Hoja de Aceptación de Servicio</button>\r\n                          <button id="btnEliminarItemOC" [disabled]="toggleButton" class="btn btn-default pull-right" (click)="eliminarArticulos($event)">Eliminar</button>                          \r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div class="material-datatables table-responsive" style="display:block">\r\n                      <table id="dtArticulosHAS" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                        <thead>\r\n                          <tr>\r\n\r\n                            <th class="disabled-sorting text-right">\r\n                              <div class="checkbox text-right">\r\n                                <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                              </div>\r\n                            </th>\r\n\r\n                            <th>No. Item</th>\r\n                            <th>No. HAS</th>\r\n                            <th>No. Orden de Compra</th>\r\n                            <th>No. Item OC</th>\r\n                            <th>No. de Parte</th>\r\n                            <th>Descripción del Producto</th>\r\n                            <th>Precio Unitario Referencial</th>\r\n                            <th>Cantidad</th>\r\n                            <th>Importe Total Item</th>\r\n\r\n                          </tr>\r\n                        </thead>\r\n                      </table>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n\r\n              <div class="row rowEditar">\r\n                <div class="col-sm-4 col-sm-offset-8">\r\n                  <div class="form-group label-floating">\r\n                    <label class="control-label">Sub-Total\r\n                    </label>\r\n                    <input name="subtotal" type="text" [(ngModel)]="factura.subtotal" [disabled]="toggleButton" class="form-control">\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="row rowEditar">\r\n                <div class="col-sm-4 col-sm-offset-8">\r\n                  <div class="form-group label-floating">\r\n                    <label class="control-label">IGV\r\n                    </label>\r\n                    <input name="igv" type="text" [(ngModel)]="factura.igv" [disabled]="toggleButton" class="form-control">\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="row rowEditar">\r\n                <div class="col-sm-4 col-sm-offset-8">\r\n                  <div class="form-group label-floating">\r\n                    <label class="control-label">Total\r\n                    </label>\r\n                    <input name="total" type="text" [(ngModel)]="factura.total" [disabled]="toggleButton" class="form-control">\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class="row rowEditar">\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                     \r\n                      <label class="control-label">{{factura.totaltexto}}</label>\r\n                    </div>\r\n                  </div>\r\n              </div>\r\n\r\n              <div class="card">\r\n                  <div class="card-header card-header-icon" data-background-color="blue">\r\n                    <i class="material-icons">assignment</i>\r\n                  </div>\r\n                  <div class="card-content">\r\n                    <h4 class="card-title">Archivos Adjuntos</h4>\r\n                    <div class="toolbar">\r\n                      <div class="row">\r\n                        <div class="col-sm-12">\r\n                          <nav class="navbar navbar-info" role="navigation">\r\n                            <div class="container-fluid">\r\n                              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n\r\n                              </div>\r\n                            </div>\r\n                          </nav>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div class="row" *ngIf="!toggleButton">\r\n                      <div class="col-sm-12">\r\n                        <div class="form-group form-group-without-margin">\r\n                            <button   class="btn btn-default pull-right" (click)="eliminarArchivos($event)">Eliminar</button>      \r\n                          <button   class="btn btn-default pull-right" data-toggle="modal" (click)="agregarArchivo($event)"\r\n                          data-target="#mdlArchivosAdjuntos" >Agregar</button>\r\n                                              \r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div class="material-datatables table-responsive">\r\n                      <table id="dtArchivos" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                        <thead>\r\n                          <tr>\r\n                            <th class="disabled-sorting text-right">\r\n                              <div class="checkbox text-right">\r\n                                <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                              </div>\r\n                            </th>\r\n                            <th width="20%">Nombre</th>\r\n                            <th width="60%">Descripción</th>\r\n                            <th class="disabled-sorting text-center" width="20%">Acciones</th>\r\n                          </tr>\r\n                        </thead>\r\n\r\n\r\n                      </table>\r\n                    </div>\r\n                  </div>\r\n                  \x3c!-- end content--\x3e\r\n                </div>\r\n              <div class="card-content rowEditar">\r\n                \r\n\r\n               \r\n\r\n                <div class="card-header">\r\n                  <h4 class="card-title">Datos de Pago</h4>\r\n                </div>\r\n                <div class="card-content">\r\n                  <div class="row">\r\n                    <div class="col-sm-4">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Tipo Pago\r\n                        </label>\r\n                        <input name="tipopago" type="text" [(ngModel)]="factura.tipopago" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-sm-4">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Nro. Documento  \r\n                        </label>\r\n                        <input name="nrodocumento" type="text" [(ngModel)]="factura.nrodocumento" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-sm-4">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Banco \r\n                        </label>\r\n                        <input name="banco" type="text" [(ngModel)]="factura.banco" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="row">\r\n                    <div class="col-sm-4">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Fecha de Pago\r\n                        </label>\r\n                        <input name="fechapago" type="text" [(ngModel)]="factura.fechapago" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-sm-4">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Monto\r\n                        </label>\r\n                        <input name="monto" type="text" [(ngModel)]="factura.monto" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-sm-4">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Moneda \r\n                        </label>\r\n                        <input name="datospagomoneda" type="text" [(ngModel)]="factura.datospagomoneda" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="row">\r\n                    <div class="col-sm-4">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Nro. Cheque\r\n                        </label>\r\n                        <input name="nrocheque" type="text" [(ngModel)]="factura.nrocheque" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="card-header">\r\n                  <h4 class="card-title">Datos de Descuento por Retención o Detracción</h4>\r\n                </div>\r\n                <div class="card-content">\r\n                  <div class="row">\r\n                    <div class="col-sm-6">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Tipo Descuento\r\n                        </label>\r\n                        <input name="tipodescuento" type="text" [(ngModel)]="factura.tipodescuento" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-sm-6">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Nro. Comprobante\r\n                        </label>\r\n                        <input name="nrocomprobante" type="text" [(ngModel)]="factura.nrocomprobante" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="row">\r\n                    <div class="col-sm-6">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Monto\r\n                        </label>\r\n                        <input name="dsctomonto" type="text" [(ngModel)]="factura.dsctomonto" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-sm-6">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Moneda\r\n                        </label>\r\n                        <input name="dsctomoneda" type="text" [(ngModel)]="factura.dsctomoneda" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="card-header">\r\n                  <h4 class="card-title">Observaciones Comprobante de Pago</h4>\r\n                </div>\r\n                <div class="card-content">\r\n                  <div class="row">\r\n                    <div class="col-sm-12">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">\r\n                        </label>\r\n                        <input name="observaciones" type="text" [(ngModel)]="factura.observaciones" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="card-header">\r\n                  <h4 class="card-title">Observaciones de Pago</h4>\r\n                </div>\r\n                <div class="card-content">\r\n                  <div class="row">\r\n                    <div class="col-sm-12">\r\n                      <div [innerHTML]="factura.obscomprobantepago" style="text-align: left;">\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n\r\n            <div class="card-footer">\r\n              <button class="btn btn-fill btn-default pull-right" routerLink="/factura/proveedor/buscar">Regresar</button>\r\n              <button class="btn btn-fill btn-default pull-right" (click)="print($event)" *ngIf="id!=\'0\'">Imprimir</button>\r\n              <button type="button" class="btn btn-fill btn-default pull-right" (click)="registrarFactura($event)" [disabled]="toggleButton"\r\n                *ngIf="id==0 && step==1">Pre Registrar Factura</button>\r\n              <button type="button" class="btn btn-fill btn-default pull-right" [disabled]="toggleButton" *ngIf="(id!=\'0\' && esBorrador==\'1\') || (id==\'0\'&& step==2)"\r\n                (click)="enviarFactura($event)">Enviar</button>\r\n              <button type="button" class="btn btn-fill btn-default pull-right" (click)="guardarFactura($event)" [disabled]="toggleButton"\r\n                *ngIf="((id==\'0\' || esBorrador==\'1\') && step==2)">Guardar</button>\r\n              <button type="button" class="btn btn-fill btn-default pull-right" (click)="descartarBorrador($event)" *ngIf="id!==\'0\' && esBorrador==\'1\'"\r\n                [disabled]="toggleButton">Descartar Borrador</button>\r\n              <button (click)="habilitarEdicion($event)" class="btn btn-fill btn-default pull-right" *ngIf="((id!=\'0\' && esBorrador==\'1\') || (esBorrador==\'1\' && step==2))">Habilitar Edición</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \r\n  <div id="mdlBuscarCliente" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog modal-lg" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Buscar Organización Compradora</h4>\r\n\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Nombre de Organización Compradora</label>\r\n                <input type="text" id="txtBuscarNroOC" name="txtBuscarNroOC" [(ngModel)]="filtroCliente.razonsocial" class="form-control"\r\n                  value="" [disabled]="toggleButton">\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n\r\n            <div class="col-sm-10">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">RUC</label>\r\n                <input type="text" id="txtBuscarCodCliente" [(ngModel)]="filtroCliente.ruc" name="txtBuscarCodCliente" class="form-control"\r\n                  value="" [disabled]="toggleButton">\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-2">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label"></label>\r\n                <button type="button" class="btn btn-default" (click)="buscarClienteDT($event)">Buscar</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="material-datatables table-responsive">\r\n                <table id="dtBuscarCliente" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                  <thead>\r\n                    <tr>\r\n                      <th class="disabled-sorting text-right">\r\n\r\n                      </th>\r\n                      <th style="width:50%">Nombre de Organización Compradora</th>\r\n                      <th style="width:50%">RUC</th>\r\n                    </tr>\r\n                  </thead>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" (click)="SeleccionarCliente($event)">Seleccionar</button>\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n  <div id="mdlGuias" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog modal-lg" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Buscar Guía</h4>\r\n\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-sm-6">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Nro. Guía</label>\r\n                <input type="text" id="txtBuscarNroOC" [(ngModel)]="filtroGuia.nroguia" name="txtBuscarNroOC" class="form-control" value=""\r\n                  [disabled]="toggleButton">\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-6">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Estado</label>\r\n\r\n\r\n                <select name="cmbBuscarEstado" class="form-control" [(ngModel)]="filtroGuia.estado" [disabled]="toggleButton">\r\n                    <option value="NONE">TODOS</option>\r\n                    <option *ngFor="let optEstado of listEstadoGuia" value="{{optEstado.valor}}"> {{optEstado.desc}} </option>           \r\n\r\n\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-5">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Emitida/Enviada después de</label>\r\n                <input type="text" id="txtGuiaEmitidaDesde" [(ngModel)]="filtroGuia.fechaemitidadesde" name="txtGuiaEmitidaDesde" datepicker\r\n                  class="form-control" value="" [disabled]="toggleButton">\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-5">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Emitida/Enviada antes de</label>\r\n                <input type="text" id="txtGuiaEmitidaHasta" [(ngModel)]="filtroGuia.fechaemitidahasta" name="txtGuiaEmitidaHasta" datepicker\r\n                  class="form-control" value="" [disabled]="toggleButton">\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-2">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label"></label>\r\n                <button type="button" class="btn btn-default" (click)="buscarGuiaDT($event)">Buscar</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="material-datatables table-responsive">\r\n                <table id="dtBuscarGuia" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                  <thead>\r\n                    <tr>\r\n\r\n                      <th class="disabled-sorting text-right">\r\n                        <div class="checkbox text-right">\r\n                          <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                        </div>\r\n                      </th>\r\n\r\n                      <th>N° Guía</th>\r\n                      <th>Estado</th>\r\n                      <th>Organización Compradora</th>\r\n                      <th>Fecha de Emisión</th>\r\n                      <th>Fecha de Inicio de Traslado</th>\r\n                      <th>Fecha Probable de Arribo</th>\r\n                    </tr>\r\n                  </thead>\r\n\r\n\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" (click)="AgregarArticulosGuia($event)">Añadir</button>\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n\r\n  <div id="mdlArchivosAdjuntos" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Archivo Adjunto</h4>\r\n                  \x3c!--<h4 class="modal-title">Archivo Adjunto</h4>--\x3e\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="form-group">\r\n                <div class="fileinput fileinput-new input-group" data-provides="fileinput">\r\n                  <div class="form-control" data-trigger="fileinput">\r\n                    <i class="material-icons fileinput-exists">attach_file</i>\r\n                    <span class="fileinput-filename"></span>\r\n                  </div>\r\n                  <span class="input-group-addon btn btn-default btn-file">\r\n                      <span class="fileinput-new">Seleccionar Archivo</span>\r\n                  <span class="fileinput-exists">Seleccionar Archivo</span>\r\n                  <input type="file" name="..." (change)="onChangeFile($event)" id="txtArchivo">\r\n                  <a href="#" class="input-group-addon btn btn-default fileinput-exists" style="display:none" data-dismiss="fileinput" id="btnEliminarAA">Remover</a>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="form-group label-floating">\r\n                <textarea name="descripcion" placeholder="Descripción" [(ngModel)]="archivo.descripcion" class="form-control" rows="4" [disabled]="toggleButton"></textarea>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n          <button type="button" class="btn btn-default" (click)="grabarArchivoAdjunto()" [disabled]="toggleButton">Adjuntar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n  <div id="mdlConformidadServicio" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog modal-lg" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Buscar Aceptación de Servicio</h4>\r\n\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-sm-4">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Número de Aceptación de Servicio\r\n                    </label>\r\n                <input [(ngModel)]="filtrohas.nroconformidadservicio" name="nroconformidadservicio" type="text" class="form-control">\r\n              </div>\r\n            </div>\r\n\r\n            <div class="col-sm-4">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Estado</label>\r\n                <select [(ngModel)]="filtrohas.estado" name="estado" class="form-control">\r\n                        <option value="NONE" selected>TODOS</option>\r\n                        <option *ngFor="let opt of listEstadoHAS" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n\r\n\r\n                    </select>\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-4">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Nro ERP\r\n                    </label>\r\n                <input [(ngModel)]="filtrohas.nroerp" name="nroerp" type="text" class="form-control">\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n\r\n            <div class="col-sm-4">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Fecha Creación Del</label>\r\n                <input type="text" [(ngModel)]="filtrohas.fechacreacioninicio" name="fechacreacioninicio" class="form-control" datepicker\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-4">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">al</label>\r\n                <input type="text" [(ngModel)]="filtrohas.fechacreacionfin" name="fechacreacionfin" class="form-control" datepicker/>\r\n              </div>\r\n            </div>\r\n\r\n            <div class="col-sm-4">\r\n              <div class="form-group">\r\n                <button class="btn btn-default" (click)="BuscarHasClicked($event)">Buscar</button>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <nav class="navbar navbar-info" role="navigation">\r\n            <div class="container-fluid">\r\n              <div class="navbar-header">\r\n\r\n                <span class="navbar-brand">Resultados</span>\r\n              </div>\r\n\r\n\r\n            </div>\r\n          </nav>\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="material-datatables table-responsive">\r\n                <table id="dtBuscarAceptacionServicio" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%"\r\n                  style="width:100%">\r\n                  <thead>\r\n                    <tr>\r\n                      <th class="disabled-sorting text-right">\r\n                        <div class="checkbox text-right">\r\n                          <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                        </div>\r\n                      </th>\r\n                      <th>Nro. Aceptación de Servicio</th>\r\n                      <th>N°ERP</th>\r\n                      <th>Estado</th>\r\n                      <th>Organización Compradora</th>\r\n                      <th>Fecha de Aceptación</th>\r\n\r\n                    </tr>\r\n                  </thead>\r\n\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" (click)="AgregarArticulosHAS($event)">Añadir</button>\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n\r\n</div>\r\n\r\n<div style="display:none">\r\n  <div id="print-section" style=\'font-family: Arial, Helvetica, sans-serif;color: #000;font-size: 12px;\'>\r\n    <table width="100%" cellpadding="0" cellspacing="0" align="center" bgcolor="#ffffff" style=\'font-family: Arial, Helvetica, sans-serif;color: #000;font-size: 12px;\'>\r\n      <tbody>\r\n        <tr>\r\n          <td align="center">\r\n\r\n\r\n            <table width="900" cellpadding="0" cellspacing="0" border="0" bgcolor="#fff">\r\n              <tbody>\r\n                <tr>\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle">\r\n                    Imprimir Comprobante de Pago Nº{{factura.nocomprobantepago}}<br/><br/>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="top" style="font-size: 20px">\r\n                    <b>IMPRESION DE COMPROBANTE DE PAGO</b><br><br>\r\n                  </td>\r\n                </tr>\r\n\r\n\r\n\r\n\r\n              </tbody>\r\n            </table>\r\n\r\n            <table width="900" class="print-table" cellpadding="5" border=\'0\' style="border:0px solid #999;border-collapse: collapse;"\r\n              cellspacing="0" bgcolor="#fff">\r\n              <tbody>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.razonsocialproveedor}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.rucproveedor}}<br/> {{factura.tipodocumento_text}}\r\n                    <br/>\r\n                    <b> {{factura.nocomprobantepago}}</b><br/>\r\n\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                    <b style="font-size: 20px; color:#0067a3">Datos Generales:</b>\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Cliente:</b>\r\n                  </td>\r\n\r\n                  <td colspan="3" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.razonsocialcliente}}\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b>  RUC N°:</b>\r\n                  </td>\r\n\r\n                  <td colspan="3" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.ruccliente}}\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Estado:</b>\r\n                  </td>\r\n                  <td colspan="3" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.estado_text}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Fecha de Emision:</b>\r\n                  </td>\r\n\r\n                  <td colspan="3" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.fechaemision}}\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Guias de Despacho:</b>\r\n                  </td>\r\n\r\n                  <td colspan="7" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.guiasdespacho}}\r\n                  </td>\r\n\r\n\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Orden de Compra/Servicio/Contrato:</b> {{factura.ordencompraserviciocontrato}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Fecha de Vencimiento:</b> {{factura.fecharegistro}}\r\n                  </td>\r\n\r\n\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b>  Fecha de Recepcion:</b> {{factura.fecharecepcion}}\r\n                  </td>\r\n\r\n\r\n\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Fecha de Registro:</b> {{factura.fecharegistro}}\r\n                  </td>\r\n\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Orden de Compra/Servicio/Contrato:</b> {{factura.ordencompraserviciocontrato}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Documento ERP:</b> {{factura.documentoerp}}\r\n                  </td>\r\n\r\n\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b>  Forma de Pago:</b> {{factura.formapago}}\r\n                  </td>\r\n\r\n\r\n\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Moneda:</b> {{factura.moneda_text}}\r\n                  </td>\r\n\r\n                </tr>\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:0px solid #999;">\r\n                    &nbsp;\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                    <b style="font-size: 20px; color:#0067a3">Detalle</b>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>No. <br>Item</b>\r\n                  </td>\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Num. Guía</b>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Num. OC</b>\r\n                  </td>\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Num. Item OC</b>\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Descripción del Producto</b>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Cantidad</b>\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Precio Unitario Referencial</b>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Importe Total Item</b>\r\n                  </td>\r\n\r\n\r\n                </tr>\r\n\r\n                <tr *ngFor="let row of factura.detallefactura" style="border:1px solid #999;">\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.noitem}}\r\n                  </td>\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.noguia}}\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.nooc}}\r\n                  </td>\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.noitemoc}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    \r\n                    <div [innerHTML]="row.descproducto" style="text-align: center;">\r\n                      </div>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.cantidad}}\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.preciounitreferencial}}\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.importetotalitem}}\r\n                  </td>\r\n\r\n\r\n                </tr>\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:0px solid #999;">\r\n                    &nbsp;\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="7" bgcolor="#fff" align="center" valign="middle" style="border:0px solid #999;">\r\n                    &nbsp;\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b> Sub-Total:</b>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.moneda}}\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.subtotal}}\r\n                  </td>\r\n\r\n\r\n                </tr>\r\n\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="7" bgcolor="#fff" align="center" valign="middle" style="border:0px solid #999;">\r\n                    &nbsp;\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b> IGV:</b>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.moneda}}\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.igv}}\r\n                  </td>\r\n\r\n\r\n                </tr>\r\n\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="7" bgcolor="#fff" align="center" valign="middle" style="border:0px solid #999;">\r\n                    &nbsp;\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b> Total:</b>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.moneda}}\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.total}}\r\n                  </td>\r\n\r\n\r\n                </tr>\r\n\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:0px solid #999;">\r\n                    {{factura.totaltexto}} SON: NUEVE MIL QUINIENTOS TRES CON 48/100 SOLES\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                    <b style="font-size: 20px; color:#0067a3">Datos de Pago:</b>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Tipo Pago:</b> {{factura.tipopago}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Nro. Documento:</b> {{factura.nrodocumento}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Banco:</b> {{factura.banco}}\r\n                  </td>\r\n\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Fecha de Pago:</b> {{factura.fechapago}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Monto:</b> {{factura.monto}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Moneda:</b> {{factura.datospagomoneda}}\r\n                  </td>\r\n\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Nro. Cheque:</b> {{factura.nrocheque}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                    <b style="font-size: 20px; color:#0067a3">Datos de Descuentos por Retención o Detracción:</b>\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Tipo Descuento:</b> {{factura.tipodescuento}}\r\n                  </td>\r\n                  <td colspan="8" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b>Nro. Comprobante:</b> {{factura.nrocomprobante}}\r\n                  </td>                \r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Monto:</b> {{factura.dsctomonto}}\r\n                  </td>\r\n                  <td colspan="8" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b>Moneda:</b> {{factura.dsctomoneda}}\r\n                  </td>                \r\n                </tr>\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:0px solid #999;">\r\n                    &nbsp;\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                    <b style="font-size: 20px; color:#0067a3">Observaciones Comprobante de Pago:</b>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;" cellpadding="0" >\r\n                  <td colspan="12" bgcolor="#fff"  cellpadding="0" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                    <b style="font-size: 20px; color:#0067a3">Observaciones de Pago:</b>\r\n                    \r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <div [innerHTML]="factura.obscomprobantepago" style="text-align: left; align-content:center; width:900px;">\r\n            </div>\r\n\r\n\r\n\r\n\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n  </div>\r\n</div>\r\n\r\n'},"./src/app/factura/proveedor/formulario/facturaproveedorformulario.component.ts":function(t,r,a){"use strict";function n(){D=$("#dtBuscarCliente").DataTable({searching:!1,serverSide:!0,ajax:{beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token")),t.setRequestHeader("origen_datos","PEB2M"),t.setRequestHeader("tipo_empresa","P"),t.setRequestHeader("org_id",localStorage.getItem("org_id")),t.setRequestHeader("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key"))},url:x.m,dataSrc:"data",data:function(t){""!=y.filtroCliente.razonsocial&&(t.RazonSocial=y.filtroCliente.razonsocial),""!=y.filtroCliente.ruc&&(t.Ruc=y.filtroCliente.ruc),t.column_names="IdOrganizacion,RazonSocial,Ruc"}},columns:[{data:"IdOrganizacion"},{data:"RazonSocial"},{data:"Ruc"}],columnDefs:[{className:"text-center",targets:[1,2]},{render:function(t,r,a){return'<div class="text-right" height="100%"><div class="radio text-right"><label><input type="radio" name="optionsCheckboxes" class="checkboxCliente" ruc="'+a.Ruc+'" razonsocial="'+a.RazonSocial+'" value="'+a.IdOrganizacion+'"></label></div></div>'},targets:0}]})}function o(){F=$("#dtBuscarAceptacionServicio").on("draw.dt",function(t,r,a){DatatableFunctions.initDatatable(t,r,a,F)}).DataTable({order:[[1,"asc"]],searching:!1,serverSide:!0,ajax:{beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token")),t.setRequestHeader("origen_datos","PEB2M"),t.setRequestHeader("tipo_empresa","P"),t.setRequestHeader("org_id",localStorage.getItem("org_id")),t.setRequestHeader("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key"))},url:x.c,dataSrc:"data",data:function(t){if(""!=y.filtrohas.nroconformidadservicio&&(t.NroConformidadServicio=y.filtrohas.nroconformidadservicio),"NONE"!=y.filtrohas.estado&&(t.Estado=y.filtrohas.estado),""!=y.filtrohas.nroerp&&(t.CodigoHASERP=y.filtrohas.nroerp),y.filtrohas.fechacreacioninicio){var r=DatatableFunctions.ConvertStringToDatetime(y.filtrohas.fechacreacioninicio);t.FechaAprobacion_inicio=DatatableFunctions.FormatDatetimeForMicroService(r)}if(y.filtrohas.fechacreacionfin){var a=DatatableFunctions.AddDayEndDatetime(DatatableFunctions.ConvertStringToDatetime(y.filtrohas.fechacreacionfin));t.FechaAprobacion_fin=DatatableFunctions.FormatDatetimeForMicroService(a)}t.org_idComprador=y.factura.IdOrgCliente,t.Moneda=y.factura.moneda,t.column_names="IdHas,NroConformidadServicio,CodigoHASERP,Proveedor,Cliente,EstadoDescripcion,FechaAprobacion"}},columns:[{data:"IdHas",name:"IdHas"},{data:"NroConformidadServicio",name:"NroConformidadServicio"},{data:"CodigoHASERP",name:"CodigoHASERP"},{data:"EstadoDescripcion",name:"EstadoDescripcion"},{data:"Cliente",name:"Cliente"},{data:"FechaAprobacion",name:"FechaAprobacion"}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5]},{render:function(t,r,a){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" name="optionsCheckboxes" numhas="'+a.NroConformidadServicio+'" value="'+a.IdHas+'" class="checkboxAceptacionServicio"></label></div></div>'},targets:0,orderable:!1}]})}function e(){S=$("#dtBuscarGuia").on("draw.dt",function(t,r,a){DatatableFunctions.initDatatable(t,r,a,S)}).DataTable({searching:!1,serverSide:!0,ajax:{beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token")),t.setRequestHeader("origen_datos","PEB2M"),t.setRequestHeader("tipo_empresa","P"),t.setRequestHeader("org_id",localStorage.getItem("org_id")),t.setRequestHeader("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key"))},url:x.n,dataSrc:"data",data:function(t){if(""!=y.filtroGuia.nroguia&&(t.NumeroGuia=y.filtroGuia.nroguia),"NONE"!=y.filtroGuia.estado?t.Estado=y.filtroGuia.estado:(t.Estado="TODOS",t.origen_modulo="comprobantes"),y.filtroGuia.fechaemitidadesde){var r=DatatableFunctions.ConvertStringToDatetime(y.filtroGuia.fechaemitidadesde);t.FechaEmision_inicio=DatatableFunctions.FormatDatetimeForMicroService(r)}if(y.filtroGuia.fechaemitidahasta){var a=DatatableFunctions.AddDayEndDatetime(DatatableFunctions.ConvertStringToDatetime(y.filtroGuia.fechaemitidahasta));t.FechaEmision_fin=DatatableFunctions.FormatDatetimeForMicroService(a)}t.org_idComprador=y.factura.IdOrgCliente,t.Moneda=y.factura.moneda,t.column_names="[CodigoGuia,NumeroGuia,FechaEmision,FechaInicioTraslado,FechaEstimadaArribo,RazonSocialCliente,RazonSocialProveedor,Estado,DocumentoMaterial]"}},columns:[{data:"NumeroGuia",name:"NumeroGuia"},{data:"NumeroGuia",name:"NumeroGuia"},{data:"Estado",name:"Estado"},{data:"RazonSocialCliente",name:"RazonSocialCliente"},{data:"FechaEmision",name:"FechaEmision"},{data:"FechaInicioTraslado",name:"FechaInicioTraslado"},{data:"FechaEstimadaArribo",name:"FechaEstimadaArribo"}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5,6]},{render:function(t,r,a){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" name="optionsCheckboxes" numguia="'+a.NumeroGuia+'" value="'+a.CodigoGuia+'" class="checkboxGuia"></label></div></div>'},targets:0,orderable:!1}]})}function i(){C=$("#dtArticulos").on("init.dt",function(t,r,a){DatatableFunctions.initDatatable(t,r,a,C)}).DataTable({ajax:function(t,r,a){r({data:y.factura.detallefactura})},createdRow:function(t,r,a){"10"===r.posicion||"20"===r.posicion?$(t).addClass("highlight"):$("td",t).eq(0).addClass("text-center")},columns:[{data:"noitem"},{data:"noitem"},{data:"noguia"},{data:"nooc"},{data:"noitemoc"},{data:"noparte"},{data:"descproducto"},{data:"preciounitreferencial"},{data:"cantidad"},{data:"importetotalitem"}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5,6,7,8,9]},{render:function(t,r,a){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" name="optionsCheckboxes" value="'+a.noitem+'" class="checkboxArticulos"></label></div></div>'},targets:0}]}),w=$("#dtArticulosHAS").DataTable({ajax:function(t,r,a){r({data:y.factura.detallefactura})},createdRow:function(t,r,a){"10"===r.posicion||"20"===r.posicion?$(t).addClass("highlight"):$("td",t).eq(0).addClass("text-center")},columns:[{data:"noitem"},{data:"noitem"},{data:"noguia"},{data:"nooc"},{data:"noitemoc"},{data:"noparte"},{data:"descproducto"},{data:"preciounitreferencial"},{data:"cantidad"},{data:"importetotalitem"}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5,6,7,8,9]},{render:function(t,r,a){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" name="optionsCheckboxes" value="'+a.noitem+'" class="checkboxArticulos"></label></div></div>'},targets:0}]})}function l(t){for(var r=1,a=0,n=t;a<n.length;a++){n[a].noitem=r++}return t}var c=a("./node_modules/@angular/router/@angular/router.es5.js"),s=a("./node_modules/@angular/core/@angular/core.es5.js"),d=a("./src/app/model/factura.ts"),u=a("./src/app/model/archivo.ts"),b=a("./src/app/utils/app.utils.ts"),p=a("./src/app/service/masterservice.ts"),f=a("./src/app/service/adjuntoservice.ts"),m=a("./src/app/service/facturaservice.ts"),g=a("./src/app/service/guiaservice.ts"),v=a("./src/app/service/conformidadservicioservice.ts"),h=a("./src/assets/js/plugins/jquery.PrintArea.js"),x=(a.n(h),a("./src/app/utils/app.constants.ts"));a.d(r,"a",function(){return R});var y,C,w,D,S,F,E,P,O=this&&this.__decorate||function(t,r,a,n){var o,e=arguments.length,i=e<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,a,n);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(i=(e<3?o(i):e>3?o(r,a,i):o(r,a))||i);return e>3&&i&&Object.defineProperty(r,a,i),i},A=this&&this.__metadata||function(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)},I=this&&this.__awaiter||function(t,r,a,n){return new(a||(a=Promise))(function(o,e){function i(t){try{c(n.next(t))}catch(t){e(t)}}function l(t){try{c(n.throw(t))}catch(t){e(t)}}function c(t){t.done?o(t.value):new a(function(r){r(t.value)}).then(i,l)}c((n=n.apply(t,r||[])).next())})},N=this&&this.__generator||function(t,r){function a(t){return function(r){return n([t,r])}}function n(a){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,e&&(i=e[2&a[0]?"return":a[0]?"throw":"next"])&&!(i=i.call(e,a[1])).done)return i;switch(e=0,i&&(a=[0,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,e=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(i=c.trys,!(i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=r.call(t,c)}catch(t){a=[6,t],e=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var o,e,i,l,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},R=function(){function t(t,r,a,n,o,e,i){this.router=t,this.route=r,this._masterService=a,this._dataServiceAdjunto=n,this._dataService=o,this._dataGuiaService=e,this._dataHASService=i,this.step=1,this.id="0",this.esBorrador="0",this.id_doc="",this.toggleButton=!0,this.filtroClienteDefecto(),this.filtroGuiaDefecto(),this.filtroDefectoHAS(),this.activatedRoute=r,this.listDetalleFactura=[],this.util=new b.a(this.router,this._masterService),this.archivo=new u.a,this.factura=new d.a,this.facturaOriginal=new d.a}return t.prototype.navigate=function(t){this.router.navigate(t,{relativeTo:this.activatedRoute})},t.prototype.filtroDefectoHAS=function(){var t=new Date;t.setDate(t.getDate()-30),this.filtrohas={nroconformidadservicio:"",nroordenservicio:"",estado:"NONE",fechacreacioninicio:t,fechacreacionfin:new Date,nroerp:""}},t.prototype.agregarArchivo=function(t){this.archivo=new u.a,this.archivo.nombreblob=DatatableFunctions.newUUID(),$("#btnEliminarAA").click(),$("#txtArchivo").val(null),t.preventDefault()},t.prototype.filtroGuiaDefecto=function(){var t=new Date;t.setMonth(t.getMonth()-1),this.filtroGuia={nroguia:"",estado:"NONE",fechaemitidadesde:t,fechaemitidahasta:new Date}},t.prototype.filtroClienteDefecto=function(){this.filtroCliente={ruccodigo:"",ruc:"",razonsocial:""}},t.prototype.BuscarHasClicked=function(t){this.validarfiltrosHAS()&&F.ajax.reload(),t.preventDefault()},t.prototype.validarfiltrosHAS=function(){if(y.filtrohas.nroconformidadservicio=y.filtrohas.nroconformidadservicio.trim(),y.filtrohas.nroerp=y.filtrohas.nroerp.trim(),""==this.filtrohas.nroconformidadservicio){if(null==this.filtrohas.fechacreacioninicio||""==this.filtrohas.fechacreacioninicio.toString())return swal({text:"Fecha de Aceptación inicio es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null==this.filtrohas.fechacreacionfin||""==this.filtrohas.fechacreacionfin.toString())return swal({text:"Fecha de Aceptación fin es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null!=this.filtrohas.fechacreacioninicio&&""!=this.filtrohas.fechacreacioninicio.toString()&&null!=this.filtrohas.fechacreacionfin&&""!=this.filtrohas.fechacreacionfin.toString()){var t=DatatableFunctions.ConvertStringToDatetime(y.filtrohas.fechacreacioninicio),r=DatatableFunctions.ConvertStringToDatetime(y.filtrohas.fechacreacionfin);if(moment(r).diff(t,"days")>30)return swal({text:'El filtro de búsqueda "Fecha de Aceptación" debe tener un rango máximo de 30 días entre la Fecha Inicial y la Fecha Fin.',type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(DatatableFunctions.FormatDatetimeForMicroService(t)>DatatableFunctions.FormatDatetimeForMicroService(r))return swal({text:"El rango de Fechas de Aceptación seleccionado no es correcto. La Fecha Inicial es mayor a la Fecha Fin.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1}}return!0},t.prototype.ngOnInit=function(){var t=this;this.usuarioActual=JSON.parse(localStorage.getItem("usuarioActual")),this.activatedRoute.params.subscribe(function(r){t.id=r.id,t.esBorrador=r.b}),"0"!=this.id?(this.step=2,this.toggleButton=!0,$("#btnAgregarItemOC").addClass("disabled"),$("#btnEliminarItemOC").addClass("disabled"),$("#secCabecera").hide(),$("#secFactura").show(),$(".rowEditar").show()):(this.toggleButton=!1,$("#secCabecera").show(),$("#secFactura").hide(),$(".rowEditar").hide(),this.factura.razonsocialproveedor=localStorage.getItem("org_nombre"),this.factura.rucproveedor=localStorage.getItem("org_ruc").replace("PE",""),this.factura.tipodocumento="Factura"),y=this,this.util.listEstadoGuia(function(t){y.listEstadoGuia=t.filter(function(t){return"GACEP"==t.valor||"GFPAR"==t.valor})}),this.util.listEstadoHAS(function(t){y.listEstadoHAS=t.filter(function(t){return"HACEP"==t.valor||"HANUL"==t.valor||"HFACT"==t.valor||"HFPAR"==t.valor})}),this.util.listPaises(function(t){y.listPaises=t}),this.util.listMonedas(function(t){y.listMonedaCombo=t}),this.util.listEstadoCP(function(t){y.listEstadoCombo=t}),this.util.listTipoComprobante(function(t){y.listTipoComprobante=t}),this.util.listUnidadMedida(function(t){})},t.prototype.AgregarArticulosGuia=function(t){return I(this,void 0,void 0,function(){var r,a,n,o,e,i,l,c,s,d,u,i,b,p,f,m,g,v;return N(this,function(h){switch(h.label){case 0:if(t.preventDefault(),r=$("#dtBuscarGuia").find(".checkboxGuia:checked"),r.length<=0)return swal({text:"Debe seleccionar una Guía.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];a=function(t){var r,a,o;return N(this,function(e){switch(e.label){case 0:return r=$(t).val(),[4,n._dataGuiaService.obtener(r).toPromise()];case 1:return a=e.sent(),o=y.factura.detallefactura.filter(function(t){return t.IdGuia==r}),null!=o&&a.articulos.length==o.length?(swal({text:"No se puede volver a agregar la Guía #"+$(t).attr("numguia")+".",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,{value:!1}]):[2]}})},n=this,o=0,e=r,h.label=1;case 1:return o<e.length?(i=e[o],[5,a(i)]):[3,4];case 2:if("object"==typeof(l=h.sent()))return[2,l.value];h.label=3;case 3:return o++,[3,1];case 4:c=[],null!=y.factura.detallefactura?c=y.factura.detallefactura.sort(function(t,r){return t.noitem<r.noitem?-1:t.noitem>r.noitem?1:0}):y.factura.detallefactura=[],s=1,c.length>0&&(s=c[c.length-1].noitem+1),d=0,u=r,h.label=5;case 5:return d<u.length?(i=u[d],b=$(i).val(),[4,this._dataGuiaService.obtener(b).toPromise()]):[3,8];case 6:for(p=h.sent(),f=function(t){if(null!=y.factura.detallefactura.find(function(r){return r.IdProdxGuia==t.IdProdxGuia}))return"continue";var r=s++;y.factura.detallefactura.push({noitem:r,IdGuia:p.id,IdOc:p.id,noguia:p.nroguia,nooc:t.nrooc,noitemoc:t.nroitemoc,noparte:t.nroparte,descproducto:t.descproducto,preciounitreferencial:t.preciounitario,cantidad:t.cantidaddespachada,importetotalitem:t.preciototal,IdProdxGuia:t.IdProdxGuia,posicion:r.toString(),CodigoGuiaERP:t.CodigoGuiaERP,EjercicioGuia:t.EjercicioGuia,IdTablaUnidad:t.IdTablaUnidad,IdRegistroUnidad:t.IdRegistroUnidad,unidadmedida:t.unidadmedida})},m=0,g=p.articulos;m<g.length;m++)v=g[m],f(v);h.label=7;case 7:return d++,[3,5];case 8:return setTimeout(function(){C.ajax.reload(),$("#mdlGuias").modal("toggle")},500),[2]}})})},t.prototype.AgregarArticulosHAS=function(t){return I(this,void 0,void 0,function(){var r,a,n,o,e,i,l,c,s,d,u,i,b,p,f,m,g,v;return N(this,function(h){switch(h.label){case 0:if(t.preventDefault(),r=$("#dtBuscarAceptacionServicio").find(".checkboxAceptacionServicio:checked"),r.length<=0)return swal({text:"Debe seleccionar una Aceptación de Servicio",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];a=function(t){var r,a,o;return N(this,function(e){switch(e.label){case 0:return r=$(t).val(),[4,n._dataHASService.obtener(r).toPromise()];case 1:return a=e.sent(),o=y.factura.detallefactura.filter(function(t){return t.IdGuia==r}),null!=o&&a.productos.length==o.length?(swal({text:"No se puede volver a agregar la HAS #"+$(t).attr("numhas")+".",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,{value:!1}]):[2]}})},n=this,o=0,e=r,h.label=1;case 1:return o<e.length?(i=e[o],[5,a(i)]):[3,4];case 2:if("object"==typeof(l=h.sent()))return[2,l.value];h.label=3;case 3:return o++,[3,1];case 4:c=[],null!=y.factura.detallefactura?c=y.factura.detallefactura.sort(function(t,r){return t.noitem<r.noitem?-1:t.noitem>r.noitem?1:0}):y.factura.detallefactura=[],s=1,c.length>0&&(s=c[c.length-1].noitem+1),d=0,u=r,h.label=5;case 5:return d<u.length?(i=u[d],b=$(i).val(),[4,this._dataHASService.obtener(b).toPromise()]):[3,8];case 6:for(p=h.sent(),f=function(t){if(null!=y.factura.detallefactura.find(function(r){return r.IdProdxGuia==t.IdServicioxHAS}))return"continue";var r=s++;y.factura.detallefactura.push({noitem:r,IdGuia:t.IdHAS,IdOc:b,noguia:p.nroconformidadservicio,nooc:t.nroordenservicio,noitemoc:t.nroitemordenservicio,noparte:t.NumeroParte,descproducto:t.descripcion,preciounitreferencial:t.valorrecibido,cantidad:t.cantidad,importetotalitem:t.valorrecibido,IdProdxGuia:t.IdServicioxHAS,posicion:r.toString(),CodigoGuiaERP:p.CodigoHASERP,EjercicioGuia:p.EjercicioHAS,IdTablaUnidad:"10000",IdRegistroUnidad:"0000045",unidadmedida:t.unidad})},m=0,g=p.productos;m<g.length;m++)v=g[m],f(v);h.label=7;case 7:return d++,[3,5];case 8:return setTimeout(function(){w.ajax.reload(),$("#mdlConformidadServicio").modal("toggle")},500),[2]}})})},t.prototype.eliminarArticulos=function(t){t.preventDefault();var r=$("#dtArticulos").find(".checkboxArticulos:checked");if(r.length<=0)return swal({text:"Debe seleccionar un Articulo.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;var a="¿Desea eliminar el artículo seleccionado?";r.length>1&&(a="¿Desea eliminar los artículos seleccionados?"),swal({text:a,type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){for(var t=y.factura.detallefactura,a=0,n=r;a<n.length;a++){var o=n[a];!function(r){var a=$(r).val();t=t.filter(function(t){return t.noitem!=a})}(o)}y.factura.detallefactura=JSON.parse(JSON.stringify(l(t))),setTimeout(function(){C.ajax.reload()},500)},function(t){})},t.prototype.onEsFisicoChange=function(t){this.factura.esfisico=!0,this.factura.eselectronico=!1,$("#nocomprobantepago1").attr("maxlength",3),$("#nocomprobantepago2").attr("maxlength",7)},t.prototype.onEsElectronicolChange=function(t){this.factura.esfisico=!1,this.factura.eselectronico=!0,$("#nocomprobantepago1").attr("maxlength",4),$("#nocomprobantepago2").attr("maxlength",8)},t.prototype.onEsMaterialChange=function(t){this.factura.esguiamaterial=!0,this.factura.eshas=!1},t.prototype.onEsHasChange=function(t){this.factura.esguiamaterial=!1,this.factura.eshas=!0},t.prototype.ngAfterViewInit=function(){var t=this;if(DatatableFunctions.ModalSettings(),"0"!=this.id){var r=!0;"1"===this.esBorrador&&(r=!1),this._dataService.obtener(this.id,"P",r).subscribe(function(r){t.factura=r,t.factura.id_doc=t.id_doc,t.facturaOriginal=JSON.parse(JSON.stringify(r)),"1"!==t.esBorrador&&($("#txtFechaEmision").prop("disabled",!0),$("#txtFechaVencimiento").prop("disabled",!0),$("#txtFechaRecepcion").prop("disabled",!0),$("#txtFechaRegistro").prop("disabled",!0)),setTimeout(function(){$("input").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("select").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("textarea").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),C.ajax.reload(),w.ajax.reload(),E.ajax.reload()},100)},function(t){return console.log(t)},function(){})}setTimeout(function(){"0"==y.id&&$("select[name='tipodocumento']").change()},100),$("#mdlArchivosAdjuntos").on("shown.bs.modal",function(){$("#btnEliminarAA").click()}),E=$("#dtArchivos").on("draw.dt",function(t,r,a){DatatableFunctions.initDatatable(t,r,a,E)}).DataTable({ajax:function(t,r,a){r({data:y.factura.docadjuntos})},columns:[{data:"id"},{data:"nombre"},{data:"descripcion"},{data:"id"}],columnDefs:[{className:"text-center",targets:[1,2,3]},{render:function(t,r,a){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" value="'+a.id+'" name="optionsCheckboxes" class="checkboxArchivos"></label></div></div>'},targets:0,orderable:!1},{render:function(t,r,a){return'<a class="editar" href="javascript:void(0);" row-id="'+a.id+'"><button class="btn btn-simple btn-info btn-icon download" rel="tooltip" title="Bajar Archivo" data-placement="left"><i class="material-icons">get_app</i></button></a><button class="btn btn-simple btn-danger btn-icon remove" rel="tooltip" title="Eliminar" data-placement="left"><i class="material-icons">delete</i></button>'},targets:3}]}),E.on("click",".download",function(t){var r=$(this).closest("tr"),a=r.find("a.editar").attr("row-id"),n=y.factura.docadjuntos;P=n.find(function(t){return t.id==a}),y._dataServiceAdjunto.DescargarArchivo(P).subscribe(function(t){saveAs(t,P.nombre)},function(t){return console.log(t)},function(){}),t.preventDefault()}),E.on("click",".remove",function(t){var r=$(this).closest("tr"),a=r.find("a.editar").attr("row-id");swal({text:"¿Desea eliminar el registro seleccionado?",type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){var t=y.factura.docadjuntos,r=t.filter(function(t){return t.id!=a});y.factura.docadjuntos=JSON.parse(JSON.stringify(r)),setTimeout(function(){E.ajax.reload()},500)},function(t){}),t.preventDefault()}),i(),e(),n(),o(),DatatableFunctions.registerCheckAll(),$("#nocomprobantepago1").blur(function(t){if(console.log(t),null==y.factura.nocomprobantepago1&&(y.factura.nocomprobantepago1=""),""!=y.factura.nocomprobantepago1)if(y.factura.esfisico){var r=/^[0-9]+$/i,a=y.factura.nocomprobantepago1.trim();if(!r.test(a)||"000"==y.factura.nocomprobantepago1.trim()||y.factura.nocomprobantepago1.length<3)return swal({html:'La serie solo puede contener caracteres numéricos, deben ser 3 dígitos y no debe empezar en 000.<br/><br/>\n                    Puedes cambiar el tipo de emisión si lo requieres:<br/>\n                      <div class="radio">\n                        <label> Físico\n                          <input type="radio" id="rbEsFisico" name="optionsCheckboxes" '+(y.factura.esfisico?"checked":"")+' >\n                          </label>\n                        <label> Electrónico\n                          <input type="radio" id="rbEsElectronico" name="optionsCheckboxes" '+(y.factura.eselectronico?"checked":"")+"  >\n                          </label>\n                      </div>\n",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus(),$("#rbEsFisico").prop("checked")&&(y.factura.esfisico=!0,y.factura.eselectronico=!1,$("#nocomprobantepago1").attr("maxlength",3),$("#nocomprobantepago2").attr("maxlength",7)),$("#rbEsElectronico").prop("checked")&&(y.factura.eselectronico=!0,y.factura.esfisico=!1,$("#nocomprobantepago1").attr("maxlength",4),$("#nocomprobantepago2").attr("maxlength",8))}),!1}else if(y.factura.eselectronico){var n=/^[a-z0-9]+$/i,o=/^[a-z]+$/i,e=y.factura.nocomprobantepago1.trim();if(!o.test(e.substring(0,1)))return swal({html:'La serie es alfanumérica de cuatro caracteres empezando con un caracter.<br/><br/>\n                    Puedes cambiar el tipo de emisión si lo requieres:<br/>\n                      <div class="radio">\n                        <label> Físico\n                          <input type="radio" id="rbEsFisico" name="optionsCheckboxes" '+(y.factura.esfisico?"checked":"")+' >\n                          </label>\n                        <label> Electrónico\n                          <input type="radio" id="rbEsElectronico" name="optionsCheckboxes" '+(y.factura.eselectronico?"checked":"")+"  >\n                          </label>\n                      </div>\n",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus(),$("#rbEsFisico").prop("checked")&&(y.factura.esfisico=!0,y.factura.eselectronico=!1,$("#nocomprobantepago1").attr("maxlength",3),$("#nocomprobantepago2").attr("maxlength",7)),$("#rbEsElectronico").prop("checked")&&(y.factura.eselectronico=!0,y.factura.esfisico=!1,$("#nocomprobantepago1").attr("maxlength",4),$("#nocomprobantepago2").attr("maxlength",8))}),!1;if("Ñ"==e.substring(0,1)||"ñ"==e.substring(0,1)||e.length<4)return swal({html:'La serie es alfanumérica de cuatro caracteres empezando con un caracter.<br/><br/>\n                    Puedes cambiar el tipo de emisión si lo requieres:<br/>\n                      <div class="radio">\n                        <label> Físico\n                          <input type="radio" id="rbEsFisico" name="optionsCheckboxes" '+(y.factura.esfisico?"checked":"")+' >\n                          </label>\n                        <label> Electrónico\n                          <input type="radio" id="rbEsElectronico" name="optionsCheckboxes" '+(y.factura.eselectronico?"checked":"")+"  >\n                          </label>\n                      </div>\n",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus(),$("#rbEsFisico").prop("checked")&&(y.factura.esfisico=!0,y.factura.eselectronico=!1,$("#nocomprobantepago1").attr("maxlength",3),$("#nocomprobantepago2").attr("maxlength",7)),$("#rbEsElectronico").prop("checked")&&(y.factura.eselectronico=!0,y.factura.esfisico=!1,$("#nocomprobantepago1").attr("maxlength",4),$("#nocomprobantepago2").attr("maxlength",8))}),!1;if(!n.test(e))return swal({html:'La serie es alfanumérica de cuatro caracteres empezando con un caracter.<br/><br/>\n                    Puedes cambiar el tipo de emisión si lo requieres:<br/>\n                      <div class="radio">\n                        <label> Físico\n                          <input type="radio" id="rbEsFisico" name="optionsCheckboxes" '+(y.factura.esfisico?"checked":"")+' >\n                          </label>\n                        <label> Electrónico\n                          <input type="radio" id="rbEsElectronico" name="optionsCheckboxes" '+(y.factura.eselectronico?"checked":"")+"  >\n                          </label>\n                      </div>\n",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus(),$("#rbEsFisico").prop("checked")&&(y.factura.esfisico=!0,y.factura.eselectronico=!1,$("#nocomprobantepago1").attr("maxlength",3),$("#nocomprobantepago2").attr("maxlength",7)),$("#rbEsElectronico").prop("checked")&&(y.factura.eselectronico=!0,y.factura.esfisico=!1,$("#nocomprobantepago1").attr("maxlength",4),$("#nocomprobantepago2").attr("maxlength",8))}),!1}}),$("#nocomprobantepago2").blur(function(){if(null==y.factura.nocomprobantepago2&&(y.factura.nocomprobantepago2=""),""!=y.factura.nocomprobantepago2)if(y.factura.esfisico){var t=/^[0-9]+$/i,r=y.factura.nocomprobantepago2.trim();if(!t.test(r)||y.factura.nocomprobantepago2.length<7)return swal({html:'El correlativo solo puede contener caracteres numéricos y deben ser 7 dígitos.<br/><br/>\n                    Puedes cambiar el tipo de emisión si lo requieres:<br/>\n                      <div class="radio">\n                        <label> Físico\n                          <input type="radio" id="rbEsFisico" name="optionsCheckboxes" '+(y.factura.esfisico?"checked":"")+' >\n                          </label>\n                        <label> Electrónico\n                          <input type="radio" id="rbEsElectronico" name="optionsCheckboxes" '+(y.factura.eselectronico?"checked":"")+"  >\n                          </label>\n                      </div>\n",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago2").focus(),$("#rbEsFisico").prop("checked")&&(y.factura.esfisico=!0,y.factura.eselectronico=!1,$("#nocomprobantepago1").attr("maxlength",3),$("#nocomprobantepago2").attr("maxlength",7)),$("#rbEsElectronico").prop("checked")&&(y.factura.eselectronico=!0,y.factura.esfisico=!1,$("#nocomprobantepago1").attr("maxlength",4),$("#nocomprobantepago2").attr("maxlength",8))}),!1}else if(y.factura.eselectronico){var a=/^[0-9]+$/i,n=y.factura.nocomprobantepago2.trim();if(!a.test(n))return swal({html:'El correlativo solo puede contener caracteres numéricos y hasta 8 dígitos.<br/><br/>\n                    Puedes cambiar el tipo de emisión si lo requieres:<br/>\n                      <div class="radio">\n                        <label> Físico\n                          <input type="radio" id="rbEsFisico" name="optionsCheckboxes" '+(y.factura.esfisico?"checked":"")+' >\n                          </label>\n                        <label> Electrónico\n                          <input type="radio" id="rbEsElectronico" name="optionsCheckboxes" '+(y.factura.eselectronico?"checked":"")+"  >\n                          </label>\n                      </div>\n",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago2").focus(),$("#rbEsFisico").prop("checked")&&(y.factura.esfisico=!0,y.factura.eselectronico=!1,$("#nocomprobantepago1").attr("maxlength",3),$("#nocomprobantepago2").attr("maxlength",7)),$("#rbEsElectronico").prop("checked")&&(y.factura.eselectronico=!0,y.factura.esfisico=!1,$("#nocomprobantepago1").attr("maxlength",4),$("#nocomprobantepago2").attr("maxlength",8))}),!1}})},t.prototype.validarDocumentos=function(){return 0!=$("#txtArchivo").get(0).files.length||(swal({text:"Un archivo es requerido. Por favor completar y volver a intentar!",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1)},t.prototype.descartarBorrador=function(t){swal({html:"¿Está seguro de descartar el comprobante de pago?",type:"warning",showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){y._dataService.descartarBorrador(y.id).subscribe(function(t){swal({text:"Se descartó el comprobante de pago.",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Aceptar"}).then(function(){var t=["/factura/proveedor/buscar"];y.navigate(t)},function(t){var r=["/factura/proveedor/buscar"];y.navigate(r)})},function(t){return console.log(t)},function(){})},function(t){}),t.preventDefault()},t.prototype.onChangeFile=function(t){var r=t,a=r.target,n=a.files;this.archivo.contenido=n[0]},t.prototype.grabarArchivoAdjunto=function(){if(!this.validarDocumentos())return!1;var t=this.factura.docadjuntos.sort(function(t,r){return t.id<r.id?-1:t.id>r.id?1:0});t.length>0?this.archivo.id=t[t.length-1].id+1:this.archivo.id=1;var r=$("#txtArchivo").val();if(r){var a=r.indexOf("\\")>=0?r.lastIndexOf("\\"):r.lastIndexOf("/"),n=r.substring(a);0!==n.indexOf("\\")&&0!==n.indexOf("/")||(n=n.substring(1)),this.archivo.nombre=n}y._dataServiceAdjunto.AgregarArchivo(this.archivo).subscribe(function(t){y.archivo.url=y._dataServiceAdjunto.ObtenerUrlDescarga(y.archivo),y.factura.docadjuntos.push(JSON.parse(JSON.stringify(y.archivo))),setTimeout(function(){E.ajax.reload()},500),$("#mdlArchivosAdjuntos").modal("toggle")},function(t){return console.log(t)},function(){})},t.prototype.eliminarArchivos=function(t){t.preventDefault();var r=$("#dtArchivos").find(".checkboxArchivos:checked");if(r.length<=0)return swal({text:"Debe seleccionar un Archivo.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;var a="¿Desea eliminar el archivo seleccionado?";r.length>1&&(a="¿Desea eliminar los archivos seleccionados?"),swal({text:a,type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){for(var t=y.factura.docadjuntos,a=0,n=r;a<n.length;a++){var o=n[a];!function(r){var a=$(r).val();t=t.filter(function(t){return t.id!=a})}(o)}y.factura.docadjuntos=JSON.parse(JSON.stringify(l(t))),setTimeout(function(){E.ajax.reload()},500)},function(t){})},t.prototype.ngOnChanges=function(t){},t.prototype.AbrirAgregarGuia=function(t){$("#mdlGuias").modal("show"),S.ajax.reload(),t.preventDefault()},t.prototype.AbrirAgregarAceptacionServicio=function(t){$("#mdlConformidadServicio").modal("show"),F.ajax.reload(),t.preventDefault()},t.prototype.validardatos=function(t,r){if(void 0===r&&(r=!1),null==this.factura.nocomprobantepago1||null==this.factura.nocomprobantepago2||""==this.factura.nocomprobantepago.trim()||"-"==this.factura.nocomprobantepago.trim()||""==this.factura.nocomprobantepago1.trim()||""==this.factura.nocomprobantepago2.trim())return swal({text:"Nro. Comprobante de Pago es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(this.factura.esfisico){var a=/^[0-9]+$/i,n=this.factura.nocomprobantepago1.trim();if(!a.test(n)||"000"==this.factura.nocomprobantepago1.trim()||this.factura.nocomprobantepago1.length<3)return swal({text:"La serie solo puede contener caracteres numéricos, deben ser 3 dígitos y no debe empezar en 000.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus()}),!1;var o=/^[0-9]+$/i,e=this.factura.nocomprobantepago2.trim();if(!o.test(e)||this.factura.nocomprobantepago2.length<7)return swal({text:"El correlativo solo puede contener caracteres numéricos y deben ser 7 dígitos.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago2").focus()}),!1}else if(this.factura.eselectronico){var i=/^[a-z0-9]+$/i,o=/^[0-9]+$/i,l=/^[a-z]+$/i,c=this.factura.nocomprobantepago1.trim();if(!l.test(c.substring(0,1)))return swal({html:"La serie es alfanumérica de cuatro caracteres empezando con un caracter.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus()}),!1;if("Ñ"==c.substring(0,1)||"ñ"==c.substring(0,1)||c.length<4)return swal({html:"La serie es alfanumérica de cuatro caracteres empezando con un caracter.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus()}),!1;if(!i.test(c))return swal({html:"La serie es alfanumérica de cuatro caracteres empezando con un caracter.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus()}),!1;var s=/^[a-z0-9]+$/i,e=this.factura.nocomprobantepago2.trim();if(!s.test(e)||this.factura.nocomprobantepago2.length<8)return swal({html:"El correlativo solo puede contener caracteres numéricos y hasta 8 dígitos.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago2").focus()}),!1}return null==this.factura.razonsocialcliente||""==this.factura.razonsocialcliente.trim()?(swal({text:"Organización Compradora es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1):null==this.factura.ruccliente||""==this.factura.ruccliente.trim()?(swal({text:"RUC Organización Compradora es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1):null==this.factura.tipodocumento||""==this.factura.tipodocumento.trim()?(swal({text:"Tipo Documento es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1):null==this.factura.tipodocumento||""==this.factura.tipodocumento.trim()?(swal({text:"Tipo Documento es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1):null==this.factura.impuesto1?(swal({text:"Impuesto 1 es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1):null==this.factura.importetotal?(swal({text:"Importe Total es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1):null==this.factura.moneda?(swal({text:"Moneda es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1):null!=this.factura.detallefactura&&0!=this.factura.detallefactura.length||(swal({text:"Al menos un ítem es requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1)},t.prototype.enviarFactura=function(t){this.factura.nocomprobantepago=this.factura.nocomprobantepago1+"-"+this.factura.nocomprobantepago2,this.factura.estado="Q",this.validardatos(t,!0)&&this._dataService.agregar(this.factura).subscribe(function(t){console.log("enviarFactura",t),swal({text:"La información ha sido enviada. Confirme el correcto registro de la misma verificando el Documento ERP en la columna correspondiente. Espere dicho número para la impresión de su constancia.",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"});var r=["/factura/proveedor/buscar"];y.navigate(r)},function(t){return console.log(t)},function(){})},t.prototype.guardarFactura=function(t){this.factura.nocomprobantepago=this.factura.nocomprobantepago1+"-"+this.factura.nocomprobantepago2,this.factura.estado="Q",this.validardatos(t,!1)&&this._dataService.guardar(this.factura).subscribe(function(t){console.log("guardarFactura",t),swal({text:"La información ha sido guardada. Confirme el correcto registro de la misma verificando el No. Doc. de Pago en la columna correspondiente.",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"});var r=["/factura/proveedor/buscar"];y.navigate(r)},function(t){return console.log(t)},function(){})},t.prototype.registrarFactura=function(t){return null==this.factura.razonsocialcliente||""==this.factura.razonsocialcliente.trim()?(swal({text:"Organización Compradora es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1):null==this.factura.ruccliente||""==this.factura.ruccliente.trim()?(swal({text:"RUC Organización Compradora es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1):($("#secCabecera").hide(),$("#secFactura").show(),void(this.step=2))},t.prototype.habilitarEdicion=function(t){this.toggleButton=!1,$("#btnAgregarItemOC").removeClass("disabled"),$("#btnEliminarItemOC").removeClass("disabled")},t.prototype.validarfiltrosCliente=function(){return y.filtroCliente.razonsocial=y.filtroCliente.razonsocial.trim(),y.filtroCliente.ruc=y.filtroCliente.ruc.trim(),!0},t.prototype.buscarClienteDT=function(t){this.validarfiltrosCliente()&&D.ajax.reload()},t.prototype.SeleccionarCliente=function(){event.preventDefault();var t=$("#dtBuscarCliente").find(".checkboxCliente:checked");if(t.length<=0)return swal({text:"Debe seleccionar una Organización Compradora.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;for(var r=0,a=t;r<a.length;r++){var n=a[r],o=$(n).val();if(o==localStorage.getItem("org_id"))return void swal({text:"La Organización Compradora no puede ser la misma que está realizando el pre-registro.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"});this.factura.razonsocialcliente=$(n).attr("razonsocial"),this.factura.ruccliente=$(n).attr("ruc"),this.factura.IdOrgCliente=o}setTimeout(function(){D.ajax.reload(),$("#mdlBuscarCliente").modal("toggle"),$("input").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")})},500)},t.prototype.print=function(t){this.factura.tipodocumento_text=$("#tipodocumento option:selected").text(),this.factura.estado_text=$("#estado option:selected").text(),this.factura.moneda_text=$("#moneda option:selected").text(),setTimeout(function(){$("div#print-section").printArea({popTitle:"Comprobante de Pago",mode:"iframe",popClose:!1})},200)},t.prototype.validarfiltrosGuia=function(){return!0},t.prototype.buscarGuiaDT=function(){this.validarfiltrosGuia()&&S.ajax.reload(),event.preventDefault()},t.prototype.buscarCliente=function(t){this.filtroCliente.razonsocial="",this.filtroCliente.ruc="",null!=D?this.buscarClienteDT(t):n()},t.prototype.DatatableConfig=function(){C=$("#dtArticulos").DataTable({ajax:function(t,r,a){r({data:y.factura.detallefactura})},createdRow:function(t,r,a){"10"===r.posicion||"20"===r.posicion?$(t).addClass("highlight"):$("td",t).eq(0).addClass("text-center")},columns:[{data:"noitem"},{data:"noitem"},{data:"noguia"},{data:"nooc"},{data:"noitemoc"},{data:"noparte"},{data:"descproducto"},{data:"preciounitreferencial"},{data:"cantidad"},{data:"importetotalitem"}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5,6,7,8,9]},{render:function(t,r,a){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" name="optionsCheckboxes" value="'+a.noitem+'" class="checkboxArticulos"></label></div></div>'},targets:0}]}),w=$("#dtArticulosHAS").DataTable({ajax:function(t,r,a){r({data:y.factura.detallefactura})},createdRow:function(t,r,a){"10"===r.posicion||"20"===r.posicion?$(t).addClass("highlight"):$("td",t).eq(0).addClass("text-center")},columns:[{data:"noitem"},{data:"noitem"},{data:"noguia"},{data:"nooc"},{data:"noitemoc"},{data:"noparte"},{data:"descproducto"},{data:"preciounitreferencial"},{data:"cantidad"},{data:"importetotalitem"}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5,6,7,8,9]},{render:function(t,r,a){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" name="optionsCheckboxes" value="'+a.noitem+'" class="checkboxArticulos"></label></div></div>'},targets:0}]})},t}();R=O([a.i(s.Component)({selector:"facturaproveedorformulario-cmp",template:a("./src/app/factura/proveedor/formulario/facturaproveedorformulario.component.html"),providers:[f.a,p.a,m.a,g.a]}),A("design:paramtypes",["function"==typeof(k=void 0!==c.b&&c.b)&&k||Object,"function"==typeof(M=void 0!==c.c&&c.c)&&M||Object,"function"==typeof(B=void 0!==p.a&&p.a)&&B||Object,"function"==typeof(T=void 0!==f.a&&f.a)&&T||Object,"function"==typeof(_=void 0!==m.a&&m.a)&&_||Object,"function"==typeof(j=void 0!==g.a&&g.a)&&j||Object,"function"==typeof(z=void 0!==v.a&&v.a)&&z||Object])],R);var k,M,B,T,_,j,z},"./src/app/model/factura.ts":function(t,r,a){"use strict";a.d(r,"a",function(){return n}),a.d(r,"b",function(){return o});var n=function(){function t(){this.fechaemision=new Date,this.fechavencimiento=new Date,this.fecharecepcion=new Date,this.fecharegistro=new Date,this.docadjuntos=[],this.detallefactura=[],this.eshas=!1,this.esguiamaterial=!0,this.esfisico=!0}return t}(),o=function(){function t(){}return t}();(function(){function t(){}})(),function(){function t(){}}(),function(){function t(){}}(),function(){function t(){}}()},"./src/app/model/facturams.ts":function(t,r,a){"use strict";a.d(r,"a",function(){return n}),a.d(r,"b",function(){return o}),a.d(r,"c",function(){return e}),a.d(r,"d",function(){return i});var n=function(){function t(){}return t}(),o=function(){function t(){}return t}(),e=function(){function t(){}return t}(),i=function(){function t(){}return t}();!function(){function t(){}}()},"./src/app/service/facturaservice.ts":function(t,r,a){"use strict";var n=a("./node_modules/@angular/core/@angular/core.es5.js"),o=a("./node_modules/@angular/http/@angular/http.es5.js"),e=a("./node_modules/rxjs/add/operator/map.js"),i=(a.n(e),a("./node_modules/rxjs/Observable.js")),l=(a.n(i),a("./node_modules/rxjs/add/operator/catch.js")),c=(a.n(l),a("./node_modules/rxjs/add/observable/throw.js")),s=(a.n(c),a("./src/app/model/factura.ts")),d=a("./src/app/model/facturams.ts"),u=a("./src/app/utils/app.constants.ts");a.d(r,"a",function(){return f});var b=this&&this.__decorate||function(t,r,a,n){var o,e=arguments.length,i=e<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,a,n);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(i=(e<3?o(i):e>3?o(r,a,i):o(r,a))||i);return e>3&&i&&Object.defineProperty(r,a,i),i},p=this&&this.__metadata||function(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)},f=function(){function t(t){this.http=t}return t.prototype.convertStringToDate=function(t){return new Date(t)},t.prototype.descartarBorrador=function(t){var r=this.getHeaders("P"),a={id_doc:t},n=new o.d({headers:r,body:a});return this.http.delete(u.g,n).catch(this.handleError)},t.prototype.guardar=function(t){var r=this.getHeaders("P");r.append("org_id",localStorage.getItem("org_id"));var a=JSON.parse(localStorage.getItem("usuarioActual")),n=JSON.parse(localStorage.getItem("listMonedas")),e=JSON.parse(localStorage.getItem("listTipoComprobante")),i=JSON.parse(localStorage.getItem("listUnidadMedida")),l=n.find(function(r){return r.vc_DESC_CORTA==t.moneda}),c=e.find(function(r){return r.vc_DESC_CORTA==t.tipodocumento}),s=new d.a;s.FACUPLOADMQ=new d.b,s.factura=t,s.recurso="factura",s.id_doc=t.id_doc,s.vc_numeroseguimiento=t.nocomprobantepago,s.session_id=localStorage.getItem("access_token"),s.FACUPLOADMQ.IdUsrProveedor=a.id,s.FACUPLOADMQ.IdOrgProveedor=a.org_id,s.FACUPLOADMQ.RucProveedor=t.rucproveedor,s.FACUPLOADMQ.RazonSocialProveedor=t.razonsocialproveedor,s.FACUPLOADMQ.DireccionProveedor="",s.FACUPLOADMQ.Factura=[];var b=new d.c;if(b.NumeroFactura=t.nocomprobantepago,b.NumeroGuia="",b.NumeroOC="",b.IdOrgCliente=t.IdOrgCliente.toString(),b.RucCliente=t.ruccliente,b.RazonSocialCliente=t.razonsocialcliente,b.FechaRegistro=DatatableFunctions.FormatDatetimeForMicroServiceProducer(DatatableFunctions.ConvertStringToDatetime(t.fecharegistro)),b.FechaEnvio=DatatableFunctions.FormatDatetimeForMicroServiceProducer(new Date),b.FechaEmision=DatatableFunctions.FormatDatetimeForMicroServiceProducer(DatatableFunctions.ConvertStringToDatetime(t.fechaemision)),b.PlazoPago=" ",b.PeriodoPlazoPago=" ",b.CondicionPago=null==t.condicionpago?"":t.condicionpago,b.SubTotal=null!=t.subtotal?t.subtotal.toString():"0",b.Impuesto1=null!=t.impuesto1?t.impuesto1.toString():"0",b.Impuesto2=null!=t.impuesto2?t.impuesto2.toString():"0",b.Impuesto3=null!=t.impuesto3?t.impuesto3.toString():"0",b.ImpuestoReferencial=null!=t.importereferencial?t.importereferencial.toString():"0",b.ImpuestoGVR="",b.Total=null!=t.subtotal?t.subtotal.toString():"0",b.Observaciones=null==t.observaciones?"":t.observaciones,b.FechaVencimiento=DatatableFunctions.FormatDatetimeForMicroServiceProducer(DatatableFunctions.ConvertStringToDatetime(t.fechavencimiento)),b.FechaRecepcion=DatatableFunctions.FormatDatetimeForMicroServiceProducer(DatatableFunctions.ConvertStringToDatetime(t.fecharecepcion)),b.FechaPago=" ",b.FechaProgramadaPago=" ",b.FormaPago=t.formapago,b.DocumentoPago="",b.DocumentoERP="",b.PagoTipoDocumento="",b.PagoNroDocumento="",b.PagoMoneda=null==l?"":l.vc_DESC_CORTA,b.PagoMontoPagado="",b.PagoBanco="",b.DctoTipoDocumento="",b.DctoNroDocumento="",b.DctoMoneda=null==l?"":l.vc_DESC_CORTA,b.DctoMonto=t.dsctomonto,b.Almacen="",b.IdCierres="",b.Status="3909",b.IdTablaEstado="10005",b.IdRegistroEstadoProv="0000052",b.IdRegistroEstadoComp="0000053",b.ISOEstadoProv="B",b.ISOEstadoComp="Q",b.Estado="Activa",b.EstadoComprador="Publicada",b.CodigoERPProveedor="",b.CodigoSociedad="",b.IndicadorDetraccion="",b.CodigoBien="",b.DescripcionBien="",b.PorcentajeDetraccion="",b.IdCondicionPago="",b.DescripcionCondicionPago="",b.IndImpuesto="",b.TipoRegistro="",b.CodigoErp="",b.NumeroNota="",b.TipoNota="",b.Motivo="",b.Actividad="",b.PorcentajeImpuestoRetenido="0",b.IdTablaMoneda="10001",b.IdRegistroMoneda=null==l?"":l.vc_IDREGISTRO,b.IdTablaTipoComprobante="10007",b.IdRegistroTipoComprobante=null==c?"":c.vc_IDREGISTRO,b.IdTablaTipoEmision="10016",b.IdRegistroTipoEmision=t.esfisico?"01":"02",b.TipoFactura=t.esguiamaterial?"M":"S",b.ItemFactura=[],null!=t.detallefactura)for(var p=0,f=t.detallefactura;p<f.length;p++){var m=f[p];!function(t){var r=new d.d,a=i.find(function(r){return r.vc_ISO==t.unidadmedida});r.NumGuiaItem=t.noguia,r.NumeroItemOC=t.nooc,r.IdGuia=t.IdGuia,r.IdProdxGuia=t.IdProdxGuia,r.NumeroParte=t.noparte,r.DescripcionItem=t.descproducto,r.CantidadItem=t.cantidad;var n=null==t.preciounitreferencial?0:Number(t.preciounitreferencial);r.PrecioUnitario=n.toString(),r.PrecioTotal=Number(t.cantidad)*n+"",r.NumeroGuiaItem=t.noitem.toString(),r.NumeroOcItem=t.noitemoc,r.Posicion=t.posicion,r.CodigoGuiaERP=t.CodigoGuiaERP,r.EjercicioGuia=t.EjercicioGuia,r.IdTablaUnidad="10000",r.IdRegistroUnidad=null==a?"":a.vc_IDREGISTRO,r.DocumentoMaterial=[],b.ItemFactura.push(r)}(m)}s.FACUPLOADMQ.Factura.push(b),console.clear(),console.log(JSON.stringify(s));var g=new o.d({headers:r});return this.http.post(u.h,s,g).catch(this.handleError)},t.prototype.agregar=function(t){var r=this.getHeaders("P");r.append("org_id",localStorage.getItem("org_id"));var a=JSON.parse(localStorage.getItem("usuarioActual")),n=JSON.parse(localStorage.getItem("listMonedas")),e=JSON.parse(localStorage.getItem("listTipoComprobante")),i=JSON.parse(localStorage.getItem("listUnidadMedida")),l=n.find(function(r){return r.vc_DESC_CORTA==t.moneda}),c=e.find(function(r){return r.vc_DESC_CORTA==t.tipodocumento}),s=new d.a;s.FACUPLOADMQ=new d.b,s.FACUPLOADMQ.IdUsrProveedor=a.id,s.FACUPLOADMQ.IdOrgProveedor=a.org_id,s.FACUPLOADMQ.RucProveedor=t.rucproveedor,s.FACUPLOADMQ.RazonSocialProveedor=t.razonsocialproveedor,s.FACUPLOADMQ.DireccionProveedor="",s.FACUPLOADMQ.Factura=[];var b=new d.c;if(b.NumeroFactura=t.nocomprobantepago,b.NumeroGuia="",b.NumeroOC="",b.IdOrgCliente=t.IdOrgCliente.toString(),b.RucCliente=t.ruccliente,b.RazonSocialCliente=t.razonsocialcliente,b.FechaRegistro=DatatableFunctions.FormatDatetimeForMicroServiceProducer(DatatableFunctions.ConvertStringToDatetime(t.fecharegistro)),b.FechaEnvio=DatatableFunctions.FormatDatetimeForMicroServiceProducer(new Date),b.FechaEmision=DatatableFunctions.FormatDatetimeForMicroServiceProducer(DatatableFunctions.ConvertStringToDatetime(t.fechaemision)),b.PlazoPago=" ",b.PeriodoPlazoPago=" ",b.CondicionPago=null==t.condicionpago?"":t.condicionpago,b.SubTotal=null!=t.subtotal?t.subtotal.toString():"0",b.Impuesto1=null!=t.impuesto1?t.impuesto1.toString():"0",b.Impuesto2=null!=t.impuesto2?t.impuesto2.toString():"0",b.Impuesto3=null!=t.impuesto3?t.impuesto3.toString():"0",b.ImpuestoReferencial=null!=t.importereferencial?t.importereferencial.toString():"0",b.ImpuestoGVR="",b.Total=null!=t.subtotal?t.subtotal.toString():"0",b.Observaciones=null==t.observaciones?"":t.observaciones,b.FechaVencimiento=DatatableFunctions.FormatDatetimeForMicroServiceProducer(DatatableFunctions.ConvertStringToDatetime(t.fechavencimiento)),b.FechaRecepcion=DatatableFunctions.FormatDatetimeForMicroServiceProducer(DatatableFunctions.ConvertStringToDatetime(t.fecharecepcion)),b.FechaPago=" ",b.FechaProgramadaPago=" ",b.FormaPago=t.formapago,b.DocumentoPago="",b.DocumentoERP="",b.PagoTipoDocumento="",b.PagoNroDocumento="",b.PagoMoneda=null==l?"":l.vc_DESC_CORTA,b.PagoMontoPagado="",b.PagoBanco="",b.DctoTipoDocumento="",b.DctoNroDocumento="",b.DctoMoneda=null==l?"":l.vc_DESC_CORTA,b.DctoMonto=t.dsctomonto,b.Almacen="",b.IdCierres="",b.Status="3909",b.IdTablaEstado="10005",b.IdRegistroEstadoProv="0000052",b.IdRegistroEstadoComp="0000053",b.ISOEstadoProv="B",b.ISOEstadoComp="Q",b.Estado="Activa",b.EstadoComprador="Publicada",b.CodigoERPProveedor="",b.CodigoSociedad="",b.IndicadorDetraccion="",b.CodigoBien="",b.DescripcionBien="",b.PorcentajeDetraccion="",b.IdCondicionPago="",b.DescripcionCondicionPago="",b.IndImpuesto="",b.TipoRegistro="",b.CodigoErp="",b.NumeroNota="",b.TipoNota="",b.Motivo="",b.Actividad="",b.PorcentajeImpuestoRetenido="0",b.IdTablaMoneda="10001",b.IdRegistroMoneda=null==l?"":l.vc_IDREGISTRO,b.IdTablaTipoComprobante="10007",b.IdRegistroTipoComprobante=null==c?"":c.vc_IDREGISTRO,b.IdTablaTipoEmision="10016",b.IdRegistroTipoEmision=t.esfisico?"01":"02",b.TipoFactura=t.esguiamaterial?"M":"S",b.ItemFactura=[],null!=t.detallefactura)for(var p=0,f=t.detallefactura;p<f.length;p++){var m=f[p];!function(t){var r=new d.d,a=void 0;a="M"==b.TipoFactura?i.find(function(r){return r.vc_ISO==t.unidadmedida}):i.find(function(r){return r.vc_EQUIVALENCIA==t.unidadmedida}),r.NumGuiaItem=t.noguia,r.NumeroItemOC=t.nooc,r.IdGuia=t.IdGuia,r.IdProdxGuia=t.IdProdxGuia,r.NumeroParte=t.noparte,r.DescripcionItem=t.descproducto,r.CantidadItem=t.cantidad;var n=null==t.preciounitreferencial?0:Number.parseFloat(t.preciounitreferencial.replace(/,/g,""));r.PrecioUnitario=n.toString(),r.PrecioTotal=Number(t.cantidad)*n+"",r.NumeroGuiaItem=t.noitem.toString(),r.NumeroOcItem=t.noitemoc,r.Posicion=t.posicion,r.CodigoGuiaERP=t.CodigoGuiaERP,r.EjercicioGuia=t.EjercicioGuia,r.IdTablaUnidad="10000",r.IdRegistroUnidad=null==a?"":a.vc_IDREGISTRO,r.DocumentoMaterial=[],b.ItemFactura.push(r)}(m)}s.FACUPLOADMQ.Factura.push(b),console.clear(),console.log(JSON.stringify(s));var g=new o.d({headers:r});return this.http.post(u.i,s,g).catch(this.handleError)},t.prototype.obtener=function(t,r,a){void 0===a&&(a=!0);var n=u.j;return a&&(n=u.k),this.http.get(n+t,{headers:this.getHeaders(r)}).map(this.mapComprobantePago).catch(this.handleError)},t.prototype.mapComprobantePago=function(t){var r=(t&&t.status,t&&t.statusText,t&&t.json(),t.json());if(r.factura)return r.factura;var a=new s.a,n=r.data.NumeroFactura,o=[];n&&(o=n.split("-")),a.nocomprobantepago=r.data.NumeroFactura,a.nocomprobantepago1=o.length>0?o[0]:"",a.nocomprobantepago2=o.length>1?o[1]:"",a.id=r.data.IdComprobante,a.ruccliente=r.data.RucCliente,a.razonsocialcliente=r.data.RazonSocialCliente,a.rucproveedor=r.data.RucProveedor,a.razonsocialproveedor=r.data.RazonSocialProveedor,a.esfisico="F"==r.data.TipoEmision,a.eselectronico="E"==r.data.TipoEmision,a.fechaemision=DatatableFunctions.ConvertStringToDatetime2(r.data.FechaEmision),a.tipodocumento=r.data.TipoComprobante,a.moneda=r.data.Moneda,a.subtotal=DatatableFunctions.FormatNumber(r.data.SubTotal,2),a.igv=DatatableFunctions.FormatNumber(r.data.Impuesto1,2),a.dsctomonto=DatatableFunctions.FormatNumber(r.data.DctoMonto,2),a.impuesto1=DatatableFunctions.FormatNumber(r.data.Impuesto1,2),a.impuesto2=DatatableFunctions.FormatNumber(r.data.Impuesto2,2),a.impuesto3=DatatableFunctions.FormatNumber(r.data.Impuesto3,2),a.importetotal=DatatableFunctions.FormatNumber(r.data.ImporteTotal,2),a.total=DatatableFunctions.FormatNumber(r.data.ImporteTotal,2),a.importereferencial=r.data.ImporteReferencial,a.observaciones=r.data.Observaciones,a.documentoerp=r.data.DocumentoErp,a.guiasdespacho=r.data.GuiasDespacho,a.ordencompraserviciocontrato=r.data.OrdenesCompra,a.fechavencimiento=DatatableFunctions.ConvertStringToDatetime2(r.data.FechaVencimiento),a.fecharecepcion=DatatableFunctions.ConvertStringToDatetime2(r.data.FechaRecepcion),a.fecharegistro=DatatableFunctions.ConvertStringToDatetime2(r.data.FechaRegistro),a.formapago=r.data.FormaPago,a.bienserviciodetraccion=r.data.CodigoBien,a.estado=r.data.EstadoProveedor,a.estadocomprador=r.data.EstadoComprador,a.condicionpago=r.data.CondicionPago,a.tipopago=r.data.PagoTipoDocumento,a.nrodocumento=r.data.PagoNroDocumento,a.banco=r.data.PagoBanco,a.fechapago=DatatableFunctions.ConvertStringToDatetime2(r.data.FechaPago),a.monto=DatatableFunctions.FormatNumber(r.data.PagoMontoPagado,2),a.datospagomoneda=r.data.PagoMoneda,a.nrocheque=r.data.NroCheque,a.tipodescuento=r.data.DctoTipoDocumento,a.nrocomprobante=r.data.DctoNroDocumento,a.dsctomonto=DatatableFunctions.FormatNumber(r.data.DctoMonto,2),a.dsctomoneda=r.data.DctoMoneda,a.obscomprobantepago=DatatableFunctions.ReplaceToken(r.data.ObservacionesPago),a.detallefactura=[];for(var e=1,i=0,l=r.data.Productos;i<l.length;i++){var c=l[i],d=new s.b;d.IdGuia=c.IdGuia,d.IdOc=c.IdOc,d.noitem=e,d.noguia=c.NumGuiaItem,d.nooc=c.NumeroItemOC,d.noitemoc=c.NumeroOcItem,d.noparte=c.NumeroParte?c.NumeroParte:"",d.descproducto=c.DescripcionItem?c.DescripcionItem:"",d.preciounitreferencial=DatatableFunctions.FormatNumber(c.PrecioUnitario),d.cantidad=DatatableFunctions.FormatNumber(c.CantidadItem),d.importetotalitem=DatatableFunctions.FormatNumber(c.PrecioTotal),a.detallefactura.push(d),e++}if(a.docadjuntos=[],r.data.Adjunto)for(var u=1,b=0,p=r.data.Adjunto;b<p.length;b++){var f=p[b];a.docadjuntos.push({id:u++,codigo:f.Id?f.IdArchivo:"",nombre:f.Nombre?f.Nombre:"",descripcion:f.Descripcion?f.Descripcion:"",url:f.Url?f.Url:""})}return console.log(JSON.stringify(a)),a},t.prototype.extractData=function(t){return{status:t?t.status:-1,statusText:t?t.statusText:"ERROR",data:t?t.json()||{}:{}}},t.prototype.handleError=function(t){return console.error("handleError",t.message||t),i.Observable.throw(t.message||t)},t.prototype.getHeaders=function(t){var r=new o.b;return r.append("Content-Type","application/json"),r.append("Accept","application/json"),r.append("origen_datos","PEB2M"),""!=t&&r.append("tipo_empresa",t),r.append("Authorization","Bearer "+localStorage.getItem("access_token")),r.append("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key")),r},t}();f=b([a.i(n.Injectable)(),p("design:paramtypes",["function"==typeof(m=void 0!==o.c&&o.c)&&m||Object])],f);var m}});